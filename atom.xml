<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ITBOB&#39;S BLOG</title>
  
  <subtitle>ä¸€å…¥ IT æ·±ä¼¼æµ· ä»æ­¤å­¦ä¹ æ— ç»æœŸ</subtitle>
  <link href="https://www.itbob.cn/atom.xml" rel="self"/>
  
  <link href="https://www.itbob.cn/"/>
  <updated>2022-05-22T12:49:00.000Z</updated>
  <id>https://www.itbob.cn/</id>
  
  <author>
    <name>BOB</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€JS é€†å‘ã€‘AST è„±æ··æ·†å®æˆ˜ï¼ŒæŸ ICP å¤‡æ¡ˆå·æŸ¥è¯¢æ¥å£ jsjiami v6 åˆ†æ</title>
    <link href="https://www.itbob.cn/article/052/"/>
    <id>https://www.itbob.cn/article/052/</id>
    <published>2022-05-25T06:01:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p><strong>æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œè‹¥æœ‰ä¾µæƒï¼Œè¯·åœ¨å…¬ä¼—å·è”ç³»æˆ‘ç«‹å³åˆ é™¤ï¼</strong></p><h2 id="é€†å‘ç›®æ ‡"><a href="#é€†å‘ç›®æ ‡" class="headerlink" title="é€†å‘ç›®æ ‡"></a>é€†å‘ç›®æ ‡</h2><ul><li>ç›®æ ‡ï¼šç«™ Z ä¹‹å®¶ç½‘ç«™ ICP å¤‡æ¡ˆå·æŸ¥è¯¢</li><li>ä¸»é¡µï¼š<code>aHR0cDovL2ljcC5jaGluYXouY29tLw==</code></li><li>æ¥å£ï¼š<code>aHR0cDovL2ljcC5jaGluYXouY29tL2hvbWUvR2V0UGVyaW1pdEJ5SG9zdA==</code></li><li>é€†å‘å‚æ•°ï¼š<code>hostToken</code>ã€<code>permitToken</code></li></ul><p>æœ¬æ¬¡ä¸»è¦æ˜¯ AST è§£æ··æ·†å®æˆ˜ï¼Œæœ¬ä¾‹ä¸­çš„ JS æ··æ·†æ–¹å¼æ˜¯ sojson æ——ä¸‹çš„ jsjiami v6 ç‰ˆæœ¬ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»å®˜ç½‘ä½“éªŒä¸€ä¸‹ï¼š<a href="https://www.jsjiami.com/">https://www.jsjiami.com/</a> ï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£ ASTï¼Œå¯ä»¥å…ˆçœ‹çœ‹ä¸ŠæœŸçš„æ–‡ç« ï¼ˆéå¸¸è¯¦ç»†ï¼‰ï¼š<a href="https://www.itbob.cn/article/051/">ã€Šé€†å‘è¿›é˜¶ï¼Œåˆ©ç”¨ AST æŠ€æœ¯è¿˜åŸ JavaScript æ··æ·†ä»£ç ã€‹</a>ï¼Œæœ¬æ–‡éƒ¨åˆ† AST è¿˜åŸä»£ç ç›´æ¥ä½¿ç”¨äº†ä¸ŠæœŸæ–‡ç« ä¸­çš„ä»£ç ï¼Œæ‰€ä»¥ç»†èŠ‚æ–¹é¢ä¸å†èµ˜è¿°ï¼Œæœ‰ç–‘é—®çš„åœ°æ–¹å¯ä»¥å‚è€ƒå‚è€ƒä¸ŠæœŸæ–‡ç« ã€‚</p><h2 id="ç¬¬ä¸‰æ–¹å·¥å…·"><a href="#ç¬¬ä¸‰æ–¹å·¥å…·" class="headerlink" title="ç¬¬ä¸‰æ–¹å·¥å…·"></a>ç¬¬ä¸‰æ–¹å·¥å…·</h2><p>é€†å‘é¢†åŸŸå¤§ä½¬äº‘é›†ï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰å¾ˆå¤šå¤§ä½¬å†™å¥½çš„è§£æ··æ·†å·¥å…·äº†ï¼Œé™¤äº†æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å»å†™ AST è§£æä»£ç ä»¥å¤–ï¼Œæœ‰æ—¶å€™ç›´æ¥ä½¿ç”¨å·¥å…·ä¼šæ›´åŠ æ–¹ä¾¿ï¼Œå½“ç„¶å¹¶æ²¡æœ‰åå…¨åç¾çš„å·¥å…·ï¼Œä¸è¿‡å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½èƒ½æˆåŠŸè§£æ··æ·†çš„ï¼Œä»¥ä¸‹å·¥å…·å€¼å¾—å»ä½“éªŒä¸€ä¸‹ï¼š</p><ul><li>è”¡è€æ¿ä¸€é”®è¿˜åŸ OB æ··æ·†ï¼š<a href="https://github.com/Tsaiboss/decodeObfuscator">https://github.com/Tsaiboss/decodeObfuscator</a></li><li>å“²å“¥ AST æ··æ·†è¿˜åŸæ¡†æ¶ï¼š<a href="https://github.com/sml2h3/ast_tools">https://github.com/sml2h3/ast_tools</a></li><li>V ç¥ Chrome æ’ä»¶ï¼Œå†…ç½® AST æ··æ·†è¿˜åŸï¼š<a href="https://github.com/cilame/v_jstools">https://github.com/cilame/v_jstools</a></li><li>jsjiami v6 ä¸“ç”¨è§£å¯†å·¥å…·ï¼š<a href="https://github.com/NXY666/JsjiamiV6-Decryptor">https://github.com/NXY666/JsjiamiV6-Decryptor</a></li></ul><h2 id="æŠ“åŒ…åˆ†æ"><a href="#æŠ“åŒ…åˆ†æ" class="headerlink" title="æŠ“åŒ…åˆ†æ"></a>æŠ“åŒ…åˆ†æ</h2><p>è¿›å…¥ä¸»é¢˜ï¼Œé¦–å…ˆæŠ“åŒ…çœ‹çœ‹ï¼Œæ¥åˆ° ICP å¤‡æ¡ˆæŸ¥è¯¢é¡µé¢ï¼ŒæŸ¥è¯¢ç»“æœä¸­ï¼Œå…¶ä»–ä¿¡æ¯éƒ½å¯ä»¥ç›´æ¥åœ¨ç›¸åº”çš„ html æºç ä¸­æ‰¾åˆ°ï¼Œåªæœ‰è¿™ä¸ªå¤‡æ¡ˆå·æ˜¯é€šè¿‡æ¥å£ä¼ è¿‡æ¥çš„ï¼Œå¯¹åº”çš„è¯·æ±‚å’Œç›¸å…³åŠ å¯†å‚æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/0f138564edc0bd1105d47f5cdfbfade8.png" alt="01"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/410785d65040014c5e2ef0790cd61d5c.png" alt="02"></p><h2 id="åŠ å¯†å®šä½"><a href="#åŠ å¯†å®šä½" class="headerlink" title="åŠ å¯†å®šä½"></a>åŠ å¯†å®šä½</h2><p>ç›´æ¥æœç´¢å…³é”®å­— <code>hostToken</code> æˆ–è€… <code>permitToken</code> å³å¯å®šä½ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/ce5187bac33cd5f5a818cfc2a6a720fb.png" alt="03"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/049d86ab89afba4d32cb21ac9a2fb599.png" alt="04"></p><p>å…³é”®ä»£ç ï¼š</p><pre><code class="javascript">&#39;data&#39;: &#123;    &#39;kw&#39;: kw,    &#39;hostToken&#39;: _0x791532[&#39;IIPmq&#39;](generateHostKey, kw),    &#39;permitToken&#39;: _0x791532[_0x404f(&#39;â€«1df&#39;, &#39;7Gn4&#39;)](generateWordKey, kw)&#125;</code></pre><p>è¿™é‡Œçš„æ··æ·†å¯ä»¥æ‰‹åŠ¨è·Ÿä¸€ä¸‹ï¼Œè¿˜åŸåå¦‚ä¸‹ï¼š</p><pre><code class="javascript">&#39;data&#39;: &#123;    &#39;kw&#39;: kw,    &#39;hostToken&#39;: generateHostKey(kw),    &#39;permitToken&#39;: generateWordKey(kw)&#125;</code></pre><p><code>kw</code> æ˜¯æŸ¥è¯¢çš„åŸŸåï¼Œæœ‰ç”¨çš„å°±æ˜¯ <code>generateHostKey()</code> å’Œ <code>generateWordKey()</code> ä¸¤ä¸ªæ–¹æ³•äº†ï¼Œè·Ÿè¿›å»çœ‹ï¼Œä»£ç ç»è¿‡äº† jsjiami v6 æ··æ·†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/66713c07ba6880c09c9dbc3604e290df.png" alt="05"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/abcc44976be8d583e2cd948e06c705d9.png" alt="06"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/3332edc2c481e2dbc672ca818c8ad060.png" alt="07"></p><h2 id="AST-è„±æ··æ·†"><a href="#AST-è„±æ··æ·†" class="headerlink" title="AST è„±æ··æ·†"></a>AST è„±æ··æ·†</h2><p>jsjiami æ··æ·†çš„ç‰¹å¾å…¶å®å’Œ OB æ··æ·†æ˜¯ç±»ä¼¼çš„ï¼š</p><ol><li>ä¸€èˆ¬ç”±ä¸€ä¸ªå¤§æ•°ç»„æˆ–è€…å«æœ‰å¤§æ•°ç»„çš„å‡½æ•°ã€ä¸€ä¸ªæ•°ç»„ä½ç§»æ“ä½œçš„è‡ªæ‰§è¡Œå‡½æ•°ã€ä¸€ä¸ªè§£å¯†å‡½æ•°å’ŒåŠ å¯†åçš„å‡½æ•°å››éƒ¨åˆ†ç»„æˆï¼›</li><li>å‡½æ•°åå’Œå˜é‡åé€šå¸¸ä»¥ _0x æˆ–è€… 0x å¼€å¤´ï¼Œåæ¥ 1~6 ä½æ•°å­—æˆ–å­—æ¯ç»„åˆï¼›</li><li>æ•°ç»„ä½ç§»æ“ä½œçš„è‡ªæ‰§è¡Œå‡½æ•°é‡Œï¼Œæœ‰æ˜æ˜¾çš„ pushã€shift å…³é”®å­—ã€‚</li></ol><p>æœ¬ä¾‹ä¸­ï¼Œ<code>generateHostKey()</code> æ–¹æ³•åœ¨ <code>commo.js</code> é‡Œï¼Œ<code>generateWordKey()</code> æ–¹æ³•åœ¨ <code>generatetoken.js</code> é‡Œï¼Œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3d1c1327ff484c80e8e308d16c71cd22.png" alt="08"></p><p>è§‚å¯Ÿ <code>generatetoken.js</code> æ–‡ä»¶ï¼Œå¯ä»¥å‘ç°è¿™é‡Œé¢ä¹Ÿæœ‰ <code>commo.js</code> é‡Œé¢çš„ <code>generateHostKey()</code> å’Œ <code>getRandom()</code> æ–¹æ³•ï¼Œä»æ–¹æ³•åæ¥çœ‹è²Œä¼¼æ˜¯é‡å¤äº†ï¼Œå®é™…ä¸Šæ··æ·†è¿˜åŸåæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åªéœ€è¦è¿˜åŸ <code>generatetoken.js</code> å°±å¯ä»¥äº†ã€‚</p><h3 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h3><ul><li>æ··æ·† JS æ–‡ä»¶ï¼š<code>generatetoken.js</code></li><li>AST è¿˜åŸä»£ç ï¼š<code>generatetokenAst.js</code></li><li>è¿˜åŸåçš„ä»£ç ï¼š<code>generatetokenNew.js</code></li></ul><h3 id="è§£å¯†å‡½æ•°è¿˜åŸ"><a href="#è§£å¯†å‡½æ•°è¿˜åŸ" class="headerlink" title="è§£å¯†å‡½æ•°è¿˜åŸ"></a>è§£å¯†å‡½æ•°è¿˜åŸ</h3><p>åœ¨åŸæ¥æ··æ·†åçš„ JS é‡Œï¼Œè§£å¯†å‡½æ•°æ˜¯ <code>_0x530e</code>ï¼Œé¦–å…ˆè§‚å¯Ÿæ•´ä¸ª JSï¼Œè°ƒç”¨äº†å¾ˆå¤šæ¬¡è§£å¯†å‡½æ•°ï¼Œç±»ä¼¼äºï¼š<code>_0x530e(&#39;1&#39;, &#39;7XEq&#39;)</code>ã€‚</p><p>æ³¨æ„è¿™é‡Œä»£ç é‡Œé¢æœ‰ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œç±»ä¼¼äº <code>RLE</code>ã€<code>RLO</code> ä¹‹ç±»çš„ï¼Œå¦‚æœåœ¨ VSCode æ‰“å¼€æ˜¯ä¸€äº› <code>U+202B</code>ã€<code>U+202E</code> çš„å­—ç¬¦ï¼Œå®é™…ä¸Šè¿™æ˜¯ RTLO (Right-to-Left Override) å­—ç¬¦ï¼Œ<code>U+202B</code> å’Œ <code>U+202E</code> çš„æ„æ€åˆ†åˆ«æ˜¯æ ¹æ®å†…å­˜é¡ºåºä»å·¦è‡³å³å’Œä»å³è‡³å·¦æ˜¾ç¤ºå­—ç¬¦ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç½‘ä¸Šæœç´¢äº†è§£ä¸€ä¸‹ã€‚è¿™é‡Œå¹¶ä¸å½±å“æˆ‘ä»¬è¿›è¡Œè¿˜åŸæ“ä½œã€‚ä½†æ˜¯å¦‚æœç›´æ¥å¤åˆ¶è¿‡æ¥çš„è¯å°±ä¼šå¯¼è‡´å‰åæ–‡æ˜¾ç¤ºçš„é¡ºåºä¸å¯¹ï¼Œæ‰€ä»¥æœ¬æ–‡ä¸­ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œç²˜è´´çš„éƒ¨åˆ†ä»£ç å°±æ‰‹åŠ¨å»æ‰äº†è¿™äº›å­—ç¬¦ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/160a9bdb547e5cd19a94563f78addccf.png" alt="09"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/6a62938a7cb953b2c02e7e0326ea8d23.png" alt="10"></p><p>æ‰€ä»¥ç¬¬ä¸€æ­¥æˆ‘ä»¬è¦è¿˜åŸä¸€ä¸‹è§£å¯†å‡½æ•°ï¼ŒæŠŠæ‰€æœ‰ <code>_0x530e</code> è°ƒç”¨çš„åœ°æ–¹ç›´æ¥æ›¿æ¢æˆå®é™…å€¼ï¼Œé¦–å…ˆéœ€è¦å°†å¤§æ•°ç»„ã€è‡ªæ‰§è¡Œå‡½æ•°ã€åŠ å¯†å‡½æ•°å’Œè§£å¯†å‡½æ•°åˆ†å‰²å¼€ï¼Œå°†ä»£ç æ”¾åˆ° astexplorer.net çœ‹ä¸€ä¸‹ï¼Œä¹Ÿå°±æ˜¯å°† body çš„å‰å››éƒ¨åˆ†å’Œåé¢å‰©ä½™éƒ¨åˆ†åˆ†å‰²å¼€æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/588093722962f4d006dcfeefbe90cb7a.png" alt="11"></p><p>åˆ†å‰²ä»£ç ï¼š</p><pre><code class="javascript">const fs = require(&quot;fs&quot;);const parse = require(&quot;@babel/parser&quot;).parse;const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst types = require(&quot;@babel/types&quot;)// å¯¼å…¥æ··æ·†ä»£ç å¹¶è§£æä¸º ASTconst oldCode = fs.readFileSync(&quot;generatetoken.js&quot;, &#123;encoding: &quot;utf-8&quot;&#125;);const astCode = parse(oldCode);// è·å–æ•´ä¸ª AST èŠ‚ç‚¹çš„é•¿åº¦let astCodeLength = astCode.program.body.length// è·å–è§£å¯†å‡½æ•°çš„åå­— ä¹Ÿå°±æ˜¯ _0x530elet decryptFunctionName = astCode.program.body[3].id.name// åˆ†å‰²åŠ å¯†å‡½æ•°å’Œè§£å¯†å‡½æ•°ï¼Œå³ body çš„å‰å››éƒ¨åˆ†å’Œåé¢å‰©ä½™éƒ¨åˆ†let decryptFunction = astCode.program.body.slice(0, 4)let encryptFunction = astCode.program.body.slice(4, astCodeLength)// è·å–åŠ å¯†å‡½æ•°å’Œè§£å¯†å‡½æ•°çš„æ–¹æ³•å¤šç§å¤šæ ·ï¼Œæ¯”å¦‚å¯ä»¥æŒ¨ä¸ªå–å€¼å¹¶è½¬æ¢æˆ JS ä»£ç // è¿™æ ·åšå°±ä¸éœ€è¦å°†è§£å¯†å‡½æ•°èµ‹å€¼ç»™æ•´ä¸ª AST èŠ‚ç‚¹äº†// let decryptFunction = &quot;&quot;;// for(let i=0; i&lt;4; i++)&#123;//     decryptFunction += generate(astCode.program.body[i], &#123;compact: true&#125;).code// &#125;// eval(decryptFunction);</code></pre><p>åœ¨ä¸Šé¢çš„è·å–åŠ å¯†å‡½æ•°å’Œè§£å¯†å‡½æ•°çš„ä»£ç ä¸­ï¼Œæ–¹æ³•ä¸æ˜¯å”¯ä¸€çš„ï¼Œå¤šç§å¤šæ ·ï¼Œæ¯”å¦‚ç›´æ¥å¾ªç¯å– body å¹¶è½¬æ¢æˆ JS ä»£ç ï¼Œæ¯”å¦‚ç›´æ¥äººå·¥æŠŠå¤§æ•°ç»„ã€è‡ªæ‰§è¡Œå‡½æ•°å’Œè§£å¯†å‡½æ•°ä¸‰éƒ¨åˆ†ï¼Œæ‹¿å‡ºæ¥æ”¾åˆ°ä¸€ä¸ªæ–°æ–‡ä»¶é‡Œï¼Œç„¶åå¯¼å‡ºè§£å¯†æ–¹æ³•ï¼Œåç»­ç›´æ¥è°ƒç”¨ä¹Ÿå¯ä»¥ã€‚</p><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæ‹¿åˆ°è§£å¯†å‡½æ•°åï¼Œéœ€è¦å°†å…¶èµ‹å€¼ç»™æ•´ä¸ª AST èŠ‚ç‚¹ï¼Œç„¶åå†å°†æ•´ä¸ª AST èŠ‚ç‚¹è½¬æ¢æˆ JavaScript ä»£ç ï¼Œè¿™é‡Œæ³¨æ„æœ‰å¯èƒ½ä¼šæ£€æµ‹ä»£ç æ˜¯å¦æ ¼å¼åŒ–ï¼Œæ‰€ä»¥å»ºè®®è½¬æ¢è¦åŠ ä¸€ä¸ª <code>compact</code> å‚æ•°ï¼Œé¿å…æ ¼å¼åŒ–ï¼Œè½¬æ¢å®Œæˆå <code>eval</code> æ‰§è¡Œä¸€ä¸‹ï¼Œè®©æ•°ç»„ä½ç§»æ“ä½œå®Œæˆï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è°ƒç”¨è§£å¯†å‡½æ•°ï¼Œå³ <code>_0x530e()</code>ã€‚</p><pre><code class="javascript">// å°†è§£å¯†å‡½æ•°èµ‹å€¼ç»™æ•´ä¸ª AST èŠ‚ç‚¹astCode.program.body = decryptFunction// å°† AST èŠ‚ç‚¹è½¬æ¢æˆ JS ä»£ç ï¼Œå¹¶ eval æ‰§è¡Œä¸€ä¸‹decryptFunction = generate(astCode, &#123;compact: true&#125;).codeeval(decryptFunction);// æµ‹è¯•ä¸€ä¸‹ï¼Œç›´æ¥è°ƒç”¨ _0x530e å‡½æ•°å¯ä»¥æ­£ç¡®æ‹¿åˆ°ç»“æœ// è¾“å‡º split// console.log(_0x530e(&#39;â€®b&#39;, &#39;Zp9G&#39;))</code></pre><p>ç°åœ¨æˆ‘ä»¬èƒ½ç›´æ¥è°ƒç”¨è§£å¯†å‡½æ•° <code>_0x530e()</code> äº†ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æ€ä¹ˆæŠŠæ··æ·†ä»£ç ä¸­æ‰€æœ‰è°ƒç”¨ <code>_0x530e()</code> çš„åœ°æ–¹æ›¿æ¢æˆçœŸå®å€¼ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠåŠ å¯†å‡½æ•°ï¼ˆ<code>generateKey()</code>ã€<code>generateHostKey()</code>ã€<code>generateWordKey()</code> å’Œ <code>getRandom()</code>ï¼‰èµ‹å€¼ç»™æ•´ä¸ª AST èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ•´ä¸ªèŠ‚ç‚¹å°±æ²¡æœ‰å¤§æ•°ç»„ã€è‡ªæ‰§è¡Œå‡½æ•°å’Œè§£å¯†å‡½æ•°äº†ï¼Œè§£å¯†å‡½æ•° <code>_0x530e()</code> å·²ç»è¢«å†™å…¥å†…å­˜ï¼Œæ‰€ä»¥åé¢ä¸å½±å“æˆ‘ä»¬è°ƒç”¨ã€‚</p><p>è€æ ·å­ï¼Œè¿˜æ˜¯å…ˆåœ¨ astexplorer.net çœ‹ä¸€ä¸‹è°ƒç”¨ <code>_0x530e()</code> çš„åœ°æ–¹ï¼Œä»¥ <code>_0x530e(&#39;b&#39;, &#39;Zp9G&#39;)</code> ä¸ºä¾‹ï¼Œå…¶çœŸå®å€¼åº”è¯¥æ˜¯ <code>split</code>ï¼Œå¯¹æ¯”ä¸€ä¸‹æ›¿æ¢å‰åçš„ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/97d80ef9b923f117cac6e4060a4998f5.png" alt="12"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/8bf00ab1113c218219f838cd00ab21e9.png" alt="13"></p><p>å¯ä»¥çœ‹åˆ°èŠ‚ç‚¹ç”±åŸæ¥çš„ <code>CallExpression</code> å˜æˆäº† <code>StringLiteral</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥éå† <code>CallExpression</code>ï¼Œå¦‚æœå‡½æ•°åä¸ºè§£å¯†å‡½æ•°åï¼Œé‚£å°±é€šè¿‡ <code>path.toString()</code> æ–¹æ³•è·å–èŠ‚ç‚¹æºç ï¼Œä¹Ÿå°±ç±»ä¼¼ <code>_0x530e(&#39;b&#39;, &#39;Zp9G&#39;)</code> çš„æºç ï¼Œç„¶å <code>eval</code> æ‰§è¡Œä¸€ä¸‹è·å–å…¶çœŸå®å€¼ï¼Œå†ä½¿ç”¨ <code>types.stringLiteral()</code> æ„å»º <code>StringLiteral</code> èŠ‚ç‚¹ï¼Œæœ€åé€šè¿‡ <code>path.replaceInline()</code> æ–¹æ³•æ›¿æ¢èŠ‚ç‚¹ï¼Œéå†ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">// å°†åŠ å¯†å‡½æ•°èµ‹å€¼ç»™æ•´ä¸ª AST èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ•´ä¸ªèŠ‚ç‚¹å°±æ²¡æœ‰å¤§æ•°ç»„ã€è‡ªæ‰§è¡Œå‡½æ•°å’Œè§£å¯†å‡½æ•°äº†astCode.program.body = encryptFunction// è°ƒç”¨è§£å¯†å‡½æ•°ï¼Œç›´æ¥è®¡ç®—å‡ºç±»ä¼¼ä»¥ä¸‹æ–¹æ³•çš„å€¼å¹¶æ›¿æ¢// æ··æ·†ä»£ç ï¼š_0x530e(&#39;â€®b&#39;, &#39;Zp9G&#39;)// è¿˜åŸåï¼šsplitconst visitor1 = &#123;    CallExpression(path)&#123;        if (path.node.callee.name === decryptFunctionName &amp;&amp; path.node.arguments.length === 2)&#123;            path.replaceInline(types.stringLiteral(eval(path.toString())))        &#125;    &#125;&#125;// éå†èŠ‚ç‚¹traverse(astCode, visitor1)// å°† AST èŠ‚ç‚¹è½¬æ¢æˆ JS ä»£ç å¹¶å†™å…¥åˆ°æ–°æ–‡ä»¶é‡Œconst result = generate(astCode, &#123;concise:true&#125;).codefs.writeFile(&quot;./generatetokenNew.js&quot;, result, (err =&gt; &#123;console.log(err)&#125;))</code></pre><p>è‡ªæ­¤ï¼Œç¬¬ä¸€æ­¥çš„è§£å¯†å‡½æ•°è¿˜åŸå°±å®Œæˆäº†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿˜åŸå‰åçš„å¯¹æ¯”ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæµ…è“è‰²æ ‡è®°çš„åœ°æ–¹ï¼Œæ‰€æœ‰è°ƒç”¨ <code>_0x530e()</code> çš„åœ°æ–¹éƒ½è¢«è¿˜åŸäº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/592ed12ad85ea4b424c8b59a99e03bc9.png" alt="14"></p><h3 id="å¤§å¯¹è±¡è¿˜åŸ"><a href="#å¤§å¯¹è±¡è¿˜åŸ" class="headerlink" title="å¤§å¯¹è±¡è¿˜åŸ"></a>å¤§å¯¹è±¡è¿˜åŸ</h3><p>åˆæ­¥è¿˜åŸåæˆ‘ä»¬çš„ä»£ç é‡Œå°±åªå‰©ä¸‹ä»¥ä¸‹å››ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>generateKey()</code></li><li><code>generateHostKey()</code></li><li><code>generateWordKey()</code></li><li> <code>getRandom()</code></li></ul><p>å†è§‚å¯Ÿä»£ç ï¼Œå‘ç°æ¯ä¸ªæ–¹æ³•ä¸€å¼€å§‹éƒ½æœ‰ä¸ªå¤§çš„å¯¹è±¡ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>_0x3b79c6</code></li><li><code>_0x278b2d</code></li><li><code>_0x4115c4</code></li><li><code>_0xd8ec33</code></li></ul><p>åç»­çš„ä»£ç ä¹Ÿåœ¨ä¸æ–­è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>_0x3b79c6[&quot;esdtg&quot;](_0x2e5848[&quot;length&quot;], 0x4)</code> å®é™…ä¸Šå°±æ˜¯ <code>_0x2e5848[&quot;length&quot;] != 0x4</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/dad85b7cf44527da212f026cf6f8fd36.png" alt="15"></p><p>é¦–å…ˆæˆ‘ä»¬å°†è¿™å››ä¸ªå¤§çš„å¯¹è±¡å•ç‹¬æå–å‡ºæ¥ï¼Œè¿˜æ˜¯ä¿æŒåŸæ¥çš„é”®å€¼å¯¹æ ·å¼ï¼Œæå–å®Œæˆååˆ é™¤è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œéå†ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">let functionName = &#123;    &quot;_0x3b79c6&quot;: &#123;&#125;,    &quot;_0x278b2d&quot;: &#123;&#125;,    &quot;_0x4115c4&quot;: &#123;&#125;,    &quot;_0xd8ec33&quot;: &#123;&#125;&#125;// å•ç‹¬æå–å‡ºå››ä¸ªå¤§å¯¹è±¡const visitor2 = &#123;    VariableDeclarator(path)&#123;        for (let key in functionName)&#123;            if (path.node &amp;&amp; path.node.id.name == key) &#123;                const properties = path.node.init.properties                for (let i=0; i&lt;properties.length; i++)&#123;                    functionName[key][properties[i].key.value] = properties[i].value                &#125;                // å†™å…¥å¯¹è±¡åå°±å¯ä»¥åˆ é™¤è¯¥èŠ‚ç‚¹äº†                path.remove()            &#125;        &#125;    &#125;&#125;</code></pre><p>è¿™é‡Œè¦æ³¨æ„ï¼Œå¤§çš„å¯¹è±¡é‡Œé¢ï¼Œæœ‰ <code>+</code>ã€<code>-</code>ã€<code>==</code> ä¹‹ç±»çš„äºŒé¡¹å¼è®¡ç®—ï¼Œä¹Ÿæœ‰ç›´æ¥ä¸ºå­—ç¬¦ä¸²çš„ï¼Œè¿˜æœ‰å˜æˆå‡½æ•°è°ƒç”¨çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="JavaScript">var _0x3b79c6 = &#123;    &#39;MuRlB&#39;: function (_0x3ca134, _0x50ee94) &#123;        return _0x3ca134 + _0x50ee94;    &#125;,     &#39;Ucwyj&#39;: function (_0x32bfa3, _0x3b191b) &#123;        return _0x32bfa3(_0x3b191b);    &#125;,     &#39;YrYQW&#39;: &#39;#IpValue&#39;&#125;</code></pre><p>é’ˆå¯¹ä¸åŒçš„æƒ…å†µæœ‰ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼ŒåŒæ—¶è¿˜è¦æ³¨æ„ä¼ å‚å’Œ return è¿”å›çš„å‚æ•°ä½ç½®ï¼Œä¸è¦è¿˜åŸåæŠŠ <code>a - b</code> ææˆ <code>b - a</code> äº†ï¼Œå½“ç„¶åœ¨æœ¬ä¾‹ä¸­ä¼ å…¥å’Œè¿”å›çš„é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œå°±ä¸éœ€è¦è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚</p><h4 id="å­—ç¬¦ä¸²è¿˜åŸ"><a href="#å­—ç¬¦ä¸²è¿˜åŸ" class="headerlink" title="å­—ç¬¦ä¸²è¿˜åŸ"></a>å­—ç¬¦ä¸²è¿˜åŸ</h4><p>é¦–å…ˆæ¥çœ‹å­—ç¬¦ä¸²ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li>ä»¥ <code>_0x3b79c6[&#39;YrYQW&#39;]</code> ä¸ºä¾‹ï¼Œå®é™…ä¸Šå…¶å€¼ä¸ºå­—ç¬¦ä¸² <code>&#39;#IpValue&#39;</code>ï¼Œè§‚å¯Ÿå…¶ç»“æ„ï¼Œæ˜¯ä¸€ä¸ª <code>MemberExpression</code>ï¼Œåœ¨ä¸€ä¸ªåˆ—è¡¨é‡Œï¼›</li><li>ä»¥ <code>_0x278b2d[&#39;pjbyX&#39;]</code> ä¸ºä¾‹ï¼Œå®é™…ä¸Šå…¶å€¼ä¸ºå­—ç¬¦ä¸² <code>&#39;3|2|1|4|5|0|6&#39;</code>ï¼Œè§‚å¯Ÿå…¶ç»“æ„ï¼Œæ˜¯ä¸€ä¸ª <code>MemberExpression</code>ï¼Œåœ¨ä¸€ä¸ªå­—å…¸é‡Œï¼›</li><li>ä»¥ <code>_0x278b2d[&#39;CnTaO&#39;]</code> ä¸ºä¾‹ï¼Œè™½ç„¶ä¹Ÿæ˜¯ä¸€ä¸ª <code>MemberExpression</code>ï¼Œä¹Ÿåœ¨ä¸€ä¸ªå­—å…¸é‡Œã€‚ä½†å®é™…ä¸Šæ˜¯äºŒé¡¹å¼è®¡ç®—ï¼Œæ‰€ä»¥è¦æ’é™¤åœ¨å¤–ã€‚</li></ul><p><img src="https://img-blog.csdnimg.cn/img_convert/c7da2da4b18ea101be336632d3302e9b.png" alt="16"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/bb64748de3614028d49b5445a8f0a4bd.png" alt="17"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/2d864c898a10fe2512de55ae0aae6b4b.png" alt="18"></p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨å†™éå†ä»£ç æ—¶ï¼ŒåŒæ—¶è¦æ³¨æ„è¿™ä¸‰ç§æƒ…å†µï¼Œæ»¡è¶³æ¡ä»¶åç›´æ¥å–åŸæ¥å¤§å¯¹è±¡å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œæ›¿æ¢å³å¯ï¼Œéå†ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="javascript">// å‡½æ•°æ›¿æ¢ï¼Œå­—ç¬¦ä¸²æ›¿æ¢ï¼šå°†ç±»ä¼¼ _0x3b79c6[&#39;YrYQW&#39;] å˜æˆ &#39;#IpValue&#39;const visitor3 = &#123;    MemberExpression(path) &#123;        for (let key in functionName)&#123;            if (path.node.object &amp;&amp; path.node.object.name == key &amp;&amp; path.inList ) &#123;                path.replaceInline(functionName[key][path.node.property.value])            &#125;            if (path.node.object &amp;&amp; path.node.object.name == key &amp;&amp; path.parent.property &amp;&amp; path.parent.property.value == &quot;split&quot;) &#123;                path.replaceInline(functionName[key][path.node.property.value])            &#125;        &#125;    &#125;&#125;</code></pre><h4 id="äºŒé¡¹å¼è®¡ç®—æ›¿æ¢"><a href="#äºŒé¡¹å¼è®¡ç®—æ›¿æ¢" class="headerlink" title="äºŒé¡¹å¼è®¡ç®—æ›¿æ¢"></a>äºŒé¡¹å¼è®¡ç®—æ›¿æ¢</h4><p>å†æ¥çœ‹çœ‹äºŒé¡¹å¼è®¡ç®—çš„æƒ…å†µï¼Œä»¥ <code>_0x278b2d[&#39;CnTaO&#39;](_0x691267[&quot;length&quot;], 0x1)</code> ä¸ºä¾‹ï¼Œå®é™…ä¸Šæ˜¯åšå‡æ³•è¿ç®—ï¼Œå³ <code>_0x691267[&quot;length&quot;] - 0x1</code>ï¼Œçœ‹ä¸€ä¸‹æ›¿æ¢å‰åå¯¹æ¯”ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/15473cd5662d90370f1bdd845bd6f42a.png" alt="19"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/c2c67cc2f0760f493d99a29281599894.png" alt="20"></p><p>å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æå–ä¸¤ä¸ªå‚æ•°ï¼Œç„¶åæå–å¤§å¯¹è±¡é‡Œå¯¹åº”æ–¹æ³•çš„æ“ä½œç¬¦ï¼Œç„¶åå°†å‚æ•°å’Œæ“ä½œç¬¦ç›´æ¥è¿æ¥èµ·æ¥ç»„æˆæ–°çš„èŠ‚ç‚¹ï¼ˆ<code>binaryExpression</code>ï¼‰å¹¶æ›¿æ¢å³å¯ï¼Œéå†ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">// å‡½æ•°æ›¿æ¢ï¼ŒäºŒé¡¹å¼è®¡ç®—ï¼šå°†ç±»ä¼¼ _0x278b2d[&#39;CnTaO&#39;](_0x691267[&quot;length&quot;], 0x1) å˜æˆ _0x691267[&quot;length&quot;] - 0x1const visitor4 = &#123;    CallExpression(path)&#123;        for (let key in functionName) &#123;            if (path.node.callee &amp;&amp; path.node.callee.object &amp;&amp; path.node.callee.object.name == key) &#123;                let func = functionName[key][path.node.callee.property.value]                if (func.body.body[0].argument.type == &quot;BinaryExpression&quot;) &#123;                    let operator = func.body.body[0].argument.operator                    let left = path.node.arguments[0]                    let right = path.node.arguments[1]                    path.replaceInline(types.binaryExpression(operator, left, right))                &#125;            &#125;        &#125;    &#125;&#125;</code></pre><h4 id="æ–¹æ³•è°ƒç”¨è¿˜åŸ"><a href="#æ–¹æ³•è°ƒç”¨è¿˜åŸ" class="headerlink" title="æ–¹æ³•è°ƒç”¨è¿˜åŸ"></a>æ–¹æ³•è°ƒç”¨è¿˜åŸ</h4><p>ä»¥ <code>_0x4115c4[&quot;PJbSm&quot;](getRandom, 0x64, 0x3e7)</code> ä¸ºä¾‹ï¼Œå®é™…ä¸Šæ˜¯ <code>getRandom(0x64, 0x3e7)</code>ï¼Œçœ‹ä¸€ä¸‹æ›¿æ¢å‰åå¯¹æ¯”ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/0214e34c163d988a87ae74c287aa4fb9.png" alt="21"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/618a03ab22a77658de6b3f90232ad8cd.png" alt="22"></p><p>å¯¹äºè¿™ç§æƒ…å†µï¼Œä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•åç§°ï¼Œåé¢çš„éƒ½æ˜¯å‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å–ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ–¹æ³•åç§°ï¼Œä½¿ç”¨ <code>slice(1)</code> æ–¹æ³•å–åé¢æ‰€æœ‰çš„å‚æ•°ï¼ˆå› ä¸ºåé¢çš„å‚æ•°ä¸ªæ•°æ˜¯ä¸ä¸€å®šçš„ï¼‰ï¼Œç„¶åæ„é€ æ–°çš„èŠ‚ç‚¹ï¼ˆ<code>callExpression</code>ï¼‰å¹¶æ›¿æ¢å³å¯ï¼Œè¿™éƒ¨åˆ†éå†ä»£ç å¯ä»¥å’Œå‰é¢äºŒé¡¹å¼çš„æ›¿æ¢ç›¸ç»“åˆï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">// å‡½æ•°æ›¿æ¢ï¼ŒäºŒé¡¹å¼è®¡ç®—ï¼šå°†ç±»ä¼¼ _0x278b2d[&#39;CnTaO&#39;](_0x691267[&quot;length&quot;], 0x1) å˜æˆ _0x691267[&quot;length&quot;] - 0x1// å‡½æ•°æ›¿æ¢ï¼Œæ–¹æ³•è°ƒç”¨ï¼šå°†ç±»ä¼¼ _0x4115c4[&quot;PJbSm&quot;](getRandom, 0x64, 0x3e7) å˜æˆ getRandom(0x64, 0x3e7)const visitor4 = &#123;    CallExpression(path)&#123;        for (let key in functionName) &#123;            if (path.node.callee &amp;&amp; path.node.callee.object &amp;&amp; path.node.callee.object.name == key) &#123;                let func = functionName[key][path.node.callee.property.value]                if (func.body.body[0].argument.type == &quot;BinaryExpression&quot;) &#123;                    let operator = func.body.body[0].argument.operator                    let left = path.node.arguments[0]                    let right = path.node.arguments[1]                    path.replaceInline(types.binaryExpression(operator, left, right))                &#125;                if (func.body.body[0].argument.type == &quot;CallExpression&quot;) &#123;                    let identifier = path.node.arguments[0]                    let arguments = path.node.arguments.slice(1)                    path.replaceInline(types.callExpression(identifier, arguments))                &#125;            &#125;        &#125;    &#125;&#125;</code></pre><p>è‡ªæ­¤ï¼Œç¬¬äºŒæ­¥çš„å¤§å¯¹è±¡è¿˜åŸå°±å®Œæˆäº†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿˜åŸå‰åçš„å¯¹æ¯”ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæµ…è“è‰²æ ‡è®°çš„åœ°æ–¹ï¼Œæ‰€æœ‰è°ƒç”¨å››ä¸ªå¤§å¯¹è±¡ï¼ˆ<code>_0x3b79c6</code>ã€<code>_0x278b2d</code>ã€<code>_0x4115c4</code>ã€<code>_0xd8ec33</code>ï¼‰çš„åœ°æ–¹éƒ½è¢«è¿˜åŸäº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7d6b3b0a9c46e31799e0c8d15b3a7b86.png" alt="23"></p><h3 id="switch-case-åæ§åˆ¶æµå¹³å¦åŒ–"><a href="#switch-case-åæ§åˆ¶æµå¹³å¦åŒ–" class="headerlink" title="switch-case åæ§åˆ¶æµå¹³å¦åŒ–"></a>switch-case åæ§åˆ¶æµå¹³å¦åŒ–</h3><p>ç»è¿‡å‰é¢å‡ æ­¥çš„è¿˜åŸä¹‹åï¼Œæˆ‘ä»¬å‘ç° <code>generateHostKey()</code>ã€<code>generateWordKey()</code>ã€<code>getRandom()</code> æ–¹æ³•é‡Œéƒ½æœ‰ä¸€ä¸ª <code>switch-case</code> çš„æ§åˆ¶æµï¼Œå…³äºåæ§åˆ¶æµå¹³å¦åŒ–çš„è®²è§£åœ¨æˆ‘ä¸ŠæœŸæ–‡ç« æœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»ï¼Œä¸ç†è§£çš„å¯ä»¥çœ‹çœ‹ä¸ŠæœŸæ–‡ç« ï¼Œæ­¤å¤„ä¹Ÿä¸å†èµ˜è¿°äº†ï¼Œç›´æ¥è´´ä»£ç äº†ï¼š</p><pre><code class="javascript">// switch-case åæ§åˆ¶æµå¹³å¦åŒ–const visitor5 = &#123;    WhileStatement(path) &#123;        // switch èŠ‚ç‚¹        let switchNode = path.node.body.body[0];        // switch è¯­å¥å†…çš„æ§åˆ¶æµæ•°ç»„åï¼Œæœ¬ä¾‹ä¸­æ˜¯ _0x28073aã€_0x2efb35ã€_0x187fb8        let arrayName = switchNode.discriminant.object.name;        // è·å–æ§åˆ¶æµæ•°ç»„ç»‘å®šçš„èŠ‚ç‚¹        let bindingArray = path.scope.getBinding(arrayName);        // è·å–èŠ‚ç‚¹æ•´ä¸ªè¡¨è¾¾å¼çš„å‚æ•°ã€åˆ†å‰²æ–¹æ³•ã€åˆ†éš”ç¬¦        let init = bindingArray.path.node.init;        let object = init.callee.object.value;        let property = init.callee.property.value;        let argument = init.arguments[0].value;        // æ¨¡æ‹Ÿæ‰§è¡Œ &#39;3|2|1|4|5|0|6&#39;[&#39;split&#39;](&#39;|&#39;) è¯­å¥        let array = object[property](argument)        // ä¹Ÿå¯ä»¥ç›´æ¥å–å‚æ•°è¿›è¡Œåˆ†å‰²ï¼Œæ–¹æ³•ä¸é€šç”¨ï¼Œæ¯”å¦‚åˆ†éš”ç¬¦æ¢æˆ , å°±ä¸è¡Œäº†        // let array = init.callee.object.value.split(&#39;|&#39;);        // switch è¯­å¥å†…çš„æ§åˆ¶æµè‡ªå¢å˜é‡åï¼Œæœ¬ä¾‹ä¸­æ˜¯ _0x38c69eã€_0x396880ã€_0x3b3dc7        let autoIncrementName = switchNode.discriminant.property.argument.name;        // è·å–æ§åˆ¶æµè‡ªå¢å˜é‡åç»‘å®šçš„èŠ‚ç‚¹        let bindingAutoIncrement = path.scope.getBinding(autoIncrementName);        // å¯é€‰æ‹©çš„æ“ä½œï¼šåˆ é™¤æ§åˆ¶æµæ•°ç»„ç»‘å®šçš„èŠ‚ç‚¹ã€è‡ªå¢å˜é‡åç»‘å®šçš„èŠ‚ç‚¹        bindingArray.path.remove();        bindingAutoIncrement.path.remove();        // å‚¨å­˜æ­£ç¡®é¡ºåºçš„æ§åˆ¶æµè¯­å¥        let replace = [];        // éå†æ§åˆ¶æµæ•°ç»„ï¼ŒæŒ‰æ­£ç¡®é¡ºåºå– case å†…å®¹        array.forEach(index =&gt; &#123;                let consequent = switchNode.cases[index].consequent;                // å¦‚æœæœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯ continue è¯­å¥ï¼Œåˆ™åˆ é™¤ ContinueStatement èŠ‚ç‚¹                if (types.isContinueStatement(consequent[consequent.length - 1])) &#123;                    consequent.pop();                &#125;                // concat æ–¹æ³•æ‹¼æ¥å¤šä¸ªæ•°ç»„ï¼Œå³æ­£ç¡®é¡ºåºçš„ case å†…å®¹                replace = replace.concat(consequent);            &#125;        );        // æ›¿æ¢æ•´ä¸ª while èŠ‚ç‚¹ï¼Œä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥        path.replaceWithMultiple(replace);        // path.replaceInline(replace);    &#125;&#125;</code></pre><h3 id="å…¶ä»–ç»†èŠ‚è¿˜åŸ"><a href="#å…¶ä»–ç»†èŠ‚è¿˜åŸ" class="headerlink" title="å…¶ä»–ç»†èŠ‚è¿˜åŸ"></a>å…¶ä»–ç»†èŠ‚è¿˜åŸ</h3><p>åˆ°è¿™é‡Œå…¶å®å¤§éƒ¨åˆ†æ··æ·†éƒ½å·²ç»è¿˜åŸäº†ï¼Œå·²ç»å¾ˆå®¹æ˜“åˆ†æå…¶é€»è¾‘äº†ï¼Œè¿˜å‰©ä¸‹ä¸€äº›ç»†èŠ‚ï¼Œæˆ‘ä»¬ä¹Ÿè¿˜åŸä¸€ä¸‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ç»†èŠ‚ï¼š</p><ul><li>åå…­è¿›åˆ¶ã€Unicode ç¼–ç ç­‰ï¼Œè½¬æ­£å¸¸å­—ç¬¦ï¼›</li><li>å¯¹è±¡å±æ€§è¿˜åŸï¼Œæ¯”å¦‚ <code>_0x3cbc20[&#39;length&#39;]</code> è½¬æ¢æˆ <code>_0x3cbc20.length</code>ï¼›</li><li>è¡¨è¾¾å¼è¿˜åŸï¼Œæ¯”å¦‚ <code>!![]</code> ç›´æ¥è®¡ç®—æˆ trueï¼›</li><li>åˆ é™¤æœªå¼•ç”¨çš„å˜é‡ï¼Œæ¯”å¦‚ <code>_0xodD= &quot;jsjiami.com.v6&quot;;</code>ï¼›</li><li>åˆ é™¤å†—ä½™é€»è¾‘ä»£ç ï¼Œåªä¿ç•™ if ä¸º true çš„ã€‚</li></ul><p>è¿™äº›è¿˜åŸä»£ç åœ¨æˆ‘ä¸ŠæœŸæ–‡ç« æœ‰è¯¦ç»†è®²è¿‡ï¼Œç»“åˆä»£ç ï¼Œåœ¨ astexplorer.net å¯¹ç…§å…¶ç»“æ„çœ‹ï¼Œä¹Ÿèƒ½ç†è§£ï¼ŒåŒæ ·ä¹Ÿä¸èµ˜è¿°äº†ï¼Œç›´æ¥è´´ä»£ç ï¼š</p><pre><code class="javascript">const visitor5 = &#123;    // åå…­è¿›åˆ¶ã€Unicode ç¼–ç ç­‰ï¼Œè½¬æ­£å¸¸å­—ç¬¦    &quot;StringLiteral|NumericLiteral&quot;(path)&#123;        delete path.node.extra;    &#125;,    // _0x3cbc20[&quot;length&quot;] è½¬æ¢æˆ _0x3cbc20.length    MemberExpression(path)&#123;        if (path.node.property.type == &quot;StringLiteral&quot;) &#123;            path.node.computed = false            path.node.property = types.identifier(path.node.property.value)        &#125;    &#125;,    // è¡¨è¾¾å¼è¿˜åŸï¼Œ!![] ç›´æ¥è®¡ç®—æˆ true    &quot;BinaryExpression|UnaryExpression&quot;(path) &#123;        let &#123;confident, value&#125; = path.evaluate()        if (confident)&#123;            path.replaceInline(types.valueToNode(value))        &#125;    &#125;,    // åˆ é™¤æœªå¼•ç”¨çš„å˜é‡ï¼Œæ¯”å¦‚ _0xodD = &quot;jsjiami.com.v6&quot;;    AssignmentExpression(path)&#123;        let binding = path.scope.getBinding(path.node.left.name);        if (!binding) &#123;            path.remove();        &#125;    &#125;&#125;// åˆ é™¤å†—ä½™é€»è¾‘ä»£ç ï¼Œåªä¿ç•™ if ä¸º true çš„const visitor6 = &#123;    IfStatement(path) &#123;        if(path.node.test.type == &quot;BooleanLiteral&quot;) &#123;            if(path.node.test.value) &#123;                path.replaceInline(path.node.consequent.body)            &#125; else &#123;                path.replaceInline(path.node.alternate.body)            &#125;        &#125;    &#125;&#125;</code></pre><p>è‡ªæ­¤ jajiami v6 æ··æ·†å°±è¿˜åŸå®Œæ¯•äº†ï¼Œè¿˜åŸå‰åå¯¹æ¯”ä¸€ä¸‹ï¼Œä»£ç é‡ç¼©çŸ­äº†å¾ˆå¤šï¼Œé€»è¾‘ä¹Ÿæ›´åŠ æ¸…æ¥šäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/52f0ccf4ce30a1c150ddd25e8f189ab0.png" alt="24"></p><p>æœ€åç»“åˆ Python ä»£ç ï¼Œæºå¸¦ç”Ÿæˆçš„ <code>hostToken</code> å’Œ <code>permitToken</code>ï¼ŒæˆåŠŸæ‹¿åˆ°å¤‡æ¡ˆå·ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/4b54ca38cc38d9776bdb39c52ed25c93.png" alt="25"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p>åŸæ··æ·†ä»£ç  <code>generatetoken.js</code>ã€AST è„±æ··æ·†ä»£ç  <code>generatetokenAst.js</code>ã€è¿˜åŸåçš„ä»£ç  <code>generatetokenNew.js</code>ï¼Œä»¥åŠ Python æµ‹è¯•ä»£ç å‡åœ¨ GitHubï¼Œå‡æœ‰è¯¦ç»†æ³¨é‡Šï¼Œæ¬¢è¿ Starã€‚æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”ã€éæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œåœ¨ä»“åº“ä¸­ä¸‹è½½çš„æ–‡ä»¶å­¦ä¹ å®Œæ¯•ä¹‹åè¯·äº 24 å°æ—¶å†…åˆ é™¤ï¼</p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/TRHX/Python3-Spider-Practice">https://github.com/TRHX/Python3-Spider-Practice</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å£°æ˜&quot;&gt;&lt;a href=&quot;#å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;å£°æ˜&quot;&gt;&lt;/a&gt;å£°æ˜&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœ</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>é€†å‘è¿›é˜¶ï¼Œåˆ©ç”¨ AST æŠ€æœ¯è¿˜åŸ JavaScript æ··æ·†ä»£ç </title>
    <link href="https://www.itbob.cn/article/051/"/>
    <id>https://www.itbob.cn/article/051/</id>
    <published>2022-04-25T09:00:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-AST"><a href="#ä»€ä¹ˆæ˜¯-AST" class="headerlink" title="ä»€ä¹ˆæ˜¯ AST"></a>ä»€ä¹ˆæ˜¯ AST</h2><p>ASTï¼ˆAbstract Syntax Treeï¼‰ï¼Œä¸­æ–‡æŠ½è±¡è¯­æ³•æ ‘ï¼Œç®€ç§°è¯­æ³•æ ‘ï¼ˆSyntax Treeï¼‰ï¼Œæ˜¯æºä»£ç çš„æŠ½è±¡è¯­æ³•ç»“æ„çš„æ ‘çŠ¶è¡¨ç°å½¢å¼ï¼Œæ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºæºä»£ç ä¸­çš„ä¸€ç§ç»“æ„ã€‚è¯­æ³•æ ‘ä¸æ˜¯æŸä¸€ç§ç¼–ç¨‹è¯­è¨€ç‹¬æœ‰çš„ï¼ŒJavaScriptã€Pythonã€Javaã€Golang ç­‰å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è¯­æ³•æ ‘ã€‚</p><p>å°æ—¶å€™æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç©å…·ï¼Œæ€»å–œæ¬¢æŠŠç©å…·æ‹†è§£æˆä¸€ä¸ªä¸€ä¸ªå°é›¶ä»¶ï¼Œç„¶åæŒ‰ç…§æˆ‘ä»¬è‡ªå·±çš„æƒ³æ³•ï¼ŒæŠŠé›¶ä»¶é‡æ–°ç»„è£…èµ·æ¥ï¼Œä¸€ä¸ªæ–°ç©å…·å°±è¯ç”Ÿäº†ã€‚è€Œ JavaScript å°±åƒä¸€å°ç²¾å¦™è¿ä½œçš„æœºå™¨ï¼Œé€šè¿‡ AST è§£æï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒç«¥å¹´æ—¶æ‹†è§£ç©å…·ä¸€æ ·ï¼Œæ·±å…¥äº†è§£ JavaScript è¿™å°æœºå™¨çš„å„ä¸ªé›¶éƒ¨ä»¶ï¼Œç„¶åé‡æ–°æŒ‰ç…§æˆ‘ä»¬è‡ªå·±çš„æ„æ„¿æ¥ç»„è£…ã€‚</p><p>AST çš„ç”¨é€”å¾ˆå¹¿ï¼ŒIDE çš„è¯­æ³•é«˜äº®ã€ä»£ç æ£€æŸ¥ã€æ ¼å¼åŒ–ã€å‹ç¼©ã€è½¬è¯‘ç­‰ï¼Œéƒ½éœ€è¦å…ˆå°†ä»£ç è½¬åŒ–æˆ AST å†è¿›è¡Œåç»­çš„æ“ä½œï¼ŒES5 å’Œ ES6 è¯­æ³•å·®å¼‚ï¼Œä¸ºäº†å‘åå…¼å®¹ï¼Œåœ¨å®é™…åº”ç”¨ä¸­éœ€è¦è¿›è¡Œè¯­æ³•çš„è½¬æ¢ï¼Œä¹Ÿä¼šç”¨åˆ° ASTã€‚AST å¹¶ä¸æ˜¯ä¸ºäº†é€†å‘è€Œç”Ÿï¼Œä½†åšé€†å‘å­¦ä¼šäº† ASTï¼Œåœ¨è§£æ··æ·†æ—¶å¯ä»¥å¦‚é±¼å¾—æ°´ã€‚</p><p>AST æœ‰ä¸€ä¸ªåœ¨çº¿è§£æç½‘ç«™ï¼š<a href="https://astexplorer.net/">https://astexplorer.net/</a> ï¼Œé¡¶éƒ¨å¯ä»¥é€‰æ‹©è¯­è¨€ã€ç¼–è¯‘å™¨ã€æ˜¯å¦å¼€å¯è½¬åŒ–ç­‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŒºåŸŸâ‘ æ˜¯æºä»£ç ï¼ŒåŒºåŸŸâ‘¡æ˜¯å¯¹åº”çš„ AST è¯­æ³•æ ‘ï¼ŒåŒºåŸŸâ‘¢æ˜¯è½¬æ¢ä»£ç ï¼Œå¯ä»¥å¯¹è¯­æ³•æ ‘è¿›è¡Œå„ç§æ“ä½œï¼ŒåŒºåŸŸâ‘£æ˜¯è½¬æ¢åç”Ÿæˆçš„æ–°ä»£ç ã€‚å›¾ä¸­åŸæ¥çš„ Unicode å­—ç¬¦ç»è¿‡æ“ä½œä¹‹åå°±å˜æˆäº†æ­£å¸¸å­—ç¬¦ã€‚</p><p>è¯­æ³•æ ‘æ²¡æœ‰å•ä¸€çš„æ ¼å¼ï¼Œé€‰æ‹©ä¸åŒçš„è¯­è¨€ã€ä¸åŒçš„ç¼–è¯‘å™¨ï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨ JavaScript ä¸­ï¼Œç¼–è¯‘å™¨æœ‰ Acornã€Espreeã€Esprimaã€Recastã€Uglify-JS ç­‰ï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯ Babelï¼Œåç»­çš„å­¦ä¹ ä¹Ÿæ˜¯ä»¥ Babel ä¸ºä¾‹ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3e56f2edec502087a2bb0b10ef178b52.png" alt="01"></p><h2 id="AST-åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®"><a href="#AST-åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®" class="headerlink" title="AST åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®"></a>AST åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®</h2><p>åœ¨ç¼–è¯‘åŸç†ä¸­ï¼Œç¼–è¯‘å™¨è½¬æ¢ä»£ç é€šå¸¸è¦ç»è¿‡ä¸‰ä¸ªæ­¥éª¤ï¼šè¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰ã€è¯­æ³•åˆ†æï¼ˆSyntax Analysisï¼‰ã€ä»£ç ç”Ÿæˆï¼ˆCode Generationï¼‰ï¼Œä¸‹å›¾ç”ŸåŠ¨å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/90fe33b7b362f60e1ee1849bf3c06fc9.png" alt="02"></p><h3 id="è¯æ³•åˆ†æ"><a href="#è¯æ³•åˆ†æ" class="headerlink" title="è¯æ³•åˆ†æ"></a>è¯æ³•åˆ†æ</h3><p>è¯æ³•åˆ†æé˜¶æ®µæ˜¯ç¼–è¯‘è¿‡ç¨‹çš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µçš„ä»»åŠ¡æ˜¯ä»å·¦åˆ°å³ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°è¯»å…¥æºç¨‹åºï¼Œç„¶åæ ¹æ®æ„è¯è§„åˆ™è¯†åˆ«å•è¯ï¼Œç”Ÿæˆ token ç¬¦å·æµï¼Œæ¯”å¦‚ <code>isPanda(&#39;ğŸ¼&#39;)</code>ï¼Œä¼šè¢«æ‹†åˆ†æˆ <code>isPanda</code>ï¼Œ<code>(</code>ï¼Œ<code>&#39;ğŸ¼&#39;</code>ï¼Œ<code>)</code> å››éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æœ‰ä¸åŒçš„å«ä¹‰ï¼Œå¯ä»¥å°†è¯æ³•åˆ†æè¿‡ç¨‹æƒ³è±¡ä¸ºä¸åŒç±»å‹æ ‡è®°çš„åˆ—è¡¨æˆ–æ•°ç»„ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/de8a6906cf7db9be51ef2eb56cbd1b70.gif#pic_center" alt="03"></p><h3 id="è¯­æ³•åˆ†æ"><a href="#è¯­æ³•åˆ†æ" class="headerlink" title="è¯­æ³•åˆ†æ"></a>è¯­æ³•åˆ†æ</h3><p>è¯­æ³•åˆ†ææ˜¯ç¼–è¯‘è¿‡ç¨‹çš„ä¸€ä¸ªé€»è¾‘é˜¶æ®µï¼Œè¯­æ³•åˆ†æçš„ä»»åŠ¡æ˜¯åœ¨è¯æ³•åˆ†æçš„åŸºç¡€ä¸Šå°†å•è¯åºåˆ—ç»„åˆæˆå„ç±»è¯­æ³•çŸ­è¯­ï¼Œæ¯”å¦‚â€œç¨‹åºâ€ï¼Œâ€œè¯­å¥â€ï¼Œâ€œè¡¨è¾¾å¼â€ç­‰ï¼Œå‰é¢çš„ä¾‹å­ä¸­ï¼Œ<code>isPanda(&#39;ğŸ¼&#39;)</code> å°±ä¼šè¢«åˆ†æä¸ºä¸€æ¡è¡¨è¾¾è¯­å¥ <code>ExpressionStatement</code>ï¼Œ<code>isPanda()</code> å°±ä¼šè¢«åˆ†ææˆä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ <code>CallExpression</code>ï¼Œ<code>ğŸ¼</code> å°±ä¼šè¢«åˆ†ææˆä¸€ä¸ªå˜é‡ <code>Literal</code> ç­‰ï¼Œä¼—å¤šè¯­æ³•ä¹‹é—´çš„ä¾èµ–ã€åµŒå¥—å…³ç³»ï¼Œå°±æ„æˆäº†ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œå³ AST è¯­æ³•æ ‘ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/45b5484465969681707f32a2dde5370b.gif#pic_center" alt="04"></p><h3 id="ä»£ç ç”Ÿæˆ"><a href="#ä»£ç ç”Ÿæˆ" class="headerlink" title="ä»£ç ç”Ÿæˆ"></a>ä»£ç ç”Ÿæˆ</h3><p>ä»£ç ç”Ÿæˆæ˜¯æœ€åä¸€æ­¥ï¼Œå°† AST è¯­æ³•æ ‘è½¬æ¢æˆå¯æ‰§è¡Œä»£ç å³å¯ï¼Œåœ¨è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œè¯­æ³•æ ‘ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šå˜é‡çš„å£°æ˜ä½ç½®ã€æ›´æ”¹å˜é‡çš„å€¼ã€åˆ é™¤æŸäº›èŠ‚ç‚¹ç­‰ï¼Œæˆ‘ä»¬å°†è¯­å¥ <code>isPanda(&#39;ğŸ¼&#39;)</code> ä¿®æ”¹ä¸ºä¸€ä¸ªå¸ƒå°”ç±»å‹çš„ <code>Literal</code>ï¼š<code>true</code>ï¼Œè¯­æ³•æ ‘å°±æœ‰å¦‚ä¸‹å˜åŒ–ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/6659a4f8614b61a4d6376aadca326f88.gif#pic_center" alt="05"></p><h2 id="Babel-ç®€ä»‹"><a href="#Babel-ç®€ä»‹" class="headerlink" title="Babel ç®€ä»‹"></a>Babel ç®€ä»‹</h2><p>Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ä¸ªè§£æåº“ï¼ŒBabel ä¸­æ–‡ç½‘ï¼š<a href="https://www.babeljs.cn/">https://www.babeljs.cn/</a> ï¼ŒBabel è‹±æ–‡å®˜ç½‘ï¼š<a href="https://babeljs.io/">https://babeljs.io/</a> ï¼ŒBabel å†…ç½®äº†å¾ˆå¤šåˆ†æ JavaScript ä»£ç çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Babel å°† JavaScript ä»£ç è½¬æ¢æˆ AST è¯­æ³•æ ‘ï¼Œç„¶åå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œä¹‹åï¼Œå†è½¬æ¢æˆ JavaScript ä»£ç ã€‚</p><p>Babel åŒ…å«çš„å„ç§åŠŸèƒ½åŒ…ã€APIã€å„æ–¹æ³•å¯é€‰å‚æ•°ç­‰ï¼Œéƒ½éå¸¸å¤šï¼Œæœ¬æ–‡ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œåº”å½“å¤šæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£ï¼Œæˆ–è€…å‚è€ƒæ–‡æœ«ç»™å‡ºçš„ä¸€äº›å­¦ä¹ èµ„æ–™ã€‚Babel çš„å®‰è£…å’Œå…¶ä»– Node åŒ…ä¸€æ ·ï¼Œéœ€è¦å“ªä¸ªå®‰è£…å“ªä¸ªå³å¯ï¼Œæ¯”å¦‚ <code>npm install @babel/core @babel/parser @babel/traverse @babel/generator</code></p><p>åœ¨åšé€†å‘è§£æ··æ·†ä¸­ï¼Œä¸»è¦ç”¨åˆ°äº† Babel çš„ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½åŒ…ï¼Œæœ¬æ–‡ä¹Ÿä»…ä»‹ç»ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½åŒ…ï¼š</p><ol><li><code>@babel/core</code>ï¼šBabel ç¼–è¯‘å™¨æœ¬èº«ï¼Œæä¾›äº† babel çš„ç¼–è¯‘ APIï¼›</li><li><code>@babel/parser</code>ï¼šå°† JavaScript ä»£ç è§£ææˆ AST è¯­æ³•æ ‘ï¼›</li><li><code>@babel/traverse</code>ï¼šéå†ã€ä¿®æ”¹ AST è¯­æ³•æ ‘çš„å„ä¸ªèŠ‚ç‚¹ï¼›</li><li><code>@babel/generator</code>ï¼šå°† AST è¿˜åŸæˆ JavaScript ä»£ç ï¼›</li><li><code>@babel/types</code>ï¼šåˆ¤æ–­ã€éªŒè¯èŠ‚ç‚¹çš„ç±»å‹ã€æ„å»ºæ–° AST èŠ‚ç‚¹ç­‰ã€‚</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/f8be61bdf850b955459dd4d476f80822.png" alt="06"></p><h3 id="babel-core"><a href="#babel-core" class="headerlink" title="@babel/core"></a>@babel/core</h3><p>Babel ç¼–è¯‘å™¨æœ¬èº«ï¼Œè¢«æ‹†åˆ†æˆäº†ä¸‰ä¸ªæ¨¡å—ï¼š<code>@babel/parser</code>ã€<code>@babel/traverse</code>ã€<code>@babel/generator</code>ï¼Œæ¯”å¦‚ä»¥ä¸‹æ–¹æ³•çš„å¯¼å…¥æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼š</p><pre><code class="javascript">const parse = require(&quot;@babel/parser&quot;).parse;const parse = require(&quot;@babel/core&quot;).parse;const traverse = require(&quot;@babel/traverse&quot;).defaultconst traverse = require(&quot;@babel/core&quot;).traverse</code></pre><h3 id="babel-parser"><a href="#babel-parser" class="headerlink" title="@babel/parser"></a>@babel/parser</h3><p><code>@babel/parser</code> å¯ä»¥å°† JavaScript ä»£ç è§£ææˆ AST è¯­æ³•æ ‘ï¼Œå…¶ä¸­ä¸»è¦æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>parser.parse(code, [&#123;options&#125;])</code>ï¼šè§£æä¸€æ®µ JavaScript ä»£ç ï¼›</li><li><code>parser.parseExpression(code, [&#123;options&#125;])</code>ï¼šè€ƒè™‘åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œè§£æå•ä¸ª JavaScript è¡¨è¾¾å¼ã€‚</li></ul><p>éƒ¨åˆ†å¯é€‰å‚æ•° <code>options</code>ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>allowImportExportEverywhere</code></td><td>é»˜è®¤ <code>import</code> å’Œ <code>export</code> å£°æ˜è¯­å¥åªèƒ½å‡ºç°åœ¨ç¨‹åºçš„æœ€é¡¶å±‚ï¼Œè®¾ç½®ä¸º <code>true</code> åˆ™åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥å£°æ˜</td></tr><tr><td><code>allowReturnOutsideFunction</code></td><td>é»˜è®¤å¦‚æœåœ¨é¡¶å±‚ä¸­ä½¿ç”¨ <code>return</code> è¯­å¥ä¼šå¼•èµ·é”™è¯¯ï¼Œè®¾ç½®ä¸º <code>true</code> å°±ä¸ä¼šæŠ¥é”™</td></tr><tr><td><code>sourceType</code></td><td>é»˜è®¤ä¸º <code>script</code>ï¼Œå½“ä»£ç ä¸­å«æœ‰ <code>import</code> ã€<code>export</code> ç­‰å…³é”®å­—æ—¶ä¼šæŠ¥é”™ï¼Œéœ€è¦æŒ‡å®šä¸º <code>module</code></td></tr><tr><td><code>errorRecovery</code></td><td>é»˜è®¤å¦‚æœ babel å‘ç°ä¸€äº›ä¸æ­£å¸¸çš„ä»£ç å°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè®¾ç½®ä¸º <code>true</code> åˆ™ä¼šåœ¨ä¿å­˜è§£æé”™è¯¯çš„åŒæ—¶ç»§ç»­è§£æä»£ç ï¼Œé”™è¯¯çš„è®°å½•å°†è¢«ä¿å­˜åœ¨æœ€ç»ˆç”Ÿæˆçš„ AST çš„ errors å±æ€§ä¸­ï¼Œå½“ç„¶å¦‚æœé‡åˆ°ä¸¥é‡çš„é”™è¯¯ï¼Œä¾ç„¶ä¼šç»ˆæ­¢è§£æ</td></tr></tbody></table><p>ä¸¾ä¸ªä¾‹å­çœ‹å¾—æ¯”è¾ƒæ¸…æ¥šï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const code = &quot;const a = 1;&quot;;const ast = parser.parse(code, &#123;sourceType: &quot;module&quot;&#125;)console.log(ast)</code></pre><p><code>&#123;sourceType: &quot;module&quot;&#125;</code> æ¼”ç¤ºäº†å¦‚ä½•æ·»åŠ å¯é€‰å‚æ•°ï¼Œè¾“å‡ºçš„å°±æ˜¯ AST è¯­æ³•æ ‘ï¼Œè¿™å’Œåœ¨çº¿ç½‘ç«™ <a href="https://astexplorer.net/">https://astexplorer.net/</a> è§£æå‡ºæ¥çš„è¯­æ³•æ ‘æ˜¯ä¸€æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/cb7791be87be4a4c8f47add3228e3d58.png" alt="07"></p><h3 id="babel-generator"><a href="#babel-generator" class="headerlink" title="@babel/generator"></a>@babel/generator</h3><p><code>@babel/generator</code> å¯ä»¥å°† AST è¿˜åŸæˆ JavaScript ä»£ç ï¼Œæä¾›äº†ä¸€ä¸ª <code>generate</code> æ–¹æ³•ï¼š<code>generate(ast, [&#123;options&#125;], code)</code>ã€‚</p><p>éƒ¨åˆ†å¯é€‰å‚æ•° <code>options</code>ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>auxiliaryCommentBefore</code></td><td>åœ¨è¾“å‡ºæ–‡ä»¶å†…å®¹çš„å¤´éƒ¨æ·»åŠ æ³¨é‡Šå—æ–‡å­—</td></tr><tr><td><code>auxiliaryCommentAfter</code></td><td>åœ¨è¾“å‡ºæ–‡ä»¶å†…å®¹çš„æœ«å°¾æ·»åŠ æ³¨é‡Šå—æ–‡å­—</td></tr><tr><td><code>comments</code></td><td>è¾“å‡ºå†…å®¹æ˜¯å¦åŒ…å«æ³¨é‡Š</td></tr><tr><td><code>compact</code></td><td>è¾“å‡ºå†…å®¹æ˜¯å¦ä¸æ·»åŠ ç©ºæ ¼ï¼Œé¿å…æ ¼å¼åŒ–</td></tr><tr><td><code>concise</code></td><td>è¾“å‡ºå†…å®¹æ˜¯å¦å‡å°‘ç©ºæ ¼ä½¿å…¶æ›´ç´§å‡‘ä¸€äº›</td></tr><tr><td><code>minified</code></td><td>æ˜¯å¦å‹ç¼©è¾“å‡ºä»£ç </td></tr><tr><td><code>retainLines</code></td><td>å°è¯•åœ¨è¾“å‡ºä»£ç ä¸­ä½¿ç”¨ä¸æºä»£ç ä¸­ç›¸åŒçš„è¡Œå·</td></tr></tbody></table><p>æ¥ç€å‰é¢çš„ä¾‹å­ï¼ŒåŸä»£ç æ˜¯ <code>const a = 1;</code>ï¼Œç°åœ¨æˆ‘ä»¬æŠŠ <code>a</code> å˜é‡ä¿®æ”¹ä¸º <code>b</code>ï¼Œå€¼ <code>1</code> ä¿®æ”¹ä¸º <code>2</code>ï¼Œç„¶åå°† AST è¿˜åŸç”Ÿæˆæ–°çš„ JS ä»£ç ï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst code = &quot;const a = 1;&quot;;const ast = parser.parse(code, &#123;sourceType: &quot;module&quot;&#125;)ast.program.body[0].declarations[0].id.name = &quot;b&quot;ast.program.body[0].declarations[0].init.value = 2const result = generate(ast, &#123;minified: true&#125;)console.log(result.code)</code></pre><p>æœ€ç»ˆè¾“å‡ºçš„æ˜¯ <code>const b=2;</code>ï¼Œå˜é‡åå’Œå€¼éƒ½æˆåŠŸæ›´æ”¹äº†ï¼Œç”±äºåŠ äº†å‹ç¼©å¤„ç†ï¼Œç­‰å·å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼ä¹Ÿæ²¡äº†ã€‚</p><p>ä»£ç é‡Œ <code>&#123;minified: true&#125;</code> æ¼”ç¤ºäº†å¦‚ä½•æ·»åŠ å¯é€‰å‚æ•°ï¼Œè¿™é‡Œè¡¨ç¤ºå‹ç¼©è¾“å‡ºä»£ç ï¼Œ<code>generate</code> å¾—åˆ°çš„ <code>result</code> å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­çš„ <code>code</code> å±æ€§æ‰æ˜¯æœ€ç»ˆçš„ JS ä»£ç ã€‚</p><p>ä»£ç é‡Œ <code>ast.program.body[0].declarations[0].id.name</code> æ˜¯ a åœ¨ AST ä¸­çš„ä½ç½®ï¼Œ<code>ast.program.body[0].declarations[0].init.value</code> æ˜¯ 1 åœ¨ AST ä¸­çš„ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/0ffbf3d9a54e2de3c779735aeac0e3e4.png" alt="08"></p><h3 id="babel-traverse"><a href="#babel-traverse" class="headerlink" title="@babel/traverse"></a>@babel/traverse</h3><p>å½“ä»£ç å¤šäº†ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åƒå‰é¢é‚£æ ·æŒ¨ä¸ªå®šä½å¹¶ä¿®æ”¹ï¼Œå¯¹äºç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥éå†æ‰€æœ‰èŠ‚ç‚¹æ¥è¿›è¡Œä¿®æ”¹ï¼Œè¿™é‡Œå°±ç”¨åˆ°äº† <code>@babel/traverse</code>ï¼Œå®ƒé€šå¸¸å’Œ <code>visitor</code> ä¸€èµ·ä½¿ç”¨ï¼Œ<code>visitor</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªåå­—æ˜¯å¯ä»¥éšæ„å–çš„ï¼Œ<code>visitor</code> é‡Œå¯ä»¥å®šä¹‰ä¸€äº›æ–¹æ³•æ¥è¿‡æ»¤èŠ‚ç‚¹ï¼Œè¿™é‡Œè¿˜æ˜¯ç”¨ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst code = `const a = 1500;const b = 60;const c = &quot;hi&quot;;const d = 787;const e = &quot;1244&quot;;`const ast = parser.parse(code)const visitor = &#123;    NumericLiteral(path)&#123;        path.node.value = (path.node.value + 100) * 2    &#125;,    StringLiteral(path)&#123;        path.node.value = &quot;I Love JavaScript!&quot;    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>è¿™é‡Œçš„åŸå§‹ä»£ç å®šä¹‰äº† abcde äº”ä¸ªå˜é‡ï¼Œå…¶å€¼æœ‰æ•°å­—ä¹Ÿæœ‰å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬åœ¨ AST ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç±»å‹ä¸º <code>NumericLiteral</code> å’Œ <code>StringLiteral</code>ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/b0a932b29fef0ad7a6f20dbc88f3ec46.png" alt="09"></p><p>ç„¶åæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª <code>visitor</code> å¯¹è±¡ï¼Œç„¶åå®šä¹‰å¯¹åº”ç±»å‹çš„å¤„ç†æ–¹æ³•ï¼Œ<code>traverse</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ AST å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯ <code>visitor</code>ï¼Œå½“ <code>traverse</code> éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œé‡åˆ°èŠ‚ç‚¹ç±»å‹ä¸º <code>NumericLiteral</code> å’Œ <code>StringLiteral</code> æ—¶ï¼Œå°±ä¼šè°ƒç”¨ <code>visitor</code> ä¸­å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œ<code>visitor</code> ä¸­çš„æ–¹æ³•ä¼šæ¥æ”¶ä¸€ä¸ªå½“å‰èŠ‚ç‚¹çš„ <code>path</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„ç±»å‹æ˜¯ <code>NodePath</code>ï¼Œè¯¥å¯¹è±¡æœ‰éå¸¸å¤šçš„å±æ€§ï¼Œä»¥ä¸‹ä»‹ç»å‡ ç§æœ€å¸¸ç”¨çš„ï¼š</p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>toString()</code></td><td>å½“å‰è·¯å¾„çš„æºç </td></tr><tr><td><code>node</code></td><td>å½“å‰è·¯å¾„çš„èŠ‚ç‚¹</td></tr><tr><td><code>parent</code></td><td>å½“å‰è·¯å¾„çš„çˆ¶çº§èŠ‚ç‚¹</td></tr><tr><td><code>parentPath</code></td><td>å½“å‰è·¯å¾„çš„çˆ¶çº§è·¯å¾„</td></tr><tr><td><code>type</code></td><td>å½“å‰è·¯å¾„çš„ç±»å‹</td></tr></tbody></table><p>PSï¼š<code>path</code> å¯¹è±¡é™¤äº†æœ‰å¾ˆå¤šå±æ€§ä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚æ›¿æ¢èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ã€æ’å…¥èŠ‚ç‚¹ã€å¯»æ‰¾çˆ¶çº§èŠ‚ç‚¹ã€è·å–åŒçº§èŠ‚ç‚¹ã€æ·»åŠ æ³¨é‡Šã€åˆ¤æ–­èŠ‚ç‚¹ç±»å‹ç­‰ï¼Œå¯åœ¨éœ€è¦æ—¶æŸ¥è¯¢ç›¸å…³æ–‡æ¡£æˆ–æŸ¥çœ‹æºç ï¼Œåç»­ä»‹ç» <code>@babel/types</code> éƒ¨åˆ†å°†ä¼šä¸¾éƒ¨åˆ†ä¾‹å­æ¥æ¼”ç¤ºï¼Œä»¥åçš„å®æˆ˜æ–‡ç« ä¸­ä¹Ÿä¼šæœ‰ç›¸å…³å®ä¾‹ï¼Œç¯‡å¹…æœ‰é™æœ¬æ–‡ä¸å†ç»†è¯´ã€‚</p><p>å› æ­¤åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>path.node.value</code> å°±æ‹¿åˆ°äº†å˜é‡çš„å€¼ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥è¿›ä¸€æ­¥å¯¹å…¶è¿›è¡Œä¿®æ”¹äº†ã€‚ä»¥ä¸Šä»£ç è¿è¡Œåï¼Œæ‰€æœ‰æ•°å­—éƒ½ä¼šåŠ ä¸Š100åå†ä¹˜ä»¥2ï¼Œæ‰€æœ‰å­—ç¬¦ä¸²éƒ½ä¼šè¢«æ›¿æ¢æˆ <code>I Love JavaScript!</code>ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><pre><code class="javascript">const a = 3200;const b = 320;const c = &quot;I Love JavaScript!&quot;;const d = 1774;const e = &quot;I Love JavaScript!&quot;;</code></pre><p>å¦‚æœå¤šä¸ªç±»å‹çš„èŠ‚ç‚¹ï¼Œå¤„ç†çš„æ–¹å¼éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ä½¿ç”¨ <code>|</code> å°†æ‰€æœ‰èŠ‚ç‚¹è¿æ¥æˆå­—ç¬¦ä¸²ï¼Œå°†åŒä¸€ä¸ªæ–¹æ³•åº”ç”¨åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼š</p><pre><code class="javascript">const visitor = &#123;    &quot;NumericLiteral|StringLiteral&quot;(path) &#123;        path.node.value = &quot;I Love JavaScript!&quot;    &#125;&#125;</code></pre><p><code>visitor</code> å¯¹è±¡æœ‰å¤šç§å†™æ³•ï¼Œä»¥ä¸‹å‡ ç§å†™æ³•çš„æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼š</p><pre><code class="javascript">const visitor = &#123;    NumericLiteral(path)&#123;        path.node.value = (path.node.value + 100) * 2    &#125;,    StringLiteral(path)&#123;        path.node.value = &quot;I Love JavaScript!&quot;    &#125;&#125;</code></pre><pre><code class="javascript">const visitor = &#123;    NumericLiteral: function (path)&#123;        path.node.value = (path.node.value + 100) * 2    &#125;,    StringLiteral: function (path)&#123;        path.node.value = &quot;I Love JavaScript!&quot;    &#125;&#125;</code></pre><pre><code class="javascript">const visitor = &#123;    NumericLiteral: &#123;        enter(path) &#123;            path.node.value = (path.node.value + 100) * 2        &#125;    &#125;,    StringLiteral: &#123;        enter(path) &#123;            path.node.value = &quot;I Love JavaScript!&quot;        &#125;    &#125;&#125;</code></pre><pre><code class="javascript">const visitor = &#123;    enter(path) &#123;        if (path.node.type === &quot;NumericLiteral&quot;) &#123;            path.node.value = (path.node.value + 100) * 2        &#125;        if (path.node.type === &quot;StringLiteral&quot;) &#123;            path.node.value = &quot;I Love JavaScript!&quot;        &#125;    &#125;&#125;</code></pre><p>ä»¥ä¸Šå‡ ç§å†™æ³•ä¸­æœ‰ç”¨åˆ°äº† <code>enter</code> æ–¹æ³•ï¼Œåœ¨èŠ‚ç‚¹çš„éå†è¿‡ç¨‹ä¸­ï¼Œè¿›å…¥èŠ‚ç‚¹ï¼ˆenterï¼‰ä¸é€€å‡ºï¼ˆexitï¼‰èŠ‚ç‚¹éƒ½ä¼šè®¿é—®ä¸€æ¬¡èŠ‚ç‚¹ï¼Œ<code>traverse</code> é»˜è®¤åœ¨è¿›å…¥èŠ‚ç‚¹æ—¶è¿›è¡ŒèŠ‚ç‚¹çš„å¤„ç†ï¼Œå¦‚æœè¦åœ¨é€€å‡ºèŠ‚ç‚¹æ—¶å¤„ç†ï¼Œé‚£ä¹ˆåœ¨ <code>visitor</code> ä¸­å°±å¿…é¡»å£°æ˜ <code>exit</code> æ–¹æ³•ã€‚</p><h3 id="babel-types"><a href="#babel-types" class="headerlink" title="@babel/types"></a>@babel/types</h3><p><code>@babel/types</code> ä¸»è¦ç”¨äºæ„å»ºæ–°çš„ AST èŠ‚ç‚¹ï¼Œå‰é¢çš„ç¤ºä¾‹ä»£ç ä¸º <code>const a = 1;</code>ï¼Œå¦‚æœæƒ³è¦å¢åŠ å†…å®¹ï¼Œæ¯”å¦‚å˜æˆ <code>const a = 1; const b = a * 5 + 1;</code>ï¼Œå°±å¯ä»¥é€šè¿‡ <code>@babel/types</code> æ¥å®ç°ã€‚</p><p>é¦–å…ˆè§‚å¯Ÿä¸€ä¸‹ AST è¯­æ³•æ ‘ï¼ŒåŸè¯­å¥åªæœ‰ä¸€ä¸ª <code>VariableDeclaration</code> èŠ‚ç‚¹ï¼Œç°åœ¨å¢åŠ äº†ä¸€ä¸ªï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7319ba7290bf4d5c94d86c3c0d89e288.png" alt="10"></p><p>é‚£ä¹ˆæˆ‘ä»¬çš„æ€è·¯å°±æ˜¯åœ¨éå†èŠ‚ç‚¹æ—¶ï¼Œéå†åˆ° <code>VariableDeclaration</code> èŠ‚ç‚¹ï¼Œå°±åœ¨å…¶åé¢å¢åŠ ä¸€ä¸ª <code>VariableDeclaration</code> èŠ‚ç‚¹ï¼Œç”Ÿæˆ  <code>VariableDeclaration</code> èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>types.variableDeclaration()</code> æ–¹æ³•ï¼Œåœ¨ types ä¸­å„ç§æ–¹æ³•åç§°å’Œæˆ‘ä»¬åœ¨ AST ä¸­çœ‹åˆ°çš„æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡é¦–å­—æ¯æ˜¯å°å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“æ‰€æœ‰æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½å¤§è‡´æ¨æ–­å…¶æ–¹æ³•åï¼ŒåªçŸ¥é“è¿™ä¸ªæ–¹æ³•è¿˜ä¸è¡Œï¼Œè¿˜å¾—çŸ¥é“ä¼ å…¥çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥æŸ¥æ–‡æ¡£ï¼Œä¸è¿‡è¿™é‡Œæ¨èç›´æ¥çœ‹æºç ï¼Œéå¸¸æ¸…æ™°æ˜äº†ï¼Œä»¥ Pycharm ä¸ºä¾‹ï¼ŒæŒ‰ä½ Ctrl é”®ï¼Œå†ç‚¹å‡»æ–¹æ³•åï¼Œå°±è¿›åˆ°æºç é‡Œäº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/59b5979bae2fa54c199c8040f2442d04.png" alt="11"></p><pre><code class="javascript">function variableDeclaration(kind: &quot;var&quot; | &quot;let&quot; | &quot;const&quot;, declarations: Array&lt;BabelNodeVariableDeclarator&gt;)</code></pre><p>å¯ä»¥çœ‹åˆ°éœ€è¦ <code>kind</code> å’Œ <code>declarations</code> ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ <code>declarations</code> æ˜¯ <code>VariableDeclarator</code> ç±»å‹çš„èŠ‚ç‚¹ç»„æˆçš„åˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºä»¥ä¸‹ <code>visitor</code> éƒ¨åˆ†çš„ä»£ç ï¼Œå…¶ä¸­ <code>path.insertAfter()</code> æ˜¯åœ¨è¯¥èŠ‚ç‚¹ä¹‹åæ’å…¥æ–°èŠ‚ç‚¹çš„æ„æ€ï¼š</p><pre><code class="javascript">const visitor = &#123;    VariableDeclaration(path) &#123;        let declaration = types.variableDeclaration(&quot;const&quot;, [declarator])        path.insertAfter(declaration)    &#125;&#125;</code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦è¿›ä¸€æ­¥å®šä¹‰ <code>declarator</code>ï¼Œä¹Ÿå°±æ˜¯ <code>VariableDeclarator</code> ç±»å‹çš„èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢å…¶æºç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function variableDeclarator(id: BabelNodeLVal, init?: BabelNodeExpression)</code></pre><p>è§‚å¯Ÿ ASTï¼Œid ä¸º <code>Identifier</code> å¯¹è±¡ï¼Œinit ä¸º <code>BinaryExpression</code> å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/050533c545ec5244818054a2e2572cc4.png" alt="12"></p><p>å…ˆæ¥å¤„ç† idï¼Œå¯ä»¥ä½¿ç”¨ <code>types.identifier()</code> æ–¹æ³•æ¥ç”Ÿæˆï¼Œå…¶æºç ä¸º <code>function identifier(name: string)</code>ï¼Œname åœ¨è¿™é‡Œå°±æ˜¯ b äº†ï¼Œæ­¤æ—¶ <code>visitor</code> ä»£ç å°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre><code class="javascript">const visitor = &#123;    VariableDeclaration(path) &#123;        let declarator = types.variableDeclarator(types.identifier(&quot;b&quot;), init)        let declaration = types.variableDeclaration(&quot;const&quot;, [declarator])        path.insertAfter(declaration)    &#125;&#125;</code></pre><p>ç„¶åå†æ¥çœ‹ init è¯¥å¦‚ä½•å®šä¹‰ï¼Œé¦–å…ˆä»ç„¶æ˜¯çœ‹ AST ç»“æ„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/a927d6abed41d43251e3c3c2a432e46f.png" alt="13"></p><p>init ä¸º <code>BinaryExpression</code> å¯¹è±¡ï¼Œleft å·¦è¾¹æ˜¯ <code>BinaryExpression</code>ï¼Œright å³è¾¹æ˜¯ <code>NumericLiteral</code>ï¼Œå¯ä»¥ç”¨ <code>types.binaryExpression()</code> æ–¹æ³•æ¥ç”Ÿæˆ initï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function binaryExpression(    operator: &quot;+&quot; | &quot;-&quot; | &quot;/&quot; | &quot;%&quot; | &quot;*&quot; | &quot;**&quot; | &quot;&amp;&quot; | &quot;|&quot; | &quot;&gt;&gt;&quot; | &quot;&gt;&gt;&gt;&quot; | &quot;&lt;&lt;&quot; | &quot;^&quot; | &quot;==&quot; | &quot;===&quot; | &quot;!=&quot; | &quot;!==&quot; | &quot;in&quot; | &quot;instanceof&quot; | &quot;&gt;&quot; | &quot;&lt;&quot; | &quot;&gt;=&quot; | &quot;&lt;=&quot;,    left: BabelNodeExpression | BabelNodePrivateName,     right: BabelNodeExpression)</code></pre><p>æ­¤æ—¶ <code>visitor</code> ä»£ç å°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre><code class="javascript">const visitor = &#123;    VariableDeclaration(path) &#123;        let init = types.binaryExpression(&quot;+&quot;, left, right)        let declarator = types.variableDeclarator(types.identifier(&quot;b&quot;), init)        let declaration = types.variableDeclaration(&quot;const&quot;, [declarator])        path.insertAfter(declaration)    &#125;&#125;</code></pre><p>ç„¶åç»§ç»­æ„é€  left å’Œ rightï¼Œå’Œå‰é¢çš„æ–¹æ³•ä¸€æ ·ï¼Œè§‚å¯Ÿ AST è¯­æ³•æ ‘ï¼ŒæŸ¥è¯¢å¯¹åº”æ–¹æ³•åº”è¯¥ä¼ å…¥çš„å‚æ•°ï¼Œå±‚å±‚åµŒå¥—ï¼Œç›´åˆ°æŠŠæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ„é€ å®Œæ¯•ï¼Œæœ€ç»ˆçš„ <code>visitor</code> ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="javascript">const visitor = &#123;    VariableDeclaration(path) &#123;        let left = types.binaryExpression(&quot;*&quot;, types.identifier(&quot;a&quot;), types.numericLiteral(5))        let right = types.numericLiteral(1)        let init = types.binaryExpression(&quot;+&quot;, left, right)        let declarator = types.variableDeclarator(types.identifier(&quot;b&quot;), init)        let declaration = types.variableDeclaration(&quot;const&quot;, [declarator])        path.insertAfter(declaration)        path.stop()    &#125;&#125;</code></pre><p>æ³¨æ„ï¼š<code>path.insertAfter()</code> æ’å…¥èŠ‚ç‚¹è¯­å¥åé¢åŠ äº†ä¸€å¥ <code>path.stop()</code>ï¼Œè¡¨ç¤ºæ’å…¥å®Œæˆåç«‹å³åœæ­¢éå†å½“å‰èŠ‚ç‚¹å’Œåç»­çš„å­èŠ‚ç‚¹ï¼Œæ·»åŠ çš„æ–°èŠ‚ç‚¹ä¹Ÿæ˜¯ <code>VariableDeclaration</code>ï¼Œå¦‚æœä¸åŠ åœæ­¢è¯­å¥çš„è¯ï¼Œå°±ä¼šæ— é™å¾ªç¯æ’å…¥ä¸‹å»ã€‚</p><p>æ’å…¥æ–°èŠ‚ç‚¹åï¼Œå†è½¬æ¢æˆ JavaScript ä»£ç ï¼Œå°±å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€è¡Œæ–°ä»£ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/79269e1d54071214b2438eed3bf58d15.png" alt="14"></p><h2 id="å¸¸è§æ··æ·†è¿˜åŸ"><a href="#å¸¸è§æ··æ·†è¿˜åŸ" class="headerlink" title="å¸¸è§æ··æ·†è¿˜åŸ"></a>å¸¸è§æ··æ·†è¿˜åŸ</h2><p>äº†è§£äº† AST å’Œ babel åï¼Œå°±å¯ä»¥å¯¹ JavaScript æ··æ·†ä»£ç è¿›è¡Œè¿˜åŸäº†ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æ ·ä¾‹ï¼Œå¸¦ä½ è¿›ä¸€æ­¥ç†Ÿæ‚‰ babel çš„å„ç§æ“ä½œã€‚</p><h3 id="å­—ç¬¦ä¸²è¿˜åŸ"><a href="#å­—ç¬¦ä¸²è¿˜åŸ" class="headerlink" title="å­—ç¬¦ä¸²è¿˜åŸ"></a>å­—ç¬¦ä¸²è¿˜åŸ</h3><p>æ–‡ç« å¼€å¤´çš„å›¾ä¸­ä¸¾äº†ä¸ªä¾‹å­ï¼Œæ­£å¸¸å­—ç¬¦è¢«æ¢æˆäº† Unicode ç¼–ç ï¼š</p><pre><code class="javascript">console[&#39;\u006c\u006f\u0067&#39;](&#39;\u0048\u0065\u006c\u006c\u006f\u0020\u0077\u006f\u0072\u006c\u0064\u0021&#39;)</code></pre><p>è§‚å¯Ÿ AST ç»“æ„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/59b4fc53c0c3aa2a0873a76a5d88c175.png" alt="15"></p><p>æˆ‘ä»¬å‘ç° Unicode ç¼–ç å¯¹åº”çš„æ˜¯ <code>raw</code>ï¼Œè€Œ <code>rawValue</code> å’Œ <code>value</code> éƒ½æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† <code>raw</code> æ›¿æ¢æˆ <code>rawValue</code> æˆ– <code>value</code> å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¼•å·çš„é—®é¢˜ï¼Œæœ¬æ¥æ˜¯ <code>console[&quot;log&quot;]</code>ï¼Œä½ è¿˜åŸåå˜æˆäº† <code>console[log]</code>ï¼Œè‡ªç„¶ä¼šæŠ¥é”™çš„ï¼Œé™¤äº†æ›¿æ¢å€¼ä»¥å¤–ï¼Œè¿™é‡Œç›´æ¥åˆ é™¤ extra èŠ‚ç‚¹ï¼Œæˆ–è€…åˆ é™¤ raw å€¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ‰€ä»¥ä»¥ä¸‹å‡ ç§å†™æ³•éƒ½å¯ä»¥è¿˜åŸä»£ç ï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst code = `console[&#39;\u006c\u006f\u0067&#39;](&#39;\u0048\u0065\u006c\u006c\u006f\u0020\u0077\u006f\u0072\u006c\u0064\u0021&#39;)`const ast = parser.parse(code)const visitor = &#123;    StringLiteral(path) &#123;        // ä»¥ä¸‹æ–¹æ³•å‡å¯        // path.node.extra.raw = path.node.rawValue        // path.node.extra.raw = &#39;&quot;&#39; + path.node.value + &#39;&quot;&#39;        // delete path.node.extra        delete path.node.extra.raw    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>è¿˜åŸç»“æœï¼š</p><pre><code class="javascript">console[&quot;log&quot;](&quot;Hello world!&quot;);</code></pre><h3 id="è¡¨è¾¾å¼è¿˜åŸ"><a href="#è¡¨è¾¾å¼è¿˜åŸ" class="headerlink" title="è¡¨è¾¾å¼è¿˜åŸ"></a>è¡¨è¾¾å¼è¿˜åŸ</h3><p>ä¹‹å‰å†™è¿‡ <a href="https://itrhx.blog.csdn.net/article/details/122057377">JSFuck æ··æ·†çš„è¿˜åŸ</a>ï¼Œå…¶ä¸­æœ‰ä»‹ç» <code>![]</code> å¯è¡¨ç¤º falseï¼Œ<code>!![]</code> æˆ–è€… <code>!+[]</code> å¯è¡¨ç¤º trueï¼Œåœ¨ä¸€äº›æ··æ·†ä»£ç ä¸­ï¼Œç»å¸¸æœ‰è¿™äº›æ“ä½œï¼ŒæŠŠç®€å•çš„è¡¨è¾¾å¼å¤æ‚åŒ–ï¼Œå¾€å¾€éœ€è¦æ‰§è¡Œä¸€ä¸‹è¯­å¥ï¼Œæ‰èƒ½å¾—åˆ°çœŸæ­£çš„ç»“æœï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">const a = !![]+!![]+!![];const b = Math.floor(12.34 * 2.12)const c = 10 &gt;&gt; 3 &lt;&lt; 1const d = String(21.3 + 14 * 1.32)const e = parseInt(&quot;1.893&quot; + &quot;45.9088&quot;)const f = parseFloat(&quot;23.2334&quot; + &quot;21.89112&quot;)const g = 20 &lt; 18 ? &#39;æœªæˆå¹´&#39; : &#39;æˆå¹´&#39;</code></pre><p>æƒ³è¦æ‰§è¡Œè¯­å¥ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ <code>path.evaluate()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå¯¹ path å¯¹è±¡è¿›è¡Œæ‰§è¡Œæ“ä½œï¼Œè‡ªåŠ¨è®¡ç®—å‡ºç»“æœï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­çš„ <code>confident</code> å±æ€§è¡¨ç¤ºç½®ä¿¡åº¦ï¼Œ<code>value</code> è¡¨ç¤ºè®¡ç®—ç»“æœï¼Œä½¿ç”¨ <code>types.valueToNode()</code> æ–¹æ³•åˆ›å»ºèŠ‚ç‚¹ï¼Œä½¿ç”¨ <code>path.replaceInline()</code> æ–¹æ³•å°†èŠ‚ç‚¹æ›¿æ¢æˆè®¡ç®—ç»“æœç”Ÿæˆçš„æ–°èŠ‚ç‚¹ï¼Œæ›¿æ¢æ–¹æ³•æœ‰ä¸€ä¸‹å‡ ç§ï¼š</p><ul><li><code>replaceWith</code>ï¼šç”¨ä¸€ä¸ªèŠ‚ç‚¹æ›¿æ¢å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼›</li><li><code>replaceWithMultiple</code>ï¼šç”¨å¤šä¸ªèŠ‚ç‚¹æ›¿æ¢å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼›</li><li><code>replaceWithSourceString</code>ï¼šå°†ä¼ å…¥çš„æºç å­—ç¬¦ä¸²è§£ææˆå¯¹åº” Node åå†æ›¿æ¢ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼›</li><li><code>replaceInline</code>ï¼šç”¨ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹æ›¿æ¢å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›¸å½“äºåŒæ—¶æœ‰äº†å‰ä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½ã€‚</li></ul><p>å¯¹åº”çš„ AST å¤„ç†ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst types = require(&quot;@babel/types&quot;)const code = `const a = !![]+!![]+!![];const b = Math.floor(12.34 * 2.12)const c = 10 &gt;&gt; 3 &lt;&lt; 1const d = String(21.3 + 14 * 1.32)const e = parseInt(&quot;1.893&quot; + &quot;45.9088&quot;)const f = parseFloat(&quot;23.2334&quot; + &quot;21.89112&quot;)const g = 20 &lt; 18 ? &#39;æœªæˆå¹´&#39; : &#39;æˆå¹´&#39;`const ast = parser.parse(code)const visitor = &#123;    &quot;BinaryExpression|CallExpression|ConditionalExpression&quot;(path) &#123;        const &#123;confident, value&#125; = path.evaluate()        if (confident)&#123;            path.replaceInline(types.valueToNode(value))        &#125;    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>æœ€ç»ˆç»“æœï¼š</p><pre><code class="javascript">const a = 3;const b = 26;const c = 2;const d = &quot;39.78&quot;;const e = parseInt(&quot;1.89345.9088&quot;);const f = parseFloat(&quot;23.233421.89112&quot;);const g = &quot;\u6210\u5E74&quot;;</code></pre><h3 id="åˆ é™¤æœªä½¿ç”¨å˜é‡"><a href="#åˆ é™¤æœªä½¿ç”¨å˜é‡" class="headerlink" title="åˆ é™¤æœªä½¿ç”¨å˜é‡"></a>åˆ é™¤æœªä½¿ç”¨å˜é‡</h3><p>æœ‰æ—¶å€™ä»£ç é‡Œä¼šæœ‰ä¸€äº›å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°çš„å¤šä½™å˜é‡ï¼Œåˆ é™¤è¿™äº›å¤šä½™å˜é‡æœ‰åŠ©äºæ›´åŠ é«˜æ•ˆçš„åˆ†æä»£ç ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">const a = 1;const b = a * 2;const c = 2;const d = b + 1;const e = 3;console.log(d)</code></pre><p>åˆ é™¤å¤šä½™å˜é‡ï¼Œé¦–å…ˆè¦äº†è§£ <code>NodePath</code> ä¸­çš„ <code>scope</code>ï¼Œ<code>scope</code> çš„ä½œç”¨ä¸»è¦æ˜¯æŸ¥æ‰¾æ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸã€è·å–å¹¶ä¿®æ”¹æ ‡è¯†ç¬¦çš„æ‰€æœ‰å¼•ç”¨ç­‰ï¼Œåˆ é™¤æœªä½¿ç”¨å˜é‡ä¸»è¦ç”¨åˆ°äº† <code>scope.getBinding()</code> æ–¹æ³•ï¼Œä¼ å…¥çš„å€¼æ˜¯å½“å‰èŠ‚ç‚¹èƒ½å¤Ÿå¼•ç”¨åˆ°çš„æ ‡è¯†ç¬¦åç§°ï¼Œè¿”å›çš„å…³é”®å±æ€§æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li><code>identifier</code>ï¼šæ ‡è¯†ç¬¦çš„ Node å¯¹è±¡ï¼›</li><li><code>path</code>ï¼šæ ‡è¯†ç¬¦çš„ NodePath å¯¹è±¡ï¼›</li><li><code>constant</code>ï¼šæ ‡è¯†ç¬¦æ˜¯å¦ä¸ºå¸¸é‡ï¼›</li><li><code>referenced</code>ï¼šæ ‡è¯†ç¬¦æ˜¯å¦è¢«å¼•ç”¨ï¼›</li><li><code> references</code>ï¼šæ ‡è¯†ç¬¦è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼›</li><li><code>constantViolations</code>ï¼šå¦‚æœæ ‡è¯†ç¬¦è¢«ä¿®æ”¹ï¼Œåˆ™ä¼šå­˜æ”¾æ‰€æœ‰ä¿®æ”¹è¯¥æ ‡è¯†ç¬¦èŠ‚ç‚¹çš„ Path å¯¹è±¡ï¼›</li><li><code>referencePaths</code>ï¼šå¦‚æœæ ‡è¯†ç¬¦è¢«å¼•ç”¨ï¼Œåˆ™ä¼šå­˜æ”¾æ‰€æœ‰å¼•ç”¨è¯¥æ ‡è¯†ç¬¦èŠ‚ç‚¹çš„ Path å¯¹è±¡ã€‚</li></ul><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>constantViolations</code>ã€<code>referenced</code>ã€<code>references</code>ã€<code>referencePaths</code> å¤šä¸ªå‚æ•°æ¥åˆ¤æ–­å˜é‡æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼ŒAST å¤„ç†ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst code = `const a = 1;const b = a * 2;const c = 2;const d = b + 1;const e = 3;console.log(d)`const ast = parser.parse(code)const visitor = &#123;    VariableDeclarator(path)&#123;        const binding = path.scope.getBinding(path.node.id.name);        // å¦‚æ ‡è¯†ç¬¦è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™ä¸èƒ½è¿›è¡Œåˆ é™¤åŠ¨ä½œã€‚        if (!binding || binding.constantViolations.length &gt; 0) &#123;            return;        &#125;        // æœªè¢«å¼•ç”¨        if (!binding.referenced) &#123;            path.remove();        &#125;        // è¢«å¼•ç”¨æ¬¡æ•°ä¸º0        // if (binding.references === 0) &#123;        //     path.remove();        // &#125;        // é•¿åº¦ä¸º0ï¼Œå˜é‡æ²¡æœ‰è¢«å¼•ç”¨è¿‡        // if (binding.referencePaths.length === 0) &#123;        //     path.remove();        // &#125;    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>å¤„ç†åçš„ä»£ç ï¼ˆæœªä½¿ç”¨çš„ bã€cã€e å˜é‡å·²è¢«åˆ é™¤ï¼‰ï¼š</p><pre><code class="javascript">const a = 1;const b = a * 2;const d = b + 1;console.log(d);</code></pre><h3 id="åˆ é™¤å†—ä½™é€»è¾‘ä»£ç "><a href="#åˆ é™¤å†—ä½™é€»è¾‘ä»£ç " class="headerlink" title="åˆ é™¤å†—ä½™é€»è¾‘ä»£ç "></a>åˆ é™¤å†—ä½™é€»è¾‘ä»£ç </h3><p>æœ‰æ—¶å€™ä¸ºäº†å¢åŠ é€†å‘éš¾åº¦ï¼Œä¼šæœ‰å¾ˆå¤šåµŒå¥—çš„ if-else è¯­å¥ï¼Œå¤§é‡åˆ¤æ–­ä¸ºå‡çš„å†—ä½™é€»è¾‘ä»£ç ï¼ŒåŒæ ·å¯ä»¥åˆ©ç”¨ AST å°†å…¶åˆ é™¤æ‰ï¼Œåªç•™ä¸‹åˆ¤æ–­ä¸ºçœŸçš„ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">const example = function () &#123;    let a;    if (false) &#123;        a = 1;    &#125; else &#123;        if (1) &#123;            a = 2;        &#125;        else &#123;            a = 3;        &#125;    &#125;    return a;&#125;;</code></pre><p>è§‚å¯Ÿ ASTï¼Œåˆ¤æ–­æ¡ä»¶å¯¹åº”çš„æ˜¯ <code>test</code> èŠ‚ç‚¹ï¼Œif å¯¹åº”çš„æ˜¯ <code>consequent</code> èŠ‚ç‚¹ï¼Œelse å¯¹åº”çš„æ˜¯ <code>alternate</code> èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/11bee2b313c5327859074428625a9348.png" alt="16"></p><p>AST å¤„ç†æ€è·¯ä»¥åŠä»£ç ï¼š</p><ol><li>ç­›é€‰å‡º <code>BooleanLiteral</code> å’Œ <code>NumericLiteral</code> èŠ‚ç‚¹ï¼Œå–å…¶å¯¹åº”çš„å€¼ï¼Œå³ <code>path.node.test.value</code>ï¼›</li><li>åˆ¤æ–­ <code>value</code> å€¼ä¸ºçœŸï¼Œåˆ™å°†èŠ‚ç‚¹æ›¿æ¢æˆ <code>consequent</code> èŠ‚ç‚¹ä¸‹çš„å†…å®¹ï¼Œå³ <code>path.node.consequent.body</code>ï¼›</li><li>åˆ¤æ–­ <code>value</code> å€¼ä¸ºå‡ï¼Œåˆ™æ›¿æ¢æˆ <code>alternate</code> èŠ‚ç‚¹ä¸‹çš„å†…å®¹ï¼Œå³ <code>path.node.alternate.body</code>ï¼›</li><li>æœ‰çš„ if è¯­å¥å¯èƒ½æ²¡æœ‰å†™ elseï¼Œä¹Ÿå°±æ²¡æœ‰ <code>alternate</code>ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹åˆ¤æ–­ <code>value</code> å€¼ä¸ºå‡ï¼Œåˆ™ç›´æ¥ç§»é™¤è¯¥èŠ‚ç‚¹ï¼Œå³ <code>path.remove()</code></li></ol><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst types = require(&#39;@babel/types&#39;);const code = `const example = function () &#123;    let a;    if (false) &#123;        a = 1;    &#125; else &#123;        if (1) &#123;            a = 2;        &#125;        else &#123;            a = 3;        &#125;    &#125;    return a;&#125;;`const ast = parser.parse(code)const visitor = &#123;    enter(path) &#123;        if (types.isBooleanLiteral(path.node.test) || types.isNumericLiteral(path.node.test)) &#123;            if (path.node.test.value) &#123;                path.replaceInline(path.node.consequent.body);            &#125; else &#123;                if (path.node.alternate) &#123;                    path.replaceInline(path.node.alternate.body);                &#125; else &#123;                    path.remove()                &#125;            &#125;        &#125;    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>å¤„ç†ç»“æœï¼š</p><pre><code class="javascript">const example = function () &#123;  let a;  a = 2;  return a;&#125;;</code></pre><h3 id="switch-case-åæ§åˆ¶æµå¹³å¦åŒ–"><a href="#switch-case-åæ§åˆ¶æµå¹³å¦åŒ–" class="headerlink" title="switch-case åæ§åˆ¶æµå¹³å¦åŒ–"></a>switch-case åæ§åˆ¶æµå¹³å¦åŒ–</h3><p>æ§åˆ¶æµå¹³å¦åŒ–æ˜¯æ··æ·†å½“ä¸­æœ€å¸¸è§çš„ï¼Œé€šè¿‡ <code>if-else</code> æˆ–è€… <code>while-switch-case</code> è¯­å¥åˆ†è§£æ­¥éª¤ï¼Œç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="javascript">const _0x34e16a = &#39;3,4,0,5,1,2&#39;[&#39;split&#39;](&#39;,&#39;);let _0x2eff02 = 0x0;while (!![]) &#123;    switch (_0x34e16a[_0x2eff02++]) &#123;        case&#39;0&#39;:            let _0x38cb15 = _0x4588f1 + _0x470e97;            continue;        case&#39;1&#39;:            let _0x1e0e5e = _0x37b9f3[_0x50cee0(0x2e0, 0x2e8, 0x2e1, 0x2e4)];            continue;        case&#39;2&#39;:            let _0x35d732 = [_0x388d4b(-0x134, -0x134, -0x139, -0x138)](_0x38cb15 &gt;&gt; _0x4588f1);            continue;        case&#39;3&#39;:            let _0x4588f1 = 0x1;            continue;        case&#39;4&#39;:            let _0x470e97 = 0x2;            continue;        case&#39;5&#39;:            let _0x37b9f3 = 0x5 || _0x38cb15;            continue;    &#125;    break;&#125;</code></pre><p>AST è¿˜åŸæ€è·¯ï¼š</p><ol><li>è·å–æ§åˆ¶æµåŸå§‹æ•°ç»„ï¼Œå°† <code>&#39;3,4,0,5,1,2&#39;[&#39;split&#39;](&#39;,&#39;)</code> ä¹‹ç±»çš„è¯­å¥è½¬åŒ–æˆ <code>[&#39;3&#39;,&#39;4&#39;,&#39;0&#39;,&#39;5&#39;,&#39;1&#39;,&#39;2&#39;]</code> ä¹‹ç±»çš„æ•°ç»„ï¼Œå¾—åˆ°è¯¥æ•°ç»„ä¹‹åï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æŠŠ split è¯­å¥å¯¹åº”çš„èŠ‚ç‚¹åˆ é™¤æ‰ï¼Œå› ä¸ºæœ€ç»ˆä»£ç é‡Œè¿™æ¡è¯­å¥å°±æ²¡ç”¨äº†ï¼›</li><li>éå†ç¬¬ä¸€æ­¥å¾—åˆ°çš„æ§åˆ¶æµæ•°ç»„ï¼Œä¾æ¬¡å–å‡ºæ¯ä¸ªå€¼æ‰€å¯¹åº”çš„ case èŠ‚ç‚¹ï¼›</li><li>å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œå‚¨å­˜æ¯ä¸ª case èŠ‚ç‚¹ <code>consequent</code> æ•°ç»„é‡Œé¢çš„å†…å®¹ï¼Œå¹¶åˆ é™¤ <code>continue</code> è¯­å¥å¯¹åº”çš„èŠ‚ç‚¹ï¼›</li><li>éå†å®Œæˆåï¼Œå°†ç¬¬ä¸‰æ­¥çš„æ•°ç»„æ›¿æ¢æ‰æ•´ä¸ª while èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ <code>WhileStatement</code>ã€‚</li></ol><p>ä¸åŒæ€è·¯ï¼Œå†™æ³•å¤šæ ·ï¼Œå¯¹äºå¦‚ä½•è·å–æ§åˆ¶æµæ•°ç»„ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹æ€è·¯ï¼š</p><ol><li>è·å–åˆ° <code>While</code> è¯­å¥èŠ‚ç‚¹ï¼Œç„¶åä½¿ç”¨ <code>path.getAllPrevSiblings()</code> æ–¹æ³•è·å–å…¶å‰é¢çš„æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼Œéå†æ¯ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼Œæ‰¾åˆ°ä¸ <code>switch()</code> é‡Œé¢æ•°ç»„çš„å˜é‡åç›¸åŒçš„èŠ‚ç‚¹ï¼Œç„¶åå†å–èŠ‚ç‚¹çš„å€¼è¿›è¡Œåç»­å¤„ç†ï¼›</li><li>ç›´æ¥å– <code>switch()</code> é‡Œé¢æ•°ç»„çš„å˜é‡åï¼Œç„¶åä½¿ç”¨ <code>scope.getBinding()</code> æ–¹æ³•è·å–åˆ°å®ƒç»‘å®šçš„èŠ‚ç‚¹ï¼Œç„¶åå†å–è¿™ä¸ªèŠ‚ç‚¹çš„å€¼è¿›è¡Œåç»­å¤„ç†ã€‚</li></ol><p>æ‰€ä»¥ AST å¤„ç†ä»£ç å°±æœ‰ä¸¤ç§å†™æ³•ï¼Œæ–¹æ³•ä¸€ï¼šï¼ˆcode.js å³ä¸ºå‰é¢çš„ç¤ºä¾‹ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œè¿™é‡Œä½¿ç”¨ fs ä»æ–‡ä»¶ä¸­è¯»å–ä»£ç ï¼‰</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst types = require(&quot;@babel/types&quot;)const fs = require(&quot;fs&quot;);const code = fs.readFileSync(&quot;code.js&quot;, &#123;encoding: &quot;utf-8&quot;&#125;);const ast = parser.parse(code)const visitor = &#123;    WhileStatement(path) &#123;        // switch èŠ‚ç‚¹        let switchNode = path.node.body.body[0];        // switch è¯­å¥å†…çš„æ§åˆ¶æµæ•°ç»„åï¼Œæœ¬ä¾‹ä¸­æ˜¯ _0x34e16a        let arrayName = switchNode.discriminant.object.name;        // è·å¾—æ‰€æœ‰ while å‰é¢çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œæœ¬ä¾‹ä¸­è·å–åˆ°çš„æ˜¯å£°æ˜ä¸¤ä¸ªå˜é‡çš„èŠ‚ç‚¹ï¼Œå³ const _0x34e16a å’Œ let _0x2eff02        let prevSiblings = path.getAllPrevSiblings();        // å®šä¹‰ç¼“å­˜æ§åˆ¶æµæ•°ç»„        let array = []        // forEach æ–¹æ³•éå†æ‰€æœ‰èŠ‚ç‚¹        prevSiblings.forEach(pervNode =&gt; &#123;            let &#123;id, init&#125; = pervNode.node.declarations[0];            // å¦‚æœèŠ‚ç‚¹ id.name ä¸ switch è¯­å¥å†…çš„æ§åˆ¶æµæ•°ç»„åç›¸åŒ            if (arrayName === id.name) &#123;                // è·å–èŠ‚ç‚¹æ•´ä¸ªè¡¨è¾¾å¼çš„å‚æ•°ã€åˆ†å‰²æ–¹æ³•ã€åˆ†éš”ç¬¦                let object = init.callee.object.value;                let property = init.callee.property.value;                let argument = init.arguments[0].value;                // æ¨¡æ‹Ÿæ‰§è¡Œ &#39;3,4,0,5,1,2&#39;[&#39;split&#39;](&#39;,&#39;) è¯­å¥                array = object[property](argument)                // ä¹Ÿå¯ä»¥ç›´æ¥å–å‚æ•°è¿›è¡Œåˆ†å‰²ï¼Œæ–¹æ³•ä¸é€šç”¨ï¼Œæ¯”å¦‚åˆ†éš”ç¬¦æ¢æˆ | å°±ä¸è¡Œäº†                // array = init.callee.object.value.split(&#39;,&#39;);            &#125;            // å‰é¢çš„å…„å¼ŸèŠ‚ç‚¹å°±å¯ä»¥åˆ é™¤äº†            pervNode.remove();        &#125;);        // å‚¨å­˜æ­£ç¡®é¡ºåºçš„æ§åˆ¶æµè¯­å¥        let replace = [];        // éå†æ§åˆ¶æµæ•°ç»„ï¼ŒæŒ‰æ­£ç¡®é¡ºåºå– case å†…å®¹        array.forEach(index =&gt; &#123;                let consequent = switchNode.cases[index].consequent;                // å¦‚æœæœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯ continue è¯­å¥ï¼Œåˆ™åˆ é™¤ ContinueStatement èŠ‚ç‚¹                if (types.isContinueStatement(consequent[consequent.length - 1])) &#123;                    consequent.pop();                &#125;                // concat æ–¹æ³•æ‹¼æ¥å¤šä¸ªæ•°ç»„ï¼Œå³æ­£ç¡®é¡ºåºçš„ case å†…å®¹                replace = replace.concat(consequent);            &#125;        );        // æ›¿æ¢æ•´ä¸ª while èŠ‚ç‚¹ï¼Œä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥        path.replaceWithMultiple(replace);        // path.replaceInline(replace);    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>æ–¹æ³•äºŒï¼š</p><pre><code class="javascript">const parser = require(&quot;@babel/parser&quot;);const generate = require(&quot;@babel/generator&quot;).defaultconst traverse = require(&quot;@babel/traverse&quot;).defaultconst types = require(&quot;@babel/types&quot;)const fs = require(&quot;fs&quot;);const code = fs.readFileSync(&quot;code.js&quot;, &#123;encoding: &quot;utf-8&quot;&#125;);const ast = parser.parse(code)const visitor = &#123;    WhileStatement(path) &#123;        // switch èŠ‚ç‚¹        let switchNode = path.node.body.body[0];        // switch è¯­å¥å†…çš„æ§åˆ¶æµæ•°ç»„åï¼Œæœ¬ä¾‹ä¸­æ˜¯ _0x34e16a        let arrayName = switchNode.discriminant.object.name;        // è·å–æ§åˆ¶æµæ•°ç»„ç»‘å®šçš„èŠ‚ç‚¹        let bindingArray = path.scope.getBinding(arrayName);        // è·å–èŠ‚ç‚¹æ•´ä¸ªè¡¨è¾¾å¼çš„å‚æ•°ã€åˆ†å‰²æ–¹æ³•ã€åˆ†éš”ç¬¦        let init = bindingArray.path.node.init;        let object = init.callee.object.value;        let property = init.callee.property.value;        let argument = init.arguments[0].value;        // æ¨¡æ‹Ÿæ‰§è¡Œ &#39;3,4,0,5,1,2&#39;[&#39;split&#39;](&#39;,&#39;) è¯­å¥        let array = object[property](argument)        // ä¹Ÿå¯ä»¥ç›´æ¥å–å‚æ•°è¿›è¡Œåˆ†å‰²ï¼Œæ–¹æ³•ä¸é€šç”¨ï¼Œæ¯”å¦‚åˆ†éš”ç¬¦æ¢æˆ | å°±ä¸è¡Œäº†        // let array = init.callee.object.value.split(&#39;,&#39;);        // switch è¯­å¥å†…çš„æ§åˆ¶æµè‡ªå¢å˜é‡åï¼Œæœ¬ä¾‹ä¸­æ˜¯ _0x2eff02        let autoIncrementName = switchNode.discriminant.property.argument.name;        // è·å–æ§åˆ¶æµè‡ªå¢å˜é‡åç»‘å®šçš„èŠ‚ç‚¹        let bindingAutoIncrement = path.scope.getBinding(autoIncrementName);        // å¯é€‰æ‹©çš„æ“ä½œï¼šåˆ é™¤æ§åˆ¶æµæ•°ç»„ç»‘å®šçš„èŠ‚ç‚¹ã€è‡ªå¢å˜é‡åç»‘å®šçš„èŠ‚ç‚¹        bindingArray.path.remove();        bindingAutoIncrement.path.remove();        // å‚¨å­˜æ­£ç¡®é¡ºåºçš„æ§åˆ¶æµè¯­å¥        let replace = [];        // éå†æ§åˆ¶æµæ•°ç»„ï¼ŒæŒ‰æ­£ç¡®é¡ºåºå– case å†…å®¹        array.forEach(index =&gt; &#123;                let consequent = switchNode.cases[index].consequent;                // å¦‚æœæœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯ continue è¯­å¥ï¼Œåˆ™åˆ é™¤ ContinueStatement èŠ‚ç‚¹                if (types.isContinueStatement(consequent[consequent.length - 1])) &#123;                    consequent.pop();                &#125;                // concat æ–¹æ³•æ‹¼æ¥å¤šä¸ªæ•°ç»„ï¼Œå³æ­£ç¡®é¡ºåºçš„ case å†…å®¹                replace = replace.concat(consequent);            &#125;        );        // æ›¿æ¢æ•´ä¸ª while èŠ‚ç‚¹ï¼Œä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥        path.replaceWithMultiple(replace);        // path.replaceInline(replace);    &#125;&#125;traverse(ast, visitor)const result = generate(ast)console.log(result.code)</code></pre><p>ä»¥ä¸Šä»£ç è¿è¡Œåï¼ŒåŸæ¥çš„ <code>switch-case</code> æ§åˆ¶æµå°±è¢«è¿˜åŸäº†ï¼Œå˜æˆäº†æŒ‰é¡ºåºä¸€è¡Œä¸€è¡Œçš„ä»£ç ï¼Œæ›´åŠ ç®€æ´æ˜äº†ï¼š</p><pre><code class="javascript">let _0x4588f1 = 0x1;let _0x470e97 = 0x2;let _0x38cb15 = _0x4588f1 + _0x470e97;let _0x37b9f3 = 0x5 || _0x38cb15;let _0x1e0e5e = _0x37b9f3[_0x50cee0(0x2e0, 0x2e8, 0x2e1, 0x2e4)];let _0x35d732 = [_0x388d4b(-0x134, -0x134, -0x139, -0x138)](_0x38cb15 &gt;&gt; _0x4588f1);</code></pre><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>æœ¬æ–‡æœ‰å‚è€ƒä»¥ä¸‹èµ„æ–™ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæ¨èçš„åœ¨çº¿å­¦ä¹ èµ„æ–™ï¼š</p><ul><li>Youtube è§†é¢‘ï¼ŒBabel å…¥é—¨ï¼š<a href="https://www.youtube.com/watch?v=UeVq_U5obnE">https://www.youtube.com/watch?v=UeVq_U5obnE</a></li><li>å®˜æ–¹æ‰‹å†Œ Babel Handbookï¼š<a href="https://github.com/jamiebuilds/babel-handbook">https://github.com/jamiebuilds/babel-handbook</a></li><li>éå®˜æ–¹ Babel API ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://evilrecluse.top/Babel-traverse-api-doc/">https://evilrecluse.top/Babel-traverse-api-doc/</a></li></ul><h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><p>Babel ç¼–è¯‘å™¨å›½å†…çš„èµ„æ–™å…¶å®ä¸æ˜¯å¾ˆå¤šï¼Œå¤šçœ‹æºç ã€åŒæ—¶åœ¨çº¿å¯¹ç…§å¯è§†åŒ–çš„ AST è¯­æ³•æ ‘ï¼Œè€å¿ƒä¸€ç‚¹å„¿ä¸€å±‚ä¸€å±‚åˆ†æå³å¯ï¼Œæœ¬æ–‡ä¸­çš„æ¡ˆä¾‹ä¹Ÿåªæ˜¯æœ€åŸºæœ¬æ“ä½œï¼Œå®é™…é‡åˆ°ä¸€äº›æ··æ·†è¿˜å¾—è§†æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚éœ€è¦åŠ ä¸€äº›ç±»å‹åˆ¤æ–­æ¥é™åˆ¶ç­‰ï¼Œåç»­ä¼šç”¨å®æˆ˜æ¥å¸¦é¢†å¤§å®¶è¿›ä¸€æ­¥ç†Ÿæ‚‰è§£æ··æ·†å½“ä¸­çš„å…¶ä»–æ“ä½œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-AST&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-AST&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ AST&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ AST&lt;/h2&gt;&lt;p&gt;ASTï¼ˆAbstract Syntax Treeï¼‰ï¼Œä¸­æ–‡æŠ½è±¡è¯­æ³•æ ‘ï¼Œç®€ç§°è¯­æ³•æ ‘ï¼ˆSyntax Tre</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>ã€JS é€†å‘ã€‘ç½‘æ´›è€…åçˆ¬ç»ƒä¹ å¹³å°ç¬¬ä¸ƒé¢˜ï¼šJSVMPZL åˆä½“éªŒ</title>
    <link href="https://www.itbob.cn/article/050/"/>
    <id>https://www.itbob.cn/article/050/</id>
    <published>2022-04-06T05:39:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p><strong>æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œè‹¥æœ‰ä¾µæƒï¼Œè¯·åœ¨å…¬ä¼—å·è”ç³»æˆ‘ç«‹å³åˆ é™¤ï¼</strong></p><h2 id="é€†å‘ç›®æ ‡"><a href="#é€†å‘ç›®æ ‡" class="headerlink" title="é€†å‘ç›®æ ‡"></a>é€†å‘ç›®æ ‡</h2><ul><li>ç›®æ ‡ï¼šç½‘æ´›è€…ååçˆ¬è™«ç»ƒä¹ å¹³å°ç¬¬ä¸ƒé¢˜ï¼šJSVMPZL åˆä½“éªŒ</li><li>é“¾æ¥ï¼š<a href="http://spider.wangluozhe.com/challenge/7">http://spider.wangluozhe.com/challenge/7</a></li><li>ç®€ä»‹ï¼šå¹³å°æ³¨å†Œéœ€è¦é‚€è¯·ç ï¼Œç«™é•¿åœ¨ç¾¤é‡Œï¼Œå¯åå°å›å¤äº¤æµç¾¤åŠ ç¾¤è·å–ï¼Œæˆ–è€…ç›´æ¥åŠ ç½‘ç«™åº•éƒ¨ç«™é•¿QQè·å–ã€‚è¦æ±‚é‡‡é›†100é¡µçš„å…¨éƒ¨æ•°å­—ï¼Œå¹¶è®¡ç®—æ‰€æœ‰æ•°æ®åŠ å’Œã€‚ä¸»è¦éš¾ç‚¹åœ¨äº vvv å¤§ä½¬å¼€å‘çš„ JS æ··æ·†æ¡†æ¶ï¼šjsvmpzl</li></ul><p><img src="https://img-blog.csdnimg.cn/img_convert/adc6eb6d3f2480b306a9e27b85cea3b5.png" alt="01"></p><h2 id="é€†å‘è¿‡ç¨‹"><a href="#é€†å‘è¿‡ç¨‹" class="headerlink" title="é€†å‘è¿‡ç¨‹"></a>é€†å‘è¿‡ç¨‹</h2><p>ç›´æ¥æœç´¢ï¼Œæˆ–è€…è·Ÿæ ˆï¼Œå¯ä»¥è½»æ¾æ‰¾åˆ°åŠ å¯†å…¥å£ï¼Œæ‰“å¼€ F12 æœ‰ä¸¤ä¸ªåè°ƒè¯•ï¼Œä¸€æ˜¯æ— é™ debuggerï¼Œå³é”® Never pause here å³å¯ï¼ŒäºŒæ˜¯å®šæ—¶å™¨ï¼Œæ§åˆ¶å°è¾“å…¥ <code>for (let i = 1; i &lt; 99999; i++) window.clearInterval(i);</code> è¿‡æ‰å³å¯ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/5b01302e20f7265f8732b19b0150df6f.png" alt="02"></p><p>è·Ÿè¿› <code>y__()</code>ï¼Œå°±å¯ä»¥çœ‹åˆ° jsvmpzl æ··æ·†çš„ä»£ç äº†ï¼Œå¦‚æœæœ‰åšè¿‡çŒ¿äººå­¦å¹³å°çš„é¢˜ï¼Œä¼šå‘ç°æ­¤æ··æ·†å’ŒçŒ¿äººå­¦ç¬¬ 18 é¢˜ï¼ˆ <a href="https://match.yuanrenxue.com/match/18">https://match.yuanrenxue.com/match/18</a> ï¼‰æ˜¯ä¸€æ ·çš„ï¼Œåœ¨ <code>y__()</code> ç¬¬ä¸€è¡Œä¸‹ä¸ªæ–­ç‚¹ï¼Œè§‚å¯Ÿ <code>__v_()</code> ç¬¬ä¸€ä¸ªå‚æ•° <code>_</code>ï¼Œ<code>_[2][0]</code> ä½ ä¼šå‘ç°æœ‰å…³ MD5 ç®—æ³•çš„ä¸€äº›ç‰¹å¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3780acd49c90e60e4877f0b2a688e365.png" alt="03"></p><p>é‚£ä¹ˆæˆ‘ä»¬ç›´æ¥å¤§èƒ†çŒœæµ‹ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯æŸä¸ªæ•°æ®ç»è¿‡ MD5 ä¹‹åå°±æ˜¯ <code>_signature</code> äº†å‘¢ï¼Ÿå†ç»§ç»­è°ƒè¯•ä¸€ä¸‹ï¼Œæ³¨æ„ <code>arguments</code> çš„å˜åŒ–ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3a613678a973b5d3f77ab95395a75c02.png" alt="04"></p><p>å¾ˆæ˜æ˜¾è¿™ä¸ª <code>window.byted_acrawler(window.sign())</code> åº”è¯¥å°±æ˜¯ç”Ÿæˆ <code>_signature</code> çš„è¯­å¥ï¼Œè¿™ä¸ªæ–¹æ³•å’ŒæŸå­—èŠ‚ç³»çš„ <code>_signature</code> ç”Ÿæˆçš„æ–¹æ³•åç§°æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥åœ¨æ§åˆ¶å°è¾“å‡ºä¸€ä¸‹å¯ä»¥æ‹¿åˆ°å€¼ï¼Œå…¶ä¸­ <code>window.sign()</code> æ˜¯å–çš„æ—¶é—´æˆ³ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/a1f83868ca67a77c46fe6e1eb9acb290.png" alt="05"></p><p>æˆ‘ä»¬å‰é¢çŒœæµ‹æ˜¯ MD5ï¼Œç›´æ¥éªŒè¯ä¸€ä¸‹ï¼Œå‘ç°å¹¶ä¸æ˜¯çš„ï¼Œå³ä¾¿æ˜¯åŒä¸€ä¸ªæ—¶é—´æˆ³ï¼Œç»è¿‡ <code>window.byted_acrawler()</code> åå¾—åˆ°çš„å€¼æ¯æ¬¡ä¹Ÿéƒ½ä¸ä¸€æ ·ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7c30a65c29a26d5357c6fe6ccbb9fd0d.png" alt="06"></p><h3 id="Hook-å…³é”®æ–¹æ³•"><a href="#Hook-å…³é”®æ–¹æ³•" class="headerlink" title="Hook å…³é”®æ–¹æ³•"></a>Hook å…³é”®æ–¹æ³•</h3><p>ç»è¿‡å‰é¢çš„åˆ†æï¼Œæ—¢ç„¶æ ‡å‡†çš„ MD5 ä¸è¡Œï¼Œé‚£æœ‰æ²¡æœ‰å¯èƒ½æ˜¯é­”æ”¹çš„ MD5 å‘¢ï¼Ÿé¦–å…ˆæ‰¾ä¸ª JavaScript æ ‡å‡†çš„ MD5 ä»£ç çœ‹ä¸€ä¸‹ï¼Œæ¯”å¦‚ï¼š<a href="http://pajhome.org.uk/crypt/md5/md5.html">http://pajhome.org.uk/crypt/md5/md5.html</a></p><p><img src="https://img-blog.csdnimg.cn/img_convert/d7aca0b28d6131db38bdf6e1d9e46441.png" alt="07"></p><p>å¯ä»¥æ³¨æ„åˆ°ï¼Œæºç é‡Œé¢æœ‰å¾ˆå¤š <code>md5_ff</code>ã€<code>md5_gg</code>ã€<code>md5_hh</code>ã€<code>md5_ii</code> çš„æ–¹æ³•ï¼Œæœ€åä¸€ä¸ªå€¼éƒ½æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰å¯èƒ½æ­¤é¢˜å°±æ˜¯åœ¨æ ‡å‡† MD5 çš„åŸºç¡€ä¸Šä¿®æ”¹äº†ä¸€äº›é»˜è®¤å€¼å‘¢ï¼Ÿæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ Hook è¿™äº›å…³é”®æ–¹æ³•ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºä¼ å…¥çš„å€¼ï¼Œæ¥ä¸€ä¸€å¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹é»˜è®¤å€¼æ˜¯å¦æ˜¯ä¸€æ ·çš„ï¼Œä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºè¾“å‡ºè¯­å¥åŠ ä¸Šé¢œè‰²ï¼ŒHook ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">let oldFF = _[2][0][&#39;md5_ff&#39;];let oldGG = _[2][0][&#39;md5_gg&#39;];let oldHH = _[2][0][&#39;md5_hh&#39;];let oldII = _[2][0][&#39;md5_ii&#39;];let color_white_red = &quot;color: white; background: red;&quot;let color_white_grey = &quot;color: white; background: grey;&quot;let color_white_darkcyan = &quot;color: white; background: darkcyan;&quot;let color_white_green = &quot;color: white; background: green;&quot;let color_white_orange = &quot;color: white; background: orange;&quot;_[2][0][&#39;md5_ff&#39;] = function (a, b, c, d, e, f, g) &#123;    debugger;    let result = oldFF(a, b, c, d, e, f, g);    console.log(&quot;%c Function: %c md5_ff %c Result: %c %s %c Params: %c %s, %s, %s, %s, %s, %s, %s &quot;, color_white_red, color_white_grey, color_white_red, color_white_grey, result, color_white_red, color_white_grey, a, b, c, d, e, f, g)    return result;&#125;;_[2][0][&#39;md5_gg&#39;] = function (a, b, c, d, e, f, g) &#123;    debugger;    let result = oldGG(a, b, c, d, e, f, g);    console.log(&quot;%c Function: %c md5_gg %c Result: %c %s %c Params: %c %s, %s, %s, %s, %s, %s, %s &quot;, color_white_red, color_white_darkcyan, color_white_red, color_white_darkcyan, result, color_white_red, color_white_darkcyan, a, b, c, d, e, f, g)    return result;&#125;;_[2][0][&#39;md5_hh&#39;] = function (a, b, c, d, e, f, g) &#123;    debugger;    let result = oldHH(a, b, c, d, e, f, g);    console.log(&quot;%c Function: %c md5_hh %c Result: %c %s %c Params: %c %s, %s, %s, %s, %s, %s, %s &quot;, color_white_red, color_white_green, color_white_red, color_white_green, result, color_white_red, color_white_green, a, b, c, d, e, f, g)    return result;&#125;;_[2][0][&#39;md5_ii&#39;] = function (a, b, c, d, e, f, g) &#123;    debugger;    let result = oldII(a, b, c, d, e, f, g);    console.log(&quot;%c Function: %c md5_ii %c Result: %c %s %c Params: %c %s, %s, %s, %s, %s, %s, %s &quot;, color_white_red, color_white_orange, color_white_red, color_white_orange, result, color_white_red, color_white_orange, a, b, c, d, e, f, g)    return result;&#125;;</code></pre><p>Hook ä»£ç å†™å¾—æ¯”è¾ƒæ­»æ¿ï¼Œç†Ÿæ‚‰ JS çš„å¤§ä½¬å¯è‡ªå·±ä¼˜åŒ–ä¸€ä¸‹ï¼Œæ³¨æ„æ³¨å…¥ä»£ç çš„æ—¶æœºï¼Œæ¸…é™¤å®šæ—¶å™¨åï¼Œæ–­ç‚¹è¿è¡Œåˆ° <code>y__()</code> æ–¹æ³•åå†æ³¨å…¥ï¼Œç„¶åå–æ¶ˆæ–­ç‚¹ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥ï¼Œå°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°è¾“å‡ºçš„å‚æ•°äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/dc4426ed825d5f3fe1516910035de8ce.png" alt="08"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/f73a668ccd538dedf6759c122269c9da.png" alt="09"></p><p>ä¸é»˜è®¤å‚æ•°è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç° <code>md5_hh()</code> é‡Œæœ‰ä¸¤ä¸ªé»˜è®¤å‚æ•°è¢«ä¿®æ”¹äº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/e1b033d6086f175337c36b7c1d04e208.png" alt="10"></p><p>é»˜è®¤çš„ <code>-722521979</code> æ”¹æˆäº† <code>-722521939</code>ã€<code>76029189</code> æ”¹æˆäº† <code>76029185</code>ï¼Œæœ¬åœ°ä»£ç ä¿®æ”¹ä¸€ä¸‹å³å¯ï¼š</p><pre><code class="javascript">/* ==================================# @Time    : 2021-12-23# @Author  : ITBOB# @FileName: challenge_7.js# @Software: PyCharm# ================================== *//* * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message * Digest Algorithm, as defined in RFC 1321. * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet * Distributed under the BSD License * See http://pajhome.org.uk/crypt/md5 for more info. *//* * Configurable variables. You may need to tweak these to be compatible with * the server-side, but the defaults work in most cases. */var hexcase = 0;   /* hex output format. 0 - lowercase; 1 - uppercase        */var b64pad  = &quot;&quot;;  /* base-64 pad character. &quot;=&quot; for strict RFC compliance   *//* * These are the functions you&#39;ll usually want to call * They take string arguments and return either hex or base-64 encoded strings */function hex_md5(s)    &#123; return rstr2hex(rstr_md5(str2rstr_utf8(s))); &#125;function b64_md5(s)    &#123; return rstr2b64(rstr_md5(str2rstr_utf8(s))); &#125;function any_md5(s, e) &#123; return rstr2any(rstr_md5(str2rstr_utf8(s)), e); &#125;function hex_hmac_md5(k, d)  &#123; return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); &#125;function b64_hmac_md5(k, d)  &#123; return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); &#125;function any_hmac_md5(k, d, e)  &#123; return rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e); &#125;/* * Perform a simple self-test to see if the VM is working */function md5_vm_test()&#123;  return hex_md5(&quot;abc&quot;).toLowerCase() == &quot;900150983cd24fb0d6963f7d28e17f72&quot;;&#125;/* * Calculate the MD5 of a raw string */function rstr_md5(s)&#123;  return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));&#125;/* * Calculate the HMAC-MD5, of a key and some data (raw strings) */function rstr_hmac_md5(key, data)&#123;  var bkey = rstr2binl(key);  if(bkey.length &gt; 16) bkey = binl_md5(bkey, key.length * 8);  var ipad = Array(16), opad = Array(16);  for(var i = 0; i &lt; 16; i++)  &#123;    ipad[i] = bkey[i] ^ 0x36363636;    opad[i] = bkey[i] ^ 0x5C5C5C5C;  &#125;  var hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);  return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));&#125;/* * Convert a raw string to a hex string */function rstr2hex(input)&#123;  try &#123; hexcase &#125; catch(e) &#123; hexcase=0; &#125;  var hex_tab = hexcase ? &quot;0123456789ABCDEF&quot; : &quot;0123456789abcdef&quot;;  var output = &quot;&quot;;  var x;  for(var i = 0; i &lt; input.length; i++)  &#123;    x = input.charCodeAt(i);    output += hex_tab.charAt((x &gt;&gt;&gt; 4) &amp; 0x0F)           +  hex_tab.charAt( x        &amp; 0x0F);  &#125;  return output;&#125;/* * Convert a raw string to a base-64 string */function rstr2b64(input)&#123;  try &#123; b64pad &#125; catch(e) &#123; b64pad=&#39;&#39;; &#125;  var tab = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;  var output = &quot;&quot;;  var len = input.length;  for(var i = 0; i &lt; len; i += 3)  &#123;    var triplet = (input.charCodeAt(i) &lt;&lt; 16)                | (i + 1 &lt; len ? input.charCodeAt(i+1) &lt;&lt; 8 : 0)                | (i + 2 &lt; len ? input.charCodeAt(i+2)      : 0);    for(var j = 0; j &lt; 4; j++)    &#123;      if(i * 8 + j * 6 &gt; input.length * 8) output += b64pad;      else output += tab.charAt((triplet &gt;&gt;&gt; 6*(3-j)) &amp; 0x3F);    &#125;  &#125;  return output;&#125;/* * Convert a raw string to an arbitrary string encoding */function rstr2any(input, encoding)&#123;  var divisor = encoding.length;  var i, j, q, x, quotient;  /* Convert to an array of 16-bit big-endian values, forming the dividend */  var dividend = Array(Math.ceil(input.length / 2));  for(i = 0; i &lt; dividend.length; i++)  &#123;    dividend[i] = (input.charCodeAt(i * 2) &lt;&lt; 8) | input.charCodeAt(i * 2 + 1);  &#125;  /*   * Repeatedly perform a long division. The binary array forms the dividend,   * the length of the encoding is the divisor. Once computed, the quotient   * forms the dividend for the next step. All remainders are stored for later   * use.   */  var full_length = Math.ceil(input.length * 8 /                                    (Math.log(encoding.length) / Math.log(2)));  var remainders = Array(full_length);  for(j = 0; j &lt; full_length; j++)  &#123;    quotient = Array();    x = 0;    for(i = 0; i &lt; dividend.length; i++)    &#123;      x = (x &lt;&lt; 16) + dividend[i];      q = Math.floor(x / divisor);      x -= q * divisor;      if(quotient.length &gt; 0 || q &gt; 0)        quotient[quotient.length] = q;    &#125;    remainders[j] = x;    dividend = quotient;  &#125;  /* Convert the remainders to the output string */  var output = &quot;&quot;;  for(i = remainders.length - 1; i &gt;= 0; i--)    output += encoding.charAt(remainders[i]);  return output;&#125;/* * Encode a string as utf-8. * For efficiency, this assumes the input is valid utf-16. */function str2rstr_utf8(input)&#123;  var output = &quot;&quot;;  var i = -1;  var x, y;  while(++i &lt; input.length)  &#123;    /* Decode utf-16 surrogate pairs */    x = input.charCodeAt(i);    y = i + 1 &lt; input.length ? input.charCodeAt(i + 1) : 0;    if(0xD800 &lt;= x &amp;&amp; x &lt;= 0xDBFF &amp;&amp; 0xDC00 &lt;= y &amp;&amp; y &lt;= 0xDFFF)    &#123;      x = 0x10000 + ((x &amp; 0x03FF) &lt;&lt; 10) + (y &amp; 0x03FF);      i++;    &#125;    /* Encode output as utf-8 */    if(x &lt;= 0x7F)      output += String.fromCharCode(x);    else if(x &lt;= 0x7FF)      output += String.fromCharCode(0xC0 | ((x &gt;&gt;&gt; 6 ) &amp; 0x1F),                                    0x80 | ( x         &amp; 0x3F));    else if(x &lt;= 0xFFFF)      output += String.fromCharCode(0xE0 | ((x &gt;&gt;&gt; 12) &amp; 0x0F),                                    0x80 | ((x &gt;&gt;&gt; 6 ) &amp; 0x3F),                                    0x80 | ( x         &amp; 0x3F));    else if(x &lt;= 0x1FFFFF)      output += String.fromCharCode(0xF0 | ((x &gt;&gt;&gt; 18) &amp; 0x07),                                    0x80 | ((x &gt;&gt;&gt; 12) &amp; 0x3F),                                    0x80 | ((x &gt;&gt;&gt; 6 ) &amp; 0x3F),                                    0x80 | ( x         &amp; 0x3F));  &#125;  return output;&#125;/* * Encode a string as utf-16 */function str2rstr_utf16le(input)&#123;  var output = &quot;&quot;;  for(var i = 0; i &lt; input.length; i++)    output += String.fromCharCode( input.charCodeAt(i)        &amp; 0xFF,                                  (input.charCodeAt(i) &gt;&gt;&gt; 8) &amp; 0xFF);  return output;&#125;function str2rstr_utf16be(input)&#123;  var output = &quot;&quot;;  for(var i = 0; i &lt; input.length; i++)    output += String.fromCharCode((input.charCodeAt(i) &gt;&gt;&gt; 8) &amp; 0xFF,                                   input.charCodeAt(i)        &amp; 0xFF);  return output;&#125;/* * Convert a raw string to an array of little-endian words * Characters &gt;255 have their high-byte silently ignored. */function rstr2binl(input)&#123;  var output = Array(input.length &gt;&gt; 2);  for(var i = 0; i &lt; output.length; i++)    output[i] = 0;  for(var i = 0; i &lt; input.length * 8; i += 8)    output[i&gt;&gt;5] |= (input.charCodeAt(i / 8) &amp; 0xFF) &lt;&lt; (i%32);  return output;&#125;/* * Convert an array of little-endian words to a string */function binl2rstr(input)&#123;  var output = &quot;&quot;;  for(var i = 0; i &lt; input.length * 32; i += 8)    output += String.fromCharCode((input[i&gt;&gt;5] &gt;&gt;&gt; (i % 32)) &amp; 0xFF);  return output;&#125;/* * Calculate the MD5 of an array of little-endian words, and a bit length. */function binl_md5(x, len)&#123;  /* append padding */  x[len &gt;&gt; 5] |= 0x80 &lt;&lt; ((len) % 32);  x[(((len + 64) &gt;&gt;&gt; 9) &lt;&lt; 4) + 14] = len;  var a =  1732584193;  var b = -271733879;  var c = -1732584194;  var d =  271733878;  for(var i = 0; i &lt; x.length; i += 16)  &#123;    var olda = a;    var oldb = b;    var oldc = c;    var oldd = d;    a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);    d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);    c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);    b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);    a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);    d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);    c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);    b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);    a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);    d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);    c = md5_ff(c, d, a, b, x[i+10], 17, -42063);    b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);    a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);    d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);    c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);    b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);    a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);    d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);    c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);    b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);    a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);    d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);    c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);    b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);    a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);    d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);    c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);    b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);    a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);    d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);    c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);    b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);    a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);    d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);    c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);    b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);    a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);    d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);    c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);    b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);    a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);    d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);    // æ³¨é‡Šæ‰çš„æ˜¯é»˜è®¤å€¼    // c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);    c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521939);    // b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);    b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029185);    a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);    d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);    c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);    b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);    a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);    d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);    c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);    b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);    a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);    d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);    c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);    b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);    a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);    d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);    c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);    b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);    a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);    d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);    c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);    b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);    a = safe_add(a, olda);    b = safe_add(b, oldb);    c = safe_add(c, oldc);    d = safe_add(d, oldd);  &#125;  return Array(a, b, c, d);&#125;/* * These functions implement the four basic operations the algorithm uses. */function md5_cmn(q, a, b, x, s, t)&#123;  return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b);&#125;function md5_ff(a, b, c, d, x, s, t)&#123;  return md5_cmn((b &amp; c) | ((~b) &amp; d), a, b, x, s, t);&#125;function md5_gg(a, b, c, d, x, s, t)&#123;  return md5_cmn((b &amp; d) | (c &amp; (~d)), a, b, x, s, t);&#125;function md5_hh(a, b, c, d, x, s, t)&#123;  return md5_cmn(b ^ c ^ d, a, b, x, s, t);&#125;function md5_ii(a, b, c, d, x, s, t)&#123;  return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);&#125;/* * Add integers, wrapping at 2^32. This uses 16-bit operations internally * to work around bugs in some JS interpreters. */function safe_add(x, y)&#123;  var lsw = (x &amp; 0xFFFF) + (y &amp; 0xFFFF);  var msw = (x &gt;&gt; 16) + (y &gt;&gt; 16) + (lsw &gt;&gt; 16);  return (msw &lt;&lt; 16) | (lsw &amp; 0xFFFF);&#125;/* * Bitwise rotate a 32-bit number to the left. */function bit_rol(num, cnt)&#123;  return (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (32 - cnt));&#125;function getSignature() &#123;    return hex_md5(Date.parse(Date()).toString())&#125;console.log(getSignature())</code></pre><p>Python è°ƒç”¨ä»£ç ï¼š</p><pre><code class="python"># ==================================# --*-- coding: utf-8 --*--# @Time    : 2021-12-23# @Author  : ITBOB# @FileName: challenge_7.py# @Software: PyCharm# ==================================import timeimport execjsimport requestschallenge_api = &quot;http://spider.wangluozhe.com/challenge/api/7&quot;headers = &#123;    &quot;Cookie&quot;: &quot;Cookie æ›¿æ¢æˆä½ çš„&quot;,    &quot;Host&quot;: &quot;spider.wangluozhe.com&quot;,    &quot;Origin&quot;: &quot;http://spider.wangluozhe.com&quot;,    &quot;Referer&quot;: &quot;http://spider.wangluozhe.com/challenge/7&quot;,    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot;,    &quot;X-Requested-With&quot;: &quot;XMLHttpRequest&quot;&#125;def get_signature():    now = str(int(time.time())) + &quot;000&quot;    with open(&#39;challenge_7.js&#39;, &#39;r&#39;, encoding=&#39;utf-8&#39;) as f:        wlz_js = execjs.compile(f.read())    # signature = wlz_js.call(&quot;getSignature&quot;)    signature = wlz_js.call(&quot;hex_md5&quot;, now)    print(&quot;signature: &quot;, signature)    return signaturedef main():    result = 0    for page in range(1, 101):        data = &#123;            &quot;page&quot;: page,            &quot;count&quot;: 10,            &quot;_signature&quot;: get_signature()        &#125;        response = requests.post(url=challenge_api, headers=headers, data=data).json()        print(response)        for d in response[&quot;data&quot;]:            result += d[&quot;value&quot;]    print(&quot;ç»“æœä¸º: &quot;, result)if __name__ == &#39;__main__&#39;:    main()</code></pre><p>è¿™é‡Œè¿˜æœ‰ä¸€ç‚¹å°ç»†èŠ‚ï¼Œå¦‚æœæ˜¯ Python ç”Ÿæˆæ—¶é—´æˆ³ä¼ å…¥ JS çš„ <code>hex_md5</code> æ–¹æ³•çš„è¯ï¼Œè¦ä¿è¯æ—¶é—´æˆ³çš„æœ€åä¸‰ä½ä¸º0ï¼Œä¸ç„¶æ ¡éªŒé€šä¸è¿‡ï¼Œé€šå¸¸çš„å†™æ³•æ˜¯ <code>str(int(time.time() * 1000))</code>ï¼Œè¿™é‡Œè¦æ”¹ä¸€ä¸‹ï¼š<code>str(int(time.time())) + &quot;000&quot;</code>ï¼Œä¸ç”¨ Python çš„è¯ï¼Œä¹Ÿå¯ä»¥åœ¨ JS é‡Œå†™ä¸ªæ–¹æ³•ç›´æ¥è¿”å› <code>hex_md5(Date.parse(Date()).toString())</code> ä¹Ÿè¡Œã€‚</p><p><strong>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚æœä½ æ‰¾çš„ MD5 ä»£ç ä¸è§„èŒƒï¼Œå‡†ç¡®æ¥è¯´æ˜¯å’Œé¢˜ç›®ä½¿ç”¨çš„ MD5 ä»£ç ä¸å¤ªä¸€æ ·çš„è¯ï¼Œæœ‰å¯èƒ½æœ¬åœ°è¦æ”¹çš„åœ°æ–¹å°±ä¸æ­¢è¿™ä¸¤å¤„äº†ï¼Œæ‰€ä»¥å°½é‡æ‰¾ä¸€ä¸ªæ–¹æ³•åéƒ½ä¸€æ ·çš„JSï¼Œèƒ½çœä¸å°‘äº‹å„¿ã€‚</strong></p><h3 id="æ—¥å¿—æ–­ç‚¹-æ’æ¡©è°ƒè¯•"><a href="#æ—¥å¿—æ–­ç‚¹-æ’æ¡©è°ƒè¯•" class="headerlink" title="æ—¥å¿—æ–­ç‚¹ / æ’æ¡©è°ƒè¯•"></a>æ—¥å¿—æ–­ç‚¹ / æ’æ¡©è°ƒè¯•</h3><p>é™¤äº† Hook ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ’æ¡©è°ƒè¯•çš„æ–¹å¼ï¼Œå°†æ•´ä¸ªç”Ÿæˆ <code>_signature</code> çš„æµç¨‹ã€æ¶‰åŠåˆ°çš„å‚æ•°ã€ç”Ÿæˆçš„å€¼ï¼Œéƒ½é€šè¿‡æ—¥å¿—çš„å½¢å¼æ‰“å°å‡ºæ¥ï¼Œé€†å‘åˆ†æå…¶é€»è¾‘ã€‚PSï¼šæ’æ¡©ï¼Œå³æ—¥å¿—æ–­ç‚¹ï¼Œé¼ æ ‡å³é”®é€‰æ‹© <code>Add logpoint</code> å³å¯æ·»åŠ ä¸€ä¸ªæ—¥å¿—æ–­ç‚¹ï¼Œç›¸å½“äº <code>console.log()</code>ï¼Œæ­¤åŠŸèƒ½æ˜¯ Chrome 73 ç‰ˆæœ¬æ–°å¢çš„ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/809d43c9561951a392f9a395f2edb284.png" alt="11"></p><ul><li><strong>Add breakpoint</strong>ï¼šæ·»åŠ æ™®é€šæ–­ç‚¹ï¼›</li><li><strong>Add conditional breakpoint</strong>ï¼šæ·»åŠ æ¡ä»¶æ–­ç‚¹ï¼Œæ»¡è¶³æ¡ä»¶æ‰æ–­ä¸‹ï¼›</li><li><strong>Add logpoint</strong>ï¼šæ·»åŠ æ—¥å¿—æ–­ç‚¹ï¼›</li><li><strong>Never pause here</strong>ï¼šæ°¸ä¸åœ¨æ­¤å¤„æ–­ä¸‹ï¼›</li><li><strong>Add script to ignore list</strong>ï¼šç½‘ç«™çš„éƒ¨åˆ† JSï¼Œæ¯”å¦‚ <code>jquery.min.js</code> ä¹‹ç±»çš„åº“æ–‡ä»¶ï¼Œæˆ‘ä»¬å•æ­¥è°ƒè¯•çš„æ—¶å€™å¹¶ä¸æƒ³è¿›å…¥åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥å°†æ­¤ç±»æ–‡ä»¶å³é”®æ·»åŠ å¿½ç•¥æ‰ã€‚</li></ul><p>å…³é”®çš„æ—¥å¿—æ–­ç‚¹æœ‰ä»¥ä¸‹ä¸‰å¤„ï¼š</p><ul><li>ç¬¬ 605 è¡Œï¼Œ<code>arguments</code> ä¸ºå½“å‰ä¼ å…¥å‡½æ•°çš„å‚æ•°å€¼ï¼›</li><li>ç¬¬ 141 è¡Œï¼Œ<code>___.join(vV_)</code> ä¸ºå½“å‰è°ƒç”¨çš„æ–¹æ³•åç§°ï¼Œä¹Ÿä¼šè¾“å‡ºæ–¹æ³•ä¸­çš„å‚æ•°åç§°ï¼›</li><li>ç¬¬ 591 è¡Œï¼Œ<code>__V(_, ___(u_), 0, 0, _U__).apply(void 0, y__(v___))</code> ä¸ºå½“å‰æ–¹æ³•æ‰§è¡Œå®Œæ¯•çš„ç»“æœã€‚</li></ul><p>è‚¯å®šæœ‰äººä¼šç–‘æƒ‘ï¼Œå¦‚ä½•çŸ¥é“åº”è¯¥åœ¨è¿™ä¸‰ä¸ªåœ°æ–¹ä¸‹æ—¥å¿—æ–­ç‚¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯åªèƒ½è‡ªå·±å•æ­¥ã€å¤šæ­¥è°ƒè¯•ï¼Œæ‰¾è§„å¾‹ã€ä»”ç»†è§‚å¯Ÿï¼Œå°±åƒäº¤æµç¾¤é‡Œçš„å°å°ç™½å¤§ä½¬è¯´çš„ä¸€æ ·ï¼Œå±è‚¡åçƒ‚å°±è¡Œäº†ã€‚å½“ç„¶ä¹Ÿä¸æ˜¯åªæœ‰è¿™ä¸‰ä¸ªåœ°æ–¹èƒ½è¾“å‡ºå¯¹åº”çš„ä¿¡æ¯ï¼Œæœ‰å¯èƒ½å…¶ä»–åœ°æ–¹ä¹Ÿå¯ä»¥ï¼Œè¿™å°±è¦çœ‹ä½ è‡ªå·±è°ƒè¯•äº†ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7824eb659f7e79005c7d06e0a4a8226c.png" alt="12"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/88f582a59787275088ccefd6d2b31040.png" alt="13"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/eacf5f0661f1f37a78b10d0077ceeb83.png" alt="14"></p><p>é™¤äº†è¿™ä¸‰ä¸ªåœ°æ–¹çš„æ—¥å¿—æ–­ç‚¹ä»¥å¤–ï¼Œå»ºè®®è¿˜å¯ä»¥åœ¨ç¬¬ 606 è¡Œæ‰“ä¸ªæ–­ç‚¹ï¼Œè¿™æ ·æ¯æ¬¡æ‰§è¡Œä¸€ä¸ªæ–¹æ³•å°±æ–­ä¸‹ï¼Œæœ¬åœ°å°±å¯ä»¥è·Ÿç€åŒæ­¥è°ƒè¯•ï¼ŒæŒ¨ä¸ªå¯¹æ¯”ä¼ å…¥çš„å‚æ•°å’Œå¾—åˆ°çš„ç»“æœï¼Œä¸è‡³äºä¸€ä¸‹å­è¾“å‡ºçš„ä¸œè¥¿å¤ªå¤šï¼Œä¸æ–¹ä¾¿æŸ¥æ‰¾ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œ<code>gnature = window.byted_acrawler(window.sign())</code>ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/5b63ed75da5005cd2cfaf7751e2e21cb.png" alt="15"></p><p>ä¸‹ä¸€æ­¥ï¼Œsign æ–¹æ³•ï¼Œå–æ—¶é—´æˆ³ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3a69124e145ec58b96f9d10b2bfc7116.png" alt="16"></p><p>ä¸‹ä¸€æ­¥ï¼Œè°ƒç”¨ <code>hex_md5()</code> æ–¹æ³•ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/e5c6bef0f6e7cebb0b63523977364143.png" alt="17"></p><p>ä»è¿™é‡Œå°±å¯ä»¥å¼€å§‹æœ¬åœ°åŒæ­¥è°ƒè¯•äº†ï¼Œæœ¬åœ° MD5 ä¸‹æ–­ç‚¹è°ƒè¯•ï¼Œå¯ä»¥çœ‹åˆ°å¾—åˆ°çš„å€¼ä¸ä¸€æ ·ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/79cfa228e9d358ce3285c07b1e7015f7.png" alt="18"></p><p>ä¸‹ä¸€æ­¥ï¼Œè°ƒç”¨ <code>str2binl()</code> æ–¹æ³•ï¼Œå’Œæœ¬åœ°å¾—åˆ°çš„å€¼æ˜¯ä¸€æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/9100052468ccac22aa4a648964be5e9b.png" alt="19"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/ebf4964df2d57ffd62a499ed74d25ed2.png" alt="20"></p><p>ä¸‹ä¸€æ­¥ï¼Œè°ƒç”¨ <code>core_md5()</code> æ–¹æ³•ï¼Œå¾—åˆ°çš„å€¼å’Œæœ¬åœ°å°±ä¸ä¸€æ ·äº†ï¼Œè¿™é‡Œå¤§è‡´å¯ä»¥ç¡®å®šæ­¤æ–¹æ³•å†…éƒ¨ä¸æ ‡å‡†ç®—æ³•æœ‰å·®åˆ«äº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/907c0c4e27b8e67a6b1e9424ea48faa7.png" alt="21"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/77f401db641df96442715fc7292c3cd9.png" alt="22"></p><p>ä¸‹ä¸€æ­¥ï¼Œè°ƒç”¨ <code>md5_ff()</code> æ–¹æ³•ï¼Œå¾—åˆ°çš„å€¼æ˜¯ä¸€æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/196f75611556bbdfcd3dd9abf0d06732.png" alt="23"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/d88f1342eb678ba930b9e70ab6f1d7ef.png" alt="24"></p><p>ä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆä¼šæ‰¾åˆ°ä¸¤ä¸ªä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œå³ <code>md5_hh()</code> ä¸¤ä¸ªé»˜è®¤å‚æ•°è¢«ä¿®æ”¹äº†ã€‚</p><p><code>-722521979</code> è¢«æ”¹æˆäº† <code>-722521939</code>ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/6d6b5d79d7028a73134562e50f537f00.png" alt="25"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/c60c5a5e389cdcac6ed85fd19c4b0502.png" alt="26"></p><p><code>76029189</code> è¢«æ”¹æˆäº† <code>76029185</code>ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/f22f81db4216a5dbe49fc821815b851a.png" alt="27"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/0e115ab6c1095593e66c5367390e1170.png" alt="28"></p><p>æœ€ç»ˆæäº¤ç»“æœï¼ŒéªŒè¯æˆåŠŸï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/8806ce0bcee1aa373561097d24caa75f.png" alt="29"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å£°æ˜&quot;&gt;&lt;a href=&quot;#å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;å£°æ˜&quot;&gt;&lt;/a&gt;å£°æ˜&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœ</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>ã€JS é€†å‘ã€‘æ‹‰å‹¾ç½‘çˆ¬è™«ï¼Œtraceparentã€__lg_stoken__ã€X-S-HEADER ç­‰å‚æ•°åˆ†æ</title>
    <link href="https://www.itbob.cn/article/049/"/>
    <id>https://www.itbob.cn/article/049/</id>
    <published>2022-03-16T04:18:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p><strong>æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œè‹¥æœ‰ä¾µæƒï¼Œè¯·åœ¨å…¬ä¼—å·è”ç³»æˆ‘ç«‹å³åˆ é™¤ï¼</strong></p><h2 id="é€†å‘ç›®æ ‡"><a href="#é€†å‘ç›®æ ‡" class="headerlink" title="é€†å‘ç›®æ ‡"></a>é€†å‘ç›®æ ‡</h2><p>æœ¬æ¬¡çš„ç›®æ ‡æ˜¯æ‹‰å‹¾ç½‘èŒä½çš„çˆ¬å–ï¼Œæ¶‰åŠåˆ°çš„ä¸€äº›å…³é”®å‚æ•°å¦‚ä¸‹ï¼š</p><ul><li>è¯·æ±‚å¤´å‚æ•°ï¼š<code>traceparent</code>ã€<code>X-K-HEADER</code>ã€<code>X-S-HEADER</code>ã€<code>X-SS-REQ-HEADER</code>ã€<code>x-anit-forge-code</code>ã€<code>x-anit-forge-token</code></li><li>Cookie å€¼ï¼š<code>user_trace_token</code>ã€<code>X_HTTP_TOKEN</code>ã€<code>__lg_stoken__</code></li><li>POST è¯·æ±‚æ•°æ®åŠ å¯†ï¼Œè¿”å›çš„åŠ å¯†èŒä½ä¿¡æ¯è§£å¯†ï¼ŒAES ç®—æ³•</li></ul><p>å‚æ•°æ¯”è¾ƒå¤šï¼Œä½†äº‹å®ä¸Šæœ‰äº›å‚æ•°å›ºå®šã€æˆ–è€…ç›´æ¥ä¸è¦ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚ Cookie çš„ä¸‰ä¸ªå€¼ï¼Œè¯·æ±‚å¤´çš„ <code>X-K-HEADER</code>ã€<code>X-SS-REQ-HEADER</code> ç­‰å¯ä»¥å›ºå®šï¼Œ<code>x-anit-forge-code</code> å’Œ <code>x-anit-forge-token</code> å¯æœ‰å¯æ— ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæœ¬æ–‡è¿˜æ˜¯æŠŠæ¯ä¸ªå‚æ•°çš„æ¥æºéƒ½åˆ†æäº†ï¼Œå¯æ ¹æ®ä½ å®é™…æƒ…å†µçµæ´»å¤„ç†ã€‚</p><p>å¦å¤–å³ä¾¿æ˜¯æŠŠæ‰€æœ‰å‚æ•°éƒ½è¡¥é½äº†ï¼Œæ‹‰å‹¾ç½‘å¯¹äºå•ä¸ª IP è¿˜æœ‰é¢‘ç‡é™åˆ¶ï¼ŒæŠ“ä¸äº†å‡ æ¬¡å°±è¦æ±‚ç™»å½•ï¼Œå¯è‡ªè¡Œæ­é…ä»£ç†è¿›è¡ŒæŠ“å–ï¼Œæˆ–è€…å¤åˆ¶è´¦å·ç™»å½•åçš„ cookies åˆ°ä»£ç é‡Œï¼Œå¯ä»¥è§£é™¤é™åˆ¶ï¼Œå¦‚æœæ˜¯è´¦å·ç™»å½•åè®¿é—®ï¼Œè¯·æ±‚å¤´å¤šäº†ä¸¤ä¸ªå‚æ•°ï¼Œå³ <code>x-anit-forge-code</code> å’Œ <code>x-anit-forge-token</code>ï¼Œç»è¿‡æµ‹è¯•è¿™ä¸¤ä¸ªå‚æ•°å…¶å®ä¸è¦ä¹Ÿè¡Œã€‚</p><h2 id="æŠ“åŒ…åˆ†æ"><a href="#æŠ“åŒ…åˆ†æ" class="headerlink" title="æŠ“åŒ…åˆ†æ"></a>æŠ“åŒ…åˆ†æ</h2><p>æœç´¢èŒä½ï¼Œç‚¹å‡»ç¿»é¡µï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸€æ¡åä¸º positionAjax.json çš„ Ajax è¯·æ±‚ï¼Œä¸éš¾åˆ¤æ–­è¿™å°±æ˜¯è¿”å›çš„èŒä½ä¿¡æ¯ã€‚é‡ç‚¹å‚æ•°å·²åœ¨å›¾ä¸­æ¡†å‡ºæ¥äº†ã€‚</p><p>æœªç™»å½•ï¼Œæ­£å¸¸ IPï¼Œæ­£å¸¸è¯·æ±‚ï¼ŒHeader ä»¥åŠ Cookiesï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/70cb2fa995ca86f03f2356999f2e76dc.png" alt="01"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/0072eeb2185eb259f92ba86ffaa87216.png" alt="02"></p><p>å¼‚å¸¸ IPï¼Œç™»å½•è´¦å·åå†è¯·æ±‚ï¼ŒHeader ä»¥åŠ Cookiesï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/24936f2b0de3cfb9830fe000ce73f942.png" alt="03"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/1f7fadc2fceef7508ac9acf308965a69.png" alt="04"></p><p>è¯·æ±‚æ•°æ®å’Œè¿”å›æ•°æ®éƒ½ç»è¿‡äº†åŠ å¯†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/1253e653b4c3ef62aa5b0a6ea43cc60f.png" alt="05"></p><h2 id="Cookies-å‚æ•°"><a href="#Cookies-å‚æ•°" class="headerlink" title="Cookies å‚æ•°"></a>Cookies å‚æ•°</h2><p>å…ˆçœ‹ cookies é‡Œçš„å…³é”®å‚æ•°ï¼Œä¸»è¦æ˜¯ <code>user_trace_token</code>ã€<code>X_HTTP_TOKEN</code> å’Œ <code>__lg_stoken__</code>ã€‚</p><h3 id="user-trace-token"><a href="#user-trace-token" class="headerlink" title="user_trace_token"></a>user_trace_token</h3><p>é€šè¿‡æ¥å£è¿”å›çš„ï¼Œç›´æ¥æœç´¢å°±å¯ä»¥æ‰¾åˆ°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/51b765b8c4bf512393cfc701254bf1a7.png" alt="06"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/cf51c497bb4c3a66b5dd6a4e6d1fa0af.png" alt="07"></p><p>è¯·æ±‚å‚æ•°ï¼Œtime æ˜¯æ—¶é—´æˆ³ï¼Œa å€¼éšä¾¿ï¼Œæ²¡æœ‰éƒ½å¯ä»¥ï¼Œä¸å½±å“ï¼Œå…¶ä»–å€¼éƒ½æ˜¯å®šå€¼ï¼Œè·å–çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="python">def get_user_trace_token() -&gt; str:    # è·å– cookie ä¸­çš„ user_trace_token    json_url = &quot;https://a.è„±æ•å¤„ç†.com/json&quot;    headers = &#123;        &quot;Host&quot;: &quot;a.è„±æ•å¤„ç†.com&quot;,        &quot;Referer&quot;: &quot;https://www.è„±æ•å¤„ç†.com/&quot;,        &quot;User-Agent&quot;: UA    &#125;    params = &#123;        &quot;lt&quot;: &quot;trackshow&quot;,        &quot;t&quot;: &quot;ad&quot;,        &quot;v&quot;: 0,        &quot;dl&quot;: &quot;https://www.è„±æ•å¤„ç†.com/&quot;,        &quot;dr&quot;: &quot;https://www.è„±æ•å¤„ç†.com&quot;,        &quot;time&quot;: str(int(time.time() * 1000))    &#125;    response = requests.get(url=json_url, headers=headers, params=params)    user_trace_token = response.cookies.get_dict()[&quot;user_trace_token&quot;]    return user_trace_token</code></pre><h3 id="X-HTTP-TOKEN"><a href="#X-HTTP-TOKEN" class="headerlink" title="X_HTTP_TOKEN"></a>X_HTTP_TOKEN</h3><p>ç›´æ¥æœç´¢æ²¡æœ‰å€¼ï¼Œç›´æ¥ä¸Š Hook å¤§æ³•ï¼Œå°ç™½æœ‹å‹ä¸æ¸…æ¥šçš„è¯å¯ä»¥çœ‹ä»¥å‰çš„æ–‡ç« ï¼Œéƒ½æœ‰è¯¦ç»†æ•™ç¨‹ï¼Œè¿™é‡Œä¸å†ç»†è¯´ã€‚</p><pre><code class="javascript">(function () &#123;    &#39;use strict&#39;;    var cookieTemp = &quot;&quot;;    Object.defineProperty(document, &#39;cookie&#39;, &#123;        set: function (val) &#123;            console.log(&#39;Hookæ•è·åˆ°cookieè®¾ç½®-&gt;&#39;, val);            if (val.indexOf(&#39;X_HTTP_TOKEN&#39;) != -1) &#123;                debugger;            &#125;            cookieTemp = val;            return val;        &#125;,        get: function () &#123;            return cookieTemp;        &#125;    &#125;);&#125;)();</code></pre><p><img src="https://img-blog.csdnimg.cn/img_convert/bbba2e987582027cc7abd508b3574034.png" alt="08"></p><p>å¾€ä¸Šè·Ÿæ ˆè°ƒè¯•ï¼Œæ˜¯ä¸€ä¸ªå°å°çš„ OB æ··æ·†ï¼Œ<code>_0x32e0d2</code> å°±æ˜¯æœ€åçš„ <code>X_HTTP_TOKEN</code> å€¼äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/54d3c9e468fc4a104eceb6d3e888e241.png" alt="09"></p><p>ç›´æ¥æ¢­å“ˆï¼Œæ‰300å¤šè¡Œï¼Œä¸å¿…æ‰£äº†ï¼Œå…¨éƒ¨ copy ä¸‹æ¥ï¼Œæœ¬åœ°è¿è¡Œï¼Œå‘ç°ä¼šæŠ¥é”™ document æœªå®šä¹‰ï¼Œå®šä½åˆ°ä»£ç ä½ç½®ï¼Œä¸‹æ–­ç‚¹è°ƒè¯•ä¸€ä¸‹ï¼Œå‘ç°æ˜¯æ­£åˆ™åŒ¹é… cookie ä¸­çš„ <code>user_trace_token</code> çš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥å®šä¹‰ä¸€ä¸‹å³å¯ï¼š<code>var document = &#123;&quot;cookie&quot;: cookie&#125;</code>ï¼Œcookie å€¼æŠŠ <code>user_trace_token</code> ä¼ è¿‡æ¥å³å¯ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7a1675d3103c4057fc553339712e9f06.png" alt="10"></p><p>è¡¥å…¨ document åï¼Œå†æ¬¡è¿è¡Œï¼Œåˆä¼šæŠ¥é”™ window æœªå®šä¹‰ï¼Œå†æ¬¡å®šä½åˆ°æºç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/0b202a0b9bba762648653c7a519277f7.png" alt="11"></p><p>åˆ†æä¸€ä¸‹ï¼Œå–äº† window XMLHttpRequest å¯¹è±¡ï¼Œå‘ wafcheck.json è¿™ä¸ªæ¥å£å‘é€äº†ä¸€ä¸ª Ajax GET è¯·æ±‚ï¼Œç„¶åå–äº† Response Header çš„ Date å€¼èµ‹å€¼ç»™ <code>_0x309ac8</code>ï¼Œæ³¨æ„è¿™ä¸ª Date å€¼æ¯”æ­£å¸¸æ—¶é—´æ™šäº†8ä¸ªå°æ—¶ï¼Œç„¶è€Œå– Date å€¼å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå› ä¸ºåé¢åˆ new äº†ä¸€ä¸ªæ–° Date æ ‡å‡†æ—¶é—´ï¼Œèµ‹å€¼ç»™äº† <code>_0x150c4d</code>ï¼Œ<code>new Date(_0x309ac8[_0x3551(&#39;0x2d&#39;)](/-/g, &#39;/&#39;))</code> è¯­å¥è™½ç„¶ç”¨åˆ°äº†å‰é¢çš„æ—§ Dateï¼Œç„¶è€Œå®é™…ä¸Šæ˜¯ <code>replace()</code> æ›¿æ¢æ–¹æ³•ï¼Œä¸æ—§çš„ Date å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œç„¶åè°ƒç”¨ <code>Date.parse()</code> æ–¹æ³•å°†æ–° Date è½¬æ¢æˆæ—¶é—´æˆ³èµ‹å€¼ç»™ <code>_0x4e6d5d</code>ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿™ä¹ˆå¤æ‚ï¼Œç›´æ¥æœ¬åœ°æŠŠ <code>_0x89ea429</code> æ–¹æ³•ä¿®æ”¹ä¸€ä¸‹å°±è¡Œäº†ï¼š</p><pre><code class="javascript">// åŸæ–¹æ³•// function _0x89ea42() &#123;//     var _0x372cc0 = null;//     if (window[_0x3551(&#39;0x26&#39;)]) &#123;//         _0x372cc0 = new window[(_0x3551(&#39;0x26&#39;))]();//     &#125; else &#123;//         _0x372cc0 = new ActiveObject(_0x3551(&#39;0x27&#39;));//     &#125;//     _0x372cc0[_0x3551(&#39;0x28&#39;)](_0x3551(&#39;0x29&#39;), _0x3551(&#39;0x2a&#39;), ![]);//     _0x372cc0[_0x3551(&#39;0x2b&#39;)](null);//     var _0x309ac8 = _0x372cc0[_0x3551(&#39;0x2c&#39;)](&#39;Date&#39;);//     var _0x150c4d = new Date(_0x309ac8[_0x3551(&#39;0x2d&#39;)](/-/g, &#39;/&#39;));//     var _0x4e6d5d = Date[_0x3551(&#39;0x2e&#39;)](_0x150c4d);//     return _0x4e6d5d / 0x3e8;// &#125;// æœ¬åœ°æ”¹å†™function _0x89ea42() &#123;    var _0x150c4d = new Date();    var _0x4e6d5d = Date.parse(_0x150c4d);    return _0x4e6d5d / 0x3e8;&#125;</code></pre><p>æœ¬åœ°æµ‹è¯• OKï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/281437e650682cc59489955d88dc7bf5.png" alt="12"></p><h3 id="lg-stoken"><a href="#lg-stoken" class="headerlink" title="lg_stoken"></a><strong>lg_stoken</strong></h3><p><code>__lg_stoken__</code> è¿™ä¸ªå‚æ•°æ˜¯åœ¨ç‚¹å‡»æœç´¢åæ‰å¼€å§‹ç”Ÿæˆçš„ï¼Œç›´æ¥æœç´¢åŒæ ·æ²¡å€¼ï¼ŒHook ä¸€ä¸‹ï¼Œå¾€ä¸Šè·Ÿæ ˆï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°ç”Ÿæˆä½ç½®ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/da44eff2c8db5bcb772483440154ca4a.png" alt="13"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/95fc8ff9ba9695f869840d786f33b822.png" alt="14"></p><p>å¯ä»¥çœ‹åˆ° d å°±æ˜¯ <code>__lg_stoken__</code> çš„å€¼ï¼Œ<code>d = (new g()).a()</code>ã€<code>g = window.gt</code>ï¼Œ<code>window.gt</code> å®é™…ä¸Šæ˜¯è°ƒç”¨äº† <code>_0x11db59</code></p><p>è·Ÿè¿›æ··æ·†çš„ JS çœ‹ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°æœ«å°¾çš„è¿™æ®µä»£ç æ˜¯å…³é”®ï¼Œè¿™é‡Œç”¨åˆ°äº† prototype åŸå‹å¯¹è±¡ï¼Œæˆ‘ä»¬ç›´æ¥ <code>window.gt.prototype.a()</code> æˆ–è€… <code>(new window.gt).a()</code> å°±èƒ½è·å–åˆ° <code>__lg_stoken__</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7b16218279b88d708ef41c717ebf03d4.png" alt="15"></p><p>åˆ°è¿™é‡Œä¹Ÿè®¸ä½ æƒ³ä¸‹æ–­ç‚¹å»è°ƒè¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ‰£ä¸ªé€»è¾‘å‡ºæ¥ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°åˆ·æ–°ä¹‹åæ–­ä¸ä¸‹ï¼Œå› ä¸ºè¿™ä¸ªæ··æ·† JS æ–‡ä»¶æ˜¯ä¸€ç›´åœ¨å˜åŒ–çš„ï¼Œä¹‹å‰çš„æ–­ç‚¹å°±ä¸ç®¡ç”¨äº†ï¼Œç„¶åä½ å°±å¯èƒ½ä¼šæƒ³åˆ°ç›´æ¥æ›¿æ¢æ‰è¿™ä¸ª JSï¼Œè®©æ–‡ä»¶åå›ºå®šä¸‹æ¥ï¼Œå°±å¯ä»¥æ–­ç‚¹è°ƒè¯•äº†ï¼Œå¦‚æœä½ è¿™æ ·æ“ä½œçš„è¯ï¼Œé‡æ–°åˆ·æ–°ä¼šå‘ç°ä¸€ç›´åœ¨åŠ è½½ä¸­ï¼Œæ‰“å¼€æ§åˆ¶å°ä¼šå‘ç°æŠ¥é”™äº†ï¼Œé€ æˆè¿™æ ·çš„åŸå› å°±åœ¨äºè¿™ä¸ªæ··æ·† JS ä¸ä»…æ–‡ä»¶åä¼šæ”¹å˜ï¼Œä»–çš„å†…å®¹ä¹Ÿä¼šæ”¹å˜ï¼Œå½“ç„¶ï¼Œå†…å®¹ä¹Ÿä¸ä»…ä»…æ˜¯æ”¹å˜äº†å˜é‡åé‚£ä¹ˆç®€å•ï¼Œæœ‰äº›å€¼ä¹Ÿæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ¯”å¦‚ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/085f1a05ec9ba2419fe631e412e776ff.png" alt="16"></p><p>è¿™é‡Œæˆ‘ä»¬å…ˆä¸ç®¡é‚£ä¹ˆå¤šï¼Œç›´æ¥æŠŠæ‰€æœ‰çš„æ··æ·†ä»£ç  copy ä¸‹æ¥ï¼Œå…ˆåœ¨æœ¬åœ°è°ƒè¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è·‘é€šï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå…ˆåä¼šæç¤º <code>window is not defined</code>ã€<code>Cannot read properties of undefined (reading &#39;hostname&#39;)</code>ï¼Œå®šä½åˆ°ä»£ç ï¼Œæœ‰ä¸ªå– <code>window.location.hostname</code> çš„æ“ä½œï¼Œæœ¬åœ°å®šä¹‰ä¸€ä¸‹å°±è¡Œäº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/fdda6cf866ecb09c5f7f059bd91ad056.png" alt="17"></p><p>å†æ¬¡è°ƒè¯•åˆä¼šæŠ¥é”™ <code> Cannot read properties of undefined (reading &#39;substr&#39;)</code>ï¼Œ<code>substr()</code> æ–¹æ³•å¯åœ¨å­—ç¬¦ä¸²ä¸­æŠ½å–ä»æŒ‡å®šä¸‹æ ‡å¼€å§‹çš„ã€æŒ‡å®šæ•°ç›®çš„å­—ç¬¦ï¼Œæ˜¯å­—ç¬¦ä¸²å¯¹è±¡ stringObject å…·æœ‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å®šä½åˆ°ä»£ç ï¼Œå‘ç°æ˜¯ <code>window.location.search</code> å¯¹è±¡è°ƒç”¨äº† <code>substr()</code> æ–¹æ³•ï¼Œæ‰€ä»¥åŒæ ·çš„ï¼Œæˆ‘ä»¬æœ¬åœ°ä¹Ÿè¦è¡¥é½ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/e951e3c429fff1e85e127a810d9e259e.png" alt="18"></p><p>æœ¬åœ°è¡¥é½å‚æ•°åï¼Œè¿è¡Œç»“æœä¸ç½‘é¡µä¸€è‡´ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3ef0c04fbc7678fc2553830a473d4356.png" alt="19"></p><p>æ‰§è¡Œç»“æœæ²¡é—®é¢˜äº†ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ<code>window.location.search</code> çš„å€¼å°±æ˜¯å¾…åŠ å¯†å‚æ•°äº†ï¼Œæ˜¯å’‹æ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬ç›´æ¥æœç´¢ï¼Œå°±å¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªæ¥å£302è·³è½¬çš„åœ°å€ï¼Œç”¨çš„æ—¶å€™ç›´æ¥å–å°±è¡Œäº†ï¼Œè¿™ä¸ªæ¥å£æ˜¯ä½ æœç´¢å†…å®¹ç»„æˆçš„ï¼Œæœç´¢ä¸åŒå‚æ•°ï¼Œè¿™ä¸ªè·³è½¬åœ°å€ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/c686be59dceaf2965fd00383cfe68066.png" alt="20"></p><p>è°ƒè¯•æˆåŠŸåï¼Œæˆ‘ä»¬éšä¾¿æ¢ä¸€ä¸ªæœç´¢å…³é”®è¯ï¼Œå°†å¾—åˆ°çš„302è·³è½¬åœ°å€æ‹¿åˆ°è¿™ä¸ª JS ä¸­ï¼ŒåŠ å¯†ä¸€ä¸‹ï¼Œå‘ç°ä¼šæŠ¥é”™ï¼Œè¿™è¯´æ˜æ··æ·† JS ä¼ å…¥çš„å‚æ•°å’Œ JS å†…å®¹åº”è¯¥æ˜¯ç›¸å¯¹åº”çš„ï¼Œè¿™é‡Œçš„åšæ³•æ˜¯ç›´æ¥è¯·æ±‚æ‹¿åˆ°è¿™ä¸ª JS æ–‡ä»¶å†…å®¹ï¼Œç„¶åæŠŠè¦è¡¥çš„ window å’Œè·å– <code>__lg_stoken__</code> çš„æ–¹æ³•åŠ è¿›å»ï¼Œç„¶åç›´æ¥æ‰§è¡Œå°±è¡Œäº†ã€‚</p><p>è·å– <code>__lg_stoken__</code>  çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼ˆ<code>original_data</code> ä¸ºåŸå§‹æœç´¢æ•°æ®ï¼‰ï¼š</p><pre><code class="python">def get_lg_stoken(original_data: dict) -&gt; str:    # è·å– cookie ä¸­çš„ __lg_stoken__    token_url = &quot;https://www.è„±æ•å¤„ç†.com/wn/jobs&quot;    token_headers = &#123;        &quot;Host&quot;: &quot;www.è„±æ•å¤„ç†.com&quot;,        &quot;Referer&quot;: &quot;https://www.è„±æ•å¤„ç†.com/&quot;,        &quot;User-Agent&quot;: UA    &#125;    params = &#123;        &quot;kd&quot;: original_data[&quot;kd&quot;],        &quot;city&quot;: original_data[&quot;city&quot;]    &#125;    token_response = requests.get(url=token_url, params=params, headers=token_headers, cookies=global_cookies, allow_redirects=False)    if token_response.status_code != 302:        raise Exception(&quot;è·å–è·³è½¬é“¾æ¥å¼‚å¸¸ï¼æ£€æŸ¥ global_cookies æ˜¯å¦å·²åŒ…å« __lg_stoken__ï¼&quot;)    # è·å– 302 è·³è½¬çš„åœ°å€    security_check_url = token_response.headers[&quot;Location&quot;]    if &quot;login&quot; in security_check_url:        raise Exception(&quot;IP è¢«å…³è¿›å°é»‘å±‹å•¦ï¼éœ€è¦ç™»å½•ï¼è¯·è¡¥å…¨ç™»å½•åçš„ Cookieï¼Œæˆ–è€…è‡ªè¡Œæ·»åŠ ä»£ç†ï¼&quot;)    parse_result = parse.urlparse(security_check_url)    # url çš„å‚æ•°ä¸ºå¾…åŠ å¯†å¯¹è±¡    security_check_params = parse_result.query    # å– name å‚æ•°ï¼Œä¸ºæ··æ·† js çš„æ–‡ä»¶å    security_check_js_name = parse.parse_qs(security_check_params)[&quot;name&quot;][0]    # å‘é€è¯·æ±‚ï¼Œè·å–æ··æ·†çš„ js    js_url = &quot;https://www.è„±æ•å¤„ç†.com/common-sec/dist/&quot; + security_check_js_name + &quot;.js&quot;    js_headers = &#123;        &quot;Host&quot;: &quot;www.è„±æ•å¤„ç†.com&quot;,        &quot;Referer&quot;: security_check_url,        &quot;User-Agent&quot;: UA    &#125;    js_response = requests.get(url=js_url, headers=js_headers, cookies=global_cookies).text    # è¡¥å…¨ jsï¼Œæ·»åŠ  window å‚æ•°å’Œä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè·å– __lg_stoken__ çš„å€¼    lg_js = &quot;&quot;&quot;    window = &#123;        &quot;location&quot;: &#123;            &quot;hostname&quot;: &quot;www.è„±æ•å¤„ç†.com&quot;,            &quot;search&quot;: &#39;?%s&#39;        &#125;    &#125;    function getLgStoken()&#123;        return window.gt.prototype.a()    &#125;    &quot;&quot;&quot; % security_check_params + js_response    lg_stoken = execjs.compile(lg_js).call(&quot;getLgStoken&quot;)    return lg_stoken</code></pre><h2 id="è¯·æ±‚å¤´å‚æ•°"><a href="#è¯·æ±‚å¤´å‚æ•°" class="headerlink" title="è¯·æ±‚å¤´å‚æ•°"></a>è¯·æ±‚å¤´å‚æ•°</h2><p>è¯·æ±‚å¤´å‚æ•°æ¯”è¾ƒå¤šï¼Œæœ‰ <code>traceparent</code>ã€<code>X-K-HEADER</code>ã€<code>X-S-HEADER</code>ã€<code>X-SS-REQ-HEADER</code>ã€<code>x-anit-forge-code</code>ã€<code>x-anit-forge-token</code>ï¼Œå…¶ä¸­æœ€åä¸¤ä¸ª <code>x-anit</code> å¼€å¤´çš„å‚æ•°æ˜¯ç™»å½•åæ‰æœ‰çš„ï¼Œå®é™…æµ‹è¯•ä¸­ï¼Œå³ä¾¿æ˜¯ç™»å½•äº†ï¼Œä¸åŠ è¿™ä¸¤ä¸ªå¥½åƒä¹Ÿè¡Œã€‚ä¸è¿‡è¿˜æ˜¯åˆ†æä¸€ä¸‹å§ã€‚</p><h3 id="x-anit-forge-code-x-anit-forge-token"><a href="#x-anit-forge-code-x-anit-forge-token" class="headerlink" title="x-anit-forge-code / x-anit-forge-token"></a>x-anit-forge-code / x-anit-forge-token</h3><p>è¿™ä¸¤ä¸ªå€¼æ˜¯é¦–æ¬¡ç‚¹å‡»æœç´¢ç”Ÿæˆçš„ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æœç´¢æ¥å£ï¼Œè¿”å›çš„ HTML é‡Œé¢å¤¹æ‚äº†ä¸€ä¸ª JSON æ–‡ä»¶ï¼Œé‡Œé¢çš„ <code>submitCode</code> å’Œ <code>submitToken</code> å°±æ˜¯ <code>x-anit-forge-code</code> å’Œ <code>x-anit-forge-token</code> çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/b058272ab7d86994c7c93e4ef6c521ed.png" alt="21"></p><p>è¯·æ±‚è¿™ä¸ªæ¥å£è¦æ³¨æ„å¸¦ä¸Šç™»å½•åçš„ cookiesï¼Œæœ‰ç”¨çš„åªæœ‰å››ä¸ªå€¼ï¼Œæ­£ç¡®çš„ cookies ç±»ä¼¼äºï¼š</p><pre><code class="python">cookies = &#123;    &quot;login&quot;: &quot;true&quot;,    &quot;gate_login_token&quot;: &quot;54a31e93aa904a6bb9731bxxxxxxxxxxxxxx&quot;,    &quot;_putrc&quot;: &quot;9550E53D830BE8xxxxxxxxxxxxxx&quot;,    &quot;JSESSIONID&quot;: &quot;ABAAAECABIEACCA79BFxxxxxxxxxxxxxx&quot;&#125;</code></pre><p>æ³¨æ„ï¼ŒJSESSIONID å³ä¾¿ä¸ç™»å½•ä¹Ÿä¼šæœ‰ï¼Œä½†æ˜¯ç™»å½•æ—¶åº”è¯¥ä¼šæºå¸¦è¿™ä¸ªå€¼ï¼Œè¿›è¡Œä¸€ä¸ªæ¿€æ´»æ“ä½œï¼Œå¦‚æœä½ è¯·æ±‚è·å–åˆ°çš„ submitCodeã€submitToken ä¸ºç©ºï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½ JSESSIONID æ˜¯æ— æ•ˆçš„ï¼Œä»¥ä¸Šæ‰€æœ‰å€¼éƒ½å¿…é¡»ç™»å½•åå¤åˆ¶è¿‡æ¥ï¼</p><p>è·å– <code> x-anit-forge-code</code>ã€<code>x-anit-forge-token</code>  çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼ˆ<code>original_data</code> ä¸ºåŸå§‹æœç´¢æ•°æ®ï¼‰ï¼š</p><pre><code class="python">def update_x_anit(original_data: dict) -&gt; None:    # æ›´æ–° x-anit-forge-code å’Œ x-anit-forge-token    url = &quot;https://www.è„±æ•å¤„ç†.com/wn/jobs&quot;    headers = &#123;        &quot;Host&quot;: &quot;www.è„±æ•å¤„ç†.com&quot;,        &quot;Referer&quot;: &quot;https://www.è„±æ•å¤„ç†.com/&quot;,        &quot;User-Agent&quot;: UA    &#125;    params = &#123;        &quot;kd&quot;: original_data[&quot;kd&quot;],        &quot;city&quot;: original_data[&quot;city&quot;]    &#125;    response = requests.get(url=url, params=params, headers=headers, cookies=global_cookies)    tree = etree.HTML(response.text)    next_data_json = json.loads(tree.xpath(&quot;//script[@id=&#39;__NEXT_DATA__&#39;]/text()&quot;)[0])    submit_code = next_data_json[&quot;props&quot;][&quot;tokenData&quot;][&quot;submitCode&quot;]    submit_token = next_data_json[&quot;props&quot;][&quot;tokenData&quot;][&quot;submitToken&quot;]    # æ³¨æ„ JSESSIONID å¿…é¡»æ˜¯ç™»å½•éªŒè¯åçš„ï¼    if not submit_code or not submit_token:        raise Exception(&quot;submitCode &amp; submitToken ä¸ºç©ºï¼Œè¯·æ£€æŸ¥ JSESSIONID æ˜¯å¦æ­£ç¡®ï¼&quot;)    global x_anit    x_anit[&quot;x-anit-forge-code&quot;] = submit_code    x_anit[&quot;x-anit-forge-token&quot;] = submit_token</code></pre><h3 id="traceparent"><a href="#traceparent" class="headerlink" title="traceparent"></a>traceparent</h3><p>åŒæ ·çš„ Hook å¤§æ³•ï¼Œè·Ÿæ ˆï¼š</p><pre><code class="javascript">(function () &#123;    var org = window.XMLHttpRequest.prototype.setRequestHeader;    window.XMLHttpRequest.prototype.setRequestHeader = function (key, value) &#123;        console.log(&#39;Hook æ•è·åˆ° %s è®¾ç½® -&gt; %s&#39;, key, value);        if (key == &#39;traceparent&#39;) &#123;            debugger;        &#125;        return org.apply(this, arguments);    &#125;;&#125;)();</code></pre><p><img src="https://img-blog.csdnimg.cn/img_convert/ca4250dc656e4516f61eb4085ca9743e.png" alt="22"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/b38bd3f45b8b107002472e03f13b4ce9.png" alt="23"></p><p>è§‚å¯Ÿä¸Šé¢çš„ä»£ç ï¼Œä¸‰å…ƒè¡¨è¾¾å¼ï¼Œ<code>t.sampled</code> ä¸º <code>true</code>ï¼Œæ‰€ä»¥ <code>e</code> å€¼ä¸º <code>01</code>ï¼Œ<code>n</code> å€¼ä¸º <code>t.id</code>ï¼Œé‡ç‚¹åœ¨äº <code>t.traceId</code> å’Œ <code>t.id</code> äº†ï¼Œè·Ÿæ ˆå‘ç°å¾ˆéš¾è°ƒï¼Œç›´æ¥æœç´¢å…³é”®å­—ï¼Œå¯æ‰¾åˆ°ç”Ÿæˆçš„ä½ç½®ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/9aa669c7aac13c6f101f1df1bc01d1df.png" alt="24"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/1c6831862c149d7dec12e01dbf838d86.png" alt="25"></p><p>æŠŠ <code>E()</code> æ–¹æ³•æ‰£å‡ºæ¥å°±è¡Œäº†ï¼Œæ”¹å†™ä¸€ä¸‹å³å¯ï¼š</p><pre><code class="javascript">getRandomValues = require(&#39;get-random-values&#39;)function E(t) &#123;    for (var b = [], w = 0; w &lt; 256; ++w)            b[w] = (w + 256).toString(16).substr(1);    var T = new Uint8Array(16);    return function(t) &#123;        for (var e = [], n = 0; n &lt; t.length; n++)            e.push(b[t[n]]);        return e.join(&quot;&quot;)    &#125;(getRandomValues(T)).substr(0, t)&#125;function getTraceparent()&#123;    return &quot;00-&quot; + E() + &quot;-&quot; + E(16) + &quot;-&quot; + &quot;01&quot;&#125;// æµ‹è¯•è¾“å‡º// console.log(getTraceparent())</code></pre><h3 id="X-K-HEADER-X-SS-REQ-HEADER"><a href="#X-K-HEADER-X-SS-REQ-HEADER" class="headerlink" title="X-K-HEADER / X-SS-REQ-HEADER"></a>X-K-HEADER / X-SS-REQ-HEADER</h3><p><code>X-K-HEADER</code> å’Œ <code>X-SS-REQ-HEADER</code> æ•°æ®æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åè€…æ˜¯é”®å€¼å¯¹å½¢å¼ï¼Œå…ˆç›´æ¥å…¨å±€æœç´¢å…³é”®å­—ï¼Œå‘ç°éƒ½æ˜¯ä»æœ¬åœ°æ‹¿è¿™ä¸¤ä¸ªå€¼ï¼Œæ¸…é™¤ cookie å°±ä¸ºç©ºäº†ï¼Œé‚£ä¹ˆç›´æ¥æœç´¢å€¼ï¼Œå‘ç°æ˜¯ agreement è¿™ä¸ªæ¥å£è¿”å›çš„ï¼Œ<code>secretKeyValue</code> å€¼å°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œæœ‰å¯èƒ½æµè§ˆå™¨æŠ“åŒ…ç›´æ¥æœç´¢çš„è¯æœç´¢ä¸åˆ°ï¼Œä½¿ç”¨æŠ“åŒ…å·¥å…·ï¼Œæ¯”å¦‚ Fiddler å°±èƒ½æœåˆ°äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/5b82461455529eac20e1037983745711.png" alt="26"></p><p>è¿™ä¸ªæ¥å£æ˜¯ post è¯·æ±‚ï¼Œè¯·æ±‚å¸¦äº†ä¸€ä¸ª json æ•°æ®ï¼Œ<code>secretKeyDecode</code>ï¼Œç›´æ¥æœç´¢å…³é”®å­—ï¼Œå°±ä¸€ä¸ªå€¼ï¼Œå®šä½è·Ÿæ ˆï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/738389717bc00ab5cedf5d7fecc09b82.png" alt="27"></p><p><code>zt()</code> æ˜¯ä»æœ¬åœ°ç¼“å­˜ä¸­å–ï¼Œ<code>At()</code> æ˜¯é‡æ–°ç”Ÿæˆï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/fa5ccfe57f4391467800a062edbc44e0.png" alt="28"></p><p>è¿™é‡Œå°±éå¸¸æ˜æ˜¾äº†ï¼Œt æ˜¯32ä½éšæœºå­—ç¬¦ä¸²ï¼Œèµ‹å€¼ä¸º <code>aesKey</code>ï¼Œåé¢ç´§æ¥ç€ä¸€ä¸ª RSA åŠ å¯†äº† <code>aesKey</code>ï¼Œèµ‹å€¼ä¸º <code>rsaEncryptData</code>ï¼Œè€Œ <code>rsaEncryptData</code> å°±æ˜¯å‰é¢ agreement æ¥å£è¯·æ±‚çš„ <code>secretKeyValue</code> å€¼ã€‚</p><p>è¿™é‡Œå…ˆè¯´ä¸€ä¸‹ï¼Œæœ€ç»ˆæœç´¢èŒä½è¯·æ±‚çš„ data å’Œè¿”å›æ•°æ®éƒ½æ˜¯ AES åŠ å¯†è§£å¯†ï¼Œä¼šç”¨åˆ°è¿™ä¸ª <code>aesKey</code>ï¼Œè¯·æ±‚å¤´çš„å¦ä¸€ä¸ªå‚æ•° <code>X-S-HEADER</code> ä¹Ÿä¼šç”¨åˆ°ï¼Œå¦‚æœè¿™ä¸ª key æ²¡æœ‰ç»è¿‡ RSA åŠ å¯†å¹¶é€šè¿‡ agreement æ¥å£éªŒè¯çš„è¯ï¼Œæ˜¯æ— æ•ˆçš„ï¼Œå¯ä»¥ç†è§£ä¸º agreement æ¥å£æ—¢æ˜¯ä¸ºäº†è·å– <code>X-K-HEADER</code> å’Œ <code>X-SS-REQ-HEADER</code>ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ¿€æ´»è¿™ä¸ª <code>aesKey</code>ã€‚</p><p>è¿™éƒ¨åˆ†çš„ JS ä»£ç å’Œ Python ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><pre><code class="javascript">JSEncrypt = require(&quot;jsencrypt&quot;)function getAesKeyAndRsaEncryptData() &#123;    var aesKey = function (t) &#123;        for (var e = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&quot;, r = &quot;&quot;, n = 0; n &lt; t; n++) &#123;            var i = Math.floor(Math.random() * e.length);            r += e.substring(i, i + 1)        &#125;        return r    &#125;(32);    var e = new JSEncrypt();    e.setPublicKey(&quot;-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnbJqzIXk6qGotX5nD521Vk/24APi2qx6C+2allfix8iAfUGqx0MK3GufsQcAt/o7NO8W+qw4HPE+RBR6m7+3JVlKAF5LwYkiUJN1dh4sTj03XQ0jsnd3BYVqL/gi8iC4YXJ3aU5VUsB6skROancZJAeq95p7ehXXAJfCbLwcK+yFFeRKLvhrjZOMDvh1TsMB4exfg+h2kNUI94zu8MK3UA7v1ANjfgopaE+cpvoulg446oKOkmigmc35lv8hh34upbMmehUqB51kqk9J7p8VMI3jTDBcMC21xq5XF7oM8gmqjNsYxrT9EVK7cezYPq7trqLX1fyWgtBtJZG7WMftKwIDAQAB-----END PUBLIC KEY-----&quot;);    var rsaEncryptData = e.encrypt(aesKey);    return &#123;        &quot;aesKey&quot;: aesKey,        &quot;rsaEncryptData&quot;: rsaEncryptData    &#125;&#125;// æµ‹è¯•è¾“å‡º// console.log(getAesKeyAndRsaEncryptData())</code></pre><pre><code class="python">def update_aes_key() -&gt; None:    # é€šè¿‡JSè·å– AES Keyï¼Œå¹¶é€šè¿‡æ¥å£æ¿€æ´»ï¼Œæ¥å£æ¿€æ´»åä¼šè¿”å›ä¸€ä¸ª secretKeyValueï¼Œåç»­è¯·æ±‚å¤´ä¼šç”¨åˆ°    global aes_key, secret_key_value    url = &quot;https://gate.è„±æ•å¤„ç†.com/system/agreement&quot;    headers = &#123;        &quot;Content-Type&quot;: &quot;application/json&quot;,        &quot;Host&quot;: &quot;gate.è„±æ•å¤„ç†.com&quot;,        &quot;Origin&quot;: &quot;https://www.è„±æ•å¤„ç†.com&quot;,        &quot;Referer&quot;: &quot;https://www.è„±æ•å¤„ç†.com/&quot;,        &quot;User-Agent&quot;: UA    &#125;    encrypt_data = lagou_js.call(&quot;getAesKeyAndRsaEncryptData&quot;)    aes_key = encrypt_data[&quot;aesKey&quot;]    rsa_encrypt_data = encrypt_data[&quot;rsaEncryptData&quot;]    data = &#123;&quot;secretKeyDecode&quot;: rsa_encrypt_data&#125;    response = requests.post(url=url, headers=headers, json=data).json()    secret_key_value = response[&quot;content&quot;][&quot;secretKeyValue&quot;]</code></pre><h3 id="X-S-HEADER"><a href="#X-S-HEADER" class="headerlink" title="X-S-HEADER"></a>X-S-HEADER</h3><p><code>X-S-HEADER</code> ä½ æ¯æ¬¡ç¿»é¡µéƒ½ä¼šæ”¹å˜ï¼Œç›´æ¥æœç´¢å…³é”®å­—å¯å®šä½ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3c12d2eec0ae138cdf5b9308c5efd6dd.png" alt="29"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/67936e9e23ab04bbdd242d44b8ec3af1.png" alt="30"></p><p>ä¸­é—´æœ‰ä¸€ä¸ª SHA256 åŠ å¯†ï¼Œæœ€åè¿”å›çš„ <code>Rt(JSON.stringify(&#123;originHeader: JSON.stringify(e), code: t&#125;))</code> å°±æ˜¯ <code>X-S-HEADER</code> çš„å€¼äº†ï¼Œ<code>Rt()</code> æ˜¯ä¸€ä¸ª AES åŠ å¯†ï¼Œæ¯”è¾ƒå…³é”®çš„ï¼Œ<code>Vt(r)</code> æ˜¯ä¸€ä¸ª URLï¼Œæ¯”å¦‚ä½ æœç´¢èŒä½å°±æ˜¯ positionAjax.jsonï¼Œæœç´¢å…¬å¸å°±æ˜¯ companyAjax.jsonï¼Œå¯æ ¹æ®å®é™…æƒ…å†µå®šåˆ¶ï¼Œç„¶å <code>Lt(t)</code> å°±æ˜¯æœç´¢ä¿¡æ¯ï¼Œå­—ç¬¦ä¸²å½¢å¼ï¼ŒåŒ…å«äº†åŸå¸‚ã€é¡µç ã€å…³é”®è¯ç­‰ã€‚</p><p>è·å– <code>X-S-HEADER</code> çš„ JS ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><pre><code class="javascript">CryptoJS = require(&#39;crypto-js&#39;)jt = function(aesKey, originalData, u) &#123;    var e = &#123;deviceType: 1&#125;      , t = &quot;&quot;.concat(JSON.stringify(e)).concat(u).concat(JSON.stringify(originalData))      , t = (t = t, null === (t = CryptoJS.SHA256(t).toString()) || void 0 === t ? void 0 : t.toUpperCase());    return Rt(JSON.stringify(&#123;        originHeader: JSON.stringify(e),        code: t    &#125;), aesKey)&#125;Rt = function (t, aesKey) &#123;    var Ot = CryptoJS.enc.Utf8.parse(&quot;c558Gq0YQK2QUlMc&quot;),        Dt = CryptoJS.enc.Utf8.parse(aesKey),        t = CryptoJS.enc.Utf8.parse(t);    t = CryptoJS.AES.encrypt(t, Dt, &#123;        iv: Ot,        mode: CryptoJS.mode.CBC,        padding: CryptoJS.pad.Pkcs7    &#125;);    return t.toString()&#125;;function getXSHeader(aesKey, originalData, u)&#123;    return jt(aesKey, originalData, u)&#125;// æµ‹è¯•æ ·ä¾‹// var url = &quot;https://www.è„±æ•å¤„ç†.com/jobs/v2/positionAjax.json&quot;// var aesKey = &quot;dgHY1qVeo/Z0yDaF5WV/EEXxYiwbr5Jt&quot;// var originalData = &#123;&quot;first&quot;: &quot;true&quot;, &quot;needAddtionalResult&quot;: &quot;false&quot;, &quot;city&quot;: &quot;å…¨å›½&quot;, &quot;pn&quot;: &quot;2&quot;, &quot;kd&quot;: &quot;Java&quot;&#125;// console.log(getXSHeader(aesKey, originalData, url))</code></pre><h2 id="è¯·æ±‚-è¿”å›æ•°æ®è§£å¯†"><a href="#è¯·æ±‚-è¿”å›æ•°æ®è§£å¯†" class="headerlink" title="è¯·æ±‚/è¿”å›æ•°æ®è§£å¯†"></a>è¯·æ±‚/è¿”å›æ•°æ®è§£å¯†</h2><p>å‰é¢æŠ“åŒ…æˆ‘ä»¬å·²ç»å‘ç° positionAjax.json æ˜¯ POST è¯·æ±‚ï¼ŒForm Data ä¸­çš„æ•°æ®æ˜¯åŠ å¯†çš„ï¼Œè¿”å›çš„ data ä¹Ÿæ˜¯åŠ å¯†çš„ï¼Œæˆ‘ä»¬åˆ†æè¯·æ±‚å¤´å‚æ•°çš„æ—¶å€™ï¼Œå°±æ¶‰åŠåˆ° AES åŠ å¯†è§£å¯†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æœç´¢ <code>AES.encrypt</code>ã€<code>AES.decrypt</code>ï¼Œä¸‹æ–­ç‚¹è°ƒè¯•ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/a71d05bb4c558409eea816c1792038e7.png" alt="31"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/1127358d32e96c667e465d71b06365ae.png" alt="32"></p><p>éå¸¸æ˜æ˜¾äº†ï¼Œè¿™éƒ¨åˆ†çš„ JS ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><pre><code class="javascript">CryptoJS = require(&#39;crypto-js&#39;)function getRequestData(aesKey, originalData)&#123;    return Rt(JSON.stringify(originalData), aesKey)&#125;function getResponseData(encryptData, aesKey)&#123;    return It(encryptData, aesKey)&#125;Rt = function (t, aesKey) &#123;    var Ot = CryptoJS.enc.Utf8.parse(&quot;c558Gq0YQK2QUlMc&quot;),        Dt = CryptoJS.enc.Utf8.parse(aesKey),        t = CryptoJS.enc.Utf8.parse(t);    t = CryptoJS.AES.encrypt(t, Dt, &#123;        iv: Ot,        mode: CryptoJS.mode.CBC,        padding: CryptoJS.pad.Pkcs7    &#125;);    return t.toString()&#125;;It = function(t, aesKey) &#123;    var Ot = CryptoJS.enc.Utf8.parse(&quot;c558Gq0YQK2QUlMc&quot;),    Dt = CryptoJS.enc.Utf8.parse(aesKey);    t = CryptoJS.AES.decrypt(t, Dt, &#123;        iv: Ot,        mode: CryptoJS.mode.CBC,        padding: CryptoJS.pad.Pkcs7    &#125;).toString(CryptoJS.enc.Utf8);    try &#123;        t = JSON.parse(t)    &#125; catch (t) &#123;&#125;    return t&#125;// æµ‹è¯•æ ·ä¾‹ï¼Œæ³¨æ„ï¼ŒencryptedData æ•°æ®å¤ªå¤šï¼Œçœç•¥äº†ï¼Œç›´æ¥è¿è¡Œè§£å¯†æ˜¯ä¼šæŠ¥é”™çš„// var aesKey = &quot;dgHY1qVeo/Z0yDaF5WV/EEXxYiwbr5Jt&quot;// var encryptedData = &quot;r4MqbduYxu3Z9sFL75xDhelMTCYPHLluKaurYgzEXlEQ1Rg......&quot;// var originalData = &#123;&quot;first&quot;: &quot;true&quot;, &quot;needAddtionalResult&quot;: &quot;false&quot;, &quot;city&quot;: &quot;å…¨å›½&quot;, &quot;pn&quot;: &quot;2&quot;, &quot;kd&quot;: &quot;Java&quot;&#125;// console.log(getRequestData(aesKey, originalData))// console.log(getResponseData(encryptedData, aesKey))</code></pre><p>å¤§è‡´çš„ Python ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="python">def get_header_params(original_data: dict) -&gt; dict:    # åç»­è¯·æ±‚æ•°æ®æ‰€éœ€çš„è¯·æ±‚å¤´å‚æ•°    # èŒä½æœç´¢ URLï¼Œå¦‚æœæ˜¯æœç´¢å…¬å¸ï¼Œé‚£å°±æ˜¯ https://www.è„±æ•å¤„ç†.com/jobs/companyAjax.jsonï¼Œæ ¹æ®å®é™…æƒ…å†µæ›´æ”¹    u = &quot;https://www.è„±æ•å¤„ç†.com/jobs/v2/positionAjax.json&quot;    return &#123;        &quot;traceparent&quot;: lagou_js.call(&quot;getTraceparent&quot;),        &quot;X-K-HEADER&quot;: secret_key_value,        &quot;X-S-HEADER&quot;: lagou_js.call(&quot;getXSHeader&quot;, aes_key, original_data, u),        &quot;X-SS-REQ-HEADER&quot;: json.dumps(&#123;&quot;secret&quot;: secret_key_value&#125;)    &#125;def get_encrypted_data(original_data: dict) -&gt; str:    # AES åŠ å¯†åŸå§‹æ•°æ®    encrypted_data = lagou_js.call(&quot;getRequestData&quot;, aes_key, original_data)    return encrypted_datadef get_data(original_data: dict, encrypted_data: str, header_params: dict) -&gt; dict:    # æºå¸¦åŠ å¯†åçš„è¯·æ±‚æ•°æ®å’Œå®Œæ•´è¯·æ±‚å¤´ï¼Œæ‹¿åˆ°å¯†æ–‡ï¼ŒAES è§£å¯†å¾—åˆ°æ˜æ–‡èŒä½ä¿¡æ¯    url = &quot;https://www.è„±æ•å¤„ç†.com/jobs/v2/positionAjax.json&quot;    referer = parse.urljoin(&quot;https://www.è„±æ•å¤„ç†.com/wn/jobs?&quot;, parse.urlencode(original_data))    headers = &#123;        # &quot;content-type&quot;: &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;,        &quot;Host&quot;: &quot;www.è„±æ•å¤„ç†.com&quot;,        &quot;Origin&quot;: &quot;https://www.è„±æ•å¤„ç†.com&quot;,        &quot;Referer&quot;: referer,        &quot;traceparent&quot;: header_params[&quot;traceparent&quot;],        &quot;User-Agent&quot;: UA,        &quot;X-K-HEADER&quot;: header_params[&quot;X-K-HEADER&quot;],        &quot;X-S-HEADER&quot;: header_params[&quot;X-S-HEADER&quot;],        &quot;X-SS-REQ-HEADER&quot;: header_params[&quot;X-SS-REQ-HEADER&quot;],    &#125;    # æ·»åŠ  x-anit-forge-code å’Œ x-anit-forge-token    headers.update(x_anit)    data = &#123;&quot;data&quot;: encrypted_data&#125;    response = requests.post(url=url, headers=headers, cookies=global_cookies, data=data).json()    if &quot;status&quot; in response:        if not response[&quot;status&quot;] and &quot;æ“ä½œå¤ªé¢‘ç¹&quot; in response[&quot;msg&quot;]:            raise Exception(&quot;è·å–æ•°æ®å¤±è´¥ï¼msgï¼š%sï¼å¯ä»¥å°è¯•è¡¥å…¨ç™»å½•åçš„ Cookiesï¼Œæˆ–è€…æ·»åŠ ä»£ç†ï¼&quot; % response[&quot;msg&quot;])        else:            raise Exception(&quot;è·å–æ•°æ®å¼‚å¸¸ï¼è¯·æ£€æŸ¥æ•°æ®æ˜¯å¦å®Œæ•´ï¼&quot;)    else:        response_data = response[&quot;data&quot;]        decrypted_data = lagou_js.call(&quot;getResponseData&quot;, response_data, aes_key)        return decrypted_data</code></pre><p>æœ€ç»ˆæ•´åˆæ‰€æœ‰ä»£ç ï¼ŒæˆåŠŸæ‹¿åˆ°æ•°æ®ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/113e75fb0750f81f8e39031ce7268bb5.png" alt="33"></p><h2 id="é€†å‘å°æŠ€å·§"><a href="#é€†å‘å°æŠ€å·§" class="headerlink" title="é€†å‘å°æŠ€å·§"></a>é€†å‘å°æŠ€å·§</h2><p>æµè§ˆå™¨å¼€å‘è€…å·¥å…· Application - Storage é€‰é¡¹ï¼Œå¯ä»¥ä¸€é”®æ¸…é™¤æ‰€æœ‰ Cookiesï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å­˜å‚¨é…é¢ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/05bcd18f355250c4570239163d16cae0.png" alt="34"></p><p>Storage - Cookies å¯ä»¥æŸ¥çœ‹æ¯ä¸ªç«™ç‚¹çš„æ‰€æœ‰ Cookiesï¼ŒHttpOnly æ‰“å‹¾çš„è¡¨ç¤ºæ˜¯æœåŠ¡å™¨è¿”å›çš„ï¼Œé€‰ä¸­ä¸€æ¡ Cookieï¼Œå³é”®å¯ä»¥ç›´æ¥å®šä½åˆ°å“ªä¸ªè¯·æ±‚å¸¦äº†è¿™ä¸ª Cookieï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç¼–è¾‘å€¼ï¼Œè¿˜å¯ä»¥åˆ é™¤å•ä¸ª Cookieï¼Œå½“ä½ ç™»å½•äº†è´¦å·ï¼Œä½†åˆéœ€è¦æ¸…é™¤æŸä¸ª Cookieï¼Œä¸”ä¸æƒ³é‡æ–°ç™»å½•æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½æˆ–è®¸æœ‰ç”¨ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/1cc2ddd95e3c595f71f1760b16d60b08.png" alt="35"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p>æ–‡ä¸­ç»™å‡ºäº†éƒ¨åˆ†å…³é”®ä»£ç ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œï¼Œéƒ¨åˆ†ç»†èŠ‚å¯èƒ½æ²¡æåŠåˆ°ï¼Œå®Œæ•´ä»£ç å·²æ”¾ GitHubï¼Œå‡æœ‰è¯¦ç»†æ³¨é‡Šï¼Œæ¬¢è¿ Starã€‚æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”ã€éæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œåœ¨ä»“åº“ä¸­ä¸‹è½½çš„æ–‡ä»¶å­¦ä¹ å®Œæ¯•ä¹‹åè¯·äº 24 å°æ—¶å†…åˆ é™¤ï¼</p><p>ä»“åº“åœ°å€ï¼š<a href="https://github.com/TRHX/Python3-Spider-Practice">https://github.com/TRHX/Python3-Spider-Practice</a></p><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><ul><li><p>JS ä»£ç é‡Œå¼•ç”¨äº†ä¸‰ä¸ªåº“ï¼Œnpm install å®‰è£…ä¸€ä¸‹å³å¯ï¼Œå¦‚æœå®‰è£…äº†è¿˜æç¤ºæ‰¾ä¸åˆ°åº“ï¼Œé‚£å°±æ˜¯è·¯å¾„é—®é¢˜ï¼Œæ¨èåœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤å®‰è£…ï¼Œæˆ–è€…åœ¨ Python ä»£ç é‡ŒæŒ‡å®šå®Œæ•´è·¯å¾„ï¼Œå…·ä½“æ–¹æ³•å¯è‡ªè¡Œç™¾åº¦ã€‚</p></li><li><p>jsencrypt è¿™ä¸ªåº“ï¼Œæœ¬åœ°è¿è¡Œå¯èƒ½ä¼šæŠ¥é”™ <code>window is not defined</code>ï¼Œåœ¨ <code>\node_modules\jsencrypt\bin\jsencrypt.js</code> æºç ä¸­åŠ å…¥ <code>var window = global;</code> å³å¯ï¼Œè¿™æ˜¯å®ç° RSA åŠ å¯†çš„åº“ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–å®ç°æ–¹æ³•æˆ–è€…åº“ï¼Œéƒ½å¯ä»¥ã€‚</p></li><li><p>execjs æ‰§è¡Œ JS çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæŠ¥ç¼–ç é”™è¯¯ <code>&quot;gbk&quot; can&#39;t decode byte...</code>ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œä¸€æ˜¯æ‰¾åˆ°å®˜æ–¹æºç  subprocess.pyï¼Œæœç´¢ <code>encoding=None</code> æ”¹æˆ <code>encoding=&#39;utf-8&#39;</code>ï¼ŒäºŒæ˜¯ç›´æ¥åœ¨ Python ä»£ç é‡Œé¢åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯ï¼š</p></li></ul><pre><code class="python">import subprocessfrom functools import partialsubprocess.Popen = partial(subprocess.Popen, encoding=&quot;utf-8&quot;)</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å£°æ˜&quot;&gt;&lt;a href=&quot;#å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;å£°æ˜&quot;&gt;&lt;/a&gt;å£°æ˜&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœ</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Python ä¸­å¦‚ä½•è§£å†³ asyncio æ–‡ä»¶æè¿°ç¬¦æœ€å¤§æ•°é‡é™åˆ¶é—®é¢˜</title>
    <link href="https://www.itbob.cn/article/048/"/>
    <id>https://www.itbob.cn/article/048/</id>
    <published>2022-02-23T02:18:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜å¤ç°"><a href="#é—®é¢˜å¤ç°" class="headerlink" title="é—®é¢˜å¤ç°"></a>é—®é¢˜å¤ç°</h2><p>Windows å¹³å°ä¸‹ï¼ŒPython ç‰ˆæœ¬ 3.5ï¼Œä½¿ç”¨å¼‚æ­¥æ¡†æ¶ asyncioï¼Œæœ‰æ—¶å€™ä¼šå‡ºç° <code>ValueError: too many file descriptors in select()</code> çš„æŠ¥é”™ä¿¡æ¯ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥èŠä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œä»¥åŠé—®é¢˜çš„ä¸€äº›è§£å†³æ–¹æ³•ã€‚</p><p>å†™ä¸€ä¸ªå° dome å¤ç°è¿™ä¸ªé—®é¢˜ï¼ˆç¯å¢ƒï¼šWindows 64 ä½ã€Python 3.7ï¼‰ï¼š</p><pre><code class="python">import aiohttpimport asyncionum = 0async def main(url):    async with aiohttp.ClientSession() as session:        async with session.get(url) as response:            global num            num += 1            print(&#39;%s â€”â€”&gt; %s&#39; % (str(num), response.status))def tasks():    url = &#39;https://www.baidu.com/s?ie=UTF-8&amp;wd=%s&#39;    task = [main(url % i) for i in range(10000)]    return taskloop = asyncio.get_event_loop()loop.run_until_complete(asyncio.wait(tasks()))</code></pre><p>åœ¨æ‰“å° 500 æ¬¡å·¦å³åå°±ä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/f70f58344164e7929022924cd757a85e.png" alt="01.png"></p><h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>å¥½åƒè¿™ä¸ªæŠ¥é”™å’Œ select æœ‰å…³ï¼Œé‚£ä»€ä¹ˆæ˜¯ select å‘¢ï¼Ÿè¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹ asyncio ä¸­çš„äº‹ä»¶å¾ªç¯ï¼Œå³ EventLoopã€‚</p><h3 id="äº‹ä»¶å¾ªç¯-EventLoop"><a href="#äº‹ä»¶å¾ªç¯-EventLoop" class="headerlink" title="äº‹ä»¶å¾ªç¯ EventLoop"></a>äº‹ä»¶å¾ªç¯ EventLoop</h3><p>äº‹ä»¶å¾ªç¯æ˜¯ asyncio çš„æ ¸å¿ƒï¼Œå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œã€ä»»åŠ¡å®Œæˆä¹‹åçš„å›è°ƒã€ç½‘ç»œ I/O æ“ä½œã€å­è¿›ç¨‹çš„è¿è¡Œï¼Œéƒ½æ˜¯é€šè¿‡äº‹ä»¶å¾ªç¯å®Œæˆçš„ï¼Œé€šä¿—æ¥è®²ï¼Œäº‹ä»¶å¾ªç¯æ‰€åšçš„å°±æ˜¯ç­‰å¾…äº‹ä»¶å‘ç”Ÿï¼Œç„¶åå†å°†æ¯ä¸ªäº‹ä»¶ä¸æˆ‘ä»¬å·²æ˜ç¡®ä¸æ‰€è¿°äº‹ä»¶ç±»å‹åŒ¹é…çš„å‡½æ•°è¿›è¡ŒåŒ¹é…ã€‚ä¸‹å›¾å¾ˆå¥½çš„å±•ç¤ºäº†åç¨‹ã€äº‹ä»¶å¾ªç¯ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/91dc097882fc67be9195869f3b179174.png" alt="02.png"></p><p>åœ¨ asyncio ä¸­ï¼Œä¸»è¦æä¾›äº†ä¸¤ç§ä¸åŒäº‹ä»¶å¾ªç¯çš„å®ç°æ–¹æ³•ï¼š </p><ul><li><p><strong>SelectorEventLoop</strong>ï¼šåŸºäº selectors æ¨¡å—çš„äº‹ä»¶å¾ªç¯ï¼Œselectors åˆæ˜¯å»ºç«‹åœ¨åº•å±‚çš„ I/O å¤ç”¨æ¨¡å— select ä¹‹ä¸Šçš„ï¼Œselectors æä¾›äº†é«˜åº¦å°è£…å’Œé«˜æ•ˆçš„ I/O å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ SelectorEventLoop åœ¨åº•å±‚å°±æ˜¯ä½¿ç”¨äº† select I/O å¤šè·¯å¤ç”¨çš„æœºåˆ¶ã€‚</p></li><li><p><strong>ProactorEventLoop</strong>ï¼šä½¿ç”¨ IOCP ä¸“ä¸º Windows æ„å»ºçš„äº‹ä»¶å¾ªç¯ï¼ŒIOCP å…¨ç§° I/O Completion Portï¼Œå³ I/O å®Œæˆç«¯å£ã€‚å®ƒæ˜¯æ”¯æŒå¤šä¸ªåŒæ—¶å‘ç”Ÿçš„å¼‚æ­¥ I/O æ“ä½œçš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œå®ƒå……åˆ†åˆ©ç”¨å†…æ ¸å¯¹è±¡çš„è°ƒåº¦ï¼Œåªä½¿ç”¨å°‘é‡çš„å‡ ä¸ªçº¿ç¨‹æ¥å¤„ç†å’Œå®¢æˆ·ç«¯çš„æ‰€æœ‰é€šä¿¡ï¼Œæ¶ˆé™¤äº†æ— è°“çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ˜¯ Windows ä¸‹æ€§èƒ½æœ€å¥½çš„ I/O æ¨¡å‹ï¼Œæœ‰å…³ IOCP çš„è¯¦ç»†ä»‹ç»å¯å‚è€ƒ<a href="https://docs.microsoft.com/en-ca/windows/win32/fileio/i-o-completion-ports">å¾®è½¯æ–‡æ¡£</a>ã€‚</p></li></ul><p>é‚£ä¹ˆè¿™ä¸¤ç§æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿåœ¨ asyncio ä¸­ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆæ–¹æ³•å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¸å¦¨çœ‹ä¸€ä¸‹ asyncio çš„æºç ï¼Œåœ¨ Python 3.7 ä¸­ï¼Œæ— è®ºåœ¨ Windows è¿˜æ˜¯ Linux ä¸­éƒ½å¯ä»¥çœ‹åˆ°å…¶é»˜è®¤çš„è®¾ç½®æ˜¯ SelectorEventLoopï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/7d650aeaed8ffcd845b1042a2a790501.png" alt="03.png"></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ†åˆ«åœ¨ Windows å¹³å°å’Œ Linux å¹³å°æ‰“å°ä¸€ä¸‹ EventLoop å¯¹è±¡ï¼ˆPython 3.7ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤éƒ½æ˜¯ SelectorEventLoopï¼š</p><pre><code class="python">import asyncioloop = asyncio.get_event_loop()print(loop)</code></pre><p>Windowsï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/bcfeab7170f5de6e7ad605d76aa5868a.png" alt="04.png"></p><p>Linuxï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/efb7794e5f2ba360cb3d0f0523061d6e.png" alt="05.png"></p><p>äº‹å®ä¸Šï¼Œåœ¨ Python 3.7 ä»¥åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œ   æ‰€æœ‰å¹³å°é»˜è®¤ä½¿ç”¨çš„éƒ½æ˜¯ SelectorEventLoopï¼Œåœ¨ Python 3.8 ä»¥åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼ŒUnix å¹³å°é»˜è®¤ä½¿ç”¨çš„æ˜¯ SelectorEventLoopï¼ŒWindows å¹³å°é»˜è®¤ä½¿ç”¨çš„æ˜¯ ProactorEventLoopï¼Œè¿™ä¸ªå·®å¼‚å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­çœ‹åˆ°ã€‚</p><ul><li>Python 3.7 æ–‡æ¡£ï¼š<a href="https://docs.python.org/3.7/library/asyncio-eventloop.html#event-loop-implementations">https://docs.python.org/3.7/library/asyncio-eventloop.html#event-loop-implementations</a></li><li>Python 3.8 æ–‡æ¡£ï¼š<a href="https://docs.python.org/3.8/library/asyncio-eventloop.html#event-loop-implementations">https://docs.python.org/3.8/library/asyncio-eventloop.html#event-loop-implementations</a></li></ul><p><img src="https://img-blog.csdnimg.cn/img_convert/30387729cf1d1eaafe4114fb3a4a847d.png" alt="06.png"></p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œè¿™å’Œ <code>ValueError: too many file descriptors in select()</code> çš„æŠ¥é”™é—®é¢˜æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿselect åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ</p><h3 id="I-O-å¤šè·¯å¤ç”¨"><a href="#I-O-å¤šè·¯å¤ç”¨" class="headerlink" title="I/O å¤šè·¯å¤ç”¨"></a>I/O å¤šè·¯å¤ç”¨</h3><p>è¦äº†è§£ selectï¼Œæˆ‘ä»¬è¿˜è¦äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ I/O å¤šè·¯å¤ç”¨ï¼ˆI/O multiplexingï¼‰ï¼ŒæœåŠ¡å™¨ç«¯ç¼–ç¨‹ç»å¸¸éœ€è¦æ„é€ é«˜æ€§èƒ½çš„ I/O æ¨¡å‹ï¼Œå¸¸è§çš„ I/O æ¨¡å‹æœ‰åŒæ­¥é˜»å¡ I/Oã€åŒæ­¥éé˜»å¡ I/Oã€I/O å¤šè·¯å¤ç”¨ç­‰ï¼›å½“éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯æ¥å…¥è¯·æ±‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šçº¿ç¨‹æˆ–è€… I/O å¤šè·¯å¤ç”¨æŠ€æœ¯è¿›è¡Œå¤„ç†ï¼ŒI/O å¤šè·¯å¤ç”¨æŠ€æœ¯å°±æ˜¯ä¸ºäº†è§£å†³è¿›ç¨‹æˆ–çº¿ç¨‹é˜»å¡åˆ°æŸä¸ª I/O ç³»ç»Ÿè°ƒç”¨è€Œå‡ºç°çš„æŠ€æœ¯ï¼Œä½¿è¿›ç¨‹ä¸é˜»å¡äºæŸä¸ªç‰¹å®šçš„ I/O ç³»ç»Ÿè°ƒç”¨ã€‚</p><p><strong>selectï¼Œpollï¼Œepoll ç­‰éƒ½æ˜¯ I/O å¤šè·¯å¤ç”¨çš„ä¸€ç§æœºåˆ¶</strong>ï¼Œå…¶ä¸­åä¸¤ä¸ªåœ¨ Linux ä¸­å¯ç”¨ï¼ŒWindows ä»…æ”¯æŒ selectï¼ŒI/O å¤šè·¯å¤ç”¨é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œå¯ä»¥ç›‘è§†å¤šä¸ªæè¿°ç¬¦ï¼Œä¸€æ—¦æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼Œä¸€èˆ¬æ˜¯è¯»å°±ç»ªæˆ–è€…å†™å°±ç»ªï¼Œå°±æ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦è¿›è¡Œè¯»å†™æ“ä½œä¹‹å‰ï¼Œèƒ½å¤Ÿé€šçŸ¥ç¨‹åºè¿›è¡Œç›¸åº”çš„è¯»å†™æ“ä½œã€‚</p><h3 id="select-çš„ç¼ºç‚¹"><a href="#select-çš„ç¼ºç‚¹" class="headerlink" title="select çš„ç¼ºç‚¹"></a>select çš„ç¼ºç‚¹</h3><p>I/O å¤šè·¯å¤ç”¨è¿™ä¸ªæ¦‚å¿µè¢«æå‡ºæ¥ä»¥åï¼Œ select æ˜¯ç¬¬ä¸€ä¸ªå®ç°è¿™ä¸ªæ¦‚å¿µçš„ï¼Œselect è¢«å®ç°ä»¥åï¼Œå¾ˆå¿«å°±æš´éœ²å‡ºäº†å¾ˆå¤šé—®é¢˜ï¼Œå…¶ä¸­ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ <strong>select åœ¨ Windows ä¸­é™åˆ¶äº†æ–‡ä»¶æè¿°ç¬¦æ•°é‡ä¸º 512 ä¸ªï¼Œåœ¨ Linux ä¸­é™åˆ¶ä¸º 1024 ä¸ª</strong>ï¼Œé‚£ä¹ˆåœ¨å‰é¢çš„ dome ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ Python 3.5ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ asyncio é»˜è®¤ä½¿ç”¨äº† SelectorEventLoopï¼Œåº•å±‚è°ƒç”¨çš„æ˜¯ selectï¼Œå— select ç¼ºç‚¹çš„å½±å“ï¼Œå¹¶å‘é‡è¿‡é«˜ï¼Œå°±å‡ºç°äº† <code>ValueError: too many file descriptors in select()</code> çš„æŠ¥é”™ä¿¡æ¯ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><h3 id="1-æ›´æ¢äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨"><a href="#1-æ›´æ¢äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨" class="headerlink" title="1.æ›´æ¢äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨"></a>1.æ›´æ¢äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨</h3><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Python 3.7 åŠä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆåœ¨ Windows å¹³å°ï¼Œå¯ä»¥ä½¿ç”¨ ProactorEventLoopã€‚åœ¨ Linux å¹³å°å¯ä»¥ä½¿ç”¨ PollSelectorã€‚</p><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ ä½¿ç”¨äº† ProactorEventLoopï¼Œé‚£ä¹ˆä½ å°†æ— æ³•ä½¿ç”¨ä»£ç†ï¼è¿™æ˜¯ asyncio çš„ bugï¼Œæ—©åœ¨ 2020 å¹´ 1 æœˆå°±æœ‰äººæè¿‡ <a href="https://github.com/aio-libs/aiohttp/issues/4536">issue</a>ï¼Œç›®å‰ä»ç„¶å¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„ issueï¼Œå®˜æ–¹è²Œä¼¼ä¹Ÿè¿˜æ²¡åŠæ³•è§£å†³ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæ‚¨å¿…é¡»è¦ä½¿ç”¨ä»£ç†ï¼Œåˆ™å¯ä»¥å‚è€ƒåé¢çš„è§£å†³åŠæ³•ã€‚</p><pre><code class="python">import selectorsimport asyncioimport sysif sys.platform == &#39;win32&#39;:    loop = asyncio.ProactorEventLoop()    asyncio.set_event_loop(loop)else:    selector = selectors.PollSelector()    loop = asyncio.SelectorEventLoop(selector)    asyncio.set_event_loop(loop)</code></pre><h3 id="2-é™åˆ¶å¹¶å‘é‡"><a href="#2-é™åˆ¶å¹¶å‘é‡" class="headerlink" title="2.é™åˆ¶å¹¶å‘é‡"></a>2.é™åˆ¶å¹¶å‘é‡</h3><p>å¯ä»¥ä½¿ç”¨æ–¹æ³• <code>asyncio.Semaphore()</code> æ¥é™åˆ¶å¹¶å‘é‡ï¼ŒSemaphore å°±æ˜¯ä¿¡å·é‡çš„æ„æ€ï¼ŒSemaphore ç®¡ç†ä¸€ä¸ªå†…éƒ¨è®¡æ•°å™¨ï¼Œè¯¥è®¡æ•°å™¨åœ¨æ¯æ¬¡è°ƒç”¨ <code>acquire()</code> æ–¹æ³•æ—¶é€’å‡ï¼Œæ¯æ¬¡è°ƒç”¨ <code>release()</code> æ–¹æ³•æ—¶é€’å¢ï¼Œè®¡æ•°å™¨æ°¸è¿œä¸ä¼šä½äºé›¶ï¼Œå½“æ–¹æ³• <code>acquire()</code> å‘ç°å®ƒä¸ºé›¶æ—¶ï¼Œå®ƒä¼šé˜»å¡ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹è°ƒç”¨ <code>release()</code> æ–¹æ³•ã€‚é€šè¿‡é™åˆ¶å¹¶å‘é‡çš„æ–¹æ³•æ¥è§£å†³æŠ¥é”™é—®é¢˜æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><pre><code class="python">import aiohttpimport asyncionum = 0async def main(url, semaphore):    async with semaphore:        async with aiohttp.ClientSession() as session:            async with session.get(url) as response:                global num                num += 1                print(&#39;%s â€”â€”&gt; %s&#39; % (str(num), response.status))def tasks():    semaphore = asyncio.Semaphore(300)                         # é™åˆ¶å¹¶å‘é‡ä¸º 300    url = &#39;https://www.baidu.com/s?ie=UTF-8&amp;wd=%s&#39;    task = [main(url % i, semaphore) for i in range(10000)]    # #æ€»å…± 10000 ä»»åŠ¡    return taskloop = asyncio.get_event_loop()loop.run_until_complete(asyncio.wait(tasks()))</code></pre><h3 id="3-ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶"><a href="#3-ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶" class="headerlink" title="3.ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶"></a>3.ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>åœ¨ Windows ä¸­ï¼Œæœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶åœ¨ C è¯­è¨€çš„å¤´æ–‡ä»¶ Winsock2.h ä¸­ä½¿ç”¨å˜é‡ <code>FD_SETSIZE</code> è¿›è¡Œå®šä¹‰ï¼Œå¦‚æœè¦ä¿®æ”¹å®ƒï¼Œå¯ä»¥é€šè¿‡åœ¨åŒ…å« Winsock2.h ä¹‹å‰å°† <code>FD_SETSIZE</code> å®šä¹‰ä¸ºå¦ä¸€ä¸ªå€¼æ¥ä¿®æ”¹ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯ Python çš„è¯ï¼Œæ˜¯ä¸å¤ªå¥½å¯¹è¿™ä¸ªå€¼è¿›è¡Œä¿®æ”¹çš„ï¼Œå¯ä»¥å‚è€ƒå¾®è½¯å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.microsoft.com/en-us/windows/win32/api/winsock2/nf-winsock2-select">https://docs.microsoft.com/en-us/windows/win32/api/winsock2/nf-winsock2-select</a></p><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>åœ¨ Linux å¹³å°ï¼Œå¯ä»¥ä½¿ç”¨ <code>ulimit</code> å‘½ä»¤æ¥ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼š</p><ul><li><p>æŸ¥çœ‹å½“å‰ä¼šè¯æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼ˆé»˜è®¤1024ï¼‰ï¼š<code>ulimit -n</code></p></li><li><p>ä¸´æ—¶ä¿®æ”¹é™åˆ¶ï¼Œåªå¯¹å½“å‰çš„ä¼šè¯æœ‰æ•ˆï¼š<code>ulimit -SHn 65536</code></p></li><li><p>æ°¸ä¹…ä¿®æ”¹é™åˆ¶ï¼Œåœ¨ <code>/etc/security/limits.conf</code> æ–‡ä»¶é‡Œæ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code>* hard nofile 65536* soft nofile 65536</code></pre></li></ul><p><code>ulimit</code> å‘½ä»¤å‚è€ƒï¼š</p><pre><code>    -S    ä½¿ç”¨è½¯ (soft) èµ„æºé™åˆ¶    -H    ä½¿ç”¨ç¡¬ (hard) èµ„æºé™åˆ¶    -a    æ‰€æœ‰å½“å‰é™åˆ¶éƒ½è¢«æŠ¥å‘Š    -b    å¥—æ¥å­—ç¼“å­˜å°ºå¯¸    -c    åˆ›å»ºçš„æ ¸æ–‡ä»¶çš„æœ€å¤§å°ºå¯¸    -d    ä¸€ä¸ªè¿›ç¨‹çš„æ•°æ®åŒºçš„æœ€å¤§å°ºå¯¸    -e    æœ€é«˜çš„è°ƒåº¦ä¼˜å…ˆçº§ (nice)    -f    æœ‰ shell åŠå…¶å­è¿›ç¨‹å¯ä»¥å†™çš„æœ€å¤§æ–‡ä»¶å°ºå¯¸    -i    æœ€å¤šçš„å¯ä»¥æŒ‚èµ·çš„ä¿¡å·æ•°    -k    åˆ†é…ç»™æ­¤è¿›ç¨‹çš„æœ€å¤§ kqueue æ•°é‡    -l    ä¸€ä¸ªè¿›ç¨‹å¯ä»¥é”å®šçš„æœ€å¤§å†…å­˜å°ºå¯¸    -m    æœ€å¤§çš„å†…å­˜è¿›é©»å°ºå¯¸    -n    æœ€å¤šçš„æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ä¸ªæ•°    -p    ç®¡é“ç¼“å†²åŒºå°ºå¯¸    -q    POSIX ä¿¡æ¯é˜Ÿåˆ—çš„æœ€å¤§å­—èŠ‚æ•°    -r    å®æ—¶è°ƒåº¦çš„æœ€å¤§ä¼˜å…ˆçº§    -s    æœ€å¤§æ ˆå°ºå¯¸    -t    æœ€å¤§çš„CPUæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½    -u    æœ€å¤§ç”¨æˆ·è¿›ç¨‹æ•°    -v    è™šæ‹Ÿå†…å­˜å°ºå¯¸    -x    æœ€å¤§çš„æ–‡ä»¶é”æ•°é‡    -P    æœ€å¤§ä¼ªç»ˆç«¯æ•°é‡    -T    æœ€å¤§çº¿ç¨‹æ•°é‡</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>asyncio äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨ï¼Œåœ¨ Python 3.7 ä»¥åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰å¹³å°é»˜è®¤ä½¿ç”¨çš„éƒ½æ˜¯ SelectorEventLoopï¼Œåœ¨ Python 3.8 ä»¥åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼ŒUnix å¹³å°é»˜è®¤ä½¿ç”¨çš„æ˜¯ SelectorEventLoopï¼ŒWindows å¹³å°é»˜è®¤ä½¿ç”¨çš„æ˜¯ ProactorEventLoopã€‚</p><p>select åœ¨ Windows ä¸­é™åˆ¶äº†æ–‡ä»¶æè¿°ç¬¦æœ€å¤§æ•°é‡ä¸º 512 ä¸ªï¼Œåœ¨ Linux ä¸­é™åˆ¶ä¸º 1024 ä¸ªã€‚</p><p>è¦è§£å†³ <code>ValueError: too many file descriptors in select()</code> çš„æŠ¥é”™é—®é¢˜ï¼Œæ ¹æ®æ‚¨çš„å¹³å°å’Œä¸šåŠ¡è¦æ±‚é€‰æ‹©åˆç†çš„è§£å†³æ–¹æ³•ï¼š</p><h3 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h3><ol><li><p>é€šè¿‡ <code>asyncio.Semaphore()</code> æ–¹æ³•æ¥é™åˆ¶å¹¶å‘é‡ï¼Œé€šå¸¸è®¾ç½®åœ¨ 300-500 æ¯”è¾ƒåˆç†ï¼Œè¿™æ˜¯æœ€ä¼˜çš„åšæ³•ï¼›</p></li><li><p>æ›´æ¢ asyncio çš„äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨ä¸º ProactorEventLoopï¼Œ<strong>æ³¨æ„ï¼šè¿™å°†å¯¼è‡´æ— æ³•ä½¿ç”¨ä»£ç†ï¼</strong></p></li></ol><h3 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h3><ol><li><p>é€šè¿‡ <code>asyncio.Semaphore()</code> æ–¹æ³•æ¥é™åˆ¶å¹¶å‘é‡ï¼Œé€šå¸¸è®¾ç½®åœ¨ 800-1000 æ¯”è¾ƒåˆç†ï¼›</p></li><li><p>é€šè¿‡ <code>ulimit</code> å‘½ä»¤æ¥ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼›</p></li><li><p>æ›´æ¢ asyncio çš„äº‹ä»¶å¾ªç¯é€‰æ‹©å™¨ä¸º PollSelectorã€‚</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é—®é¢˜å¤ç°&quot;&gt;&lt;a href=&quot;#é—®é¢˜å¤ç°&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜å¤ç°&quot;&gt;&lt;/a&gt;é—®é¢˜å¤ç°&lt;/h2&gt;&lt;p&gt;Windows å¹³å°ä¸‹ï¼ŒPython ç‰ˆæœ¬ 3.5ï¼Œä½¿ç”¨å¼‚æ­¥æ¡†æ¶ asyncioï¼Œæœ‰æ—¶å€™ä¼šå‡ºç° &lt;code&gt;ValueErr</summary>
      
    
    
    
    <category term="Python" scheme="https://www.itbob.cn/categories/Python/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="asyncio" scheme="https://www.itbob.cn/tags/asyncio/"/>
    
  </entry>
  
  <entry>
    <title>RPC æŠ€æœ¯åŠå…¶æ¡†æ¶ Sekiro åœ¨çˆ¬è™«é€†å‘ä¸­çš„åº”ç”¨ï¼ŒåŠ å¯†æ•°æ®ä¸€æŠŠæ¢­</title>
    <link href="https://www.itbob.cn/article/047/"/>
    <id>https://www.itbob.cn/article/047/</id>
    <published>2022-02-21T09:20:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-RPC"><a href="#ä»€ä¹ˆæ˜¯-RPC" class="headerlink" title="ä»€ä¹ˆæ˜¯ RPC"></a>ä»€ä¹ˆæ˜¯ RPC</h2><p><del>RPCï¼Œè‹±æ–‡ RangPaCongï¼Œä¸­æ–‡è®©çˆ¬è™«ï¼Œæ—¨åœ¨ä¸ºçˆ¬è™«å¼€è·¯ï¼Œç§’æ€ä¸€åˆ‡ï¼Œè®©çˆ¬è™«ç•…é€šæ— é˜»ï¼</del></p><p>å¼€ä¸ªç©ç¬‘ï¼Œå®é™…ä¸Š RPC ä¸ºè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå…¨ç§° Remote Procedure Callï¼Œæ˜¯ä¸€ç§æŠ€æœ¯æ€æƒ³è€Œéä¸€ç§è§„èŒƒæˆ–åè®®ã€‚RPC çš„è¯ç”Ÿäº‹å®ä¸Šç¦»ä¸å¼€åˆ†å¸ƒå¼çš„å‘å±•ï¼ŒRPC ä¸»è¦è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>è§£å†³äº†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„äº’ç›¸è°ƒç”¨é—®é¢˜ï¼›</li><li>RPC ä½¿å¾—åœ¨è¿œç¨‹è°ƒç”¨æ—¶ï¼Œåƒæœ¬åœ°è°ƒç”¨ä¸€æ ·æ–¹ä¾¿ï¼Œè®©è°ƒç”¨è€…æ„ŸçŸ¥ä¸åˆ°è¿œç¨‹è°ƒç”¨çš„é€»è¾‘ã€‚</li></ol><p>RPC çš„å­˜åœ¨è®©æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿæ›´åŠ å®¹æ˜“ï¼Œç›¸æ¯”äº HTTP åè®®ï¼ŒRPC é‡‡ç”¨äºŒè¿›åˆ¶å­—èŠ‚ç ä¼ è¾“ï¼Œå› æ­¤ä¹Ÿæ›´åŠ é«˜æ•ˆã€å®‰å…¨ã€‚åœ¨ä¸€ä¸ªå…¸å‹ RPC çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼ŒåŒ…å«äº†æœåŠ¡å‘ç°ã€è´Ÿè½½ã€å®¹é”™ã€ç½‘ç»œä¼ è¾“ã€åºåˆ—åŒ–ç­‰ç»„ä»¶ï¼Œå®Œæ•´ RPC æ¶æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/71bb132886df40999a33ad59bd6a1159.png" alt="01"></p><h2 id="JSRPC"><a href="#JSRPC" class="headerlink" title="JSRPC"></a>JSRPC</h2><p>RPC æŠ€æœ¯æ˜¯éå¸¸å¤æ‚çš„ï¼Œå¯¹äºæˆ‘ä»¬æçˆ¬è™«ã€é€†å‘çš„æ¥è¯´ï¼Œä¸éœ€è¦å®Œå…¨äº†è§£ï¼Œåªéœ€è¦çŸ¥é“è¿™é¡¹æŠ€æœ¯å¦‚ä½•åœ¨é€†å‘ä¸­åº”ç”¨å°±è¡Œäº†ã€‚</p><p>RPC åœ¨é€†å‘ä¸­ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°†æœ¬åœ°å’Œæµè§ˆå™¨ï¼Œçœ‹åšæ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼ŒäºŒè€…ä¹‹é—´é€šè¿‡ WebSocket åè®®è¿›è¡Œ RPC é€šä¿¡ï¼Œåœ¨æµè§ˆå™¨ä¸­å°†åŠ å¯†å‡½æ•°æš´éœ²å‡ºæ¥ï¼Œåœ¨æœ¬åœ°ç›´æ¥è°ƒç”¨æµè§ˆå™¨ä¸­å¯¹åº”çš„åŠ å¯†å‡½æ•°ï¼Œä»è€Œå¾—åˆ°åŠ å¯†ç»“æœï¼Œä¸å¿…å»åœ¨æ„å‡½æ•°å…·ä½“çš„æ‰§è¡Œé€»è¾‘ï¼Œä¹Ÿçœå»äº†æ‰£ä»£ç ã€è¡¥ç¯å¢ƒç­‰æ“ä½œï¼Œå¯ä»¥çœå»å¤§é‡çš„é€†å‘è°ƒè¯•æ—¶é—´ã€‚æˆ‘ä»¬ä»¥æŸå›¢ç½‘é¡µç«¯çš„ç™»å½•ä¸ºä¾‹æ¥æ¼”ç¤º RPC åœ¨é€†å‘ä¸­çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚ï¼ˆå‡è®¾ä½ å·²ç»æœ‰ä¸€å®šé€†å‘åŸºç¡€ï¼Œäº†è§£ WebSocket åè®®ï¼Œçº¯å°ç™½å¯ä»¥å…ˆçœ‹çœ‹ä»¥å‰çš„æ–‡ç« ï¼‰</p><ul><li>ä¸»é¡µï¼ˆbase64ï¼‰ï¼š<code>aHR0cHM6Ly9wYXNzcG9ydC5tZWl0dWFuLmNvbS9hY2NvdW50L3VuaXRpdmVsb2dpbg==</code></li><li>å‚æ•°ï¼šh5Fingerprint</li></ul><p>é¦–å…ˆæŠ“ä¸€ä¸‹åŒ…ï¼Œç™»å½•æ¥å£æœ‰ä¸€ä¸ªè¶…çº§é•¿çš„å‚æ•° h5Fingerprintï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/8fec89761494422c845e5bc8fb712a9c.png" alt="02"></p><p>ç›´æ¥æœä¸€ä¸‹å°±èƒ½æ‰¾åˆ°åŠ å¯†å‡½æ•°ï¼š</p><p><img src="https://img-blog.csdnimg.cn/59e03ca57d2d4b75937961e81fc7b247.png" alt="03"></p><p>å…¶ä¸­ <code>utility.getH5fingerprint()</code> ä¼ å…¥çš„å‚æ•° <code>window.location.origin + url</code> æ ¼å¼åŒ–åï¼Œå‚æ•°å¦‚ä¸‹ï¼š</p><pre><code>url = &quot;https://passport.è„±æ•å¤„ç†.com/account/unitivelogin&quot;params = &#123;    &quot;risk_partner&quot;: &quot;0&quot;,    &quot;risk_platform&quot;: &quot;1&quot;,    &quot;risk_app&quot;: &quot;-1&quot;,    &quot;uuid&quot;: &quot;96309b5f00ba4143b920.1644805104.1.0.0&quot;,    &quot;token_id&quot;: &quot;DNCmLoBpSbBD6leXFdqIxA&quot;,    &quot;service&quot;: &quot;www&quot;,    &quot;continue&quot;: &quot;https://www.è„±æ•å¤„ç†.com/account/settoken?continue=https%3A%2F%2Fwww.è„±æ•å¤„ç†.com%2F&quot;&#125;</code></pre><p>uuid å’Œ token_id éƒ½å¯ä»¥ç›´æ¥æœåˆ°ï¼Œä¸æ˜¯æœ¬æ¬¡ç ”ç©¶é‡ç‚¹ï¼Œè¿™é‡Œä¸å†ç»†è¯´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ RPC æŠ€æœ¯ï¼Œç›´æ¥è°ƒç”¨æµè§ˆå™¨é‡Œçš„ <code>utility.getH5fingerprint()</code> æ–¹æ³•ï¼Œé¦–å…ˆåœ¨æœ¬åœ°ç¼–å†™æœåŠ¡ç«¯ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿä¸€ç›´è¾“å…¥å¾…åŠ å¯†å­—ç¬¦ä¸²ï¼Œæ¥æ”¶å¹¶æ‰“å°åŠ å¯†åçš„å­—ç¬¦ä¸²ï¼š</p><pre><code class="python"># ==================================# --*-- coding: utf-8 --*--# @Time    : 2022-02-14# @Author  : ITBOB# @FileName: ws_server.py# @Software: PyCharm# ==================================import sysimport asyncioimport websocketsasync def receive_massage(websocket):    while True:        send_text = input(&quot;è¯·è¾“å…¥è¦åŠ å¯†çš„å­—ç¬¦ä¸²: &quot;)        if send_text == &quot;exit&quot;:            print(&quot;Exit, goodbye!&quot;)            await websocket.send(send_text)            await websocket.close()            sys.exit()        else:            await websocket.send(send_text)            response_text = await websocket.recv()            print(&quot;\nåŠ å¯†ç»“æœï¼š&quot;, response_text)start_server = websockets.serve(receive_massage, &#39;127.0.0.1&#39;, 5678)  # è‡ªå®šä¹‰ç«¯å£asyncio.get_event_loop().run_until_complete(start_server)asyncio.get_event_loop().run_forever()</code></pre><p>ç¼–å†™æµè§ˆå™¨å®¢æˆ·ç«¯ JS ä»£ç ï¼Œæ”¶åˆ°æ¶ˆæ¯å°±ç›´æ¥ <code>utility.getH5fingerprint()</code> å¾—åˆ°åŠ å¯†å‚æ•°å¹¶å‘é€ç»™æœåŠ¡ç«¯ï¼š</p><pre><code class="javascript">/* ==================================# @Time    : 2022-02-14# @Author  : ITBOB# @FileName: ws_client.js# @Software: PyCharm# ================================== */var ws = new WebSocket(&quot;ws://127.0.0.1:5678&quot;);  // è‡ªå®šä¹‰ç«¯å£ws.onmessage = function (evt) &#123;    console.log(&quot;Received Message: &quot; + evt.data);    if (evt.data == &quot;exit&quot;) &#123;        ws.close();    &#125; else &#123;        ws.send(utility.getH5fingerprint(evt.data))    &#125;&#125;;</code></pre><p>ç„¶åæˆ‘ä»¬éœ€è¦æŠŠå®¢æˆ·ç«¯ä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸­ï¼Œè¿™é‡Œæ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æŠ“åŒ…è½¯ä»¶ Fiddler æ›¿æ¢å“åº”ã€æµè§ˆå™¨æ’ä»¶ ReRes æ›¿æ¢ JSã€æµè§ˆå™¨å¼€å‘è€…å·¥å…· Overrides é‡å†™åŠŸèƒ½ç­‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ’ä»¶ã€æ²¹çŒ´ç­‰æ³¨å…¥ Hook çš„æ–¹å¼æ’å…¥ï¼Œåæ­£æ–¹æ³•å¾ˆå¤šï¼Œå¯¹è¿™äº›æ–¹æ³•ä¸å¤ªäº†è§£çš„æœ‹å‹å¯ä»¥å»çœ‹çœ‹ä»¥å‰çš„æ–‡ç« ï¼Œéƒ½æœ‰ä»‹ç»ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…· Overrides é‡å†™åŠŸèƒ½ï¼Œå°† WebSocket å®¢æˆ·ç«¯ä»£ç åŠ åˆ°åŠ å¯†çš„è¿™ä¸ª JS æ–‡ä»¶é‡Œå¹¶ Ctrl+S ä¿å­˜ï¼Œè¿™é‡Œå°†å…¶å†™æˆäº† IIFE è‡ªæ‰§è¡Œæ–¹å¼ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯é˜²æ­¢æ±¡æŸ“å…¨å±€å˜é‡ï¼Œä¸ç”¨è‡ªæ‰§è¡Œæ–¹å¼å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p><img src="https://img-blog.csdnimg.cn/5dfd3cb4f9614bed9b3a2eaa60f20c3d.png" alt="04"></p><p>ç„¶åå…ˆè¿è¡Œæœ¬åœ°æœåŠ¡ç«¯ä»£ç ï¼Œç½‘é¡µä¸Šå…ˆç™»å½•ä¸€éï¼Œç½‘é¡µä¸Šå…ˆç™»å½•ä¸€éï¼Œç½‘é¡µä¸Šå…ˆç™»å½•ä¸€éï¼Œé‡è¦çš„æ­¥éª¤è¯´ä¸‰éï¼ç„¶åå°±å¯ä»¥åœ¨æœ¬åœ°ä¼ å…¥å¾…åŠ å¯†å­—ç¬¦ä¸²ï¼Œè·å– <code>utility.getH5fingerprint()</code> åŠ å¯†åçš„ç»“æœäº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/8851ff218c3a424f878fda67ecfe6f45.png" alt="05"></p><h2 id="Sekiro"><a href="#Sekiro" class="headerlink" title="Sekiro"></a>Sekiro</h2><p>é€šè¿‡å‰é¢çš„ç¤ºä¾‹ï¼Œå¯ä»¥å‘ç°è‡ªå·±å†™æœåŠ¡ç«¯å¤ªéº»çƒ¦äº†ï¼Œä¸æ˜“æ‰©å±•ï¼Œé‚£è¿™æ–¹é¢æœ‰æ²¡æœ‰ç°æˆçš„è½®å­å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œè¿™é‡Œä»‹ç»ä¸¤ä¸ªé¡¹ç›®ï¼š</p><ul><li>JsRPC-hliangï¼š<a href="https://github.com/jxhczhl/JsRpc">https://github.com/jxhczhl/JsRpc</a></li><li>Sekiroï¼š<a href="https://github.com/virjar/sekiro">https://github.com/virjar/sekiro</a></li></ul><p>JsRPC-hliang æ˜¯ç”¨ go è¯­è¨€å†™çš„ï¼Œæ˜¯ä¸“é—¨ä¸º JS é€†å‘åšçš„é¡¹ç›®ï¼Œè€Œ Sekiro åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼ŒSekiro æ˜¯ç”±é‚“ç»´ä½³å¤§ä½¬ï¼Œä¿—ç§°æ¸£æ€»ï¼Œå†™çš„ä¸€ä¸ªåŸºäºé•¿é“¾æ¥å’Œä»£ç æ³¨å…¥çš„ Android Private API æš´éœ²æ¡†æ¶ï¼Œå¯ä»¥ç”¨åœ¨ APP é€†å‘ã€APP æ•°æ®æŠ“å–ã€Android ç¾¤æ§ç­‰åœºæ™¯ï¼ŒåŒæ—¶ Sekiro ä¹Ÿæ˜¯ç›®å‰å…¬å¼€æ–¹æ¡ˆå”¯ä¸€ç¨³å®šçš„ JSRPC æ¡†æ¶ï¼Œä¸¤è€…åœ¨ JS é€†å‘æ–¹é¢çš„ä½¿ç”¨æ–¹æ³•å…¶å®éƒ½å·®ä¸å¤šï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»ä¸€ä¸‹ Sekiro åœ¨ Web JS é€†å‘ä¸­çš„åº”ç”¨ã€‚</p><p>å‚è€ƒ Sekiro æ–‡æ¡£ï¼Œé¦–å…ˆåœ¨æœ¬åœ°ç¼–è¯‘é¡¹ç›®ï¼š</p><ul><li><p>Linux &amp; Macï¼šæ‰§è¡Œè„šæœ¬ <code>build_demo_server.sh</code>ï¼Œä¹‹åå¾—åˆ°äº§å‡ºå‘å¸ƒå‹ç¼©åŒ…ï¼š<code>sekiro-service-demo/target/sekiro-release-demo.zip</code></p></li><li><p>Windowsï¼šå¯ä»¥ç›´æ¥ä¸‹è½½ï¼š<a href="https://oss.virjar.com/sekiro/sekiro-demo">https://oss.virjar.com/sekiro/sekiro-demo</a></p></li></ul><p>ç„¶ååœ¨æœ¬åœ°è¿è¡Œï¼ˆéœ€è¦æœ‰ Java ç¯å¢ƒï¼Œè‡ªè¡Œé…ç½®ï¼‰ï¼š</p><ul><li>Linux &amp; Macï¼š<code>bin/sekiro.sh</code></li><li>Windowsï¼š<code>bin/sekiro.bat</code></li></ul><p>ä»¥ Windows ä¸ºä¾‹ï¼Œå¯åŠ¨åå¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/c7acc0ca85e040d38ee97aff3e256f22.png" alt="06"></p><p>æ¥ä¸‹æ¥å°±éœ€è¦åœ¨æµè§ˆå™¨é‡Œæ³¨å…¥ä»£ç äº†ï¼Œéœ€è¦å°†ä½œè€…æä¾›çš„ sekiro_web_client.jsï¼ˆä¸‹è½½åœ°å€ï¼š<a href="https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js%EF%BC%89">https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.jsï¼‰</a> æ³¨å…¥åˆ°æµè§ˆå™¨ç¯å¢ƒï¼Œç„¶åé€šè¿‡ SekiroClient å’Œ Sekiro æœåŠ¡å™¨é€šä¿¡ï¼Œå³å¯ç›´æ¥ RPC è°ƒç”¨æµè§ˆå™¨å†…éƒ¨æ–¹æ³•ï¼Œå®˜æ–¹æä¾›çš„ SekiroClient ä»£ç æ ·ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function guid() &#123;    function S4() &#123;        return (((1+Math.random())*0x10000)|0).toString(16).substring(1);    &#125;    return (S4()+S4()+&quot;-&quot;+S4()+&quot;-&quot;+S4()+&quot;-&quot;+S4()+&quot;-&quot;+S4()+S4()+S4());&#125;var client = new SekiroClient(&quot;wss://sekiro.virjar.com/business/register?group=ws-group&amp;clientId=&quot;+guid());client.registerAction(&quot;clientTime&quot;,function(request, resolve, reject)&#123;    resolve(&quot;&quot;+new Date());&#125;)</code></pre><p>wss é“¾æ¥é‡Œï¼Œå¦‚æœæ˜¯å…è´¹ç‰ˆï¼Œè¦å°† business æ”¹æˆ business-demoï¼Œè§£é‡Šä¸€ä¸‹æ¶‰åŠåˆ°çš„åè¯ï¼š</p><ul><li><strong>group</strong>ï¼šä¸šåŠ¡ç±»å‹ï¼ˆæ¥å£ç»„ï¼‰ï¼Œæ¯ä¸ªä¸šåŠ¡ä¸€ä¸ª groupï¼Œgroup ä¸‹é¢å¯ä»¥æ³¨å†Œå¤šä¸ªç»ˆç«¯ï¼ˆSekiroClientï¼‰ï¼ŒåŒæ—¶ group å¯ä»¥æŒ‚è½½å¤šä¸ª Actionï¼›</li><li><strong>clientId</strong>ï¼šæŒ‡ä»£è®¾å¤‡ï¼Œå¤šä¸ªè®¾å¤‡ä½¿ç”¨å¤šä¸ªæœºå™¨æä¾› API æœåŠ¡ï¼Œæä¾›ç¾¤æ§èƒ½åŠ›å’Œè´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼›</li><li><strong>SekiroClient</strong>ï¼šæœåŠ¡æä¾›è€…å®¢æˆ·ç«¯ï¼Œä¸»è¦åœºæ™¯ä¸ºæ‰‹æœº/æµè§ˆå™¨ç­‰ã€‚æœ€ç»ˆçš„ Sekiro è°ƒç”¨ä¼šè½¬å‘åˆ° SekiroClientã€‚æ¯ä¸ª client éœ€è¦æœ‰ä¸€ä¸ªæƒŸä¸€çš„ clientIdï¼›</li><li><strong>registerAction</strong>ï¼šæ¥å£ï¼ŒåŒä¸€ä¸ª group ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªæ¥å£ï¼Œåˆ†åˆ«åšä¸åŒçš„åŠŸèƒ½ï¼›</li><li><strong>resolve</strong>ï¼šå°†å†…å®¹ä¼ å›ç»™å®¢æˆ·ç«¯çš„æ–¹æ³•ï¼›</li><li><strong>request</strong>ï¼šå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡Œæœ‰å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥ä»¥é”®å€¼å¯¹çš„æ–¹å¼ä»é‡Œé¢æå–å‚æ•°ç„¶åå†åšå¤„ç†ã€‚</li></ul><p>è¯´äº†è¿™ä¹ˆå¤šå¯èƒ½ä¹Ÿä¸å¥½ç†è§£ï¼Œç›´æ¥å®æˆ˜ï¼Œè¿˜æ˜¯ä»¥æŸå›¢ç½‘é¡µç«¯ç™»å½•ä¸ºä¾‹ï¼Œæˆ‘ä»¬å°† sekiro_web_client.js ä¸ SekiroClient é€šä¿¡ä»£ç å†™åœ¨ä¸€èµ·ï¼Œç„¶åæ ¹æ®éœ€æ±‚ï¼Œæ”¹å†™ä¸€ä¸‹é€šä¿¡éƒ¨åˆ†ä»£ç ï¼š</p><ol><li>ws é“¾æ¥æ”¹ä¸ºï¼š<code>ws://127.0.0.1:5620/business-demo/register?group=rpc-test&amp;clientId=</code>ï¼Œè‡ªå®šä¹‰ <code>group</code> ä¸º <code>rpc-test</code>ï¼›</li><li>æ³¨å†Œä¸€ä¸ªäº‹ä»¶ <code>registerAction</code> ä¸º <code>getH5fingerprint</code>ï¼›</li><li><code>resolve</code> è¿”å›çš„ç»“æœä¸º <code>utility.getH5fingerprint(request[&quot;url&quot;])</code>ï¼Œå³åŠ å¯†å¹¶è¿”å›å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„ url å‚æ•°ã€‚</li></ol><p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼ˆç•™æ„æœ«å°¾ SekiroClient é€šä¿¡ä»£ç éƒ¨åˆ†çš„å†™æ³•ï¼‰ï¼š</p><pre><code class="javascript">/* ==================================# @Time    : 2022-02-14# @Author  : ITBOB# @FileName: sekiro.js# @Software: PyCharm# ================================== */(function () &#123;    &#39;use strict&#39;;    function SekiroClient(wsURL) &#123;        this.wsURL = wsURL;        this.handlers = &#123;&#125;;        this.socket = &#123;&#125;;        // check        if (!wsURL) &#123;            throw new Error(&#39;wsURL can not be empty!!&#39;)        &#125;        this.webSocketFactory = this.resolveWebSocketFactory();        this.connect()    &#125;    SekiroClient.prototype.resolveWebSocketFactory = function () &#123;        if (typeof window === &#39;object&#39;) &#123;            var theWebSocket = window.WebSocket ? window.WebSocket : window.MozWebSocket;            return function (wsURL) &#123;                function WindowWebSocketWrapper(wsURL) &#123;                    this.mSocket = new theWebSocket(wsURL);                &#125;                WindowWebSocketWrapper.prototype.close = function () &#123;                    this.mSocket.close();                &#125;;                WindowWebSocketWrapper.prototype.onmessage = function (onMessageFunction) &#123;                    this.mSocket.onmessage = onMessageFunction;                &#125;;                WindowWebSocketWrapper.prototype.onopen = function (onOpenFunction) &#123;                    this.mSocket.onopen = onOpenFunction;                &#125;;                WindowWebSocketWrapper.prototype.onclose = function (onCloseFunction) &#123;                    this.mSocket.onclose = onCloseFunction;                &#125;;                WindowWebSocketWrapper.prototype.send = function (message) &#123;                    this.mSocket.send(message);                &#125;;                return new WindowWebSocketWrapper(wsURL);            &#125;        &#125;        if (typeof weex === &#39;object&#39;) &#123;            // this is weex env : https://weex.apache.org/zh/docs/modules/websockets.html            try &#123;                console.log(&quot;test webSocket for weex&quot;);                var ws = weex.requireModule(&#39;webSocket&#39;);                console.log(&quot;find webSocket for weex:&quot; + ws);                return function (wsURL) &#123;                    try &#123;                        ws.close();                    &#125; catch (e) &#123;                    &#125;                    ws.WebSocket(wsURL, &#39;&#39;);                    return ws;                &#125;            &#125; catch (e) &#123;                console.log(e);                //ignore            &#125;        &#125;        //TODO support ReactNative        if (typeof WebSocket === &#39;object&#39;) &#123;            return function (wsURL) &#123;                return new theWebSocket(wsURL);            &#125;        &#125;        // weex å’Œ PCç¯å¢ƒçš„websocket APIä¸å®Œå…¨ä¸€è‡´ï¼Œæ‰€ä»¥åšäº†æŠ½è±¡å…¼å®¹        throw new Error(&quot;the js environment do not support websocket&quot;);    &#125;;    SekiroClient.prototype.connect = function () &#123;        console.log(&#39;sekiro: begin of connect to wsURL: &#39; + this.wsURL);        var _this = this;        // ä¸check closeï¼Œè®©        // if (this.socket &amp;&amp; this.socket.readyState === 1) &#123;        //     this.socket.close();        // &#125;        try &#123;            this.socket = this.webSocketFactory(this.wsURL);        &#125; catch (e) &#123;            console.log(&quot;sekiro: create connection failed,reconnect after 2s&quot;);            setTimeout(function () &#123;                _this.connect()            &#125;, 2000)        &#125;        this.socket.onmessage(function (event) &#123;            _this.handleSekiroRequest(event.data)        &#125;);        this.socket.onopen(function (event) &#123;            console.log(&#39;sekiro: open a sekiro client connection&#39;)        &#125;);        this.socket.onclose(function (event) &#123;            console.log(&#39;sekiro: disconnected ,reconnection after 2s&#39;);            setTimeout(function () &#123;                _this.connect()            &#125;, 2000)        &#125;);    &#125;;    SekiroClient.prototype.handleSekiroRequest = function (requestJson) &#123;        console.log(&quot;receive sekiro request: &quot; + requestJson);        var request = JSON.parse(requestJson);        var seq = request[&#39;__sekiro_seq__&#39;];        if (!request[&#39;action&#39;]) &#123;            this.sendFailed(seq, &#39;need request param &#123;action&#125;&#39;);            return        &#125;        var action = request[&#39;action&#39;];        if (!this.handlers[action]) &#123;            this.sendFailed(seq, &#39;no action handler: &#39; + action + &#39; defined&#39;);            return        &#125;        var theHandler = this.handlers[action];        var _this = this;        try &#123;            theHandler(request, function (response) &#123;                try &#123;                    _this.sendSuccess(seq, response)                &#125; catch (e) &#123;                    _this.sendFailed(seq, &quot;e:&quot; + e);                &#125;            &#125;, function (errorMessage) &#123;                _this.sendFailed(seq, errorMessage)            &#125;)        &#125; catch (e) &#123;            console.log(&quot;error: &quot; + e);            _this.sendFailed(seq, &quot;:&quot; + e);        &#125;    &#125;;    SekiroClient.prototype.sendSuccess = function (seq, response) &#123;        var responseJson;        if (typeof response == &#39;string&#39;) &#123;            try &#123;                responseJson = JSON.parse(response);            &#125; catch (e) &#123;                responseJson = &#123;&#125;;                responseJson[&#39;data&#39;] = response;            &#125;        &#125; else if (typeof response == &#39;object&#39;) &#123;            responseJson = response;        &#125; else &#123;            responseJson = &#123;&#125;;            responseJson[&#39;data&#39;] = response;        &#125;        if (Array.isArray(responseJson)) &#123;            responseJson = &#123;                data: responseJson,                code: 0            &#125;        &#125;        if (responseJson[&#39;code&#39;]) &#123;            responseJson[&#39;code&#39;] = 0;        &#125; else if (responseJson[&#39;status&#39;]) &#123;            responseJson[&#39;status&#39;] = 0;        &#125; else &#123;            responseJson[&#39;status&#39;] = 0;        &#125;        responseJson[&#39;__sekiro_seq__&#39;] = seq;        var responseText = JSON.stringify(responseJson);        console.log(&quot;response :&quot; + responseText);        this.socket.send(responseText);    &#125;;    SekiroClient.prototype.sendFailed = function (seq, errorMessage) &#123;        if (typeof errorMessage != &#39;string&#39;) &#123;            errorMessage = JSON.stringify(errorMessage);        &#125;        var responseJson = &#123;&#125;;        responseJson[&#39;message&#39;] = errorMessage;        responseJson[&#39;status&#39;] = -1;        responseJson[&#39;__sekiro_seq__&#39;] = seq;        var responseText = JSON.stringify(responseJson);        console.log(&quot;sekiro: response :&quot; + responseText);        this.socket.send(responseText)    &#125;;    SekiroClient.prototype.registerAction = function (action, handler) &#123;        if (typeof action !== &#39;string&#39;) &#123;            throw new Error(&quot;an action must be string&quot;);        &#125;        if (typeof handler !== &#39;function&#39;) &#123;            throw new Error(&quot;a handler must be function&quot;);        &#125;        console.log(&quot;sekiro: register action: &quot; + action);        this.handlers[action] = handler;        return this;    &#125;;    function guid() &#123;        function S4() &#123;            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);        &#125;        return (S4() + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + S4() + S4());    &#125;    var client = new SekiroClient(&quot;ws://127.0.0.1:5620/business-demo/register?group=rpc-test&amp;clientId=&quot; + guid());    client.registerAction(&quot;getH5fingerprint&quot;, function (request, resolve, reject) &#123;        resolve(utility.getH5fingerprint(request[&quot;url&quot;]));    &#125;)&#125;)();</code></pre><p>ä¸å‰é¢çš„æ–¹æ³•ä¸€æ ·ï¼Œä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…· Overrides é‡å†™åŠŸèƒ½ï¼Œå°†ä¸Šé¢çš„ä»£ç æ³¨å…¥åˆ°ç½‘é¡µ JS é‡Œï¼š</p><p><img src="https://img-blog.csdnimg.cn/608ac74417ac4010be5ae64bc986e926.png" alt="07"></p><p>ç„¶å Sekiro ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº› APIï¼š</p><ul><li>æŸ¥çœ‹åˆ†ç»„åˆ—è¡¨ï¼š<a href="http://127.0.0.1:5620/business-demo/groupList">http://127.0.0.1:5620/business-demo/groupList</a></li><li>æŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€ï¼š<a href="http://127.0.0.1:5620/business-demo/clientQueue?group=test">http://127.0.0.1:5620/business-demo/clientQueue?group=test</a></li><li>è°ƒç”¨è½¬å‘ï¼š<a href="http://127.0.0.1:5620/business-demo/invoke?group=test&amp;action=test&amp;param=testparm">http://127.0.0.1:5620/business-demo/invoke?group=test&amp;action=test&amp;param=testparm</a></li></ul><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨è¦è°ƒç”¨ <code>utility.getH5fingerprint()</code> åŠ å¯†æ–¹æ³•è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œä»£ç æ³¨å…¥åˆ°æµè§ˆå™¨é‡Œåï¼Œé¦–å…ˆè¿˜æ˜¯è¦æ‰‹åŠ¨ç™»å½•ä¸€éï¼Œæ‰‹åŠ¨ç™»å½•ä¸€éï¼Œæ‰‹åŠ¨ç™»å½•ä¸€éï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼ç„¶åå‚è€ƒä¸Šé¢çš„è°ƒç”¨è½¬å‘ API è¿›è¡Œæ”¹å†™ï¼š</p><ul><li>æˆ‘ä»¬è‡ªå®šä¹‰çš„åˆ†ç»„ <code>group</code> æ˜¯ <code>rpc-test</code>ï¼›</li><li>äº‹ä»¶ <code>action</code> æ˜¯ <code>getH5fingerprint</code>ï¼›</li><li>å¾…åŠ å¯†å‚æ•°åç§°ä¸º <code>url</code>ï¼Œ å…¶å€¼ä¾‹å¦‚ä¸ºï¼š<code>https://www.baidu.com/</code></li></ul><p>é‚£ä¹ˆæˆ‘ä»¬çš„è°ƒç”¨é“¾æ¥å°±åº”è¯¥æ˜¯ï¼š<code>http://127.0.0.1:5620/business-demo/invoke?group=rpc-test&amp;action=getH5fingerprint&amp;url=https://www.baidu.com/</code>ï¼Œç›´æ¥æµè§ˆå™¨æ‰“å¼€ï¼Œè¿”å›çš„å­—å…¸ï¼Œdata é‡Œé¢å°±æ˜¯åŠ å¯†ç»“æœï¼š</p><p><img src="https://img-blog.csdnimg.cn/44e52ae1fd9a4c118f543ff63b1c0537.png" alt="08"></p><p>åŒæ ·çš„ï¼Œåœ¨æœ¬åœ°ç”¨ Python çš„è¯ï¼Œç›´æ¥ requests å°±å®Œäº‹å„¿äº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/4e81520df896457b959c61534ade9103.png" alt="09"></p><p>æˆ‘ä»¬å‰é¢æ˜¯æŠŠ sekiro_web_client.js å¤åˆ¶ä¸‹æ¥å’Œé€šä¿¡ä»£ç ä¸€èµ·æ³¨å…¥åˆ°æµè§ˆå™¨çš„ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰æ›´åŠ ä¼˜é›…çš„æ–¹æ³•ï¼Œç›´æ¥ç»™ document æ–°åˆ›å»ºä¸€ä¸ª scriptï¼Œé€šè¿‡é“¾æ¥çš„å½¢å¼æ’å…¥ sekiro_web_client.jsï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹é—®é¢˜ï¼š</p><ol><li>ç¬¬ä¸€ä¸ªæ˜¯æ—¶æœºçš„é—®é¢˜ï¼Œéœ€è¦ç­‰å¾… document è¿™äº›å…ƒç´ åŠ è½½å®Œæˆæ‰èƒ½å»ºç«‹ SekiroClient é€šä¿¡ï¼Œä¸ç„¶è°ƒç”¨ SekiroClient æ˜¯ä¼šæŠ¥é”™çš„ï¼Œè¿™é‡Œå¯ä»¥ç”¨ setTimeout æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºåœ¨æŒ‡å®šçš„æ¯«ç§’æ•°åè°ƒç”¨å‡½æ•°æˆ–è®¡ç®—è¡¨è¾¾å¼ï¼Œå°† SekiroClient é€šä¿¡ä»£ç å•ç‹¬å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚ <code>function startSekiro()</code>ï¼Œç„¶åç­‰å¾… 1-2 ç§’åå†æ‰§è¡Œ SekiroClient é€šä¿¡ä»£ç ï¼›</li><li>ç”±äº SekiroClient é€šä¿¡ä»£ç è¢«å°è£…æˆäº†å‡½æ•°ï¼Œæ­¤æ—¶ç›´æ¥è°ƒç”¨ <code>utility.getH5fingerprint</code> æ˜¯ä¼šæç¤ºæœªå®šä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆå°†å…¶å¯¼ä¸ºå…¨å±€å˜é‡ï¼Œæ¯”å¦‚ <code>window.getH5fingerprint = utility.getH5fingerprint</code>ï¼Œåç»­ç›´æ¥è°ƒç”¨ <code>window.getH5fingerprint</code> å³å¯ã€‚</li></ol><p>å®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="javascript">/* ==================================# @Time    : 2022-02-14# @Author  : ITBOB# @FileName: sekiro.js# @Software: PyCharm# ================================== */(function () &#123;    var newElement = document.createElement(&quot;script&quot;);    newElement.setAttribute(&quot;type&quot;, &quot;text/javascript&quot;);    newElement.setAttribute(&quot;src&quot;, &quot;https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js&quot;);    document.body.appendChild(newElement);    window.getH5fingerprint = utility.getH5fingerprint    function guid() &#123;        function S4() &#123;            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);        &#125;        return (S4() + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + &quot;-&quot; + S4() + S4() + S4());    &#125;    function startSekiro() &#123;        var client = new SekiroClient(&quot;ws://127.0.0.1:5620/business-demo/register?group=rpc-test&amp;clientId=&quot; + guid());        client.registerAction(&quot;getH5fingerprint&quot;, function (request, resolve, reject) &#123;            resolve(window.getH5fingerprint(request[&quot;url&quot;]));        &#125;)    &#125;    setTimeout(startSekiro, 2000)&#125;)();</code></pre><p><img src="https://img-blog.csdnimg.cn/5657c3efd68048b59db91794a8b9c9c4.png" alt="10"></p><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><p>ç›®å‰å¦‚æœä¸å»é€†å‘ JS æ¥å®ç°åŠ å¯†å‚æ•°çš„è¯ï¼Œç”¨å¾—æœ€å¤šçš„å°±æ˜¯è‡ªåŠ¨åŒ–å·¥å…·äº†ï¼Œæ¯”å¦‚ Seleniumã€Puppeteer ç­‰ï¼Œå¾ˆæ˜¾ç„¶è¿™äº›è‡ªåŠ¨åŒ–å·¥å…·é…ç½®ç¹çã€è¿è¡Œæ•ˆç‡æä½ï¼Œè€Œ RPC æŠ€æœ¯ä¸éœ€è¦åŠ è½½å¤šä½™çš„èµ„æºï¼Œç¨³å®šæ€§å’Œæ•ˆç‡æ˜æ˜¾éƒ½æ›´é«˜ï¼ŒRPC ä¸éœ€è¦è€ƒè™‘æµè§ˆå™¨æŒ‡çº¹ã€å„ç§ç¯å¢ƒï¼Œå¦‚æœé£æ§ä¸ä¸¥çš„è¯ï¼Œé«˜å¹¶å‘ä¹Ÿæ˜¯èƒ½å¤Ÿè½»æ¾å®ç°çš„ï¼Œç›¸åï¼Œç”±äº RPC æ˜¯ä¸€ç›´æŒ‚è½½åœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¸Šçš„ï¼Œæ‰€ä»¥é’ˆå¯¹é£æ§è¾ƒä¸¥æ ¼çš„ç«™ç‚¹ï¼Œæ¯”å¦‚æ£€æµ‹ UAã€IP ä¸åŠ å¯†å‚æ•°ç»‘å®šä¹‹ç±»çš„ï¼Œé‚£ä¹ˆ PRC è°ƒç”¨å¤ªé¢‘ç¹å°±ä¸å¤ªè¡Œäº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç ”ç©¶ç ”ç©¶æµè§ˆå™¨ç¾¤æ§æŠ€æœ¯ï¼Œæ“çºµå¤šä¸ªä¸åŒæµè§ˆå™¨å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚æ€»ä¹‹ RPC æŠ€æœ¯è¿˜æ˜¯éå¸¸ç‰›çš„ï¼Œé™¤äº† JS é€†å‘ï¼Œå¯ä»¥è¯´æ˜¯ç›®å‰æ¯”è¾ƒä¸‡èƒ½ã€é«˜æ•ˆçš„æ–¹æ³•äº†ï¼Œä¸€å®šç¨‹åº¦ä¸Šåšåˆ°äº†åŠ å¯†å‚æ•°ä¸€æŠŠæ¢­ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-RPC&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-RPC&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ RPC&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ RPC&lt;/h2&gt;&lt;p&gt;&lt;del&gt;RPCï¼Œè‹±æ–‡ RangPaCongï¼Œä¸­æ–‡è®©çˆ¬è™«ï¼Œæ—¨åœ¨ä¸ºçˆ¬è™«å¼€è·¯ï¼Œç§’æ€ä¸€åˆ‡ï¼Œè®©çˆ¬è™«ç•…é€šæ— é˜»ï¼</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="RPC" scheme="https://www.itbob.cn/tags/RPC/"/>
    
  </entry>
  
  <entry>
    <title>ã€JS é€†å‘ã€‘å¾çˆ±ç ´è§£2022æ˜¥èŠ‚è§£é¢˜é¢†çº¢åŒ…ä¹‹ç•ªå¤–ç¯‡ Web ä¸­çº§é¢˜è§£</title>
    <link href="https://www.itbob.cn/article/046/"/>
    <id>https://www.itbob.cn/article/046/</id>
    <published>2022-02-17T00:43:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é€†å‘ç›®æ ‡"><a href="#é€†å‘ç›®æ ‡" class="headerlink" title="é€†å‘ç›®æ ‡"></a>é€†å‘ç›®æ ‡</h2><p>æœ¬æ¬¡é€†å‘çš„ç›®æ ‡æ¥æºäºå¾çˆ±ç ´è§£ 2022 æ˜¥èŠ‚è§£é¢˜é¢†çº¢åŒ…ä¹‹ç•ªå¤–ç¯‡ Web ä¸­çº§é¢˜ï¼Œå¾çˆ±ç ´è§£æ¯å¹´éƒ½ä¼šæœ‰æ´¾é€çº¢åŒ…æ´»åŠ¨ï¼ˆé€å¾çˆ±å¸ï¼‰ï¼Œéœ€è¦å¤§å®¶ä½¿å‡ºçœ‹å®¶é€†å‘æœ¬é¢†æ¥åˆ†æå†…å®¹è·å¾—å£ä»¤çº¢åŒ…ï¼Œä»Šå¹´ä¸€å…±æœ‰äº”ä¸ªé¢˜ï¼Œä¸€ä¸ªé€åˆ†é¢˜ï¼Œä¸¤ä¸ª Windows é¢˜ã€ä¸€ä¸ª Android é¢˜å’Œä¸€ä¸ª Web é¢˜ï¼Œæœ¬æ–‡åˆ†æçš„æ­£æ˜¯  Web é¢˜ï¼Œ<strong>å¾çˆ±æœ‰è§„å®šæ´»åŠ¨ç»“æŸå‰ä¸è¦å¤–æ³„å£ä»¤ã€è®¨è®ºåˆ†äº«åˆ†æè¿‡ç¨‹ï¼Œæ‰€ä»¥æœ¬æ–‡åœ¨æ´»åŠ¨ç»“æŸåæ‰å‘å‡ºæ¥ã€‚</strong></p><p>æ­¤ Web é¢˜é¢˜ç›®æ˜¯ï¼šå° D æœ€çˆ±çœ‹çš„è§†é¢‘ç½‘ç«™æœ€è¿‘å…³ç«™äº†ï¼Œå…³ç«™å‰ä»–ç”¨ Fiddler å’Œ Web Archive ä¿å­˜äº†ä¸€ä½ä¸»æ’­çš„è§†é¢‘ï¼Œä½†ä»–å‘ç°å­˜ä¸‹æ¥çš„æ–‡ä»¶æ— æ³•æ’­æ”¾ã€‚ä½ èƒ½å¸®å° D æ‰¾å›ä»–çš„å›å¿†å—ï¼Ÿï¼ˆ.saz ä¸ .wacz ä»»é€‰å…¶ä¸€å³å¯è§£é¢˜ï¼‰</p><ul><li><p>æ´»åŠ¨åœ°å€ï¼š<a href="https://www.52pojie.cn/thread-1582582-1-1.html">https://www.52pojie.cn/thread-1582582-1-1.html</a></p></li><li><p>Web é¢˜åœ°å€ï¼š<a href="https://www.52pojie.cn/home.php?mod=task&amp;do=view&amp;id=17">https://www.52pojie.cn/home.php?mod=task&amp;do=view&amp;id=17</a></p></li></ul><h2 id="HLS-æµåª’ä½“ä¼ è¾“åè®®"><a href="#HLS-æµåª’ä½“ä¼ è¾“åè®®" class="headerlink" title="HLS æµåª’ä½“ä¼ è¾“åè®®"></a>HLS æµåª’ä½“ä¼ è¾“åè®®</h2><p>æœ¬é¢˜æ¶‰åŠåˆ° HLS æµåª’ä½“ä¼ è¾“åè®®ï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œäº†è§£çš„åŒå¿—å¯ç›´æ¥è·³è¿‡ã€‚</p><p>HLS å…¨ç§° HTTP Live Streamingï¼Œå³åŸºäº HTTP çš„è‡ªé€‚åº”ç ç‡æµåª’ä½“ä¼ è¾“åè®®ï¼Œæ˜¯è‹¹æœç ”å‘çš„åŠ¨æ€ç ç‡è‡ªé€‚åº”æŠ€æœ¯ï¼Œå®ƒåŒ…æ‹¬ä¸€ä¸ª M3U(8) çš„ç´¢å¼•æ–‡ä»¶ï¼Œè‹¥å¹² TS è§†é¢‘æµæ–‡ä»¶ï¼Œå¦‚æœè§†é¢‘æµæ–‡ä»¶æ˜¯åŠ å¯†çš„ï¼Œé‚£å°±è¿˜ä¼šå­˜åœ¨ä¸€ä¸ª key åŠ å¯†ä¸²æ–‡ä»¶ã€‚</p><p>M3U8 æ–‡ä»¶æ˜¯ M3U çš„ä¸€ç§ï¼Œåªä¸è¿‡æ–‡ä»¶ä¸­å­˜å‚¨çš„æ–‡æœ¬ä½¿ç”¨ UTF-8 å­—ç¬¦ç¼–ç ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼ŒM3U8 æ–‡ä»¶å¯èƒ½ä¼šä»¥ M3UP æ‰©å±•åä¿å­˜ã€‚M3U8 æ–‡ä»¶æ˜¯å„ç§éŸ³é¢‘å’Œè§†é¢‘æ’­æ”¾ç¨‹åºä½¿ç”¨çš„æ’­æ”¾åˆ—è¡¨æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†åª’ä½“æ–‡ä»¶æˆ–åª’ä½“æ–‡ä»¶å¤¹çš„è·¯å¾„æˆ– URLï¼Œä»¥åŠæœ‰å…³æ’­æ”¾åˆ—è¡¨çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>TS å…¨ç§°ä¸º MPEG2-TSï¼ŒTS å³ Transport Stream ä¼ è¾“æµï¼Œåˆç§° MPEG-TSã€MTSã€TPï¼Œè¿™ç§æ ¼å¼çš„ç‰¹ç‚¹å°±æ˜¯ä»è§†é¢‘æµçš„ä»»ä¸€ç‰‡æ®µå¼€å§‹éƒ½æ˜¯å¯ä»¥ç‹¬ç«‹è§£ç çš„ã€‚</p><p>é’ˆå¯¹ TS æ ¼å¼çš„æ–‡ä»¶ï¼Œå¦‚æœæ˜¯æœªåŠ å¯†çš„ï¼Œä¸€èˆ¬çš„æ’­æ”¾å™¨å°±èƒ½å¤Ÿç›´æ¥æ’­æ”¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ FFmpeg ç­‰å·¥å…·è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼ŒFFmpeg ä¹Ÿå¯ä»¥ç›´æ¥å¤„ç† M3U8 æ–‡ä»¶ï¼Œè‡ªåŠ¨è§£å¯†åˆå¹¶è½¬æ¢ TS æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–å¤§ä½¬å†™å¥½çš„å°å·¥å…·ï¼Œæ‹–å…¥ M3U8 æ–‡ä»¶å°±ç›´æ¥ç»™ä½ å¤„ç†å¥½äº†ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/04101c9e3b5b32d096045bf6be06f40a.png" alt="01"></p><p>M3U8 æ–‡ä»¶å†…å®¹çš„å¤§è‡´æ ¼å¼ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code>#EXTM3U#EXT-X-VERSION:3#EXT-X-MEDIA-SEQUENCE:0#EXT-X-ALLOW-CACHE:YES#EXT-X-KEY:METHOD=AES-128,URI=&quot;https://www.example.com/m3u8.key&quot;#EXT-X-TARGETDURATION:5#EXTINF:4.200000,https://www.example.com/hls/live_00000.ts#EXTINF:4.166667,https://www.example.com/hls/live_00001.ts#EXTINF:3.600000,https://www.example.com/hls/live_00002.ts#EXTINF:2.516667,https://www.example.com/hls/live_00003.ts#EXTINF:4.166667,https://www.example.com/hls/live_00004.ts#EXTINF:4.166667,https://www.example.com/hls/live_00005.ts#EXTINF:4.166667,https://www.example.com/hls/live_00006.ts#EXTINF:1.716667,https://www.example.com/hls/live_00007.ts#EXT-X-ENDLIST</code></pre><p>å„æ ‡ç­¾å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><code>#EXTM3U</code>ï¼šm3uæ–‡ä»¶å¤´ï¼Œå¿…é¡»æ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œèµ·æ ‡ç¤ºä½œç”¨ï¼›</li><li><code>#EXT-X-VERSION</code>ï¼šæ’­æ”¾åˆ—è¡¨æ–‡ä»¶çš„å…¼å®¹ç‰ˆæœ¬ã€‚è‹¥ä¸å­˜åœ¨æ­¤æ ‡è®°ï¼Œåˆ™é»˜è®¤ä¸ºåè®®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼›</li><li><code>#EXT-X-MEDIA-SEQUENCE</code>ï¼š æ’­æ”¾åˆ—è¡¨ä¸­çš„æ¯ä¸ªåª’ä½“ URI éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°åºåˆ—å·ã€‚URI çš„åºåˆ—å·ç­‰äºå®ƒä¹‹å‰çš„ URI çš„åºåˆ—å·åŠ ä¸€ï¼›</li><li><code>#EXT-X-ALLOW-CACHE</code>ï¼šæŒ‡ç¤ºå®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥ç¼“å­˜ä¸‹è½½çš„åª’ä½“ç‰‡æ®µä»¥ä¾›ä»¥åé‡æ’­ï¼›</li><li><code>#EXT-X-KEY</code>ï¼šTS ç‰‡æ®µå¯ä»¥è¢«åŠ å¯†ï¼Œè¯¥æ ‡ç­¾æŒ‡å®šåŠ å¯†æ–¹å¼ï¼ˆMETHODï¼‰ã€å¯†é’¥çš„ URI ä»¥åŠåç§»é‡ IV ç­‰ä¿¡æ¯ï¼Œæ²¡æœ‰æ­¤æ ‡ç­¾è¡¨ç¤ºæœªåŠ å¯†ï¼›</li><li><code>#EXT-X-TARGETDURATION</code>ï¼šæ¯ä¸€ä»½ TS åª’ä½“æ–‡ä»¶çš„æœ€å¤§æŒç»­æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼›</li><li><code>#EXTINF</code>ï¼šæ¯ä¸€ä»½åª’ä½“æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åª’ä½“æŒç»­æ—¶é—´ã€åª’ä½“ URL åœ°å€ç­‰ï¼›</li><li><code>#EXT-X-ENDLIST</code>ï¼šè¡¨ç¤ºä¸å†å°†åª’ä½“ç‰‡æ®µæ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨æ–‡ä»¶ä¸­ï¼Œä¸€èˆ¬ä½äºæ–‡ä»¶ç»“å°¾ã€‚</li></ul><p>å®Œæ•´æ ¼å¼ã€æ ‡å‡†æ ‡ç­¾å¯å‚è€ƒ HLS æ ‡å‡†åè®®ä¸­ï¼Œå¯¹ Playlist file çš„ä»‹ç»ï¼š<a href="https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-08">https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-08</a></p><h2 id="SAZ-åˆ†æ"><a href="#SAZ-åˆ†æ" class="headerlink" title="SAZ åˆ†æ"></a>SAZ åˆ†æ</h2><p>åœ¨ Fiddler è½¯ä»¶ä¸­ï¼Œä½¿ç”¨ SAZ æ ¼å¼ç”¨æ¥ä¿å­˜å’Œè¯»å– HTTP/HTTPS è¯·æ±‚ä¿¡æ¯ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶å¯ä»¥æ³¨æ„åˆ°ä¸€äº›é‡è¦çš„è¯·æ±‚ï¼šscript.bundle.jsã€live.m3u8ã€drm ä»¥åŠå…«ä¸ª ts è§†é¢‘æµæ–‡ä»¶ã€‚</p><p>å…ˆæ¥çœ‹çœ‹ m3u8 æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ AES-128 åŠ å¯†ï¼ŒåŠ å¯†çš„ key æ–‡ä»¶åœ°å€ä¸º <code>key://live</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/082996c240d55cb83e787c489961d98b.png" alt="02.png"></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¦æƒ³è§£å¯† tsï¼Œå¿…ç„¶ä¼šå»è¯·æ±‚ key çš„åœ°å€ï¼Œæ‹¿åˆ° key åå†è§£å¯† tsï¼Œå¾ˆæ˜¾ç„¶æ­¤é¢˜çš„ key åœ°å€ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ URL åœ°å€ï¼Œå½“ç„¶æ­¤é¢˜çš„æŠ“åŒ…è®°å½•å¯èƒ½æ˜¯å‡ºé¢˜äººä¼ªé€ çš„ï¼Œå› ä¸ºè¿™ä¸ª Host æ˜¯ 52tube.mmxxiiï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„åŸŸåï¼Œæœ€ä¸»è¦çš„æ˜¯ï¼ŒæŠ“åŒ…è®°å½•é‡Œæ²¡æœ‰ <code>key://live</code> è¿™æ¡è¯·æ±‚ï¼Œé‚£ä¹ˆå¾ˆå¤§æ¦‚ç‡çœŸå®çš„åœ°å€éšè—åœ¨ JS é‡Œï¼Œä»å¦ä¸€ä¸ªæ–¹é¢æ¥æ€è€ƒï¼Œå¦‚æœè¿™æ˜¯å®Œæ•´çš„æŠ“åŒ…è®°å½•ï¼Œä¸ç®¡çœŸå®çš„ key åœ°å€æ˜¯å•¥ï¼Œå¿…ç„¶ä¼šåœ¨è®°å½•é‡Œå‡ºç°ï¼</p><p>æœ‰ç»éªŒçš„æœ‹å‹åº”è¯¥ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ drm è¿™æ¡è¯·æ±‚æœ€æœ‰å¯èƒ½æ˜¯æ‹¿ key çš„æ“ä½œäº†ï¼Œç¬¬ä¸€æ˜¯ drm è¿™ä¸ªå…³é”®è¯åœ¨ ts è§£å¯†é‡Œç»å¸¸ä¼šå‡ºç°ï¼Œæå¾—å¤šçš„æœ‹å‹åº”è¯¥è§è¿‡ä¸å°‘ï¼Œç¬¬äºŒ ping è¯·æ±‚è¿”å›çš„ successï¼Œé€šè¿‡å…¶åç§°å’Œè¿”å›å€¼æ¥çœ‹ä¹Ÿä¸åƒ keyï¼Œå‰©ä¸‹å°±åªæœ‰ drm äº†ï¼ŒæŸ¥çœ‹è¿”å›å€¼æ˜¯ä¹±ç çš„ï¼ŒæŸ¥çœ‹ Hex å€¼ï¼Œ32 ä½ 16 è¿›åˆ¶æ•°æ®ï¼Œè€Œæ­£å¸¸çš„ key åº”è¯¥æ˜¯ 16 ä½ 16 è¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥ä½ å¦‚æœç›´æ¥æ‹¿è¿™ä¸ªæ•°æ®å½“ä½œ key å»è§£å¯†ï¼Œè‚¯å®šä¹Ÿæ˜¯å¤±è´¥çš„ã€‚</p><p>åˆ°è¿™é‡Œæˆ‘ä»¬åº”è¯¥æœ‰å¦‚ä¸‹çŒœæƒ³ï¼šdrm è¿”å›çš„æ•°æ®ï¼Œç»è¿‡äº† script.bundle.js äºŒæ¬¡å¤„ç†å°±èƒ½å¾—åˆ°æ­£ç¡®çš„ keyã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/2bbab0520ed00218eebede697b3ab165.png" alt="03"></p><h2 id="JS-é€†å‘"><a href="#JS-é€†å‘" class="headerlink" title="JS é€†å‘"></a>JS é€†å‘</h2><p>æˆ‘ä»¬æŠŠæŠ“åŒ…è®°å½•çš„ script.bundle.jsï¼Œå³é”®ï¼Œsave - response - response bodyï¼Œä¿å­˜åˆ°æœ¬åœ°ã€‚</p><p>æ ¼å¼åŒ–ä¹‹åæœ‰ 15000+ è¡Œä»£ç ï¼Œåˆä¸èƒ½åŠ¨æ€è°ƒè¯•ï¼Œä»å“ªé‡Œæ‰¾åŠ å¯†å…¥å£å‘¢ï¼Ÿå¯ä»¥å¤§èƒ†å°è¯•ä¸€ä¸‹ï¼š</p><ul><li>JS é‡Œå¯èƒ½ä¼šæ£€æµ‹åˆ° m3u8 é‡Œå­˜åœ¨ key çš„ URI ä¹‹åï¼Œå‘é€ /api/drm/ è¿™ä¸ªè¯·æ±‚ï¼Œå¯ä»¥ç›´æ¥æœç´¢ <code>/api/drm/</code> æˆ–è€… <code>key://live</code> å®šä½ï¼›</li><li>drm æ˜¯ä¸€ä¸ª post è¯·æ±‚ï¼Œå¸¦æœ‰ h å’Œ id ä¸¤ä¸ªå‚æ•°ï¼Œå¯ä»¥ç›´æ¥æœç´¢ <code>post</code>ã€<code>id</code>ã€<code>h</code> å®šä½åˆ°å¤§è‡´ä½ç½®ã€‚</li></ul><p><img src="https://img-blog.csdnimg.cn/img_convert/ed46b7c9427b23de1fca4ce85d46f1f5.png" alt="04"></p><p>é€šè¿‡æœç´¢å¯ä»¥å‘ç°å¦‚ä¸‹å¯ç–‘ä»£ç ç‰‡æ®µï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/2dd7603630340ef2fd14cace1e7fc58e.png" alt="05"></p><p>å°†å…³é”®ä»£ç æç‚¼ä¸€ä¸‹ï¼š</p><pre><code class="javascript">function n(t) &#123;    return [...new Uint8Array(t)].map((t =&gt; t.toString(16).padStart(2, &quot;0&quot;))).join(&quot;&quot;)&#125;function s(t, e) &#123;    let r = new Uint8Array(t.length);    for (let i = 0; i &lt; t.length; i++) r[i] = t[i] ^ e[i];    return r&#125;let e = &quot;/api/ping/&quot;,    i = &quot;/api/drm/&quot;;class a extends t.DefaultConfig.loader &#123;    let e = await async function() &#123;        let t = new Uint8Array(16);        crypto.getRandomValues(t);        let e = n(t.buffer) + Date.now() + Math.random();        return new Uint8Array((await async function(t) &#123;            const e = (new TextEncoder).encode(t);            return await crypto.subtle.digest(&quot;SHA-256&quot;, e)        &#125; (e)).slice(0, 16))    &#125;();    var r = new URLSearchParams;    r.append(&quot;h&quot;, n(e.buffer)),        r.append(&quot;id&quot;, t);    var a = &#123;        method: &quot;POST&quot;,        headers: &#123;            &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;        &#125;,        body: r    &#125;;    let o = await fetch(i, a),        l = await o.arrayBuffer();    if (32 !== l.byteLength) throw new Error(&quot;Invalid response&quot;);    let u = new Uint8Array(l.slice(0, 16)),        c = new Uint8Array(l.slice(16, 32));    return s(s(u, e), c)&#125;</code></pre><p>å¯ä»¥çœ‹åˆ°äº‹å®ä¸Šåœ¨å‘é€ <code>/api/drm/</code> è¯·æ±‚æ‹¿åˆ°ç»“æœåï¼Œå…ˆåå–å‰å 16 ä½æ•°æ®ï¼Œç„¶åç»è¿‡äº† s æ–¹æ³•çš„å¤„ç†ï¼Œæœ€åè¿”å›çš„ <code>s(s(u, e), c)</code> åº”è¯¥æ‰æ˜¯æ­£ç¡®çš„ keyï¼Œè¿™é‡Œçš„é‡ç‚¹åœ¨äº e çš„å€¼ï¼Œä¸Šé¢æœ‰ä¸ªæ–¹æ³•ï¼Œå–äº†å½“å‰æ—¶é—´+éšæœºå€¼ï¼Œç»è¿‡ SHA-256 åŠ å¯†ï¼Œå†å–å‰ 16 ä½ã€‚</p><p>è¿™é‡Œå¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œè¿™ä¸ª e çš„å€¼æ˜¯ä¸å›ºå®šçš„ï¼Œé‚£ä¹ˆæœ€åçš„ key åº”è¯¥ä¹Ÿæ˜¯ä¸å›ºå®šçš„ï¼ŒåŒä¸€ä¸ª TS å¯¹åº”æœ‰æ— æ•°ä¸ª keyï¼Œæˆ‘åæ­£æ˜¯æ²¡è§è¿‡ï¼Œä¸ä¿¡çš„è¯å°è¯•å°±ç”¨é‚£ä¸ªæ–¹æ³•ç”Ÿæˆ eï¼Œä½ ä¼šå‘ç°æœ€ç»ˆçš„ key æ˜¯é”™è¯¯çš„ã€‚</p><p>ä»”ç»†çœ‹ä¸€ä¸‹ï¼Œå‘é€ post è¯·æ±‚å¯¹ h å€¼èµ‹å€¼çš„åœ°æ–¹ï¼š<code>r.append(&quot;h&quot;, n(e.buffer))</code>ï¼Œn æ–¹æ³•æ˜¯è½¬ 16 è¿›åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥å°† h å€¼å€’æ¨ï¼Œä»16è¿›åˆ¶è½¬ä¸º10è¿›åˆ¶ï¼Œè¿™æ‰æ˜¯æ­£ç¡®çš„ e çš„å€¼ï¼ç„¶å l çš„å€¼æ˜¯ <code>/api/drm/</code> è¯·æ±‚è¿”å›çš„ 32 ä½ 16 è¿›åˆ¶æ•°æ®è½¬ä¸º 10 è¿›åˆ¶ï¼Œå‰©ä¸‹çš„å°±å¥½è¯´äº†ï¼Œç›´æ¥æ”¹å†™ä¸€ä¸‹ JS ä»£ç æ‹¿åˆ°æ­£ç¡®çš„ keyï¼š</p><pre><code class="javascript">function s(t, e) &#123;    let r = new Uint8Array(t.length);    for (let i = 0; i &lt; t.length; i++)        r[i] = t[i] ^ e[i];    return r&#125;function getKey()&#123;    // /api/drm/ è¯·æ±‚è¡¨å•çš„ h å€¼ï¼Œ16è¿›åˆ¶æ•°æ®    const h = [&quot;7b&quot;, &quot;10&quot;, &quot;31&quot;, &quot;1e&quot;, &quot;6e&quot;, &quot;31&quot;, &quot;0f&quot;, &quot;0d&quot;, &quot;f0&quot;, &quot;68&quot;, &quot;d9&quot;, &quot;ed&quot;, &quot;e1&quot;, &quot;04&quot;, &quot;75&quot;, &quot;a8&quot;];    // /api/drm/ è¯·æ±‚è¿”å›çš„32ä½16è¿›åˆ¶æ•°æ®    const drm = [&quot;08&quot;, &quot;A5&quot;, &quot;E6&quot;, &quot;C2&quot;, &quot;C2&quot;, &quot;61&quot;, &quot;A8&quot;, &quot;AC&quot;, &quot;B4&quot;, &quot;D7&quot;, &quot;9C&quot;, &quot;49&quot;, &quot;AF&quot;, &quot;16&quot;, &quot;0A&quot;, &quot;3A&quot;, &quot;DA&quot;, &quot;4E&quot;, &quot;5C&quot;, &quot;EA&quot;, &quot;E1&quot;, &quot;6F&quot;, &quot;ED&quot;, &quot;46&quot;, &quot;EB&quot;, &quot;6F&quot;, &quot;49&quot;, &quot;8C&quot;, &quot;9B&quot;, &quot;63&quot;, &quot;D5&quot;, &quot;3B&quot;]    // è½¬æ¢ä¸º10è¿›åˆ¶æ•°æ®ï¼Œä¸º e å’Œ l èµ‹å€¼    const e = [];    const l = [];    for (let i=0; i&lt;h.length; i++)    &#123;        e.push(parseInt(h[i],16))    &#125;    for (let i=0; i&lt;drm.length; i++)    &#123;        l.push(parseInt(drm[i],16))    &#125;    const u = new Uint8Array(l.slice(0, 16));    const c = new Uint8Array(l.slice(16, 32));    const keyArray = s(s(u, e), c);    const keyHex = new Buffer.from(keyArray).toString(&#39;hex&#39;);    const keyBase64 = new Buffer.from(keyArray).toString(&#39;base64&#39;);    console.log(&quot;keyArray: &quot;, keyArray)    console.log(&quot;keyHex: &quot;, keyHex)    console.log(&quot;keyBase64: &quot;, keyBase64)&#125;getKey()// è¾“å‡º// keyArray:  Uint8Array(16) [//   169, 251, 139,  54,  77,//    63,  74, 231, 175, 208,//    12,  40, 213, 113, 170,//   169// ]// keyHex:  a9fb8b364d3f4ae7afd00c28d571aaa9// keyBase64:  qfuLNk0/Suev0Awo1XGqqQ==</code></pre><h2 id="TS-è§£å¯†åˆå¹¶è½¬æ¢"><a href="#TS-è§£å¯†åˆå¹¶è½¬æ¢" class="headerlink" title="TS è§£å¯†åˆå¹¶è½¬æ¢"></a>TS è§£å¯†åˆå¹¶è½¬æ¢</h2><p>é€šè¿‡ JS é€†å‘æˆ‘ä»¬æ‹¿åˆ°äº† 16è¿›åˆ¶å’Œ base64 å½¢å¼çš„  keyï¼Œä¸ç®¡ä»€ä¹ˆå½¢å¼éƒ½å¯ä»¥æ‹¿æ¥è§£å¯†ï¼Œè¿™é‡Œä»‹ç»ä¸¤ç§å¯¹ TS åª’ä½“æµè§£å¯†ã€åˆå¹¶ã€è½¬æ¢çš„æ–¹æ³•ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ FFmpeg å·¥å…·ï¼ŒFFmpeg æ˜¯ä¸€å¥—å¯ä»¥ç”¨æ¥è®°å½•ã€è½¬æ¢æ•°å­—éŸ³é¢‘ã€è§†é¢‘ï¼Œå¹¶èƒ½å°†å…¶è½¬åŒ–ä¸ºæµçš„å¼€æºè®¡ç®—æœºç¨‹åºã€‚å®˜ç½‘åœ°å€ï¼š<a href="https://ffmpeg.org/">https://ffmpeg.org/</a> ï¼Œä¸‹è½½ç¼–è¯‘å¥½çš„ç¨‹åºï¼Œå°† bin ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡å³å¯ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è¦æŠŠ m3u8 æ–‡ä»¶å’Œ ts åª’ä½“æµä¿å­˜åˆ°åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”±äºæ˜¯è™šå‡çš„ Hostï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥æµè§ˆå™¨è®¿é—®ä¿å­˜ï¼Œå¯ä»¥ç›´æ¥åœ¨ Fiddler é‡Œï¼Œå³é”®ï¼Œsave - response - response bodyï¼Œä¿å­˜åˆ°æœ¬åœ°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/749cfe83e0a6e2fc1abc53d6f014af20.png" alt="06"></p><p>ç„¶åå°±æ˜¯ä¿å­˜å¯†é’¥æ–‡ä»¶ï¼Œè¿™é‡Œè¦æ±‚å¯†é’¥æ–‡ä»¶å¿…é¡»æ˜¯16è¿›åˆ¶çš„æ•°æ®ï¼Œå¦‚æœä½ ç›´æ¥å°† key ä»¥å­—ç¬¦ä¸²å½¢å¼ä¿å­˜çš„è¯ï¼Œè§£å¯†ä¹Ÿæ˜¯å¤±è´¥çš„ï¼Œç¼–è¾‘ 16 è¿›åˆ¶æ–‡ä»¶æœ‰ä¸“é—¨çš„å·¥å…·ï¼Œæ¯”å¦‚ HxDã€010 editorã€winhex ç­‰ï¼Œä»¥ HxD ä¸ºä¾‹ï¼Œæ–°å»ºæ–‡ä»¶ï¼Œå†™å…¥æˆ‘ä»¬å‰é¢é€šè¿‡ JS é€†å‘å¾—åˆ°çš„ key çš„ 16 è¿›åˆ¶æ•°æ®ï¼Œå­˜ä¸º .key æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/c967091a3fe77ae7e1431d7611b724aa.png" alt="07"></p><p>ç„¶åä¿®æ”¹ m3u8 æ–‡ä»¶é‡Œ key çš„åœ°å€ã€åç§°ï¼Œå»ºè®®å°† keyã€m3u8ã€ts æ–‡ä»¶éƒ½æ”¾åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™æ · m3u8 æ–‡ä»¶é‡Œå°±ä¸ç”¨æ·»åŠ èµ„æºè·¯å¾„äº†ï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/bc34af23050758b3b320b24f057bdfb9.png" alt="08"></p><p>ç„¶ååœ¨å½“å‰æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤ï¼š<code>ffmpeg -allowed_extensions ALL -i live.m3u8 -c copy live.mp4</code>ï¼Œå³å¯è‡ªåŠ¨è§£å¯† tsï¼Œå¹¶åˆå¹¶è½¬æ¢ä¸º .mp4 æ ¼å¼ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/0a7a0cf737aeae4d01bc9217e07c60f1.png" alt="09"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/db9fdff0a45c6d41333c6d475a12ae08.png" alt="10"></p><p>ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨å¤§ä½¬å†™çš„ç¬¬ä¸‰æ–¹å°å·¥å…·ï¼Œè¿™é‡Œæ¨èå¾çˆ±å¤§ä½¬é€é¥ä¸€ä»™å†™çš„ M3U8 æ‰¹é‡ä¸‹è½½å™¨ï¼Œä¸‹è½½åœ°å€ã€ä½¿ç”¨æ–¹æ³•è§åŸè´´ï¼š<a href="https://www.52pojie.cn/thread-1374045-1-1.html">https://www.52pojie.cn/thread-1374045-1-1.html</a></p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹–å…¥å¤„ç†å¥½çš„ M3U8 æ–‡ä»¶ï¼Œè‡ªåŠ¨å¤„ç†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/985f2c1a952e14b41d264c5e172092be.png" alt="11"></p><p>ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»– - å·¥å…· - åˆå¹¶åŠ©æ‰‹ï¼Œæ·»åŠ æ‰€æœ‰ TS æ–‡ä»¶ï¼Œè¾“å…¥ key åè‡ªåŠ¨å¤„ç†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/71c5a02310dcc053f385d80116196775.png" alt="12"></p><p>å¤„ç†å®Œæ¯•åçš„ mp4 æ–‡ä»¶é»˜è®¤åœ¨è½¯ä»¶ç›®å½•çš„ output æ–‡ä»¶å¤¹é‡Œé¢ï¼Œè§£å¯†åæ˜¯ä¸€æ®µåŠ¨ç”»ï¼Œå¾€åçœ‹ä¼šæ‰¾åˆ° flagï¼š<code>flag&#123;like_sub_52tube&#125;</code> ä¸ºæ­£ç¡®ç­”æ¡ˆã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/270c7e60d56bc2ea20a33f11c1eb042f.png" alt="13"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/362caaedb5b649cfd650aefd326ae615.png" alt="14"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/4dd28112ed306fd0ba26f946f8531891.png" alt="15"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é€†å‘ç›®æ ‡&quot;&gt;&lt;a href=&quot;#é€†å‘ç›®æ ‡&quot; class=&quot;headerlink&quot; title=&quot;é€†å‘ç›®æ ‡&quot;&gt;&lt;/a&gt;é€†å‘ç›®æ ‡&lt;/h2&gt;&lt;p&gt;æœ¬æ¬¡é€†å‘çš„ç›®æ ‡æ¥æºäºå¾çˆ±ç ´è§£ 2022 æ˜¥èŠ‚è§£é¢˜é¢†çº¢åŒ…ä¹‹ç•ªå¤–ç¯‡ Web ä¸­çº§é¢˜ï¼Œå¾çˆ±ç ´è§£æ¯å¹´éƒ½ä¼šæœ‰æ´¾é€çº¢åŒ…æ´»åŠ¨ï¼ˆé€å¾çˆ±å¸ï¼‰ï¼Œ</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>CTF&amp;çˆ¬è™«ï¼šæŒæ¡è¿™äº›ç‰¹å¾ï¼Œä¸€ç§’è¯†åˆ«å¯†æ–‡åŠ å¯†æ–¹å¼</title>
    <link href="https://www.itbob.cn/article/045/"/>
    <id>https://www.itbob.cn/article/045/</id>
    <published>2022-01-13T09:40:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>çˆ¬è™«å·¥ç¨‹å¸ˆåœ¨åšåŠ å¯†å‚æ•°é€†å‘çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°å„ç§å„æ ·çš„åŠ å¯†ç®—æ³•ã€ç¼–ç ã€æ··æ·†ï¼Œæ¯ä¸ªç®—æ³•éƒ½æœ‰å…¶å¯¹åº”çš„ç‰¹å¾ï¼Œå¯¹äºä¸€äº›è¾ƒå°çš„ç½‘ç«™ï¼Œå¾€å¾€ç›´æ¥å¼•ç”¨è¿™äº›å®˜æ–¹ç®—æ³•ï¼Œæ²¡æœ‰è¿›è¡Œé­”æ”¹ç­‰å…¶ä»–æ“ä½œï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬èƒ½ç†Ÿæ‚‰å¸¸è§ç®—æ³•çš„ç‰¹å¾ï¼Œé€šè¿‡å¯†æ–‡å°±èƒ½çŒœæµ‹å‡ºä½¿ç”¨çš„å“ªç§ç®—æ³•ã€ç¼–ç ã€æ··æ·†ï¼Œå°†ä¼šå¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ï¼åœ¨ CTF ä¸­é€šå¸¸ä¹Ÿä¼šæœ‰å¯†ç ç±»çš„é¢˜ç›®ï¼ŒæŒæ¡ä¸€äº›å¸¸è§å¯†æ–‡ç‰¹å¾ä¹Ÿæ˜¯ CTFer ä»¬å¿…å¤‡çš„æŠ€èƒ½ï¼</p><p>æœ¬æ–‡å°†ä»‹ç»ä»¥ä¸‹ç¼–ç å’ŒåŠ å¯†ç®—æ³•çš„ç‰¹å¾ï¼š</p><ul><li>ç¼–ç ï¼šBase ç³»åˆ—ã€Unicodeã€Escapeã€URLã€Hexï¼›</li><li>ç®—æ³•ï¼šMD5ã€SHA ç³»åˆ—ã€HMAC ç³»åˆ—ã€RSAã€AESã€DESã€3DESã€RC4ã€Rabbitã€SM ç³»åˆ—ï¼›</li><li>æ··æ·†ï¼šObfuscatorã€JJEncodeã€AAEncodeã€JSFuckã€Jotherã€Brainfuckã€Ook!ã€Trivial brainfuck substitutionï¼›</li><li>å…¶ä»–ï¼šæºæ’’å¯†ç ã€æ …æ å¯†ç ã€çŒªåœˆå¯†ç ã€æ‘©æ–¯å¯†ç ã€åŸ¹æ ¹å¯†ç ã€ç»´å‰å°¼äºšå¯†ç ã€ä¸ä½›è®ºç¦…ã€å½“é“ºå¯†ç ã€‚</li></ul><p>PSï¼šå¸¸è§åŠ å¯†ç®—æ³•åŸç†ä»¥åŠåœ¨ Python å’Œ JavaScript ä¸­çš„å®ç°æ–¹æ³•å¯å‚è§ä»¥å‰çš„æ–‡ç« ï¼š<a href="https://www.itbob.cn/article/039/">çˆ¬è™«å¸¸è§åŠ å¯†è§£å¯†ç®—æ³•æ€»ç»“</a></p><h2 id="ç¼–ç ç³»åˆ—"><a href="#ç¼–ç ç³»åˆ—" class="headerlink" title="ç¼–ç ç³»åˆ—"></a>ç¼–ç ç³»åˆ—</h2><h3 id="Base-ç³»åˆ—ç¼–ç "><a href="#Base-ç³»åˆ—ç¼–ç " class="headerlink" title="Base ç³»åˆ—ç¼–ç "></a>Base ç³»åˆ—ç¼–ç </h3><p>Base64 æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ç¼–ç ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå…¶å®è¿˜æœ‰ Base16ã€Base32ã€Base58ã€Base85ã€Base100 ç­‰ï¼Œä»–ä»¬ä¹‹é—´æœ€æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯ä½¿ç”¨äº†ä¸åŒæ•°é‡çš„å¯æ‰“å°å­—ç¬¦å¯¹ä»»æ„å­—èŠ‚æ•°æ®è¿›è¡Œç¼–ç ï¼Œæ¯”å¦‚ Base64 ä½¿ç”¨äº†64ä¸ªå¯æ‰“å°å­—ç¬¦ï¼ˆA-Zã€a-zã€0-9ã€+ã€/ï¼‰ï¼ŒBase16 ä½¿ç”¨äº†16ä¸ªå¯æ‰“å°å­—ç¬¦ï¼ˆA-Fã€0-9ï¼‰ï¼Œè¿™é‡Œä¸»è¦è®²æ€ä¹ˆå¿«é€Ÿè¯†åˆ«ï¼Œå…¶å…·ä½“åŸç†å¯è‡ªè¡Œç™¾åº¦ï¼ŒBase ç³»åˆ—ä¸»è¦ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>Base16ï¼šç»“å°¾æ²¡æœ‰ç­‰å·ï¼Œæ•°å­—è¦å¤šäºå­—æ¯ï¼›</li><li>Base32ï¼šå­—æ¯è¦å¤šäºæ•°å­—ï¼Œæ˜æ–‡æ•°é‡è¶…è¿‡10ä¸ªï¼Œç»“å°¾å¯èƒ½ä¼šæœ‰å¾ˆå¤šç­‰å·ï¼›</li><li>Base58ï¼šç»“å°¾æ²¡æœ‰ç­‰å·ï¼Œå­—æ¯è¦å¤šäºæ•°å­—ï¼›</li><li>Base64ï¼šä¸€èˆ¬æƒ…å†µä¸‹ç»“å°¾éƒ½ä¼šæœ‰1ä¸ªæˆ–è€…2ä¸ªç­‰å·ï¼Œæ˜æ–‡å¾ˆå°‘çš„æ—¶å€™å¯èƒ½æ²¡æœ‰ï¼›</li><li>Base85ï¼šç­‰å·ä¸€èˆ¬å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­é—´ï¼Œå«æœ‰ä¸€äº›å¥‡æ€ªçš„å­—ç¬¦ï¼›</li><li>Base100ï¼šå¯†æ–‡ç”± Emoji è¡¨æƒ…ç»„æˆã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><table><thead><tr><th align="left">ç¼–ç ç±»å‹</th><th align="left">ç¤ºä¾‹ä¸€</th><th>ç¤ºä¾‹äºŒ</th></tr></thead><tbody><tr><td align="left">æ˜æ–‡</td><td align="left">01234567890</td><td>administrators</td></tr><tr><td align="left">Base16</td><td align="left"><code>3031323334353637383930</code></td><td><code>61646D696E6973747261746F7273</code></td></tr><tr><td align="left">Base32</td><td align="left"><code>GAYTEMZUGU3DOOBZGA======</code></td><td><code>MFSG22LONFZXI4TBORXXE4Y=</code></td></tr><tr><td align="left">Base58</td><td align="left"><code>cX8j8pvGzppMKVb</code></td><td><code>BNF5dFLUTN5XwM1yLoF</code></td></tr><tr><td align="left">Base64</td><td align="left"><code>MDEyMzQ1Njc4OTA=</code></td><td><code>YWRtaW5pc3RyYXRvcnM=</code></td></tr><tr><td align="left">Base85</td><td align="left"><code>0JP==1c70M3&amp;rY</code></td><td><code>@:X4hDJ=06Eaa&#39;.EcV</code></td></tr><tr><td align="left">Base100</td><td align="left"><code>ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ§</code></td><td><code>ğŸ‘˜ğŸ‘›ğŸ‘¤ğŸ‘ ğŸ‘¥ğŸ‘ ğŸ‘ªğŸ‘«ğŸ‘©ğŸ‘˜ğŸ‘«ğŸ‘¦ğŸ‘©ğŸ‘ª</code></td></tr></tbody></table><h3 id="Unicode-ç¼–ç "><a href="#Unicode-ç¼–ç " class="headerlink" title="Unicode ç¼–ç "></a>Unicode ç¼–ç </h3><p>Unicode åˆç§°ä¸ºç»Ÿä¸€ç ã€ä¸‡å›½ç ã€å•ä¸€ç ï¼Œæ˜¯ä¸€ç§åœ¨è®¡ç®—æœºä¸Šä½¿ç”¨çš„å­—ç¬¦ç¼–ç ã€‚Unicode æ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿçš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆçš„å±€é™è€Œäº§ç”Ÿçš„ï¼Œå®ƒä¸ºæ¯ç§è¯­è¨€ä¸­çš„æ¯ä¸ªå­—ç¬¦è®¾å®šäº†ç»Ÿä¸€å¹¶ä¸”å”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œä»¥æ»¡è¶³è·¨è¯­è¨€ã€è·¨å¹³å°è¿›è¡Œæ–‡æœ¬è½¬æ¢ã€å¤„ç†çš„è¦æ±‚ã€‚å…¶ä¸»è¦ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>ä»¥ <code>\u</code>ã€<code>&amp;#</code> æˆ– <code>&amp;#x</code> å¼€å¤´ï¼Œåé¢æ˜¯æ•°å­—åŠ å­—æ¯ç»„åˆ</li></ul><p>PSï¼š<code>\u</code> å¼€å¤´å’Œ <code>&amp;#x</code> å¼€å¤´æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯16è¿›åˆ¶ Unicode å­—ç¬¦çš„ä¸åŒå†™æ³•ï¼Œ<code>&amp;#</code> åˆ™æ˜¯ Unicode å­—ç¬¦10è¿›åˆ¶çš„å†™æ³•ï¼Œæ­¤å¤–ï¼Œ<code>&amp;#</code> å’Œ <code>&amp;#x</code> å¼€å¤´çš„ï¼Œä¹Ÿç§°ä¸º HTML å­—ç¬¦å®ä½“è½¬æ¢ï¼Œå­—ç¬¦å®ä½“æ˜¯ç”¨ä¸€ä¸ªç¼–å·å†™å…¥ HTML ä»£ç ä¸­æ¥ä»£æ›¿ä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨ HTML ä¸­ï¼ŒæŸäº›å­—ç¬¦æ˜¯é¢„ç•™çš„ï¼Œå¦‚æœå¸Œæœ›æ­£ç¡®åœ°æ˜¾ç¤ºé¢„ç•™å­—ç¬¦ï¼Œå°±å¿…é¡»åœ¨ HTML æºä»£ç ä¸­ä½¿ç”¨å­—ç¬¦å®ä½“ã€‚</p><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¤ºä¾‹ä¸€</th><th>ç¤ºä¾‹äºŒ</th></tr></thead><tbody><tr><td>æ˜æ–‡</td><td>12345</td><td>admin</td></tr><tr><td>Unicode</td><td><code>\u0031\u0032\u0033\u0034\u0035</code></td><td><code>\u0061\u0064\u006d\u0069\u006e</code></td></tr></tbody></table><h3 id="Escape-ç¼–ç "><a href="#Escape-ç¼–ç " class="headerlink" title="Escape ç¼–ç "></a>Escape ç¼–ç </h3><p>Escape ç¼–ç åˆå« %u ç¼–ç ï¼ŒEscape ç¼–ç å°±æ˜¯å­—ç¬¦å¯¹åº” UTF-16BE è¡¨ç¤ºæ–¹å¼å‰é¢åŠ  %uï¼ŒEscape ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—è¿›è¡Œç¼–ç ï¼Œä¹Ÿä¸ä¼šå¯¹ä¸‹é¢è¿™äº› ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼š <code>* @ - _ + . / </code>ï¼Œå…¶ä»–æ‰€æœ‰çš„å­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰åºåˆ—æ›¿æ¢ã€‚å…¶ä¸»è¦ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>ä»¥ <code>%u</code> å¼€å¤´ï¼Œåé¢æ˜¯æ•°å­—åŠ å­—æ¯ç»„åˆ</li></ul><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¤ºä¾‹ä¸€</th><th>ç¤ºä¾‹äºŒ</th></tr></thead><tbody><tr><td>æ˜æ–‡</td><td>çˆ¬è™«</td><td>æˆ‘çˆ±Python</td></tr><tr><td>Escape</td><td><code>%u722C%u866B</code></td><td><code>%u6211%u7231Python</code></td></tr></tbody></table><h3 id="URL-Hex-ç¼–ç "><a href="#URL-Hex-ç¼–ç " class="headerlink" title="URL / Hex ç¼–ç "></a>URL / Hex ç¼–ç </h3><p>URL å’Œ Hex ç¼–ç çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯å½“ä½ ç”¨ URL ç¼–ç ç½‘å€æ—¶æ˜¯ä¸ä¼šæŠŠ <code>http</code>ã€<code>https</code> å…³é”®å­—å’Œ <code>/</code>ã€<code>?</code>ã€<code>&amp;</code>ã€<code>=</code> ç­‰è¿æ¥ç¬¦è¿›è¡Œç¼–ç çš„ï¼Œè€Œ Hex ç¼–ç åˆ™å…¨éƒ¨è½¬åŒ–äº†ï¼Œå…¶ä¸»è¦ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>ä»¥ <code>%</code> å¼€å¤´ï¼Œåé¢æ˜¯æ•°å­—åŠ å­—æ¯ç»„åˆ</li></ul><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ˜æ–‡</td><td><a href="https://www.kuaidaili.com/">https://www.kuaidaili.com/</a></td></tr><tr><td>Unicode</td><td><code>https://%77%77%77%2E%6B%75%61%69%64%61%69%6C%69%2E%63%6F%6D/</code></td></tr><tr><td>Hex</td><td><code>%68%74%74%70%73%3a%2f%2f%77%77%77%2e%6b%75%61%69%64%61%69%6c%69%2e%63%6f%6d%2f</code></td></tr></tbody></table><h2 id="åŠ å¯†ç®—æ³•"><a href="#åŠ å¯†ç®—æ³•" class="headerlink" title="åŠ å¯†ç®—æ³•"></a>åŠ å¯†ç®—æ³•</h2><h3 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h3><p>MD5 å®è´¨æ˜¯ä¸€ç§æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œä¸€ä¸ªæ•°æ®çš„ MD5 å€¼æ˜¯å”¯ä¸€çš„ï¼ŒåŒä¸€ä¸ªæ•°æ®ä¸å¯èƒ½è®¡ç®—å‡ºå¤šä¸ªä¸åŒçš„ MD5 å€¼ï¼Œä½†æ˜¯ï¼Œä¸åŒæ•°æ®è®¡ç®—å‡ºæ¥çš„ MD5 å€¼æ˜¯æœ‰å¯èƒ½ä¸€æ ·çš„ï¼ŒçŸ¥é“ä¸€ä¸ª MD5 å€¼ï¼Œç†è®ºä¸Šæ˜¯æ— æ³•è¿˜åŸå‡ºå®ƒçš„åŸå§‹æ•°æ®çš„ï¼ŒMD5 æ˜¯æœ€å®¹æ˜“è¾¨åˆ«çš„ï¼Œä¸»è¦ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>å¯†æ–‡ä¸€èˆ¬ä¸º 16 ä½æˆ–è€… 32 ä½ï¼Œå…¶ä¸­ 16 ä½æ˜¯å–çš„ 32 ä½ç¬¬ 9~25 ä½çš„å€¼ï¼›</li><li>ç»„æˆæ–¹å¼ä¸ºå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå­—æ¯å¯ä»¥å…¨éƒ¨æ˜¯å¤§å†™æˆ–è€…å°å†™ã€‚</li></ul><p>é™¤äº†é€šè¿‡å¯†æ–‡ç‰¹å¾æ¥åˆ¤æ–­ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœç´¢æºä»£ç ï¼Œæ ‡å‡† MD5 çš„æºç é‡Œæ˜¯åŒ…å«äº†ä¸€äº›ç‰¹å®šçš„å€¼çš„ï¼Œæ²¡æœ‰è¿™äº›ç‰¹å®šå€¼ï¼Œå°±æ— æ³•å®ç° MD5ï¼š</p><ul><li><code>0123456789ABCDEF</code>ã€<code>0123456789abcdef</code></li><li><code>1732584193</code>ã€<code>-271733879</code>ã€<code>-1732584194</code>ã€<code>271733878</code></li></ul><p>PSï¼šæŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¯†æ–‡çš„é•¿åº¦ä¹Ÿæœ‰å¯èƒ½ä¸æ­¢ 16 ä½æˆ–è€… 32 ä½ï¼Œæœ‰å¯èƒ½æ˜¯åœ¨å®˜æ–¹ç®—æ³•ä¸Šæœ‰ä¸€äº›é­”æ”¹ï¼Œé€šå¸¸ä¹Ÿæ˜¯åœ¨ 16 ä½çš„åŸºç¡€ä¸Šï¼Œå·¦å³å¡«å……äº†ä¸€äº›éšæœºå­—ç¬¦ä¸²ã€‚</p><p>ç¤ºä¾‹ï¼š</p><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¤ºä¾‹ä¸€</th><th>ç¤ºä¾‹äºŒ</th></tr></thead><tbody><tr><td>æ˜æ–‡</td><td>123456</td><td>admin</td></tr><tr><td>MD5ï¼ˆ16ä½å°å†™ï¼‰</td><td><code>49ba59abbe56e057</code></td><td><code>7a57a5a743894a0e</code></td></tr><tr><td>MD5ï¼ˆ16ä½å¤§å†™ï¼‰</td><td><code>49BA59ABBE56E057</code></td><td><code>7A57A5A743894A0E</code></td></tr><tr><td>MD5ï¼ˆ32ä½å°å†™ï¼‰</td><td><code>e10adc3949ba59abbe56e057f20f883e</code></td><td><code>21232f297a57a5a743894a0e4a801fc3</code></td></tr><tr><td>MD5ï¼ˆ32ä½å¤§å†™ï¼‰</td><td><code>E10ADC3949BA59ABBE56E057F20F883E</code></td><td><code>21232F297A57A5A743894A0E4A801FC3</code></td></tr></tbody></table><h3 id="SHA-ç³»åˆ—"><a href="#SHA-ç³»åˆ—" class="headerlink" title="SHA ç³»åˆ—"></a>SHA ç³»åˆ—</h3><p>SHA æ˜¯æ¯” MD5 æ›´å®‰å…¨ä¸€ç‚¹çš„æ‘˜è¦ç®—æ³•ï¼ŒSHA é€šå¸¸æŒ‡ SHA å®¶æ—ç®—æ³•ï¼Œåˆ†åˆ«æ˜¯ SHA-1ã€SHA-2ã€SHA-3ï¼Œå…¶ä¸­ SHA-2 æ˜¯ SHA-224ã€SHA-256ã€SHA-384ã€SHA-512 çš„å¹¶ç§°ï¼ŒSHA-3 æ˜¯ SHA3-224ã€SHA3-256ã€SHA3-384ã€SHA3-512ã€SHAKE128ã€SHAKE256 çš„å¹¶ç§°ï¼Œå…¶åå­—çš„åç¼€çš„æ•°å­—å°±ä»£è¡¨äº†ç»“æœçš„å¤§å°ï¼ˆbitï¼‰ï¼Œæ³¨æ„ï¼ŒSHAKE ç®—æ³•ç»“æœçš„å¤§å°å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œå…¶ä»–ç®—æ³•ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>SHA-1ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 40 ä½ï¼›</li><li>SHA-224/SHA3-224ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 56 ä½ï¼›</li><li>SHA-256/SHA3-256ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 64 ä½ï¼›</li><li>SHA-384/SHA3-384ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 96 ä½ï¼›</li><li>SHA-512/SHA3-512ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 128 ä½ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ˜æ–‡</td><td>123456</td></tr><tr><td>SHA-1</td><td><code>7c4a8d09ca3762af61e59520943dc26494f8941b</code></td></tr><tr><td>SHA-256</td><td><code>8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92</code></td></tr><tr><td>SHA3-256</td><td><code>c888c9ce9e098d5864d3ded6ebcc140a12142263bace3a23a36f9905f12bd64a</code></td></tr></tbody></table><h3 id="HMAC-ç³»åˆ—"><a href="#HMAC-ç³»åˆ—" class="headerlink" title="HMAC ç³»åˆ—"></a>HMAC ç³»åˆ—</h3><p>HMAC è¿™ç§ç®—æ³•å°±æ˜¯åœ¨ MD5ã€SHA ä¸¤ç§åŠ å¯†çš„åŸºç¡€ä¸Šå¼•å…¥äº†ç§˜é’¥ï¼Œå…¶å¯†æ–‡ä¹Ÿå’Œ MD5ã€SHA ç±»ä¼¼ï¼Œå¯†æ–‡çš„é•¿åº¦å’Œä½¿ç”¨çš„ MD5ã€SHA ç®—æ³•å¯¹åº”å¯†æ–‡çš„é•¿åº¦æ˜¯ä¸€æ ·çš„ã€‚ç‰¹å¾å¦‚ä¸‹ï¼š</p><ul><li>HMAC-MD5ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œä½æ•°ä¸€èˆ¬ä¸º 32 ä½ï¼›</li><li>HMAC-SHA-1ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 40 ä½ï¼›</li><li>HMAC-SHA-224 / HMAC-SHA3-224ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 56 ä½ï¼›</li><li>HMAC-SHA-256 / HMAC-SHA3-256ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 64 ä½ï¼›</li><li>HMAC-SHA-384 / HMAC-SHA3-384ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 96 ä½ï¼›</li><li>HMAC-SHA-512 / HMAC-SHA3-512ï¼šå­—æ¯ï¼ˆa-fï¼‰å’Œæ•°å­—ï¼ˆ0-9ï¼‰æ··åˆï¼Œå›ºå®šä½æ•° 128 ä½ã€‚</li></ul><p>HMAC å’Œ SHAã€MD5 çš„å¯†æ–‡éƒ½å¾ˆåƒï¼Œå½“æ— æ³•ç¡®å®šæ˜¯å¦ä¸º HMAC æ—¶ï¼Œå¯ä»¥é€šè¿‡å…¶åç§°æœç´¢åˆ°åŠ å¯†æ–¹æ³•ï¼Œå¦‚æœä¼ å…¥äº†å¯†é’¥ keyï¼Œè¯´æ˜å°±æ˜¯ HMACï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥å½“åšæ˜¯ SHA æˆ– MD5 æ¥è§£ï¼Œè§£å¯†å¤±è´¥æ—¶å°±å¾—è€ƒè™‘æ˜¯å¦æœ‰å¯†é’¥ï¼Œæ˜¯å¦ä¸º HMAC äº†ï¼Œåœ¨ JS ä¸­ï¼Œé€šå¸¸ä¸€ä¸ª HMAC åŠ å¯†æ–¹æ³•æ˜¯è¿™æ ·å†™çš„ï¼š</p><pre><code class="javascript">function HmacSHA1Encrypt(word, key) &#123;    return CryptoJS.HmacSHA1(word, key).toString();&#125;</code></pre><p>ç¤ºä¾‹ï¼ˆå¯†é’¥ 123456abcdeï¼‰ï¼š</p><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ˜æ–‡</td><td>123456</td></tr><tr><td>HMAC-MD5</td><td><code>432bb95bb00005ddce4a1c757488ed95</code></td></tr><tr><td>HMAC-SHA-1</td><td><code>37a04076b7736c44460d330ee0d00014428b175e</code></td></tr><tr><td>HMAC-SHA-256</td><td><code>50cb1345366df11140fb91b43caaf69627e3f5529705ddf6b0d0cae67986e585</code></td></tr><tr><td>HMAC-SHA3-256</td><td><code>b808ed9f66436e89fba527a01d1d6044318fea8599d9f39bfb6bec4843964bf3</code></td></tr></tbody></table><h3 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h3><p>RSA åŠ å¯†ç®—æ³•æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œé€šè¿‡å…¬é’¥åŠ å¯†ç»“æœï¼Œå¿…é¡»ç§é’¥è§£å¯†ã€‚ åŒæ ·ç§é’¥åŠ å¯†ç»“æœï¼Œå…¬é’¥å¯ä»¥è§£å¯†ï¼Œåº”ç”¨éå¸¸å¹¿æ³›ï¼Œåœ¨ç½‘ç«™ä¸­é€šå¸¸ä½¿ç”¨ JSEncrypt åº“æ¥å®ç°ï¼Œå…¶æœ€å¤§çš„ç‰¹å¾å°±æ˜¯æœ‰ä¸€ä¸ªè®¾ç½®å…¬é’¥çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥å¿«é€Ÿåˆæ­¥åˆ¤æ–­æ˜¯å¦ä¸º RSA ç®—æ³•ï¼š</p><ul><li><p>æœç´¢å…³é”®è¯ <code>new JSEncrypt()</code>ï¼Œ<code>JSEncrypt</code> ç­‰ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ JSEncrypt åº“ï¼Œä¼šæœ‰ new ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„æ“ä½œï¼›</p></li><li><p>æœç´¢å…³é”®è¯ <code>setPublicKey</code>ã€<code>setKey</code>ã€<code>setPrivateKey</code>ã€<code>getPublicKey</code> ç­‰ï¼Œä¸€èˆ¬å®ç°çš„ä»£ç é‡Œéƒ½å«æœ‰è®¾ç½®å¯†é’¥çš„è¿‡ç¨‹ï¼›</p></li><li><p>RSA çš„ç§é’¥ã€å…¬é’¥ã€æ˜æ–‡ã€å¯†æ–‡é•¿åº¦ä¹Ÿæœ‰ä¸€å®šå¯¹åº”å…³ç³»ï¼Œä¹Ÿå¯ä»¥ä»è¿™æ–¹é¢åˆæ­¥åˆ¤æ–­ï¼š</p><table><thead><tr><th align="left">ç§é’¥é•¿åº¦ï¼ˆBase64ï¼‰</th><th align="left">å…¬é’¥é•¿åº¦ï¼ˆBase64ï¼‰</th><th align="left">æ˜æ–‡é•¿åº¦</th><th align="left">å¯†æ–‡é•¿åº¦</th></tr></thead><tbody><tr><td align="left">428</td><td align="left">128</td><td align="left">1~53</td><td align="left">88</td></tr><tr><td align="left">812</td><td align="left">216</td><td align="left">1~117</td><td align="left">172</td></tr><tr><td align="left">1588</td><td align="left">392</td><td align="left">1~245</td><td align="left">344</td></tr></tbody></table></li></ul><h3 id="AESã€DESã€3DESã€RC4ã€Rabbit-ç­‰"><a href="#AESã€DESã€3DESã€RC4ã€Rabbit-ç­‰" class="headerlink" title="AESã€DESã€3DESã€RC4ã€Rabbit ç­‰"></a>AESã€DESã€3DESã€RC4ã€Rabbit ç­‰</h3><p>AESã€DESã€3DESã€RC4ã€Rabbit ç­‰åŠ å¯†ç®—æ³•çš„å¯†æ–‡é€šå¸¸æ²¡æœ‰å›ºå®šçš„é•¿åº¦ï¼Œä»–ä»¬é€šå¸¸ä½¿ç”¨ crypto-js æ¥å®ç°ï¼Œæ¯”å¦‚ AES åŠ è§£å¯†ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="javascript">CryptoJS = require(&quot;crypto-js&quot;)var key = CryptoJS.enc.Utf8.parse(&quot;0123456789abcdef&quot;);var iv = CryptoJS.enc.Utf8.parse(&quot;0123456789abcdef&quot;);function AESEncrypt(word) &#123;    var srcs = CryptoJS.enc.Utf8.parse(word);    var encrypted = CryptoJS.AES.encrypt(srcs, key, &#123;        iv: iv,        mode: CryptoJS.mode.CBC,        padding: CryptoJS.pad.Pkcs7    &#125;);    return encrypted.toString();&#125;function AESDecrypt(word) &#123;    var srcs = word;    var decrypt = CryptoJS.AES.decrypt(srcs, key, &#123;        iv: iv,        mode: CryptoJS.mode.CBC,        padding: CryptoJS.pad.Pkcs7    &#125;);    return decrypt.toString(CryptoJS.enc.Utf8);&#125;console.log(AESEncrypt(&quot;Kå“¥çˆ¬è™«&quot;))console.log(AESDecrypt(&quot;nSk3wCd92s08sQ9N+VHNvA==&quot;))</code></pre><p>åœ¨ crypto-js ä¸­ï¼Œä¹Ÿæœ‰ä¸€äº›ç‰¹å®šçš„å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æœç´¢è¿™äº›å…³é”®å­—æ¥å¿«é€Ÿå®šä½åˆ° crypto-jsï¼š</p><ul><li><p><code>CryptoJS</code>ã€<code>crypto-js</code>ã€<code>iv</code>ã€<code>mode</code>ã€<code>padding</code>ã€<code>createEncryptor</code>ã€<code>createDecryptor</code></p></li><li><p><code>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=</code>ã€<code>0xffffffff</code>ã€<code>0xffff</code></p></li></ul><p>å®šä½åˆ° CryptoJS åï¼Œè§‚å¯ŸåŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚ AES å°±æ˜¯ <code>CryptoJS.AES.encrypt</code>ï¼ŒDES å°±æ˜¯ <code>CryptoJS.DES.encrypt</code>ï¼Œ3DES å°±æ˜¯ <code>CryptoJS.TripleDES.encrypt</code>ï¼Œæ³¨æ„ä»–çš„ ivã€modeã€paddingï¼Œæ‹¿ä¸‹æ¥å°±å¯ä»¥æœ¬åœ°å¤ç°äº†ã€‚</p><h3 id="SM-ç³»åˆ—"><a href="#SM-ç³»åˆ—" class="headerlink" title="SM ç³»åˆ—"></a>SM ç³»åˆ—</h3><p>SM ä»£è¡¨å•†å¯†ï¼Œå³å•†ä¸šå¯†ç ï¼Œæ˜¯æˆ‘å›½å‘å¸ƒçš„ä¸€ç³»åˆ—å›½äº§åŠ å¯†ç®—æ³•ï¼ŒSM ç³»åˆ—åŒ…æ‹¬ï¼šSM1ã€SM2ã€SM3 ã€SM4ã€SM7ã€SM9ï¼Œå…¶ä¸­ SM1 å’Œ SM7 çš„ç®—æ³•ä¸å…¬å¼€ï¼ŒSM ç³»åˆ—ç®—æ³•åœ¨æˆ‘å›½ä¸€äº› gov ç½‘ç«™ä¸Šæœ‰åº”ç”¨ï¼Œæœ‰å…³å›½äº§åŠ å¯†ç®—æ³•å‰æœŸæ–‡ç« æœ‰ä»‹ç»ï¼š<a href="https://www.itbob.cn/article/041/">ã€Šè®¤è¯† SM1/SM2/SM3/SM4/SM7/SM9/ZUC å›½å¯†ç®—æ³•ã€‹</a>ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p><p>åœ¨ SM çš„ JavaScript ä»£ç ä¸­ä¸€èˆ¬ä¼šå­˜åœ¨ä»¥ä¸‹å…³é”®å­—ï¼Œå¯ä»¥é€šè¿‡æœç´¢å…³é”®å­—å®šä½ï¼š</p><ul><li><code>SM2</code>ã€<code>SM3</code>ã€<code>SM4</code></li><li><code>FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF</code></li><li><code>FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC</code></li><li><code>28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93</code></li><li><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789</code></li><li><code>getPublicKeyFromPrivateKey</code>ã€<code>doEncrypt</code>ã€<code>doDecrypt</code>ã€<code>doSignature</code></li></ul><h2 id="æ··æ·†ç³»åˆ—"><a href="#æ··æ·†ç³»åˆ—" class="headerlink" title="æ··æ·†ç³»åˆ—"></a>æ··æ·†ç³»åˆ—</h2><h3 id="Obfuscator"><a href="#Obfuscator" class="headerlink" title="Obfuscator"></a>Obfuscator</h3><p>Obfuscator å°±æ˜¯æ··æ·†çš„æ„æ€ï¼Œç®€ç§° OB æ··æ·†ï¼Œå®æˆ˜å¯å‚è€ƒä»¥å‰çš„æ–‡ç« ï¼š<a href="https://itrhx.blog.csdn.net/article/details/121719631">ã€JS é€†å‘ç™¾ä¾‹ã€‘Wåº—UAï¼ŒOBåæ··æ·†ï¼ŒæŠ“åŒ…æ›¿æ¢CORSè·¨åŸŸé”™è¯¯åˆ†æ</a>ï¼ŒOB æ··æ·†å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>ä¸€èˆ¬ç”±ä¸€ä¸ªå¤§æ•°ç»„æˆ–è€…å«æœ‰å¤§æ•°ç»„çš„å‡½æ•°ã€ä¸€ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ã€è§£å¯†å‡½æ•°å’ŒåŠ å¯†åçš„å‡½æ•°å››éƒ¨åˆ†ç»„æˆï¼›</li><li>å‡½æ•°åå’Œå˜é‡åé€šå¸¸ä»¥ <code>_0x</code> æˆ–è€… <code>0x</code> å¼€å¤´ï¼Œåæ¥ 1~6 ä½æ•°å­—æˆ–å­—æ¯ç»„åˆï¼›</li><li>è‡ªæ‰§è¡Œå‡½æ•°ï¼Œè¿›è¡Œç§»ä½æ“ä½œï¼Œæœ‰æ˜æ˜¾çš„ pushã€shift å…³é”®å­—ï¼›</li></ul><p>ä¸€æ®µæ­£å¸¸çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function hi() &#123;  console.log(&quot;Hello World!&quot;);&#125;hi();</code></pre><p>ç»è¿‡ OB æ··æ·†åçš„ç»“æœï¼š</p><pre><code class="javascript">function _0x3f26() &#123;    var _0x2dad75 = [&#39;5881925kTCKCP&#39;, &#39;Hello\x20World!&#39;, &#39;600mDvfGa&#39;, &#39;699564jYNxbu&#39;, &#39;1083271cEvuvT&#39;, &#39;log&#39;, &#39;18sKjcFY&#39;, &#39;214857eMgFSU&#39;, &#39;77856FUKcuE&#39;, &#39;736425OzpdFI&#39;, &#39;737172JqcGMg&#39;];    _0x3f26 = function () &#123;        return _0x2dad75;    &#125;;    return _0x3f26();&#125;(function (_0x307c88, _0x4f8223) &#123;    var _0x32807d = _0x1fe9, _0x330c58 = _0x307c88();    while (!![]) &#123;        try &#123;            var _0x5d6354 = parseInt(_0x32807d(0x6f)) / 0x1 + parseInt(_0x32807d(0x6e)) / 0x2 + parseInt(_0x32807d(0x70)) / 0x3 + -parseInt(_0x32807d(0x69)) / 0x4 + parseInt(_0x32807d(0x71)) / 0x5 + parseInt(_0x32807d(0x6c)) / 0x6 * (parseInt(_0x32807d(0x6a)) / 0x7) + -parseInt(_0x32807d(0x73)) / 0x8 * (parseInt(_0x32807d(0x6d)) / 0x9);            if (_0x5d6354 === _0x4f8223) break; else _0x330c58[&#39;push&#39;](_0x330c58[&#39;shift&#39;]());        &#125; catch (_0x3f18e4) &#123;            _0x330c58[&#39;push&#39;](_0x330c58[&#39;shift&#39;]());        &#125;    &#125;&#125;(_0x3f26, 0xaa023));function _0x1fe9(_0xa907e7, _0x410a46) &#123;    var _0x3f261f = _0x3f26();    return _0x1fe9 = function (_0x1fe950, _0x5a08da) &#123;        _0x1fe950 = _0x1fe950 - 0x69;        var _0x82a06 = _0x3f261f[_0x1fe950];        return _0x82a06;    &#125;, _0x1fe9(_0xa907e7, _0x410a46);&#125;function hi() &#123;    var _0x12a222 = _0x1fe9;    console[_0x12a222(0x6b)](_0x12a222(0x72));&#125;hi();</code></pre><h3 id="JJEncode"><a href="#JJEncode" class="headerlink" title="JJEncode"></a>JJEncode</h3><p>JJEncodeã€AAEncodeã€JSFuck éƒ½æ˜¯åŒä¸€ä¸ªä½œè€…ï¼Œå®æˆ˜å¯å‚è€ƒä»¥å‰çš„æ–‡ç« ï¼š<a href="https://itrhx.blog.csdn.net/article/details/121920783">ã€JS é€†å‘ç™¾ä¾‹ã€‘ç½‘æ´›è€…åçˆ¬ç»ƒä¹ å¹³å°ç¬¬äºŒé¢˜ï¼šJJEncode åŠ å¯†</a>ï¼ŒJJEncode å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>å¤§é‡ <code>$</code>ã€<code>_</code> ç¬¦å·ï¼Œå¤§é‡é‡å¤çš„è‡ªå®šä¹‰å˜é‡ï¼›</li><li>ä»…ç”± 18 ä¸ªç¬¦å·ç»„æˆï¼š<code>[]()!+,\&quot;$.:;_&#123;&#125;~=</code></li></ul><p>æ­£å¸¸çš„ä¸€æ®µ JS ä»£ç ï¼š</p><pre><code class="javascript">alert(&quot;Hello, JavaScript&quot; )</code></pre><p>ç»è¿‡ JJEncode æ··æ·†ï¼ˆè‡ªå®šä¹‰å˜é‡åä¸º $ï¼‰ä¹‹åçš„ä»£ç ï¼š</p><pre><code class="javascript">$=~[];$=&#123;___:++$,$$$$:(![]+&quot;&quot;)[$],__$:++$,$_$_:(![]+&quot;&quot;)[$],_$_:++$,$_$$:(&#123;&#125;+&quot;&quot;)[$],$$_$:($[$]+&quot;&quot;)[$],_$$:++$,$$$_:(!&quot;&quot;+&quot;&quot;)[$],$__:++$,$_$:++$,$$__:(&#123;&#125;+&quot;&quot;)[$],$$_:++$,$$$:++$,$___:++$,$__$:++$&#125;;$.$_=($.$_=$+&quot;&quot;)[$.$_$]+($._$=$.$_[$.__$])+($.$$=($.$+&quot;&quot;)[$.__$])+((!$)+&quot;&quot;)[$._$$]+($.__=$.$_[$.$$_])+($.$=(!&quot;&quot;+&quot;&quot;)[$.__$])+($._=(!&quot;&quot;+&quot;&quot;)[$._$_])+$.$_[$.$_$]+$.__+$._$+$.$;$.$$=$.$+(!&quot;&quot;+&quot;&quot;)[$._$$]+$.__+$._+$.$+$.$$;$.$=($.___)[$.$_][$.$_];$.$($.$($.$$+&quot;\&quot;&quot;+$.$_$_+(![]+&quot;&quot;)[$._$_]+$.$$$_+&quot;\\&quot;+$.__$+$.$$_+$._$_+$.__+&quot;(\\\&quot;\\&quot;+$.__$+$.__$+$.___+$.$$$_+(![]+&quot;&quot;)[$._$_]+(![]+&quot;&quot;)[$._$_]+$._$+&quot;,\\&quot;+$.$__+$.___+&quot;\\&quot;+$.__$+$.__$+$._$_+$.$_$_+&quot;\\&quot;+$.__$+$.$$_+$.$$_+$.$_$_+&quot;\\&quot;+$.__$+$._$_+$._$$+$.$$__+&quot;\\&quot;+$.__$+$.$$_+$._$_+&quot;\\&quot;+$.__$+$.$_$+$.__$+&quot;\\&quot;+$.__$+$.$$_+$.___+$.__+&quot;\\\&quot;\\&quot;+$.$__+$.___+&quot;)&quot;+&quot;\&quot;&quot;)())();</code></pre><h3 id="AAEncode"><a href="#AAEncode" class="headerlink" title="AAEncode"></a>AAEncode</h3><p>JJEncodeã€AAEncodeã€JSFuck éƒ½æ˜¯åŒä¸€ä¸ªä½œè€…ï¼Œå®æˆ˜å¯å‚è€ƒä»¥å‰çš„æ–‡ç« ï¼š<a href="https://itrhx.blog.csdn.net/article/details/121920864">ã€JS é€†å‘ç™¾ä¾‹ã€‘ç½‘æ´›è€…åçˆ¬ç»ƒä¹ å¹³å°ç¬¬ä¸‰é¢˜ï¼šAAEncode åŠ å¯†</a>ï¼ŒAAEncode å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>ä»…ç”±æ—¥å¼è¡¨æƒ…ç¬¦å·ç»„æˆ</li></ul><p>æ­£å¸¸çš„ä¸€æ®µ JS ä»£ç ï¼š</p><pre><code class="javascript">alert(&quot;Hello, JavaScript&quot;)</code></pre><p>ç»è¿‡ AAEncode æ··æ·†ä¹‹åçš„ä»£ç ï¼š</p><pre><code class="javascript">ï¾ŸÏ‰ï¾Ÿï¾‰= /ï½€ï½Â´ï¼‰ï¾‰ ~â”»â”â”»   //*Â´âˆ‡ï½€*/ [&#39;_&#39;]; o=(ï¾Ÿï½°ï¾Ÿ)  =_=3; c=(ï¾ŸÎ˜ï¾Ÿ) =(ï¾Ÿï½°ï¾Ÿ)-(ï¾Ÿï½°ï¾Ÿ); (ï¾ŸĞ”ï¾Ÿ) =(ï¾ŸÎ˜ï¾Ÿ)= (o^_^o)/ (o^_^o);(ï¾ŸĞ”ï¾Ÿ)=&#123;ï¾ŸÎ˜ï¾Ÿ: &#39;_&#39; ,ï¾ŸÏ‰ï¾Ÿï¾‰ : ((ï¾ŸÏ‰ï¾Ÿï¾‰==3) +&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ] ,ï¾Ÿï½°ï¾Ÿï¾‰ :(ï¾ŸÏ‰ï¾Ÿï¾‰+ &#39;_&#39;)[o^_^o -(ï¾ŸÎ˜ï¾Ÿ)] ,ï¾ŸĞ”ï¾Ÿï¾‰:((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;)[ï¾Ÿï½°ï¾Ÿ] &#125;; (ï¾ŸĞ”ï¾Ÿ) [ï¾ŸÎ˜ï¾Ÿ] =((ï¾ŸÏ‰ï¾Ÿï¾‰==3) +&#39;_&#39;) [c^_^o];(ï¾ŸĞ”ï¾Ÿ) [&#39;c&#39;] = ((ï¾ŸĞ”ï¾Ÿ)+&#39;_&#39;) [ (ï¾Ÿï½°ï¾Ÿ)+(ï¾Ÿï½°ï¾Ÿ)-(ï¾ŸÎ˜ï¾Ÿ) ];(ï¾ŸĞ”ï¾Ÿ) [&#39;o&#39;] = ((ï¾ŸĞ”ï¾Ÿ)+&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ];(ï¾Ÿoï¾Ÿ)=(ï¾ŸĞ”ï¾Ÿ) [&#39;c&#39;]+(ï¾ŸĞ”ï¾Ÿ) [&#39;o&#39;]+(ï¾ŸÏ‰ï¾Ÿï¾‰ +&#39;_&#39;)[ï¾ŸÎ˜ï¾Ÿ]+ ((ï¾ŸÏ‰ï¾Ÿï¾‰==3) +&#39;_&#39;) [ï¾Ÿï½°ï¾Ÿ] + ((ï¾ŸĞ”ï¾Ÿ) +&#39;_&#39;) [(ï¾Ÿï½°ï¾Ÿ)+(ï¾Ÿï½°ï¾Ÿ)]+ ((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ]+((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;) [(ï¾Ÿï½°ï¾Ÿ) - (ï¾ŸÎ˜ï¾Ÿ)]+(ï¾ŸĞ”ï¾Ÿ) [&#39;c&#39;]+((ï¾ŸĞ”ï¾Ÿ)+&#39;_&#39;) [(ï¾Ÿï½°ï¾Ÿ)+(ï¾Ÿï½°ï¾Ÿ)]+ (ï¾ŸĞ”ï¾Ÿ) [&#39;o&#39;]+((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ];(ï¾ŸĞ”ï¾Ÿ) [&#39;_&#39;] =(o^_^o) [ï¾Ÿoï¾Ÿ] [ï¾Ÿoï¾Ÿ];(ï¾ŸÎµï¾Ÿ)=((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ]+ (ï¾ŸĞ”ï¾Ÿ) .ï¾ŸĞ”ï¾Ÿï¾‰+((ï¾ŸĞ”ï¾Ÿ)+&#39;_&#39;) [(ï¾Ÿï½°ï¾Ÿ) + (ï¾Ÿï½°ï¾Ÿ)]+((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;) [o^_^o -ï¾ŸÎ˜ï¾Ÿ]+((ï¾Ÿï½°ï¾Ÿ==3) +&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ]+ (ï¾ŸÏ‰ï¾Ÿï¾‰ +&#39;_&#39;) [ï¾ŸÎ˜ï¾Ÿ]; (ï¾Ÿï½°ï¾Ÿ)+=(ï¾ŸÎ˜ï¾Ÿ); (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]=&#39;\\&#39;; (ï¾ŸĞ”ï¾Ÿ).ï¾ŸÎ˜ï¾Ÿï¾‰=(ï¾ŸĞ”ï¾Ÿ+ ï¾Ÿï½°ï¾Ÿ)[o^_^o -(ï¾ŸÎ˜ï¾Ÿ)];(oï¾Ÿï½°ï¾Ÿo)=(ï¾ŸÏ‰ï¾Ÿï¾‰ +&#39;_&#39;)[c^_^o];(ï¾ŸĞ”ï¾Ÿ) [ï¾Ÿoï¾Ÿ]=&#39;\&quot;&#39;;(ï¾ŸĞ”ï¾Ÿ) [&#39;_&#39;] ( (ï¾ŸĞ”ï¾Ÿ) [&#39;_&#39;] (ï¾ŸÎµï¾Ÿ+(ï¾ŸĞ”ï¾Ÿ)[ï¾Ÿoï¾Ÿ]+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾Ÿï½°ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) +(o^_^o))+ ((o^_^o) - (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) +(o^_^o))+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (c^_^o)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾Ÿï½°ï¾Ÿ)+ ((o^_^o) - (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸÎ˜ï¾Ÿ)+ (c^_^o)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾Ÿï½°ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ ((ï¾Ÿï½°ï¾Ÿ) + (o^_^o))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾Ÿï½°ï¾Ÿ)+ (c^_^o)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) - (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) +(o^_^o))+ ((o^_^o) +(o^_^o))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) - (ï¾ŸÎ˜ï¾Ÿ))+ (o^_^o)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ (ï¾Ÿï½°ï¾Ÿ)+ (o^_^o)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) +(o^_^o))+ ((o^_^o) - (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) +(o^_^o))+ (c^_^o)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾ŸÎ˜ï¾Ÿ)+ ((o^_^o) +(o^_^o))+ (ï¾Ÿï½°ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+(ï¾Ÿï½°ï¾Ÿ)+ ((o^_^o) - (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸĞ”ï¾Ÿ)[ï¾ŸÎµï¾Ÿ]+((ï¾Ÿï½°ï¾Ÿ) + (ï¾ŸÎ˜ï¾Ÿ))+ (ï¾ŸÎ˜ï¾Ÿ)+ (ï¾ŸĞ”ï¾Ÿ)[ï¾Ÿoï¾Ÿ]) (ï¾ŸÎ˜ï¾Ÿ)) (&#39;_&#39;);</code></pre><h3 id="JSFuck"><a href="#JSFuck" class="headerlink" title="JSFuck"></a>JSFuck</h3><p>JJEncodeã€AAEncodeã€JSFuck éƒ½æ˜¯åŒä¸€ä¸ªä½œè€…ï¼Œå®æˆ˜å¯å‚è€ƒä»¥å‰çš„æ–‡ç« ï¼š<a href="https://itrhx.blog.csdn.net/article/details/122057377">ã€JS é€†å‘ç™¾ä¾‹ã€‘ç½‘æ´›è€…åçˆ¬ç»ƒä¹ å¹³å°ç¬¬å››é¢˜ï¼šJSFuck åŠ å¯†</a>ï¼ŒJSFuck å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>ä»…ç”± 6 ä¸ªç¬¦å·ç»„æˆï¼š<code>[]()!+</code></li></ul><p>æ­£å¸¸çš„ä¸€æ®µ JS ä»£ç ï¼š</p><pre><code class="javascript">alert(1)</code></pre><p>ç»è¿‡ JSFuck æ··æ·†ä¹‹åçš„ä»£ç ç±»ä¼¼äºï¼š</p><pre><code class="javascript">[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]][([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]((!![]+[])[+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+!+[]]+(+[![]]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+!+[]]]+(!![]+[])[!+[]+!+[]+!+[]]+(+(!+[]+!+[]+!+[]+[+!+[]]))[(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+([]+[])[([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]][([][[]]+[])[+!+[]]+(![]+[])[+!+[]]+((+[])[([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]+[])[+!+[]+[+!+[]]]+(!![]+[])[!+[]+!+[]+!+[]]]](!+[]+!+[]+!+[]+[!+[]+!+[]])+(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]])()((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+([][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]]+[])[+!+[]+[!+[]+!+[]+!+[]]]+[+!+[]]+([+[]]+![]+[][(![]+[])[+[]]+(![]+[])[!+[]+!+[]]+(![]+[])[+!+[]]+(!![]+[])[+[]]])[!+[]+!+[]+[+[]]])</code></pre><h3 id="Jother"><a href="#Jother" class="headerlink" title="Jother"></a>Jother</h3><p>Jother æ··æ·†å’Œ JSFuck æœ‰ç‚¹å„¿ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å¯†æ–‡æ¯” JSFuck å¤šäº† <code>&#123;&#125;</code>ï¼Œå…¶è§£å¯†æ–¹å¼å’Œ JSFuck æ˜¯ä¸€æ ·çš„ï¼ŒJother æ··æ·†ç°åœ¨ä¸å¤ªå¸¸è§äº†ï¼Œä¹Ÿå¾ˆéš¾æ‰¾åˆ°åœ¨çº¿æ··æ·†ä¹‹ç±»çš„å·¥å…·äº†ï¼ŒåŸä½œè€…æœ‰ä¸ªåœ¨çº¿é¡µé¢ä¹Ÿå…³é—­äº†ï¼Œä¸è¿‡ä»ç„¶å¯ä»¥äº†è§£ä¸€ä¸‹ï¼ŒJother æ··æ·†å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>ä»…ç”± 8 ä¸ªç¬¦å·ç»„æˆï¼š<code>[]()!+&#123;&#125;</code></li></ul><p>æ­£å¸¸çš„ä¸€æ®µä»£ç ï¼š</p><pre><code class="javascript">function anonymous() &#123;return location&#125;</code></pre><p>ç»è¿‡ Jother æ··æ·†ä¹‹åçš„ä»£ç ç±»ä¼¼äºï¼š</p><pre><code class="javascript">[][(![]+[])[!![]+!![]+!![]]+(&#123;&#125;+[])[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][(&#123;&#125;+[])[!![]+!![]+!![]+!![]+!![]]+(&#123;&#125;+[])[+!![]]+(&#123;&#125;[[]]+[])[+!![]]+(![]+[])[!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+(&#123;&#125;[[]]+[])[+[]]+(&#123;&#125;+[])[!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+(&#123;&#125;+[])[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+(!![]+[])[!![]+!![]+!![]]+(!![]+[])[+[]]+(&#123;&#125;[[]]+[])[+[]]+(!![]+[])[+!![]]+(&#123;&#125;[[]]+[])[+!![]]+(&#123;&#125;+[])[!![]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[!![]+!![]]+(&#123;&#125;+[])[+!![]]+(&#123;&#125;+[])[!![]+!![]+!![]+!![]+!![]]+(![]+[])[+!![]]+(!![]+[])[+[]]+(&#123;&#125;[[]]+[])[!![]+!![]+!![]+!![]+!![]]+(&#123;&#125;+[])[+!![]]+(&#123;&#125;[[]]+[])[+!![]])()</code></pre><h3 id="Brainfuck"><a href="#Brainfuck" class="headerlink" title="Brainfuck"></a>Brainfuck</h3><p>Brainfuck å®é™…ä¸Šæ˜¯ä¸€ç§æå°åŒ–çš„è®¡ç®—æœºè¯­è¨€ï¼Œåˆç§°ä¸º BF è¯­è¨€ï¼Œè¯¥è¯­è¨€ä»¥å…¶æç®€ä¸»ä¹‰ç€ç§°ï¼Œä»…åŒ…å«å…«ä¸ªç®€å•çš„å‘½ä»¤ã€ä¸€ä¸ªæ•°æ®æŒ‡é’ˆå’Œä¸€ä¸ªæŒ‡ä»¤æŒ‡é’ˆï¼Œè¿™ç§è¯­è¨€åœ¨çˆ¬è™«é¢†åŸŸä¹Ÿå¯ä»¥æ˜¯ä¸€ç§åçˆ¬æ‰‹æ®µï¼Œå¯ä»¥è§†ä¸ºä¸€ç§æ··æ·†æ–¹å¼ï¼Œè™½ç„¶ä¸å¸¸è§ğŸ¤”ï¼Œè¿™é‡Œç»™ä¸€ä¸ªåœ¨çº¿ä½“éªŒçš„ç½‘å€ï¼š<a href="https://copy.sh/brainfuck/text.html">https://copy.sh/brainfuck/text.html</a> ï¼Œæ„Ÿå…´è¶£çš„åŒå¿—å¯ä»¥æ·±å…¥ç ”ç©¶ä¸€ä¸‹ï¼ŒBrainfuck å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>ä»…ç”± <code>&lt;&gt;+-.[]</code> ç»„æˆï¼›</li><li>å¤§é‡çš„ <code>+-</code> ç¬¦å·ã€‚</li></ul><p>æ­£å¸¸çš„ä¸€æ®µä»£ç ï¼š</p><pre><code class="javascript">alert(&quot;Hello, Brainfuck&quot;)</code></pre><p>ç»è¿‡ Brainfuck æ··æ·†ä¹‹åçš„ä»£ç ç±»ä¼¼äºï¼š</p><pre><code class="javascript">--[-----&gt;+&lt;]&gt;-----.+++++++++++.-------.+++++++++++++.++.+[---&gt;+&lt;]&gt;+.------.++[-&gt;++&lt;]&gt;.-[-&gt;+++++&lt;]&gt;++.+++++++..+++.[-&gt;+++++&lt;]&gt;+.------------.+[-&gt;++&lt;]&gt;.---[-----&gt;+&lt;]&gt;-.+++[-&gt;+++&lt;]&gt;++.++++++++.+++++.--------.-[---&gt;+&lt;]&gt;--.+[-&gt;+++&lt;]&gt;+.++++++++.+[++&gt;---&lt;]&gt;.+++++++.</code></pre><h3 id="Ook"><a href="#Ook" class="headerlink" title="Ook!"></a>Ook!</h3><p>Ook! å’Œ Brainfuck çš„åŸç†éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œåªä¸è¿‡ç¬¦å·æœ‰å·®å¼‚ï¼ŒåŒæ ·çš„ï¼Œè¿™ç§è¯­è¨€åœ¨çˆ¬è™«é¢†åŸŸä¹Ÿå¯ä»¥æ˜¯ä¸€ç§åçˆ¬æ‰‹æ®µï¼Œå¯ä»¥è§†ä¸ºä¸€ç§æ··æ·†æ–¹å¼ï¼Œè™½ç„¶ä¸å¸¸è§ğŸ¤”ï¼Œåœ¨çº¿ä½“éªŒçš„ç½‘å€ï¼š<a href="https://www.splitbrain.org/services/ook">https://www.splitbrain.org/services/ook</a> ï¼ŒOok! å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>å®Œæ•´ Ook!ï¼šä»…ç”± 3 ç§ç¬¦å·ç»„æˆ <code>Ook.</code>ã€<code>Ook?</code>ã€<code>Ook!</code></li><li>Short Ook!ï¼šä»…ç”± 3 ç§ç¬¦å·ç»„æˆ <code>.!?</code></li></ul><p>æ­£å¸¸çš„ä¸€æ®µä»£ç ï¼š</p><pre><code class="javascript">alert(&quot;Hello, Ook!&quot;)</code></pre><p>ç»è¿‡ Ook! æ··æ·†ä¹‹åçš„ä»£ç ç±»ä¼¼äºï¼š</p><pre><code class="javascript">Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook! Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook? Ook. Ook? Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook? Ook. Ook? Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook? Ook. Ook? Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook. Ook? Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook! Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook? Ook. Ook? Ook! Ook. Ook? Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook. Ook. Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook? Ook. </code></pre><h3 id="Trivial-brainfuck-substitution"><a href="#Trivial-brainfuck-substitution" class="headerlink" title="Trivial brainfuck substitution"></a>Trivial brainfuck substitution</h3><p>Trivial brainfuck substitution ä¸æ˜¯ä¸€ç§å•ä¸€çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€å¤§ç±»ç¼–ç¨‹è¯­è¨€ï¼Œæˆå‘˜è¶…è¿‡ 20 ä¸ªï¼Œå‰é¢æåˆ°çš„ Brainfuckã€Ook! éƒ½æ˜¯å…¶ä¸­çš„ä¸€å‘˜ï¼Œåœ¨çˆ¬è™«é¢†åŸŸä¸­ï¼Œè¯´å®è¯è¿™ç§ç¨€å¥‡å¤æ€ªçš„æ··æ·†å…¶å®å¹¶ä¸å¸¸è§ï¼Œä½†æ˜¯åœ¨ä¸€äº› CTF ä¸­æœ‰å¯èƒ½ä¼šå‡ºç°ï¼Œä½œä¸ºçˆ¬è™«å·¥ç¨‹å¸ˆä¹Ÿå¯ä»¥äº†è§£äº†è§£ğŸ˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://esolangs.org/wiki/Trivial_brainfuck_substitution">https://esolangs.org/wiki/Trivial_brainfuck_substitution</a></p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="æºæ’’å¯†ç "><a href="#æºæ’’å¯†ç " class="headerlink" title="æºæ’’å¯†ç "></a>æºæ’’å¯†ç </h3><p>æºæ’’å¯†ç ï¼ˆCaesar cipherï¼‰åˆç§°ä¸ºæºæ’’åŠ å¯†ã€æºæ’’å˜æ¢ã€å˜æ¢åŠ å¯†ï¼Œå®ƒæ˜¯ä¸€ç§æ›¿æ¢åŠ å¯†çš„æŠ€æœ¯ï¼Œæ˜æ–‡ä¸­çš„æ‰€æœ‰å­—æ¯éƒ½åœ¨å­—æ¯è¡¨ä¸Šå‘åï¼ˆæˆ–å‘å‰ï¼‰æŒ‰ç…§ä¸€ä¸ªå›ºå®šæ•°ç›®è¿›è¡Œåç§»åè¢«æ›¿æ¢æˆå¯†æ–‡ã€‚ä¾‹å¦‚ï¼Œå½“åç§»é‡æ˜¯ 3 çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å­—æ¯ A å°†è¢«æ›¿æ¢æˆ Dï¼ŒB å˜æˆ Eï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸ªåŠ å¯†æ–¹æ³•æ˜¯ä»¥ç½—é©¬å…±å’Œæ—¶æœŸæºæ’’çš„åå­—å‘½åçš„ï¼Œå½“å¹´æºæ’’æ›¾ç”¨æ­¤æ–¹æ³•ä¸å…¶å°†å†›ä»¬è¿›è¡Œè”ç³»ã€‚</p><p>æ ¹æ®åç§»é‡çš„ä¸åŒï¼Œè¿˜å­˜åœ¨è‹¥å¹²ç‰¹å®šçš„æºæ’’å¯†ç åç§°ï¼šåç§»é‡ä¸º10ï¼šAvocatï¼ˆAâ†’Kï¼‰ï¼›åç§»é‡ä¸º13ï¼šROT13ï¼›åç§»é‡ä¸º-5ï¼šCassis (K 6)ï¼›åç§»é‡ä¸º-6ï¼šCassette (K 7)</p><p>ç¤ºä¾‹ï¼ˆåç§»é‡ 3ï¼‰ï¼š</p><ul><li><p>æ˜æ–‡å­—æ¯è¡¨ï¼šABCDEFGHIJKLMNOPQRSTUVWXYZ</p></li><li><p>å¯†æ–‡å­—æ¯è¡¨ï¼šDEFGHIJKLMNOPQRSTUVWXYZABC</p></li></ul><h3 id="æ …æ å¯†ç "><a href="#æ …æ å¯†ç " class="headerlink" title="æ …æ å¯†ç "></a>æ …æ å¯†ç </h3><p>æ …æ å¯†ç å°±æ˜¯æŠŠè¦åŠ å¯†çš„æ˜æ–‡åˆ†æˆ N ä¸ªä¸€ç»„ï¼Œç„¶åæŠŠæ¯ç»„çš„ç¬¬ 1 ä¸ªå­—è¿èµ·æ¥ï¼Œå½¢æˆä¸€æ®µæ— è§„å¾‹çš„è¯ã€‚æ …æ å¯†ç æœ¬èº«æœ‰ä¸€ä¸ªæ½œè§„åˆ™ï¼Œå°±æ˜¯ç»„æˆæ …æ çš„å­—æ¯ä¸€èˆ¬ä¸ä¼šå¤ªå¤šï¼Œä¸€èˆ¬ä¸è¶…è¿‡ 30 ä¸ªã€‚</p><p>ç¤ºä¾‹ï¼šæ˜æ–‡ä¸º THE LONGEST DAY MUST HAVE AN ENDã€‚åŠ å¯†æ—¶ï¼ŒæŠŠå°†è¦ä¼ é€’çš„ä¿¡æ¯ä¸­çš„å­—æ¯äº¤æ›¿æ’æˆä¸Šä¸‹ä¸¤è¡Œï¼š</p><p>T E O G S D Y U T A E N N</p><p>H L N E T A M S H V A E D</p><p>å°†ä¸‹é¢ä¸€è¡Œå­—æ¯æ’åœ¨ä¸Šé¢ä¸€è¡Œçš„åè¾¹ç»„åˆæˆå¯†æ–‡ï¼š</p><p>TEOGSDYUTAENN HLNETAMSHVAED</p><p>æ …æ å¯†ç è¿˜æœ‰ä¸€ç§å˜ç§ï¼Œç§°ä¸ºæ …æ å¯†ç  W å‹ï¼Œå®ƒä¼šå…ˆæŠŠæ˜æ–‡ç±»ä¼¼ W å½¢çŠ¶è¿›è¡Œæ’åˆ—ï¼Œç„¶åå†æŒ‰æ ç›®é¡ºåº 1-Nï¼Œå–æ¯ä¸€æ çš„æ‰€æœ‰å­—ç¬¦å€¼ï¼Œç»„æˆåŠ å¯†åå¯†æ–‡ï¼Œæ¯”å¦‚å­—ç¬¦ä¸² 123456789ï¼Œé‡‡ç”¨æ ç›®æ•°ä¸º 3 æ—¶ï¼Œæ˜æ–‡å°†é‡‡ç”¨å¦‚ä¸‹æ’åˆ—ï¼š<br>1â€”5â€”9<br>-2-4-6-8-<br>â€“3â€”7â€“<br>å–æ¯ä¸€æ æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œç»„æˆåŠ å¯†åå¯†æ–‡ï¼š159246837</p><h3 id="çŒªåœˆå¯†ç "><a href="#çŒªåœˆå¯†ç " class="headerlink" title="çŒªåœˆå¯†ç "></a>çŒªåœˆå¯†ç </h3><p>çŒªåœˆå¯†ç ä¹Ÿç§°ä¸ºæœ±é«˜å¯†ç ã€å…±æµä¼šæš—å·ã€å…±æµä¼šå¯†ç æˆ–å…±æµä¼šå‘˜å¯†ç ï¼Œæ˜¯ä¸€ç§ä»¥æ ¼å­ä¸ºåŸºç¡€çš„ç®€å•æ›¿ä»£å¼å¯†ç ã€‚åªèƒ½å¯¹å­—æ¯åŠ è§£å¯†å¹¶ä¸”ç¬¦å·æ— æ³•å¤åˆ¶ï¼Œç²˜è´´åä¼šç›´æ¥æ˜¾ç¤ºæ˜æ–‡ï¼Œå³ä½¿ä½¿ç”¨ç¬¦å·ï¼Œä¹Ÿä¸ä¼šå½±å“å¯†ç åˆ†æï¼Œäº¦å¯ç”¨åœ¨å…¶å®ƒæ›¿ä»£å¼çš„æ–¹æ³•ã€‚æ›¾ç»æ˜¯ç¾å›½å†…æˆ˜æ—¶ç›Ÿå†›ä½¿ç”¨çš„å¯†ç ï¼Œç›®å‰ä»…åœ¨å¯†ç æ•™å­¦ã€å„ç§ç«èµ›ä¸­ä½¿ç”¨ã€‚</p><p><img src="https://img-blog.csdnimg.cn/3f805384f17840368db5e1611a54c9a2.gif#pic_center" alt="01.gif"></p><h3 id="æ‘©æ–¯å¯†ç "><a href="#æ‘©æ–¯å¯†ç " class="headerlink" title="æ‘©æ–¯å¯†ç "></a>æ‘©æ–¯å¯†ç </h3><p>æ‘©æ–¯å¯†ç ï¼ˆMorse codeï¼‰ï¼Œåˆç§°ä¸ºæ‘©å°”æ–¯ç”µç ã€æ‘©æ–¯ç”µç ï¼Œæ˜¯ä¸€ç§æ—¶é€šæ—¶æ–­çš„ä¿¡å·ä»£ç ï¼Œè¿™ç§ä¿¡å·ä»£ç é€šè¿‡ä¸åŒçš„æ’åˆ—é¡ºåºæ¥è¡¨è¾¾ä¸åŒçš„è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œæ ‡ç‚¹ç¬¦å·ç­‰ã€‚</p><p>26ä¸ªå­—æ¯çš„æ‘©æ–¯å¯†ç è¡¨</p><table><thead><tr><th align="left">å­—ç¬¦</th><th align="left">æ‘©æ–¯ç </th><th align="left">å­—ç¬¦</th><th align="left">æ‘©æ–¯ç </th><th>å­—ç¬¦</th><th>æ‘©æ–¯ç </th><th>å­—ç¬¦</th><th>æ‘©æ–¯ç </th></tr></thead><tbody><tr><td align="left">A</td><td align="left"><code>ï¼â”</code></td><td align="left">B</td><td align="left"><code>â” ï¼ï¼ï¼</code></td><td>C</td><td><code>â” ï¼â” ï¼</code></td><td>D</td><td><code>â” ï¼ï¼</code></td></tr><tr><td align="left">E</td><td align="left"><code>ï¼</code></td><td align="left">F</td><td align="left"><code>ï¼ï¼â” ï¼</code></td><td>G</td><td><code>â” â” ï¼</code></td><td>H</td><td><code>ï¼ï¼ï¼ï¼</code></td></tr><tr><td align="left">I</td><td align="left"><code>ï¼ï¼</code></td><td align="left">J</td><td align="left"><code>ï¼â” â” â”</code></td><td>K</td><td><code>â” ï¼â”</code></td><td>L</td><td><code>ï¼â” ï¼ï¼</code></td></tr><tr><td align="left">M</td><td align="left"><code>â” â”</code></td><td align="left">N</td><td align="left"><code>â” ï¼</code></td><td>O</td><td><code>â” â” â”</code></td><td>P</td><td><code>ï¼â” â” ï¼</code></td></tr><tr><td align="left">Q</td><td align="left"><code>â” â” ï¼â”</code></td><td align="left">R</td><td align="left"><code>ï¼â” ï¼</code></td><td>S</td><td><code>ï¼ï¼ï¼</code></td><td>T</td><td><code>â”</code></td></tr><tr><td align="left">U</td><td align="left"><code>ï¼ï¼â”</code></td><td align="left">V</td><td align="left"><code>ï¼ï¼ï¼â”</code></td><td>W</td><td><code>ï¼â” â”</code></td><td>X</td><td><code>â” ï¼ï¼â”</code></td></tr><tr><td align="left">Y</td><td align="left"><code>â” ï¼â” â”</code></td><td align="left">Z</td><td align="left"><code>â” â” ï¼ï¼</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>10ä¸ªæ•°å­—çš„æ‘©æ–¯å¯†ç è¡¨</p><table><thead><tr><th align="left">å­—ç¬¦</th><th align="left">æ‘©æ–¯ç </th><th align="left">å­—ç¬¦</th><th align="left">æ‘©æ–¯ç </th><th>å­—ç¬¦</th><th>æ‘©æ–¯ç </th><th>å­—ç¬¦</th><th>æ‘©æ–¯ç </th></tr></thead><tbody><tr><td align="left">0</td><td align="left"><code>â” â” â” â” â”</code></td><td align="left">1</td><td align="left"><code>ï¼â” â” â” â”</code></td><td>2</td><td><code>ï¼ï¼â” â” â”</code></td><td>3</td><td><code>ï¼ï¼ï¼â” â”</code></td></tr><tr><td align="left">4</td><td align="left"><code>ï¼ï¼ï¼ï¼â”</code></td><td align="left">5</td><td align="left"><code>ï¼ï¼ï¼ï¼ï¼</code></td><td>6</td><td><code>â” ï¼ï¼ï¼ï¼</code></td><td>7</td><td><code>â” â” ï¼ï¼ï¼</code></td></tr><tr><td align="left">8</td><td align="left"><code>â” â” â” ï¼ï¼</code></td><td align="left">9</td><td align="left"><code>â” â” â” â” ï¼</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>æ ‡ç‚¹ç¬¦å·çš„æ‘©æ–¯å¯†ç è¡¨</p><table><thead><tr><th align="left">å­—ç¬¦</th><th align="left">æ‘©æ–¯ç </th><th align="left">å­—ç¬¦</th><th align="left">æ‘©æ–¯ç </th><th>å­—ç¬¦</th><th>æ‘©æ–¯ç </th><th>å­—ç¬¦</th><th>æ‘©æ–¯ç </th></tr></thead><tbody><tr><td align="left">.</td><td align="left"><code>ï¼â” ï¼â” ï¼â”</code></td><td align="left">:</td><td align="left"><code>â” â” â” ï¼ï¼ï¼</code></td><td>,</td><td><code>â” â” ï¼ï¼â” â”</code></td><td>;</td><td><code>â” ï¼â” ï¼â” ï¼</code></td></tr><tr><td align="left">?</td><td align="left"><code>ï¼ï¼â” â” ï¼ï¼</code></td><td align="left">=</td><td align="left"><code>â” ï¼ï¼ï¼â”</code></td><td>â€˜</td><td><code>ï¼â” â” â” â” ï¼</code></td><td>/</td><td><code>â” ï¼ï¼â” ï¼</code></td></tr><tr><td align="left">!</td><td align="left"><code>â” ï¼â” ï¼â” â”</code></td><td align="left">â”</td><td align="left"><code>â” ï¼ï¼ï¼ï¼â”</code></td><td>_</td><td><code>ï¼ï¼â” â” ï¼â”</code></td><td>â€œ</td><td><code>ï¼â” ï¼ï¼â” ï¼</code></td></tr><tr><td align="left">(</td><td align="left"><code>â” ï¼â” â” ï¼</code></td><td align="left">)</td><td align="left"><code>â” ï¼â” â” ï¼â”</code></td><td>$</td><td><code>ï¼ï¼ï¼â” ï¼ï¼â”</code></td><td>&amp;</td><td><code>ï¼ ï¼ï¼ï¼</code></td></tr><tr><td align="left">@</td><td align="left"><code>ï¼â” â” ï¼â” ï¼</code></td><td align="left"></td><td align="left"></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="åŸ¹æ ¹å¯†ç "><a href="#åŸ¹æ ¹å¯†ç " class="headerlink" title="åŸ¹æ ¹å¯†ç "></a>åŸ¹æ ¹å¯†ç </h3><p>åŸ¹æ ¹å¯†ç ï¼Œåˆåå€åº·å°¼å¯†ç ï¼ˆBaconâ€™s cipherï¼‰æ˜¯ç”±æ³•å…°è¥¿æ–¯Â·åŸ¹æ ¹å‘æ˜çš„ä¸€ç§éšå†™æœ¯ï¼Œå®ƒæ˜¯ä¸€ç§æœ¬è´¨ä¸Šç”¨äºŒè¿›åˆ¶æ•°è®¾è®¡çš„ï¼Œæ²¡æœ‰ç”¨é€šå¸¸çš„0å’Œ1æ¥è¡¨ç¤ºï¼Œè€Œæ˜¯é‡‡ç”¨aå’Œbï¼Œçœ‹åˆ°ä¸€ä¸²çš„aå’Œbï¼Œå¹¶ä¸”äº”ä¸ªä¸€ç»„ï¼Œé‚£ä¹ˆå°±æ˜¯åŸ¹æ ¹åŠ å¯†äº†ã€‚</p><p>ç¬¬ä¸€ç§æ–¹å¼ï¼š</p><table><thead><tr><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th></tr></thead><tbody><tr><td>A</td><td>aaaaa</td><td>H</td><td>aabbb</td><td>O</td><td>abbba</td><td>V</td><td>babab</td></tr><tr><td>B</td><td>aaaab</td><td>I</td><td>abaaa</td><td>P</td><td>abbbb</td><td>W</td><td>babba</td></tr><tr><td>C</td><td>aaaba</td><td>J</td><td>abaab</td><td>Q</td><td>baaaa</td><td>X</td><td>babbb</td></tr><tr><td>D</td><td>aaabb</td><td>K</td><td>ababa</td><td>R</td><td>baaab</td><td>Y</td><td>bbaaa</td></tr><tr><td>E</td><td>aabaa</td><td>L</td><td>ababb</td><td>S</td><td>baaba</td><td>Z</td><td>bbaab</td></tr><tr><td>F</td><td>aabab</td><td>M</td><td>abbaa</td><td>T</td><td>baabb</td><td></td><td></td></tr><tr><td>G</td><td>aabba</td><td>N</td><td>abbab</td><td>U</td><td>babaa</td><td></td><td></td></tr></tbody></table><p>ç¬¬äºŒç§æ–¹å¼ï¼š</p><table><thead><tr><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th><th>å­—ç¬¦</th><th>åŸ¹æ ¹å¯†ç </th></tr></thead><tbody><tr><td>a</td><td>AAAAA</td><td>h</td><td>AABBB</td><td>p</td><td>ABBBA</td><td>x</td><td>BABAB</td></tr><tr><td>b</td><td>AAAAB</td><td>i-j</td><td>ABAAA</td><td>q</td><td>ABBBB</td><td>y</td><td>BABBA</td></tr><tr><td>c</td><td>AAABA</td><td>k</td><td>ABAAB</td><td>r</td><td>BAAAA</td><td>z</td><td>BABBB</td></tr><tr><td>d</td><td>AAABB</td><td>l</td><td>ABABA</td><td>s</td><td>BAAAB</td><td></td><td></td></tr><tr><td>e</td><td>AABAA</td><td>m</td><td>ABABB</td><td>t</td><td>BAABA</td><td></td><td></td></tr><tr><td>f</td><td>AABAB</td><td>n</td><td>ABBAA</td><td>u-v</td><td>BAABB</td><td></td><td></td></tr><tr><td>g</td><td>AABBA</td><td>o</td><td>ABBAB</td><td>w</td><td>BABAA</td><td></td><td></td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><ul><li>æ˜æ–‡ï¼škuaidaili</li><li>å¯†æ–‡ï¼šABABABABAAAAAAAABAAAAAABBAAAAAABAAAABABBABAAA</li></ul><h3 id="ç»´å‰å°¼äºšå¯†ç "><a href="#ç»´å‰å°¼äºšå¯†ç " class="headerlink" title="ç»´å‰å°¼äºšå¯†ç "></a>ç»´å‰å°¼äºšå¯†ç </h3><p>ç»´å‰å°¼äºšå¯†ç æ˜¯åœ¨å‡¯æ’’å¯†ç åŸºç¡€ä¸Šäº§ç”Ÿçš„ä¸€ç§åŠ å¯†æ–¹æ³•ï¼Œå®ƒå°†å‡¯æ’’å¯†ç çš„å…¨éƒ¨25ç§ä½ç§»æ’åºä¸ºä¸€å¼ è¡¨ï¼Œä¸åŸå­—æ¯åºåˆ—å…±åŒç»„æˆ26è¡ŒåŠ26åˆ—çš„å­—æ¯è¡¨ã€‚å¦å¤–ï¼Œç»´å‰å°¼äºšå¯†ç å¿…é¡»æœ‰ä¸€ä¸ªå¯†é’¥ï¼Œè¿™ä¸ªå¯†é’¥ç”±å­—æ¯ç»„æˆï¼Œæœ€å°‘ä¸€ä¸ªï¼Œæœ€å¤šå¯ä¸æ˜æ–‡å­—æ¯æ•°é‡ç›¸ç­‰ã€‚ç»´å‰å°¼äºšå¯†ç è¡¨å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/f2d77e1fbf392a531272954ec46a4aa2.png" alt="02.png"></p><p>ç¤ºä¾‹ï¼š</p><ul><li>æ˜æ–‡ï¼šIâ€™ve got it.</li><li>å¯†é’¥ï¼šok</li><li>å¯†æ–‡ï¼šWâ€™fsâ€‚qcdâ€‚wd.</li></ul><p>é¦–å…ˆï¼Œå¯†é’¥é•¿åº¦éœ€è¦ä¸æ˜æ–‡é•¿åº¦ç›¸åŒï¼Œå¦‚æœå°‘äºæ˜æ–‡é•¿åº¦ï¼Œåˆ™é‡å¤æ‹¼æ¥ç›´åˆ°ç›¸åŒã€‚ç¤ºä¾‹çš„æ˜æ–‡é•¿åº¦ä¸º8ä¸ªå­—æ¯ï¼ˆéå­—æ¯å‡è¢«å¿½ç•¥ï¼‰ï¼Œå¯†é’¥ä¼šè¢«ç¨‹åºè¡¥å…¨ä¸º <code>okokokok</code>ï¼Œç„¶åæ ¹æ®ç»´å‰å°¼äºšå¯†ç è¡¨è¿›è¡ŒåŠ å¯†ï¼šæ˜æ–‡ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯ <code>I</code>ï¼Œå¯†é’¥ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯ <code>o</code>ï¼Œåœ¨è¡¨æ ¼ä¸­æ‰¾åˆ° <code>I</code> åˆ—ä¸ <code>o</code> è¡Œç›¸äº¤ç‚¹ï¼Œå­—æ¯ <code>W</code> å°±æ˜¯å¯†æ–‡ç¬¬ä¸€ä¸ªå­—æ¯ï¼ŒåŒç†ï¼Œ<code>v</code> åˆ—ä¸ <code>k</code> è¡Œäº¤ç‚¹å­—æ¯æ˜¯ <code>F</code>ï¼Œ<code>e</code> åˆ—ä¸ <code>o</code> è¡Œäº¤ç‚¹å­—æ¯æ˜¯ <code>S</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ³¨æ„ï¼šç»´å‰å°¼äºšå¯†ç åªå¯¹å­—æ¯è¿›è¡ŒåŠ å¯†ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼Œè‹¥æ–‡æœ¬ä¸­å‡ºç°éå­—æ¯å­—ç¬¦ä¼šåŸæ ·ä¿ç•™ï¼Œå¦‚æœè¾“å…¥å¤šè¡Œæ–‡æœ¬ï¼Œæ¯è¡Œæ˜¯å•ç‹¬åŠ å¯†çš„ã€‚</p><h3 id="ä¸ä½›è®ºç¦…"><a href="#ä¸ä½›è®ºç¦…" class="headerlink" title="ä¸ä½›è®ºç¦…"></a>ä¸ä½›è®ºç¦…</h3><p>å­—ç¬¦ä¸²è½¬æ¢åï¼Œæ˜¯ä¸€äº›ä½›è¯­ï¼Œåœ¨çº¿ä½“éªŒï¼š<a href="https://keyfc.net/bbs/tools/tudoucode.aspx">https://keyfc.net/bbs/tools/tudoucode.aspx</a></p><p>ç¤ºä¾‹ï¼š</p><ul><li>æ˜æ–‡ï¼šçˆ¬è™«</li><li>å¯†æ–‡ï¼šä½›æ›°ï¼šä¿±æ›³æ —ç¾…ã€‚è«³æ•…å¤§å¤šç½°é¡›å†¥æœ‰è«³å§ªå¸ç½°çŸ¥ä¿±è–©å¿ƒä¿±æ™ºä¼Š</li></ul><h3 id="å½“é“ºå¯†ç "><a href="#å½“é“ºå¯†ç " class="headerlink" title="å½“é“ºå¯†ç "></a>å½“é“ºå¯†ç </h3><p>å½“é“ºå¯†ç åœ¨ CTF æ¯”èµ›é¢˜ç›®ä¸­å‡ºç°è¿‡ã€‚è¯¥åŠ å¯†ç®—æ³•æ˜¯æ ¹æ®å½“å‰æ±‰å­—æœ‰å¤šå°‘ç¬”ç”»å‡ºå¤´ï¼Œå¯¹åº”çš„æ˜æ–‡å°±æ˜¯æ•°å­—å‡ ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ul><li>æ˜æ–‡ï¼šç‹å¤« äº•å·¥ å¤«å£ ç”±ä¸­äºº äº•ä¸­ å¤«å¤« ç”±ä¸­å¤§</li><li>å¯†æ–‡ï¼š67 84 70 123 82 77 125</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;çˆ¬è™«å·¥ç¨‹å¸ˆåœ¨åšåŠ å¯†å‚æ•°é€†å‘çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°å„ç§å„æ ·çš„åŠ å¯†ç®—æ³•ã€ç¼–ç ã€æ··æ·†ï¼Œæ¯ä¸ªç®—æ³•éƒ½æœ‰å…¶å¯¹åº”çš„ç‰¹å¾ï¼Œå¯¹äºä¸€äº›è¾ƒå°çš„ç½‘ç«™ï¼Œå¾€å¾€ç›´æ¥å¼•ç”¨è¿™äº›å®˜</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>ã€JS é€†å‘ã€‘WebSocket åè®®çˆ¬è™«ï¼Œæ™ºæ…§æ ‘æ‰«ç ç™»å½•æ¡ˆä¾‹åˆ†æ</title>
    <link href="https://www.itbob.cn/article/043/"/>
    <id>https://www.itbob.cn/article/043/</id>
    <published>2022-01-10T09:30:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p><strong>æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œè‹¥æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘ç«‹å³åˆ é™¤ï¼</strong></p><h2 id="é€†å‘ç›®æ ‡"><a href="#é€†å‘ç›®æ ‡" class="headerlink" title="é€†å‘ç›®æ ‡"></a>é€†å‘ç›®æ ‡</h2><ul><li>ç›®æ ‡ï¼šæ™ºæ…§æ ‘æ‰«ç ç™»å½•ï¼Œæ¥å£ä½¿ç”¨äº† WebSocket é€šä¿¡åè®®</li><li>ä¸»é¡µï¼š<code>aHR0cHM6Ly9wYXNzcG9ydC56aGlodWlzaHUuY29tL2xvZ2luI3FyQ29kZUxvZ2lu</code></li></ul><h2 id="WebSocket-ç®€ä»‹"><a href="#WebSocket-ç®€ä»‹" class="headerlink" title="WebSocket ç®€ä»‹"></a>WebSocket ç®€ä»‹</h2><p>WebSocket æ˜¯ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ï¼ŒWebSocket ä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å˜å¾—æ›´åŠ ç®€å•ã€‚åœ¨ WebSocket API ä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ï¼Œä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥åˆ›å»ºæŒä¹…æ€§çš„è¿æ¥ï¼Œå¹¶è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“ã€‚</p><p>WebSocket åè®®ç®€ç§°ä¸º WS æˆ–è€… WSSï¼ˆWebSocket Secureï¼‰ï¼Œå…¶å‘é€è¯·æ±‚çš„ URL ä»¥ <code>ws://</code> æˆ–è€… <code>wss://</code> å¼€å¤´ï¼ŒWSS æ˜¯ WS çš„åŠ å¯†ç‰ˆæœ¬ï¼Œç±»ä¼¼äº HTTP ä¸ HTTPSã€‚</p><p>WebSocket åè®®çš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ï¼šæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œæ˜¯çœŸæ­£çš„åŒå‘å¹³ç­‰å¯¹è¯ï¼Œå±äºæœåŠ¡å™¨æ¨é€æŠ€æœ¯çš„ä¸€ç§ã€‚ä¸ HTTP çš„å¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20211207170201530.png" alt="01.png"></p><h2 id="æŠ“åŒ…åˆ†æ"><a href="#æŠ“åŒ…åˆ†æ" class="headerlink" title="æŠ“åŒ…åˆ†æ"></a>æŠ“åŒ…åˆ†æ</h2><p>æ¥åˆ°æ™ºæ…§æ ‘çš„æ‰«ç ç™»å½•é¡µé¢ï¼ŒæŠ“åŒ…é€‰ä¸­ WSï¼Œç”¨æ¥ç­›é€‰ WebSocket è¯·æ±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20211207170202672.png" alt="02.png"></p><p>å…¶ä¸­æœ‰ä¸€äº›æ¯”è¾ƒç‰¹åˆ«çš„å‚æ•°ï¼Œæ˜¯ HTTP/ HTTPS è¯·æ±‚ä¸­æ²¡æœ‰çš„ï¼š</p><ul><li><code>Upgrade: websocket</code>ï¼šè¡¨æ˜è¿™æ˜¯ WebSocket ç±»å‹è¯·æ±‚ï¼›</li><li><code>Sec-WebSocket-Version</code>ï¼šå‘Šè¯‰æœåŠ¡å™¨æ‰€ä½¿ç”¨çš„ Websocket Draftï¼ˆåè®®ç‰ˆæœ¬ï¼‰ï¼Œå¿…é¡»æ˜¯ 13ï¼›</li><li><code>Sec-WebSocket-Extensions</code>ï¼šåè®®æ‰©å±•ï¼ŒæŸç±»åè®®å¯èƒ½æ”¯æŒå¤šä¸ªæ‰©å±•ï¼Œé€šè¿‡å®ƒå¯ä»¥å®ç°åè®®å¢å¼ºï¼›</li><li><code>Sec-WebSocket-Key</code>ï¼šæ˜¯ WebSocket å®¢æˆ·ç«¯å‘é€çš„ä¸€ä¸ª base64 ç¼–ç çš„å¯†æ–‡ï¼Œæ˜¯æµè§ˆå™¨éšæœºç”Ÿæˆçš„ï¼Œè¦æ±‚æœåŠ¡ç«¯å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹åº”åŠ å¯†çš„ <code>Sec-WebSocket-Accept</code> åº”ç­”ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šæŠ›å‡º <code>Error during WebSocket handshake</code> é”™è¯¯ï¼Œå¹¶å…³é—­è¿æ¥ã€‚</li></ul><p>æˆ‘ä»¬å…ˆæ‰«ç ç™»å½•ä¸€éï¼Œå†é€‰æ‹© Messages é€‰é¡¹å¡ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€äº›æ•°æ®äº¤äº’ï¼Œå…¶ä¸­ç»¿è‰²çš„ç®­å¤´æ˜¯å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œçº¢è‰²ç®­å¤´æ˜¯æœåŠ¡å™¨å“åº”è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20211207170204424.png" alt="03.png"></p><p>æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹æ•´ä¸ªäº¤äº’è¿‡ç¨‹ï¼Œå½“æˆ‘ä»¬æ‰“å¼€äºŒç»´ç é¡µé¢åï¼Œä¹Ÿå°±æ˜¯äºŒç»´ç åŠ è½½å‡ºæ¥çš„åŒæ—¶ï¼ŒWebSocket è¿æ¥å°±å»ºç«‹äº†ï¼Œæ¯éš”8ç§’å·¦å³ï¼Œå®¢æˆ·ç«¯å°±ä¸»åŠ¨å‘é€ä¸€ä¸²å­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯ä¹Ÿè¿”å›ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œåªä¸è¿‡æ˜¯å­—å…¸æ ¼å¼ï¼Œå½“æˆ‘ä»¬æ‰«ç æˆåŠŸæ—¶ï¼ŒæœåŠ¡ç«¯å°±è¿”å›æ‰«ç æˆåŠŸçš„ä¿¡æ¯ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç™»é™†æ—¶ï¼Œå®¢æˆ·ç«¯åˆä¼šè¿”å›æ‰«ç ç»“æœï¼Œå¦‚æœæˆåŠŸï¼Œå°±æœ‰ä¸€ä¸ªä¸€æ¬¡æ€§å¯†ç  <code>oncePassword</code> å’Œä¸€ä¸ª <code>uuid</code>ï¼Œè¿™ä¸¤ä¸ªå‚æ•°è‚¯å®šåœ¨åç»­çš„è¯·æ±‚ä¸­ä¼šç”¨åˆ°çš„ã€‚å¦‚æœé•¿æ—¶é—´ä¸æ‰«ç çš„è¯ï¼Œè¿‡æ®µæ—¶é—´å°±ä¼šè¿”å›äºŒç»´ç å·²å¤±æ•ˆçš„ä¿¡æ¯ï¼Œæ¯éš”8ç§’å‘é€ä¸€æ¬¡æ¶ˆæ¯ï¼Œæ­£æ˜¯ä¸ºäº†ä¿æŒè¿æ¥ä»¥åŠè·å–äºŒç»´ç çŠ¶æ€æ¶ˆæ¯ã€‚</p><p>é‚£ä¹ˆåˆ°è¿™é‡Œå°±å‡ºç°äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li><p>åœ¨æ¥å›äº¤äº’å‘é€çš„é‚£ä¸²å­—ç¬¦ä¸²ï¼Œæ˜¯æ€ä¹ˆå¾—æ¥çš„ï¼Ÿ</p></li><li><p>åœ¨ Python ä¸­åº”è¯¥å¦‚ä½•å®ç° WebSocket è¯·æ±‚ï¼Ÿ</p></li><li><p>å¦‚ä½•å®ç°å®¢æˆ·ç«¯æ¯éš” 8 ç§’å‘é€ä¸€æ¬¡æ•°æ®çš„åŒæ—¶ï¼Œå®æ—¶æ¥æ”¶æœåŠ¡ç«¯çš„ä¿¡æ¯ï¼Ÿï¼ˆè§‚å¯Ÿè¯·æ±‚æ‰«ç ç»“æœå®æ—¶è¿”å›çš„ï¼Œæ‰€ä»¥ä¸èƒ½æ¯éš” 8 ç§’æ‰æ¥æ”¶ä¸€æ¬¡ï¼‰</p></li></ol><h2 id="å‚æ•°è·å–"><a href="#å‚æ•°è·å–" class="headerlink" title="å‚æ•°è·å–"></a>å‚æ•°è·å–</h2><p>é¦–å…ˆè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯å‘é€çš„é‚£ä¸²å­—ç¬¦ä¸²æ˜¯æ€ä¹ˆæ¥çš„ï¼Œè¿™é‡Œå¯»æ‰¾åŠ å¯†å­—ç¬¦ä¸²çš„æ–¹å¼å’Œ HTTP/HTTPS è¯·æ±‚æ˜¯ä¸€æ ·çš„ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æœç´¢è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå‘ç°æ˜¯é€šè¿‡ä¸€ä¸ªæ¥å£ä¼ è¿‡æ¥çš„ï¼Œå…¶ä¸­ img å°±æ˜¯äºŒç»´ç å›¾ç‰‡çš„ base64 å€¼ï¼ŒqrToken å°±æ˜¯å®¢æˆ·ç«¯å‘é€çš„é‚£ä¸²å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20211207170205334.png" alt="04.png"></p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ WebSocket è¯·æ±‚éƒ½æ˜¯å¦‚æ­¤çš„ç®€å•çš„ï¼Œæœ‰çš„å®¢æˆ·ç«¯å‘é€çš„æ•°æ®æ˜¯ Binary Messageï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰ã€æˆ–è€…æ›´å¤æ‚çš„åŠ å¯†å‚æ•°ï¼Œç›´æ¥æœç´¢æ— æ³•è·å–ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿæœ‰è§£å†³æ–¹æ³•ï¼š</p><ol><li><p>å·²çŸ¥åˆ›å»º WebSocket å¯¹è±¡çš„è¯­å¥ä¸ºï¼š<code>var Socket = new WebSocket(url, [protocol] );</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æœç´¢ <code>new WebSocket</code> å®šä½åˆ°å»ºç«‹è¯·æ±‚çš„ä½ç½®ã€‚</p></li><li><p>å·²çŸ¥ä¸€ä¸ª WebSocket å¯¹è±¡æœ‰ä»¥ä¸‹ç›¸å…³äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æœç´¢å¯¹åº”äº‹ä»¶å¤„ç†ç¨‹åºä»£ç æ¥å®šä½ï¼š</p></li></ol><table><thead><tr><th align="left">äº‹ä»¶</th><th align="left">äº‹ä»¶å¤„ç†ç¨‹åº</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">open</td><td align="left">Socket.onopen</td><td align="left">è¿æ¥å»ºç«‹æ—¶è§¦å‘</td></tr><tr><td align="left">message</td><td align="left">Socket.onmessage</td><td align="left">å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘</td></tr><tr><td align="left">error</td><td align="left">Socket.onerror</td><td align="left">é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</td></tr><tr><td align="left">close</td><td align="left">Socket.onclose</td><td align="left">è¿æ¥å…³é—­æ—¶è§¦å‘</td></tr></tbody></table><ol start="3"><li>å·²çŸ¥ä¸€ä¸ª WebSocket å¯¹è±¡æœ‰ä»¥ä¸‹ç›¸å…³æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æœç´¢å¯¹åº”æ–¹æ³•æ¥å®šä½ï¼š</li></ol><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">Socket.send()</td><td align="left">ä½¿ç”¨è¿æ¥å‘é€æ•°æ®</td></tr><tr><td align="left">Socket.close()</td><td align="left">å…³é—­è¿æ¥</td></tr></tbody></table><h2 id="Python-å®ç°-WebSocket-è¯·æ±‚"><a href="#Python-å®ç°-WebSocket-è¯·æ±‚" class="headerlink" title="Python å®ç° WebSocket è¯·æ±‚"></a>Python å®ç° WebSocket è¯·æ±‚</h2><p>æ¥ç€å‰é¢è¯´ï¼Œç¬¬äºŒä¸ªé—®é¢˜ï¼Œåœ¨ Python ä¸­åº”è¯¥å¦‚ä½•å®ç° WebSocket è¯·æ±‚ï¼ŸPython åº“ä¸­ç”¨äºè¿æ¥ WebSocket çš„æœ‰å¾ˆå¤šï¼Œæ¯”è¾ƒå¸¸ç”¨ã€ç¨³å®šçš„æœ‰ <a href="https://github.com/websocket-client/websocket-client">websocket-client</a>ï¼ˆéå¼‚æ­¥ï¼‰ã€<a href="https://github.com/aaugustin/websockets">websockets</a>ï¼ˆå¼‚æ­¥ï¼‰ã€<a href="https://github.com/asyncins/aiowebsocket">aiowebsocket</a>ï¼ˆå¼‚æ­¥ï¼‰ã€‚åœ¨æœ¬æ¡ˆä¾‹ä¸­ä½¿ç”¨ websocket-clientï¼Œè¿™é‡Œè¿˜è¦æ³¨æ„ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œè¦æ¯éš” 8 ç§’å‘é€ä¸€æ¬¡æ•°æ®ï¼Œå¯¹äºæœåŠ¡ç«¯ï¼Œæˆ‘ä»¬éœ€è¦å®æ—¶æ¥æ”¶æœåŠ¡ç«¯çš„ä¿¡æ¯ï¼Œå¯ä»¥è§‚å¯Ÿè¯·æ±‚ï¼Œæ‰«ç çš„ç»“æœæ˜¯å®æ—¶è¿”å›çš„ï¼Œå¦‚æœæˆ‘ä»¬ä¹Ÿæ¯éš” 8 ç§’æ‰æ¥æ”¶ä¸€æ¬¡æ•°æ®çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼Œè€Œä¸”ä¹Ÿä¼šä½¿å¾—æ•´ä¸ªç¨‹åºçš„å“åº”ä¹Ÿä¸åŠæ—¶ï¼Œæ•ˆç‡å˜ä½ã€‚</p><p>åœ¨ websocket-client å®˜æ–¹æ–‡æ¡£ä¸­ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé•¿è¿æ¥çš„ demoï¼Œå®ƒå®ç°äº†è¿ç»­å‘é€ä¸‰æ¬¡æ•°æ®ï¼Œå¹¶å®æ—¶ç›‘å¬æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ï¼Œå…¶ä¸­çš„ <code>websocket.enableTrace(True)</code> è¡¨ç¤ºæ˜¯å¦æ˜¾ç¤ºè¿æ¥è¯¦ç»†ä¿¡æ¯ï¼š</p><pre><code class="python">import websocketimport _threadimport timedef on_message(ws, message):    print(message)def on_error(ws, error):    print(error)def on_close(ws, close_status_code, close_msg):    print(&quot;### closed ###&quot;)def on_open(ws):    def run(*args):        for i in range(3):            time.sleep(1)            ws.send(&quot;Hello %d&quot; % i)        time.sleep(1)        ws.close()        print(&quot;thread terminating...&quot;)    _thread.start_new_thread(run, ())if __name__ == &quot;__main__&quot;:    websocket.enableTrace(True)    ws = websocket.WebSocketApp(        &quot;ws://echo.websocket.org/&quot;, on_open=on_open,        on_message=on_message, on_error=on_error, on_close=on_close    )    ws.run_forever()</code></pre><p>æˆ‘ä»¬å°†å…¶é€‚å½“æ”¹é€ ä¸€ä¸‹ï¼Œå®¢æˆ·ç«¯åœ¨ run æ–¹æ³•é‡Œï¼Œä¾ç„¶æ˜¯æ¯éš” 8 ç§’å‘é€ä¸€æ¬¡ qr_tokenï¼Œå®æ—¶æ¥æ”¶æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼Œå½“â€œæ‰«ç æˆåŠŸâ€å­—æ ·å‡ºç°åœ¨æ¶ˆæ¯é‡Œæ—¶ï¼Œå°†å¾—åˆ°çš„ <code>oncePassword</code> å’Œ <code>uuid</code> å­˜èµ·æ¥ï¼Œç„¶åå…³é—­è¿æ¥ï¼Œé€»è¾‘ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œåç»­åªè¦å°†äºŒç»´ç çš„è·å–é€»è¾‘æ¥å…¥å°±è¡Œäº†ã€‚ï¼ˆå·²è„±æ•å¤„ç†ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œï¼‰</p><pre><code class="python">import jsonimport timeimport _threadimport websocketweb_socket_url = &quot;wss://appcomm-user.è„±æ•å¤„ç†.com/app-commserv-user/websocket?qrToken=%s&quot;qr_token = &quot;ca6e6cfb70de4f2f915b968aefcad404&quot;once_password = &quot;&quot;uuid = &quot;&quot;def wss_on_message(ws, message):    print(&quot;=============== [message] ===============&quot;)    message = json.loads(message)    print(message)    if &quot;æ‰«ç æˆåŠŸ&quot; in message[&quot;msg&quot;]:        global once_password, uuid        once_password = message[&quot;oncePassword&quot;]        uuid = message[&quot;uuid&quot;]        ws.close()def wss_on_error(ws, error):    print(&quot;=============== [error] ===============&quot;)    print(error)    ws.close()def wss_on_close(ws, close_status_code, close_msg):    print(&quot;=============== [closed] ===============&quot;)    print(close_status_code)    print(close_msg)def wss_on_open(ws):    def run(*args):        while True:            ws.send(qr_token)            time.sleep(8)    _thread.start_new_thread(run, (qr_token,))def wss():    # websocket.enableTrace(True)  # æ˜¯å¦æ˜¾ç¤ºè¿æ¥è¯¦ç»†ä¿¡æ¯    ws = websocket.WebSocketApp(        web_socket_url % qr_token, on_open=wss_on_open,        on_message=wss_on_message, on_error=wss_on_error,        on_close=wss_on_close    )    ws.run_forever()</code></pre><h2 id="å®ç°æ‰«ç ç™»å½•"><a href="#å®ç°æ‰«ç ç™»å½•" class="headerlink" title="å®ç°æ‰«ç ç™»å½•"></a>å®ç°æ‰«ç ç™»å½•</h2><p>æœ€é‡è¦çš„ WebSocket è¯·æ±‚éƒ¨åˆ†å·²ç»è§£å†³äº†ï¼Œæ‰«ç æ‹¿åˆ° <code>oncePassword</code> å’Œ <code>uuid</code> åï¼Œåç»­çš„å¤„ç†æ­¥éª¤å°±æ¯”è¾ƒç®€å•äº†ï¼Œç°åœ¨æ¥ç†ä¸€ä¸‹å®Œæ•´çš„æ­¥éª¤ï¼š</p><ol><li>è¯·æ±‚é¦–é¡µï¼Œç¬¬ä¸€æ¬¡è·å– cookieï¼ŒåŒ…å«ï¼šINGRESSCOOKIEã€JSESSIONIDã€SERVERIDã€acw_tcï¼›</li><li>è¯·æ±‚è·å–äºŒç»´ç æ¥å£ï¼Œå¾—åˆ°äºŒç»´ç çš„ base64 å€¼å’Œ qrTokenï¼›</li><li>å»ºç«‹ WebSocket è¿æ¥ï¼Œæ‰«æäºŒç»´ç ï¼Œè·å–ä¸€æ¬¡æ€§å¯†ç  oncePassword å’Œ uuidï¼ˆå¥½åƒæ²¡ä»€ä¹ˆç”¨ï¼‰ï¼›</li><li>è¯·æ±‚ä¸€ä¸ªç™»å½•æ¥å£ï¼Œ302 é‡å®šå‘ï¼Œéœ€è¦æºå¸¦ä¸€æ¬¡æ€§å¯†ç ï¼Œç¬¬äºŒæ¬¡è·å– cookieï¼ŒåŒ…å«ï¼šCASLOGCã€CASTGCï¼ŒåŒæ—¶æ›´æ–° SERVERIDï¼›</li><li>è¯·æ±‚ç¬¬ 4 æ­¥ 302 é‡å®šå‘åœ°å€ï¼Œç¬¬ä¸‰æ¬¡è·å– cookieï¼ŒåŒ…å«ï¼šSESSIONï¼›</li><li>æºå¸¦å®Œæ•´ cookieï¼Œè¯·æ±‚ç”¨æˆ·ä¿¡æ¯æ¥å£ï¼Œè·å–çœŸå®ç”¨æˆ·åç­‰ä¿¡æ¯ã€‚</li></ol><p>å®é™…ä¸Š WebSocket è¿æ¥ç»“æŸåï¼Œæœ‰å¾ˆå¤šè¯·æ±‚ï¼Œçœ‹èµ·æ¥éƒ½æ¯”è¾ƒå¯ä»¥ï¼Œä½†æ˜¯ç»è¿‡æµ‹è¯•ï¼Œåªæœ‰ä¸¤ä¸ªé‡å®šå‘æ¯”è¾ƒæœ‰ç”¨ï¼ŒæŠ“åŒ…å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20211207170206292.png" alt="05.png"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p><strong>ä»¥ä¸‹åªæ¼”ç¤ºéƒ¨åˆ†å…³é”®ä»£ç ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œï¼</strong> å®Œæ•´ä»£ç ä»“åº“åœ°å€ï¼š<a href="https://github.com/TRHX/Python3-Spider-Practice/">https://github.com/TRHX/Python3-Spider-Practice/</a></p><pre><code class="python">import timeimport jsonimport base64import _threadimport requestsimport websocketfrom PIL import Imageweb_socket_url = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;get_login_qr_img_url = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;login_url = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;user_info_url = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;headers = &#123;    &quot;Host&quot;: &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;,    &quot;Pragma&quot;: &quot;no-cache&quot;,    &quot;Referer&quot;: &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;,    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36&quot;&#125;qr_token = &quot;&quot;once_password = &quot;&quot;uuid = &quot;&quot;cookie = &#123;&#125;def get_cookies_first():    response = requests.get(url=login_url, headers=headers)    global cookie    cookie = response.cookies.get_dict()def get_login_qr_img():    response = requests.get(url=get_login_qr_img_url, headers=headers, cookies=cookie).json()    qr_img = response[&quot;img&quot;]    global qr_token    qr_token = response[&quot;qrToken&quot;]    with open(&#39;code.png&#39;, &#39;wb&#39;) as f:        f.write(base64.b64decode(qr_img))    image = Image.open(&#39;code.png&#39;)    image.show()    print(&quot;è¯·æ‰«æéªŒè¯ç ! &quot;)def wss_on_message(ws, message):    print(&quot;=============== [message] ===============&quot;)    message = json.loads(message)    print(message)    if &quot;æ‰«ç æˆåŠŸ&quot; in message[&quot;msg&quot;]:        global once_password, uuid        once_password = message[&quot;oncePassword&quot;]        uuid = message[&quot;uuid&quot;]        ws.close()def wss_on_error(ws, error):    print(&quot;=============== [error] ===============&quot;)    print(error)    ws.close()def wss_on_close(ws, close_status_code, close_msg):    print(&quot;=============== [closed] ===============&quot;)    print(close_status_code)    print(close_msg)def wss_on_open(ws):    def run(*args):        while True:            ws.send(qr_token)            time.sleep(8)    _thread.start_new_thread(run, (qr_token,))def wss():    # websocket.enableTrace(True)  # æ˜¯å¦æ˜¾ç¤ºè¿æ¥è¯¦ç»†ä¿¡æ¯    ws = websocket.WebSocketApp(        web_socket_url % qr_token, on_open=wss_on_open,        on_message=wss_on_message, on_error=wss_on_error,        on_close=wss_on_close    )    ws.run_forever()def get_cookie_second():    global cookie    params = &#123;        &quot;pwd&quot;: once_password,        &quot;service&quot;: &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    &#125;    headers[&quot;Host&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    headers[&quot;Referer&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    response = requests.get(url=login_url, params=params, headers=headers, cookies=cookie, allow_redirects=False)    cookie.update(response.cookies.get_dict())    location = response.headers.get(&quot;Location&quot;)    return locationdef get_cookie_third(location):    global cookie    headers[&quot;Host&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    headers[&quot;Referer&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    response = requests.get(url=location, headers=headers, cookies=cookie, allow_redirects=False)    cookie.update(response.cookies.get_dict())    location = response.headers.get(&quot;Location&quot;)    return locationdef get_login_user_info():    headers[&quot;Host&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    headers[&quot;Origin&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    headers[&quot;Referer&quot;] = &quot;è„±æ•å¤„ç†ï¼Œå®Œæ•´ä»£ç å…³æ³¨ GitHubï¼šhttps://github.com/TRHX/Python3-Spider-Practice&quot;    params = &#123;&quot;time&quot;: str(int(time.time() * 1000))&#125;    response = requests.get(url=user_info_url, headers=headers, cookies=cookie, params=params)    print(response.text)def main():    # ç¬¬ä¸€æ¬¡è·å– cookieï¼ŒåŒ…å« INGRESSCOOKIEã€JSESSIONIDã€SERVERIDã€acw_tc    get_cookies_first()    # è·å–äºŒç»´ç     get_login_qr_img()    # websocket æ‰«ç ç™»å½•ï¼Œè¿”å›ä¸€æ¬¡æ€§å¯†ç     wss()    # ç¬¬äºŒæ¬¡è·å– cookieï¼Œæ›´æ–° SERVERIDã€è·å– CASLOGCã€CASTGC    location1 = get_cookie_second()    # ç¬¬ä¸‰æ¬¡è·å– cookieï¼Œè·å– SESSION    get_cookie_third(location1)    # è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯    get_login_user_info()if __name__ == &#39;__main__&#39;:    main()</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å£°æ˜&quot;&gt;&lt;a href=&quot;#å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;å£°æ˜&quot;&gt;&lt;/a&gt;å£°æ˜&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœ</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>ã€JS é€†å‘ã€‘æŸç©ºæ°”è´¨é‡ç›‘æµ‹å¹³å°æ— é™ debugger ä»¥åŠæ•°æ®åŠ¨æ€åŠ å¯†åˆ†æ</title>
    <link href="https://www.itbob.cn/article/044/"/>
    <id>https://www.itbob.cn/article/044/</id>
    <published>2022-01-10T09:30:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p><strong>æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ï¼Œè‹¥æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘ç«‹å³åˆ é™¤ï¼</strong></p><h2 id="é€†å‘ç›®æ ‡"><a href="#é€†å‘ç›®æ ‡" class="headerlink" title="é€†å‘ç›®æ ‡"></a>é€†å‘ç›®æ ‡</h2><ul><li>ç›®æ ‡ï¼šæŸç©ºæ°”è´¨é‡ç›‘æµ‹å¹³å°æ— é™ debugger ä»¥åŠè¯·æ±‚æ•°æ®ã€è¿”å›æ•°æ®åŠ¨æ€åŠ å¯†ã€è§£å¯†</li><li>ä¸»é¡µï¼š<code>aHR0cHM6Ly93d3cuYXFpc3R1ZHkuY24v</code></li><li>æ¥å£ï¼š<code>aHR0cHM6Ly93d3cuYXFpc3R1ZHkuY24vYXBpbmV3L2FxaXN0dWR5YXBpLnBocA==</code></li></ul><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>è¿™ä¸ªç«™ç‚¹æ›´æ–°é¢‘ç‡å¾ˆé«˜ï¼Œåœ¨æˆ‘ä¹‹å‰ä¹Ÿå·²ç»æœ‰å¾ˆå¤šåšä¸»å†™äº†è¯¥ç«™ç‚¹çš„åˆ†ææ–‡ç« ï¼Œè¿‘æœŸæœ‰è¯»è€…é—®è¯·æ±‚æ•°æ®çš„åŠ å¯†å’Œè¿”å›æ•°æ®çš„è§£å¯†ï¼Œå‘ç°å…¶åŠ è§£å¯† JS å˜æˆäº†åŠ¨æ€çš„ï¼Œä»¥å‰çš„é‚£äº›æ–‡ç« æåˆ°çš„è§£å†³æ€è·¯ä¸å¤ªè¡Œäº†ï¼Œä½†æ•´ä½“ä¸Šæ¥è¯´ä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œåªä¸è¿‡å¤„ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹ï¼Œè¿˜æœ‰ä¸€äº›å°ç»†èŠ‚éœ€è¦æ³¨æ„ã€‚</p><p>åœ¨ç½‘ç«™çš„â€œå…³äºç³»ç»Ÿâ€é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç«™è²Œä¼¼æ˜¯ä¸ªäººå¼€å‘è€…åœ¨ç»´æŠ¤ï¼Œæœ€æ—©åœ¨2013å¹´å°±æœ‰äº†ï¼Œåœ¨å‹æƒ…èµåŠ©åˆ—è¡¨é‡Œï¼Œå¯ä»¥çœ‹åˆ°å¤§å¤šæ•°éƒ½æ˜¯ä¸€äº›ç¯å¢ƒã€æµ‹ç»˜ã€å…¬å…±å«ç”Ÿç›¸å…³çš„å¤§å­¦ä¸“ä¸šã€ç ”ç©¶é™¢äººå‘˜ï¼Œå¯ä»¥çŒœæµ‹åˆ°è¿™äº›æ•°æ®å¯¹äºä»–ä»¬çš„ç ”ç©¶æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ï¼Œå†åŠ ä¸Šåçˆ¬æ›´æ–°é¢‘ç¹ï¼Œå¯ä»¥çœ‹å‡ºç«™é•¿é¥±å—çˆ¬è™«ä¹‹è‹¦ï¼ŒKå“¥ä¹Ÿä¸æƒ³ç»™ç«™é•¿æ·»åŠ è´Ÿæ‹…ï¼Œæ¯•ç«Ÿè¿™ç§ç«™ç‚¹å’±ä»¬åº”è¯¥æ”¯æŒï¼Œè®©ä»–é•¿ä¹…ç»´æŠ¤ä¸‹å»ï¼Œ<strong>æ‰€ä»¥æœ¬æœŸKå“¥åªåˆ†æé€»è¾‘å’Œå°‘éƒ¨åˆ†ä»£ç ï¼Œå°±ä¸æ”¾å®Œæ•´ä»£ç äº†ï¼Œå¦‚æœæœ‰ç›¸å…³ä¸“ä¸šäººå£«ç¡®å®éœ€è¦æŠ“å–æ•°æ®åšç ”ç©¶çš„ï¼Œå¯ä»¥åœ¨å…¬ä¼—å·åå°è”ç³»æˆ‘ã€‚</strong></p><h2 id="ç»•è¿‡æ— é™-debugger"><a href="#ç»•è¿‡æ— é™-debugger" class="headerlink" title="ç»•è¿‡æ— é™ debugger"></a>ç»•è¿‡æ— é™ debugger</h2><p>å³é”® F12ï¼Œä¼šæç¤ºå³é”®è¢«ç¦ç”¨ï¼Œä¸è¦ç´§ï¼Œä½¿ç”¨å¿«æ·é”® <code>Ctrl+Shift+i</code> æˆ–è€…æµè§ˆå™¨å³ä¸Šè§’ï¼Œæ›´å¤šå·¥å…·ï¼Œå¼€å‘è€…å·¥å…·ï¼Œç…§æ ·èƒ½æ‰“å¼€ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/389c5830317031a092ffe6ddd0c10050.png#pic_center" alt="01.png"></p><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>æ‰“å¼€æ§åˆ¶å°åä¼šè¿›å…¥ç¬¬ä¸€ä¸ªæ— é™ debuggerï¼Œå¾€ä¸Šè·Ÿä¸€ä¸ªæ ˆï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ª try-catch è¯­å¥ï¼Œä½ ä¸‹æ–­ç‚¹ä¼šå‘ç°ä»–ä¼šä¸€ç›´èµ° catchï¼Œè°ƒç”¨ <code>setTimeout()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºåœ¨æŒ‡å®šçš„æ¯«ç§’æ•°åè°ƒç”¨å‡½æ•°æˆ–è®¡ç®—è¡¨è¾¾å¼ï¼Œæ³¨æ„ä¸Šé¢ï¼Œæ˜¯å°† debugger ä¼ é€’ç»™äº†æ„é€ æ–¹æ³• constructorï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•è¿‡æ‰ debuggerï¼ŒHook æ‰ constructor æˆ– setTimeout éƒ½å¯ä»¥ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/c311099f5c0b77192424c42d937d90c4.png#pic_center" alt="02.png"></p><pre><code class="javascript">// ä¸¤ç§ Hook ä»»é€‰ä¸€ä¸­// Hook æ„é€ æ–¹æ³•Function.prototype.constructor_ = Function.prototype.constructor;Function.prototype.constructor = function (a) &#123;    if(a == &quot;debugger&quot;) &#123;        return function ()&#123;&#125;;    &#125;    return Function.prototype.constructor_(a);&#125;;// Hook setTimeoutvar setTimeout_ = setTimeoutvar setTimeout = function (func, time)&#123;    if (func == txsdefwsw)&#123;        return function () &#123;&#125;;    &#125;    return setTimeout_(func, time)&#125;</code></pre><p>ç„¶åå°±æ¥åˆ°äº†ç¬¬äºŒä¸ªæ— é™ debuggerï¼ŒåŒæ ·è·Ÿæ ˆï¼Œå‘ç°æœ‰ä¸ª setInterval å®šæ—¶å™¨å’Œæ„é€ æ–¹æ³• constructorï¼Œç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ Hook æ‰ constructor æˆ– setInterval éƒ½å¯ä»¥ã€‚æ³¨æ„ï¼šå®šæ—¶å™¨è¿™é‡Œè¿˜æ£€æµ‹äº†çª—å£é«˜å®½ï¼Œå³ä¾¿æ˜¯ä½ è¿‡äº† constructor æˆ– setIntervalï¼Œå¦‚æœä¸æŠŠå¼€å‘è€…å·¥å…·å•ç‹¬æ‹¿å‡ºæ¥ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œä¼šä¸æ–­è¾“å‡ºâ€œæ£€æµ‹åˆ°éæ³•è°ƒè¯•â€ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/24fb1072abd88b44ce7e6a836e56af97.png#pic_center" alt="03.png"></p><pre><code class="javascript">// Hook setIntervalvar setInterval_ = setIntervalsetInterval = function (func, time)&#123;    if (time == 2000) &#123;        return function () &#123;&#125;;    &#125;    return setInterval_(func, time)&#125;</code></pre><p>æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œå…¶å®è¿™ä¸¤ä¸ªæ— é™ debugger éƒ½å¯ä»¥ Hook æ„é€ æ–¹æ³•æ¥è¿‡æ‰ï¼Œæ‰€ä»¥ç›´æ¥ Fiddler æ³¨å…¥è¯¥ Hook æ„é€ æ–¹æ³•çš„ä»£ç å³å¯ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/57c491d6b2a5f28110ba422d34355cc9.png#pic_center" alt="04.png"></p><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>åœ¨æˆ‘ä»¬é‡åˆ°ç¬¬äºŒä¸ªæ— é™ debugger çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ç›´æ¥è·Ÿæ ˆåˆ°ä¸€ä¸ª city_realtime.php çš„é¡µé¢ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ª eval è¯­å¥ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ª eval é‡Œé¢çš„è¯­å¥ä½ å°±ä¼šå‘ç°æ­£æ˜¯å‰é¢æˆ‘ä»¬åœ¨ VM è™šæ‹Ÿæœºé‡Œé¢çœ‹åˆ°çš„ debugger ä»£ç ï¼Œæ‰€ä»¥è¿™é‡Œç†è®ºä¸Šå¯ä»¥ç›´æ¥æ›¿æ¢æ‰è¿™ä¸ªé¡µé¢ï¼Œå»æ‰ eval è¯­å¥ï¼Œå°±ä¸ä¼šæœ‰æ— é™ debugger äº†ï¼Œä½†æ˜¯Kå“¥å…ˆå‘Šè¯‰ä½ ï¼Œç°åœ¨ä¸è¡Œäº†ï¼Œå› ä¸ºé‡Œé¢æœ‰åŠ è½½äº†æŸä¸ª JSï¼Œè¿™ä¸ª JS åœ¨åé¢åŠ å¯†è§£å¯†ä¸­ä¼šç”¨åˆ°ï¼Œä½†æ˜¯è¿™ä¸ª JS æ˜¯åŠ¨æ€çš„ï¼Œæ¯10åˆ†é’Ÿå°±ä¼šæ”¹å˜ï¼Œæˆ‘ä»¬åé¢è¿˜è¦é€šè¿‡æ­¤é¡µé¢æ¥è·å–åŠ¨æ€çš„ JSï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½æ›¿æ¢çš„ï¼è¿™é‡Œåªæ˜¯æä¸€ä¸‹è¿™ä¸ªæ€è·¯ï¼</p><p><img src="https://img-blog.csdnimg.cn/img_convert/db958514d4e4bc98ffa605cf626ca23a.png#pic_center" alt="05.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/282ada73849ebb74039a98732edaf72e.png#pic_center" alt="06.png"></p><h3 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h3><p>å½“ç„¶ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•ï¼Œç›´æ¥å³é”®é€‰æ‹© Never pause hereï¼Œæ°¸ä¸åœ¨æ­¤å¤„æ–­ä¸‹å³å¯ï¼ŒåŒæ ·è¿˜éœ€è¦æŠŠå¼€å‘è€…å·¥å…·çª—å£å•ç‹¬æ‹¿å‡ºæ¥ï¼Œä¸ç„¶ä¼šä¸€ç›´è¾“å‡ºâ€œæ£€æµ‹åˆ°éæ³•è°ƒè¯•â€ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/f5922a0ad3c48adc030e368bf8542b8a.png#pic_center" alt="07.png"></p><h2 id="æŠ“åŒ…åˆ†æ"><a href="#æŠ“åŒ…åˆ†æ" class="headerlink" title="æŠ“åŒ…åˆ†æ"></a>æŠ“åŒ…åˆ†æ</h2><p>æˆ‘ä»¬åœ¨å®æ—¶ç›‘æ§é¡µé¢ï¼Œé¡ºä¾¿ç‚¹å‡»æŸ¥è¯¢ä¸€ä¸ªåŸå¸‚ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚çš„ Form Data å’Œè¿”å›çš„æ•°æ®éƒ½æ˜¯åŠ å¯†çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/6f1b1872723348480a25b3862201622e.png#pic_center" alt="08.png"></p><h2 id="åŠ å¯†å…¥å£"><a href="#åŠ å¯†å…¥å£" class="headerlink" title="åŠ å¯†å…¥å£"></a>åŠ å¯†å…¥å£</h2><p>ç”±äºæ˜¯ XHRï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è·Ÿæ ˆï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°åŠ å¯†çš„ä½ç½®ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/ed3d2b8414cdb6f2d434d2534939e379.png#pic_center" alt="09.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/53044ab14dbfdb75bd21657060d6bbd8.png#pic_center" alt="10.png"></p><p>å¯ä»¥çœ‹åˆ°ä¼ é€’çš„ data é”®å€¼å¯¹ï¼š<code>&#123;hXM8NDFHN: p7crXYR&#125;</code>ï¼Œé”®åœ¨è¿™ä¸ª JS é‡Œæ˜¯å†™æ­»çš„ï¼Œå€¼æ˜¯é€šè¿‡ä¸€ä¸ªæ–¹æ³• <code>pU14VhqrofroULds()</code> å¾—åˆ°çš„ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å®šå€¼ GETDATAï¼Œç¬¬äºŒä¸ªå°±æ˜¯åŸå¸‚åç§°ï¼Œæˆ‘ä»¬å†è·Ÿè¿›çœ‹çœ‹è¿™ä¸ªæ–¹æ³•æ˜¯å•¥ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/6145ba480135887e42bda4f0f471d3f9.png#pic_center" alt="11.png"></p><p>ä¸€äº› appIdã€æ—¶é—´æˆ³ã€åŸå¸‚ç­‰å‚æ•°ï¼Œåšäº†ä¸€äº› MD5ã€base64 çš„æ“ä½œï¼Œè¿”å›çš„ param å°±æ˜¯æˆ‘ä»¬è¦çš„å€¼äº†ã€‚çœ‹èµ·æ¥ä¸éš¾ï¼Œæˆ‘ä»¬å†æ‰¾æ‰¾è¿”å›çš„åŠ å¯†æ•°æ®æ˜¯å¦‚ä½•è§£å¯†çš„ï¼Œæˆ‘ä»¬æ³¨æ„åˆ° ajax è¯·æ±‚æœ‰ä¸ª success å…³é”®å­—ï¼Œæˆ‘ä»¬å³ä¾¿æ˜¯ä¸æ‡‚ JS é€»è¾‘ï¼Œä¹Ÿå¯ä»¥çŒœåˆ°åº”è¯¥æ˜¯è¯·æ±‚æˆåŠŸåçš„å¤„ç†æ“ä½œå§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä¼ è¿›æ¥çš„ dzJMI å°±æ˜¯è¿”å›çš„åŠ å¯†çš„æ•°æ®ï¼Œç»è¿‡ <code>db0HpCYIy97HkHS7RkhUn()</code> æ–¹æ³•åï¼Œå°±è§£å¯†æˆåŠŸäº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/6f5527d38878bcabda88878591aafb3a.png#pic_center" alt="12.png"></p><p>è·Ÿè¿› <code>db0HpCYIy97HkHS7RkhUn()</code> æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ AES+DES+BASE64 è§£å¯†ï¼Œä¼ å…¥çš„å¯†é’¥ key å’Œåç§»é‡ iv éƒ½åœ¨å¤´éƒ¨æœ‰å®šä¹‰ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/b77e427fed50ef80002d0144fb478741.png#pic_center" alt="13.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/960e2ebfe395fbb139442d10e5f16f43.png#pic_center" alt="14.png"></p><h2 id="åŠ¨æ€-JS"><a href="#åŠ¨æ€-JS" class="headerlink" title="åŠ¨æ€ JS"></a>åŠ¨æ€ JS</h2><p>ç»è¿‡ä»¥ä¸Šåˆ†æåï¼Œæˆ‘ä»¬åŠ å¯†è§£å¯†çš„é€»è¾‘éƒ½æå®šäº†ï¼Œä½†æ˜¯ä½ å¤šè°ƒè¯•ä¸€ä¸‹å°±ä¼šå‘ç°ï¼Œè¿™ä¸€ä¸ªåŠ å¯†è§£å¯†çš„ JS æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå®šä¹‰çš„å¯†é’¥ key å’Œåç§»é‡ iv éƒ½æ˜¯éš”æ®µæ—¶é—´å°±ä¼šæ”¹å˜çš„ï¼Œå¦‚æœä½ åœ¨è¿™æ®µä»£ç é‡Œä¸‹æ–­ç‚¹ï¼Œåœç•™æ—¶é—´è¿‡é•¿ï¼Œçªç„¶å‘ç°æ–­ç‚¹å¤±æ•ˆæ— æ³•æ–­ä¸‹äº†ï¼Œé‚£å°±æ˜¯ JS å˜äº†ï¼Œå½“å‰ä»£ç å·²ç»å¤±æ•ˆäº†ã€‚</p><p>æˆ‘ä»¬éšä¾¿è–…ä¸¤ä¸ªä¸åŒçš„ JS ä¸‹æ¥ï¼ˆæç¤ºï¼šJS æ¯éš”10åˆ†é’Ÿä¼šå˜åŒ–ï¼Œåæ–‡æœ‰è¯¦ç»†åˆ†æï¼‰ï¼Œåˆ©ç”¨ PyCharm çš„æ–‡ä»¶å¯¹æ¯”åŠŸèƒ½ï¼ˆä¾æ¬¡é€‰æ‹© View - Compare Withï¼‰å¯ä»¥æ€»ç»“å‡ºä»¥ä¸‹å‡ ä¸ªå˜åŒ–çš„åœ°æ–¹ï¼ˆå˜é‡åçš„å˜åŒ–ä¸ç®—ï¼‰ï¼š</p><ol><li>å¼€å¤´çš„8ä¸ªå‚æ•°çš„å€¼ï¼šä¸¤ä¸ª aes key å’Œ ivï¼Œä¸¤ä¸ª des key å’Œ ivï¼›</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/4f48281ff87143bc23a094cf634802d8.png#pic_center" alt="15.png"></p><ol start="2"><li>ç”ŸæˆåŠ å¯†çš„ param æ—¶ï¼ŒappId æ˜¯å˜åŒ–çš„ï¼Œæœ€åçš„åŠ å¯†åˆ†ä¸º AESã€DES å’Œæ²¡æœ‰åŠ å¯†ï¼Œä¸‰ç§æƒ…å†µï¼ˆè¿™é‡Œæ˜¯æœ€å®¹æ˜“å¿½ç•¥çš„åœ°æ–¹ï¼Œè¿™é‡Œæ²¡æœ‰æ³¨æ„åˆ°ï¼Œè¯·æ±‚å¯èƒ½ä¼šæç¤º appId æ— æ•ˆçš„æƒ…å†µï¼‰ï¼š</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/762fa747135504fbde73fa6b3986d869.png#pic_center" alt="16.png"></p><ol start="3"><li>æœ€åå‘é€è¯·æ±‚æ—¶ï¼Œdata é”®å€¼å¯¹ï¼Œå…¶ä¸­çš„é”®ä¹Ÿæ˜¯å˜åŒ–çš„ï¼š</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/67ee28a04033aa503d8e41be6fcf3dbd.png#pic_center" alt="17.png"></p><p>å˜åŒ–çš„åœ°æ–¹æˆ‘ä»¬æ‰¾åˆ°äº†ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆè·å–è¿™ä¸ª JS å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ª JS çš„åœ¨ VM è™šæ‹Ÿæœºé‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦æ‰¾åˆ°å®ƒçš„æºå¤´ï¼Œæ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œæˆ‘ä»¬æŠ“åŒ…å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ JSï¼Œç±»ä¼¼äº encrypt_xxxxxx.jsï¼Œçœ‹è¿™å–åå°±çŸ¥é“ä¸ç®€å•ï¼Œè¿”å›çš„æ˜¯ä¸€æ®µ eval åŒ…è£¹çš„ä»£ç ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/a2f3687fe4ee1aad5c7ca1331bf65a68.png#pic_center" alt="18.png"></p><p>å¯¹äº eval æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œç›´æ¥å»æ‰ evalï¼Œè®©ä»–æ‰§è¡Œä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„é‚£æ®µ JSï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/ab32b5eff66ba4cf024ce79109bea03a.png#pic_center" alt="19.png"></p><p>è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼Œå¦‚æœä½ ä½¿ç”¨æ§åˆ¶å°ï¼Œä¼šå‘ç°å®ƒä¸€ç›´åœ¨æ‰“å° img æ ‡ç­¾ï¼Œå½±å“æˆ‘ä»¬çš„è¾“å…¥ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥è·Ÿè¿›å»ä¸‹æ–­ç‚¹æš‚æ—¶é˜»æ­¢ä»–è¿è¡Œå°±è¡Œäº†ï¼Œä¸éœ€è¦åšå…¶ä»–æ“ä½œæµªè´¹æ—¶é—´ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/54b72f44ae13b7eed13f0f4f6e0e3091.png#pic_center" alt="20.png"></p><p>ä½ ä»¥ä¸ºåˆ°è¿™é‡Œå°±å·®ä¸å¤šæå®šäº†ï¼Ÿé”™äº†ï¼ŒåŒæ ·çš„è¿™ä¸ª encrypt_xxxxxx.js ä¹Ÿè—æœ‰ç„æœºï¼š</p><ol><li>encrypt_xxxxxx.js çš„åç§°æ˜¯åŠ¨æ€çš„ï¼Œåé¢çš„ v å€¼æ˜¯ç§’çº§æ—¶é—´æˆ³ï¼Œéš”600ç§’ï¼Œä¹Ÿå°±æ˜¯ååˆ†é’Ÿå°±ä¼šæ”¹å˜ï¼Œè¿™ä¸ª JS å¯ä»¥åœ¨ city_realtime.php é¡µé¢æ‰¾åˆ°ï¼Œè¿˜è®°å¾—æˆ‘ä»¬å‰é¢è¯´è¿‡çš„ç»•è¿‡æ— é™ debugger ä¸èƒ½æ›¿æ¢æ­¤é¡µé¢å—ï¼Ÿæˆ‘ä»¬è¦é€šè¿‡æ­¤é¡µé¢æ¥è·å–åŠ¨æ€çš„ JSï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½æ›¿æ¢çš„ï¼</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/73f20c39d6bc6e0cc6ed54815cad99fa.png#pic_center" alt="21.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/fc3eeffb3bf092330e03cefaf34363e6.png#pic_center" alt="22.png"></p><ol start="2"><li>encrypt_xxxxxx.js è¿”å›çš„ JSï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ‰§è¡Œä¸€é eval å°±èƒ½å¾—åˆ°æ˜æ–‡ä»£ç äº†ï¼Œå®ƒæ˜¯ eval å’Œ base64 ç›¸ç»“åˆçš„ï¼Œç¬¬ä¸€ééƒ½æ˜¯ evalï¼Œä½†æ˜¯åé¢å°±è¯´ä¸å®šäº†ï¼Œæœ‰å¯èƒ½ç›´æ¥å‡ºç»“æœï¼Œæœ‰å¯èƒ½éœ€è¦ base64ï¼Œæœ‰å¯èƒ½ base64 ä¸¤éï¼Œæœ‰å¯èƒ½ä¸¤é base64 ä¹‹åè¿˜è¦å† evalï¼Œæ€»ä¹‹ï¼Œé™¤äº†ç¬¬ä¸€éæ˜¯ eval ä»¥å¤–ï¼Œåé¢æ˜¯å¦éœ€è¦ base64 å’Œ evalï¼Œä»¥åŠéœ€è¦çš„æ¬¡æ•°å’Œå…ˆåé¡ºåºï¼Œéƒ½æ˜¯ä¸ç¡®å®šçš„ï¼ä¸¾å‡ ä¸ªä¾‹å­ï¼š</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/5f2297cf7a0481ae3399b5c2a8fa81c0.png#pic_center" alt="23.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/b2217260728ded9a44be53524f23ad2b.png#pic_center" alt="24.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/9fa531eb305cba680b129ca22d910298.png#pic_center" alt="25.png"></p><p>è¿™é‡Œå¯èƒ½æœ‰äººä¼šé—®ï¼Œä½ æ€ä¹ˆçœ‹å‡ºæ¥é‚£æ˜¯ base64 å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç›´æ¥åœ¨ç½‘ç«™é¡µé¢çš„æ§åˆ¶å°é‡Œè¾“å…¥ <code>dswejwehxt</code>ï¼Œç‚¹å‡»å»çœ‹è¿™ä¸ªå‡½æ•°ï¼Œå°±æ˜¯ base64ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/5a0ee651bf758051472d212c7f0a5b07.png#pic_center" alt="26.png"></p><p>é‚£ä¹ˆé’ˆå¯¹ encrypt_xxxxxx.js å†…å®¹ä¸ç¡®å®šçš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè·å–åˆ° encrypt_xxxxxx.js åï¼Œéœ€è¦æ‰§è¡Œ eval å°±æ‰§è¡Œ evalï¼Œéœ€è¦æ‰§è¡Œ base64 å°±æ‰§è¡Œ base64ï¼Œç›´åˆ°æ²¡æœ‰ eval å’Œ base64 å³å¯ï¼Œå¯ä»¥åˆ†åˆ«ç”¨å­—ç¬¦ä¸² <code>eval(function</code> å’Œ <code>dswejwehxt(</code> æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ eval å’Œ base64ï¼ˆå½“ç„¶ä¹Ÿæœ‰å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚ <code>()</code> çš„ä¸ªæ•°ç­‰ï¼‰ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="python">def get_decrypted_js(encrypted_js_url):    &quot;&quot;&quot;    :param encrypted_js_url: encrypt_xxxxxx.js çš„åœ°å€    :return: è§£å¯†åçš„ JS    &quot;&quot;&quot;    decrypted_js = requests.get(url=encrypted_js_url, headers=headers).text    flag = True    while flag:        if &quot;eval(function&quot; in decrypted_js:            # éœ€è¦æ‰§è¡Œ eval            print(&quot;éœ€è¦æ‰§è¡Œ evalï¼&quot;)            replace_js = decrypted_js.replace(&quot;eval(function&quot;, &quot;(function&quot;)            decrypted_js = execjs.eval(replace_js)        elif &quot;dswejwehxt(&quot; in decrypted_js:            # éœ€è¦ base64 è§£ç             base64_num = decrypted_js.count(&quot;dswejwehxt(&quot;)            print(&quot;éœ€è¦ %s æ¬¡ base64 è§£ç ï¼&quot; % base64_num)            decrypted_js = re.findall(r&quot;\(&#39;(.*?)&#39;\)&quot;, decrypted_js)[0]            num = 0            while base64_num &gt; num:                decrypted_js = base64.b64decode(decrypted_js).decode()                num += 1        else:            # å¾—åˆ°æ˜æ–‡            flag = False    # print(decrypted_js)    return decrypted_js</code></pre><h2 id="æœ¬åœ°æ”¹å†™"><a href="#æœ¬åœ°æ”¹å†™" class="headerlink" title="æœ¬åœ°æ”¹å†™"></a>æœ¬åœ°æ”¹å†™</h2><p>é€šè¿‡ä»¥ä¸Šå‡½æ•°æˆ‘ä»¬å°±æ‹¿åˆ°äº†åŠ¨æ€çš„ JS äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œæ‹¿å›æ¥çš„ JS å—ï¼Ÿå½“ç„¶æ˜¯ä¸å¯ä»¥çš„ï¼Œä½ å¯ä»¥è‡ªå·±æœ¬åœ°æ‰§è¡Œä¸€ä¸‹ï¼Œå¯ä»¥å‘ç°é‡Œé¢çš„ CryptoJSã€Base64ã€hex_md5 éƒ½éœ€è¦è¡¥é½æ‰è¡Œï¼Œæ‰€ä»¥åˆ°è¿™é‡Œæˆ‘ä»¬å°±æœ‰ä¸¤ç§åšæ³•ï¼š</p><ol><li>æ‹¿åˆ°è§£å¯†åçš„åŠ¨æ€ JS åï¼ŒåŠ¨æ€ JS å’Œæˆ‘ä»¬è‡ªå·±å†™çš„ Base64ã€hex_md5 ç­‰æ–¹æ³•ç»„æˆæ–°çš„ JS ä»£ç ï¼Œæ‰§è¡Œæ–°çš„ JS ä»£ç æ‹¿åˆ°å‚æ•°ï¼Œè¿™é‡Œè¿˜éœ€è¦æ³¨æ„å› ä¸ºé‡Œé¢çš„å…¶ä»–æ–¹æ³•åéƒ½æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥ä½ è¿˜å¾—æƒ³åŠæ³•åŒ¹é…åˆ°æ­£ç¡®çš„æ–¹æ³•åæ¥è°ƒç”¨æ‰è¡Œï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯ç¨å¾®æœ‰ç‚¹å„¿éº»çƒ¦çš„ï¼›</li><li>æˆ‘ä»¬æœ¬åœ°è‡ªå·±å†™ä¸€ä¸ª JSï¼Œæ‹¿åˆ°è§£å¯†åçš„åŠ¨æ€ JS åï¼ŒæŠŠé‡Œé¢çš„ keyã€ivã€appIdã€data é”®åã€param æ˜¯å¦éœ€è¦ AES æˆ– DES åŠ å¯†ï¼Œè¿™äº›ä¿¡æ¯éƒ½åŒ¹é…å‡ºæ¥ï¼Œç„¶åä¼ ç»™æˆ‘ä»¬è‡ªå·±å†™çš„ JSï¼Œè°ƒç”¨æˆ‘ä»¬è‡ªå·±çš„æ–¹æ³•æ‹¿åˆ°åŠ å¯†ç»“æœã€‚</li></ol><p>è™½ç„¶ä¸¤ç§æ–¹æ³•éƒ½å¾ˆéº»çƒ¦ï¼Œä½†Kå“¥æš‚æ—¶ä¹Ÿæƒ³ä¸åˆ°æ›´å¥½çš„è§£å†³æ–¹æ³•äº†ï¼Œæœ‰æ¯”è¾ƒå¥½çš„æƒ³æ³•çš„æœ‹å‹å¯ä»¥ç•™è¨€è¯´ä¸€è¯´ã€‚</p><p>ä»¥ç¬¬äºŒç§æ–¹æ³•ä¸ºä¾‹ï¼Œæˆ‘ä»¬æœ¬åœ°çš„ JS ç¤ºä¾‹ï¼ˆmain.jsï¼‰ï¼š</p><pre><code class="javascript">var CryptoJS = require(&quot;crypto-js&quot;);var BASE64 = &#123;    encrypt: function (text) &#123;        return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(text))    &#125;,    decrypt: function (text) &#123;        return CryptoJS.enc.Base64.parse(text).toString(CryptoJS.enc.Utf8)    &#125;&#125;;var DES = &#123;    encrypt: function (text, key, iv) &#123;        var secretkey = (CryptoJS.MD5(key).toString()).substr(0, 16);        var secretiv = (CryptoJS.MD5(iv).toString()).substr(24, 8);        secretkey = CryptoJS.enc.Utf8.parse(secretkey);        secretiv = CryptoJS.enc.Utf8.parse(secretiv);        var result = CryptoJS.DES.encrypt(text, secretkey, &#123;            iv: secretiv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);        return result.toString();    &#125;,    decrypt: function (text, key, iv) &#123;        var secretkey = (CryptoJS.MD5(key).toString()).substr(0, 16);        var secretiv = (CryptoJS.MD5(iv).toString()).substr(24, 8);        secretkey = CryptoJS.enc.Utf8.parse(secretkey);        secretiv = CryptoJS.enc.Utf8.parse(secretiv);        var result = CryptoJS.DES.decrypt(text, secretkey, &#123;            iv: secretiv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);        return result.toString(CryptoJS.enc.Utf8);    &#125;&#125;;var AES = &#123;    encrypt: function (text, key, iv) &#123;        var secretkey = (CryptoJS.MD5(key).toString()).substr(16, 16);        var secretiv = (CryptoJS.MD5(iv).toString()).substr(0, 16);        secretkey = CryptoJS.enc.Utf8.parse(secretkey);        secretiv = CryptoJS.enc.Utf8.parse(secretiv);        var result = CryptoJS.AES.encrypt(text, secretkey, &#123;            iv: secretiv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);        return result.toString();    &#125;,    decrypt: function (text, key, iv) &#123;        var secretkey = (CryptoJS.MD5(key).toString()).substr(16, 16);        var secretiv = (CryptoJS.MD5(iv).toString()).substr(0, 16);        secretkey = CryptoJS.enc.Utf8.parse(secretkey);        secretiv = CryptoJS.enc.Utf8.parse(secretiv);        var result = CryptoJS.AES.decrypt(text, secretkey, &#123;            iv: secretiv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);        return result.toString(CryptoJS.enc.Utf8);    &#125;&#125;;function getDecryptedData(data, AES_KEY_1, AES_IV_1, DES_KEY_1, DES_IV_1) &#123;    data = AES.decrypt(data, AES_KEY_1, AES_IV_1);    data = DES.decrypt(data, DES_KEY_1, DES_IV_1);    data = BASE64.decrypt(data);    return data;&#125;function ObjectSort(obj) &#123;    var newObject = &#123;&#125;;    Object.keys(obj).sort().map(function (key) &#123;        newObject[key] = obj[key];    &#125;);    return newObject;&#125;function getRequestParam(method, obj, appId) &#123;    var clienttype = &#39;WEB&#39;;    var timestamp = new Date().getTime()    var param = &#123;        appId: appId,        method: method,        timestamp: timestamp,        clienttype: clienttype,        object: obj,        secret: CryptoJS.MD5(appId + method + timestamp + clienttype + JSON.stringify(ObjectSort(obj))).toString()    &#125;;    param = BASE64.encrypt(JSON.stringify(param));    return param;&#125;function getRequestAESParam(requestMethod, requestCity, appId, AES_KEY_2, AES_IV_2)&#123;    var param = getRequestParam(requestMethod, requestCity, appId);    return AES.encrypt(param, AES_KEY_2, AES_IV_2);&#125;function getRequestDESParam(requestMethod, requestCity, appId, DES_KEY_2, DES_IV_2)&#123;    var param = getRequestParam(requestMethod, requestCity, appId);    return DES.encrypt(param, DES_KEY_2, DES_IV_2);&#125;</code></pre><p>æˆ‘ä»¬åŒ¹é… JS é‡Œé¢çš„å„é¡¹å‚æ•°çš„ Python ä»£ç ç¤ºä¾‹ï¼ˆåŒ¹é…8ä¸ª keyã€iv å€¼ã€appId å’Œ param çš„åŠ å¯†æ–¹å¼ï¼‰ï¼š</p><pre><code class="python">def get_key_iv_appid(decrypted_js):    &quot;&quot;&quot;    :param decrypted_js: è§£å¯†åçš„ encrypt_xxxxxx.js    :return: è¯·æ±‚å¿…é¡»çš„ä¸€äº›å‚æ•°    &quot;&quot;&quot;    key_iv = re.findall(r&#39;const.*?&quot;(.*?)&quot;;&#39;, decrypted_js)    app_id = re.findall(r&quot;var appId.*?&#39;(.*?)&#39;;&quot;, decrypted_js)    request_data_name = re.findall(r&quot;aqistudyapi.php.*?data.*?&#123;(.*?):&quot;, decrypted_js, re.DOTALL)    # åˆ¤æ–­ param æ˜¯ AES åŠ å¯†è¿˜æ˜¯ DES åŠ å¯†è¿˜æ˜¯æ²¡æœ‰åŠ å¯†    if &quot;AES.encrypt(param&quot; in decrypted_js:        request_param_encrypt = &quot;AES&quot;    elif &quot;DES.encrypt(param&quot; in decrypted_js:        request_param_encrypt = &quot;DES&quot;    else:        request_param_encrypt = &quot;NO&quot;    key_iv_appid = &#123;        # key å’Œ iv çš„ä½ç½®å’ŒåŸæ¥ js é‡Œçš„æ˜¯ä¸€æ ·çš„        &quot;aes_key_1&quot;: key_iv[0],        &quot;aes_iv_1&quot;: key_iv[1],        &quot;aes_key_2&quot;: key_iv[2],        &quot;aes_iv_2&quot;: key_iv[3],        &quot;des_key_1&quot;: key_iv[4],        &quot;des_iv_1&quot;: key_iv[5],        &quot;des_key_2&quot;: key_iv[6],        &quot;des_iv_2&quot;: key_iv[7],        &quot;app_id&quot;: app_id[0],        # å‘é€è¯·æ±‚çš„ data çš„é”®å        &quot;request_data_name&quot;: request_data_name[0].strip(),        # å‘é€è¯·æ±‚çš„ data å€¼éœ€è¦å“ªç§åŠ å¯†        &quot;request_param_encrypt&quot;: request_param_encrypt    &#125;    # print(key_iv_appid)    return key_iv_appid</code></pre><p>æˆ‘ä»¬å‘é€è¯·æ±‚ä»¥åŠè§£å¯†è¿”å›å€¼çš„ Python ä»£ç ç¤ºä¾‹ï¼ˆä»¥åŒ—äº¬ä¸ºä¾‹ï¼‰ï¼š</p><pre><code class="python">def get_data(key_iv_appid):    &quot;&quot;&quot;    :param key_iv_appid: get_key_iv_appid() æ–¹æ³•è¿”å›çš„å€¼    &quot;&quot;&quot;    request_method = &quot;GETDATA&quot;    request_city = &#123;&quot;city&quot;: &quot;åŒ—äº¬&quot;&#125;    with open(&#39;main.js&#39;, &#39;r&#39;, encoding=&#39;utf-8&#39;) as f:        execjs_ = execjs.compile(f.read())    # æ ¹æ®ä¸åŒåŠ å¯†æ–¹å¼è°ƒç”¨ä¸åŒæ–¹æ³•è·å–è¯·æ±‚åŠ å¯†çš„ param å‚æ•°    request_param_encrypt = key_iv_appid[&quot;request_param_encrypt&quot;]    if request_param_encrypt == &quot;AES&quot;:        param = execjs_.call(            &#39;getRequestAESParam&#39;, request_method, request_city,            key_iv_appid[&quot;app_id&quot;], key_iv_appid[&quot;aes_key_2&quot;], key_iv_appid[&quot;aes_iv_2&quot;]        )    elif request_param_encrypt == &quot;DES&quot;:        param = execjs_.call(            &#39;getRequestDESParam&#39;, request_method, request_city,            key_iv_appid[&quot;app_id&quot;], key_iv_appid[&quot;des_key_2&quot;], key_iv_appid[&quot;des_iv_2&quot;]        )    else:        param = execjs_.call(&#39;getRequestParam&#39;, request_method, request_city, key_iv_appid[&quot;app_id&quot;])    data = &#123;        key_iv_appid[&quot;request_data_name&quot;]: param    &#125;    response = requests.post(url=aqistudy_api, headers=headers, data=data).text    # print(response)    # å¯¹è·å–çš„åŠ å¯†æ•°æ®è§£å¯†    decrypted_data = execjs_.call(        &#39;getDecryptedData&#39;, response,        key_iv_appid[&quot;aes_key_1&quot;], key_iv_appid[&quot;aes_iv_1&quot;],        key_iv_appid[&quot;des_key_1&quot;], key_iv_appid[&quot;des_iv_1&quot;]    )    print(json.loads(decrypted_data))</code></pre><p>è¿è¡Œç»“æœï¼ŒæˆåŠŸè¯·æ±‚å¹¶è§£å¯†è¿”å›å€¼ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/f6243a66a4ddcf72bb77b28bb94bc49d.png#pic_center" alt="27.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å£°æ˜&quot;&gt;&lt;a href=&quot;#å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;å£°æ˜&quot;&gt;&lt;/a&gt;å£°æ˜&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼ŒæŠ“åŒ…å†…å®¹ã€æ•æ„Ÿç½‘å€ã€æ•°æ®æ¥å£å‡å·²åšè„±æ•å¤„ç†ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœ</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Loguruï¼šPython æ—¥å¿—ç»ˆæè§£å†³æ–¹æ¡ˆ</title>
    <link href="https://www.itbob.cn/article/042/"/>
    <id>https://www.itbob.cn/article/042/</id>
    <published>2021-11-04T07:48:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ—¥å¿—çš„é‡è¦æ€§"><a href="#æ—¥å¿—çš„é‡è¦æ€§" class="headerlink" title="æ—¥å¿—çš„é‡è¦æ€§"></a>æ—¥å¿—çš„é‡è¦æ€§</h2><p>æ—¥å¿—çš„ä½œç”¨éå¸¸é‡è¦ï¼Œæ—¥å¿—å¯ä»¥è®°å½•ç”¨æˆ·çš„æ“ä½œã€ç¨‹åºçš„å¼‚å¸¸ï¼Œè¿˜å¯ä»¥ä¸ºæ•°æ®åˆ†ææä¾›ä¾æ®ï¼Œæ—¥å¿—çš„å­˜åœ¨æ„ä¹‰å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­è®°å½•é”™è¯¯ï¼Œæ–¹ä¾¿ç»´æŠ¤å’Œè°ƒè¯•ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½å‡ºé”™çš„åœ°æ–¹ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬ã€‚æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“ï¼Œä¸æ˜¯ä¸ºäº†è®°å½•æ—¥å¿—è€Œè®°å½•æ—¥å¿—ï¼Œæ—¥å¿—ä¹Ÿä¸æ˜¯éšæ„è®°çš„ã€‚è¦å®ç°èƒ½å¤Ÿåªé€šè¿‡æ—¥å¿—æ–‡ä»¶è¿˜åŸæ•´ä¸ªç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œè¾¾åˆ°èƒ½é€æ˜åœ°çœ‹åˆ°ç¨‹åºé‡Œæ‰§è¡Œæƒ…å†µï¼Œæ¯ä¸ªçº¿ç¨‹ã€æ¯ä¸ªè¿‡ç¨‹åˆ°åº•æ‰§è¡Œåˆ°å“ªçš„ç›®çš„ã€‚æ—¥å¿—å°±åƒé£æœºçš„é»‘åŒ£å­ä¸€æ ·ï¼Œåº”å½“èƒ½å¤Ÿå¤åŸå¼‚å¸¸çš„æ•´ä¸ªç°åœºä¹ƒè‡³ç»†èŠ‚ï¼</p><h2 id="å¸¸è§æ—¥å¿—è®°å½•æ–¹å¼"><a href="#å¸¸è§æ—¥å¿—è®°å½•æ–¹å¼" class="headerlink" title="å¸¸è§æ—¥å¿—è®°å½•æ–¹å¼"></a>å¸¸è§æ—¥å¿—è®°å½•æ–¹å¼</h2><h3 id="ä¸€ã€print"><a href="#ä¸€ã€print" class="headerlink" title="ä¸€ã€print()"></a>ä¸€ã€print()</h3><p>æœ€å¸¸è§çš„æ˜¯æŠŠè¾“å‡ºå‡½æ•° <code>print()</code> å½“ä½œæ—¥å¿—è®°å½•çš„æ–¹å¼ï¼Œç›´æ¥æ‰“å°å„ç§æç¤ºä¿¡æ¯ï¼Œå¸¸è§äºä¸ªäººç»ƒä¹ é¡¹ç›®é‡Œï¼Œé€šå¸¸æ˜¯æ‡’å¾—å•ç‹¬é…ç½®æ—¥å¿—ï¼Œè€Œä¸”é¡¹ç›®å¤ªå°ä¸éœ€è¦æ—¥å¿—ä¿¡æ¯ï¼Œä¸éœ€è¦ä¸Šçº¿ï¼Œä¸éœ€è¦æŒç»­è¿è¡Œï¼Œå®Œæ•´çš„é¡¹ç›®ä¸æ¨èç›´æ¥æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼Œç°å®ä¸­ä¹Ÿå‡ ä¹æ²¡æœ‰äººè¿™ä¹ˆåšã€‚</p><h3 id="äºŒã€è‡ªå†™æ¨¡æ¿"><a href="#äºŒã€è‡ªå†™æ¨¡æ¿" class="headerlink" title="äºŒã€è‡ªå†™æ¨¡æ¿"></a>äºŒã€è‡ªå†™æ¨¡æ¿</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨ä¸å°‘å°é¡¹ç›®é‡Œé¢çœ‹åˆ°ä½œè€…è‡ªå·±å†™äº†ä¸€ä¸ªæ—¥å¿—æ¨¡æ¿ï¼Œé€šå¸¸åˆ©ç”¨ <code>print()</code> æˆ–è€… <code>sys.stdout</code> ç¨å¾®å°è£…ä¸€ä¸‹å³å¯å®ç°ç®€å•çš„æ—¥å¿—è¾“å‡ºï¼Œè¿™é‡Œçš„ <code>sys.stdout</code> æ˜¯ Python ä¸­çš„æ ‡å‡†è¾“å‡ºæµï¼Œ<code>print()</code> å‡½æ•°æ˜¯å¯¹ <code>sys.stdout</code> çš„é«˜çº§å°è£…ï¼Œå½“æˆ‘ä»¬åœ¨ Python ä¸­æ‰“å°å¯¹è±¡è°ƒç”¨ <code>print(obj)</code> æ—¶å€™ï¼Œäº‹å®ä¸Šæ˜¯è°ƒç”¨äº† <code>sys.stdout.write(obj+&#39;\n&#39;)</code>ï¼Œ<code>print()</code> å°†å†…å®¹æ‰“å°åˆ°äº†æ§åˆ¶å°ï¼Œç„¶åè¿½åŠ äº†ä¸€ä¸ªæ¢è¡Œç¬¦ <code>\n</code>ã€‚</p><p>è‡ªå†™æ—¥å¿—æ¨¡æ¿é€‚åˆæ¯”è¾ƒå°çš„é¡¹ç›®ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å–œå¥½ç¼–å†™æ¨¡æ¿ï¼Œä¸éœ€è¦å¤ªå¤šå¤æ‚é…ç½®ï¼Œæ–¹ä¾¿å¿«æ·ï¼Œä½†æ˜¯è¿™ç§è®°å½•æ—¥å¿—çš„æ–¹å¼å¹¶ä¸æ˜¯å¾ˆè§„èŒƒï¼Œæœ‰å¯èƒ½ä½ è‡ªå·±è§‰å¾—é˜…è¯»ä½“éªŒä¸é”™ï¼Œä½†æ˜¯åˆ«äººåœ¨æ¥è§¦ä½ çš„é¡¹ç›®çš„æ—¶å€™å¾€å¾€éœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´å»å­¦ä¹ æ—¥å¿—çš„é€»è¾‘ã€æ ¼å¼ã€è¾“å‡ºæ–¹å¼ç­‰ï¼Œæ¯”è¾ƒå¤§çš„é¡¹ç›®åŒæ ·ä¸æ¨èè¿™ç§æ–¹æ³•ã€‚</p><p>ä¸€ä¸ªç®€å•çš„è‡ªå†™æ—¥å¿—æ¨¡æ¿ä¸¾ä¾‹ï¼š</p><p>æ—¥å¿—æ¨¡æ¿ log.pyï¼š</p><pre><code class="python">import sysimport tracebackimport datetimedef getnowtime():    return datetime.datetime.now().strftime(&quot;%Y-%m-%d %H:%M:%S&quot;)def _log(content, level, *args):    sys.stdout.write(&quot;%s - %s - %s\n&quot; % (getnowtime(), level, content))    for arg in args:        sys.stdout.write(&quot;%s\n&quot; % arg)def debug(content, *args):    _log(content, &#39;DEBUG&#39;, *args)def info(content, *args):    _log(content, &#39;INFO&#39;, *args)def warn(content, *args):    _log(content, &#39;WARN&#39;, *args)def error(content, *args):    _log(content, &#39;ERROR&#39;, *args)def exception(content):    sys.stdout.write(&quot;%s - %s\n&quot; % (getnowtime(), content))    traceback.print_exc(file=sys.stdout)</code></pre><p>è°ƒç”¨æ—¥å¿—æ¨¡å—ï¼š</p><pre><code class="python">import loglog.info(&quot;This is log info!&quot;)log.warn(&quot;This is log warn!&quot;)log.error(&quot;This is log error!&quot;)log.debug(&quot;This is log debug!&quot;)people_info = &#123;&quot;name&quot;: &quot;Bob&quot;, &quot;age&quot;: 20&#125;try:    gender = people_info[&quot;gender&quot;]except Exception as error:    log.exception(error)</code></pre><p>æ—¥å¿—è¾“å‡ºï¼š</p><pre><code class="python">2021-10-19 09:50:58 - INFO - This is log info!2021-10-19 09:50:58 - WARN - This is log warn!2021-10-19 09:50:58 - ERROR - This is log error!2021-10-19 09:50:58 - DEBUG - This is log debug!2021-10-19 09:50:58 - &#39;gender&#39;Traceback (most recent call last):  File &quot;D:/python3Project/test.py&quot;, line 18, in &lt;module&gt;    gender = people_info[&quot;gender&quot;]KeyError: &#39;gender&#39;</code></pre><h3 id="ä¸‰ã€Logging"><a href="#ä¸‰ã€Logging" class="headerlink" title="ä¸‰ã€Logging"></a>ä¸‰ã€Logging</h3><p>åœ¨ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ä¸­ï¼Œå¤§å¤šæ•°äººéƒ½ä¼šå¼•å…¥ä¸“é—¨çš„æ—¥å¿—è®°å½•åº“ï¼Œè€Œ Python è‡ªå¸¦çš„æ ‡å‡†åº“ logging å°±æ˜¯ä¸“é—¨ä¸ºæ—¥å¿—è®°å½•è€Œç”Ÿçš„ï¼Œlogging æ¨¡å—å®šä¹‰çš„å‡½æ•°å’Œç±»ä¸ºåº”ç”¨ç¨‹åºå’Œåº“çš„å¼€å‘å®ç°äº†ä¸€ä¸ªçµæ´»çš„äº‹ä»¶æ—¥å¿—ç³»ç»Ÿã€‚ç”±æ ‡å‡†åº“æ¨¡å—æä¾›æ—¥å¿—è®°å½• API çš„å…³é”®å¥½å¤„æ˜¯æ‰€æœ‰ Python æ¨¡å—éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¥å¿—è®°å½•åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œä½ çš„åº”ç”¨æ—¥å¿—å¯ä»¥å°†ä½ è‡ªå·±çš„æ—¥å¿—ä¿¡æ¯ä¸æ¥è‡ªç¬¬ä¸‰æ–¹æ¨¡å—çš„ä¿¡æ¯æ•´åˆèµ·æ¥ã€‚</p><p>logging æ¨¡å—è™½ç„¶å¼ºå¤§ï¼Œä½†æ˜¯å…¶é…ç½®ä¹Ÿæ˜¯æ¯”è¾ƒç¹ççš„ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­é€šå¸¸éœ€è¦å•ç‹¬åˆå§‹åŒ–æ—¥å¿—ã€é…ç½®æ—¥å¿—æ ¼å¼ç­‰ç­‰ï¼Œæˆ‘åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­é€šå¸¸éƒ½ä¼šå¯¹ logging åšå¦‚ä¸‹çš„å°è£…å†™æ³•ï¼Œä½¿æ—¥å¿—å¯ä»¥æŒ‰å¤©ä¿å­˜ï¼Œä¿ç•™15å¤©çš„æ—¥å¿—ï¼Œå¯ä»¥é…ç½®æ˜¯å¦è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="python"># å®ç°æŒ‰å¤©åˆ†å‰²ä¿ç•™æ—¥å¿—import osimport sysimport loggingfrom logging import handlersPARENT_DIR = os.path.split(os.path.realpath(__file__))[0]  # çˆ¶ç›®å½•LOGGING_DIR = os.path.join(PARENT_DIR, &quot;log&quot;)              # æ—¥å¿—ç›®å½•LOGGING_NAME = &quot;test&quot;                                      # æ—¥å¿—æ–‡ä»¶åLOGGING_TO_FILE = True                                     # æ—¥å¿—è¾“å‡ºæ–‡ä»¶LOGGING_TO_CONSOLE = True                                  # æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°LOGGING_WHEN = &#39;D&#39;                                         # æ—¥å¿—æ–‡ä»¶åˆ‡åˆ†ç»´åº¦LOGGING_INTERVAL = 1                                       # é—´éš”å°‘ä¸ª when åï¼Œè‡ªåŠ¨é‡å»ºæ–‡ä»¶LOGGING_BACKUP_COUNT = 15                                  # æ—¥å¿—ä¿ç•™ä¸ªæ•°ï¼Œ0 ä¿ç•™æ‰€æœ‰æ—¥å¿—LOGGING_LEVEL = logging.DEBUG                              # æ—¥å¿—ç­‰çº§LOGGING_suffix = &quot;%Y.%m.%d.log&quot;                            # æ—§æ—¥å¿—æ–‡ä»¶å# æ—¥å¿—è¾“å‡ºæ ¼å¼LOGGING_FORMATTER = &quot;%(levelname)s - %(asctime)s - process:%(process)d - %(filename)s - %(name)s - line:%(lineno)d - %(module)s - %(message)s&quot;def logging_init():    if not os.path.exists(LOGGING_DIR):        os.makedirs(LOGGING_DIR)    logger = logging.getLogger()    logger.setLevel(LOGGING_LEVEL)    formatter = logging.Formatter(LOGGING_FORMATTER)    if LOGGING_TO_FILE:        file_handler = handlers.TimedRotatingFileHandler(filename=os.path.join(LOGGING_DIR, LOGGING_NAME), when=LOGGING_WHEN, interval=LOGGING_INTERVAL, backupCount=LOGGING_BACKUP_COUNT)        file_handler.suffix = LOGGING_suffix        file_handler.setFormatter(formatter)        logger.addHandler(file_handler)    if LOGGING_TO_CONSOLE:        stream_handler = logging.StreamHandler(sys.stderr)        stream_handler.setFormatter(formatter)        logger.addHandler(stream_handler)def logging_test():    logging.info(&quot;This is log info!&quot;)    logging.warning(&quot;This is log warn!&quot;)    logging.error(&quot;This is log error!&quot;)    logging.debug(&quot;This is log debug!&quot;)    people_info = &#123;&quot;name&quot;: &quot;Bob&quot;, &quot;age&quot;: 20&#125;    try:        gender = people_info[&quot;gender&quot;]    except Exception as error:        logging.exception(error)if __name__ == &quot;__main__&quot;:    logging_init()    logging_test()</code></pre><p>è¾“å‡ºæ—¥å¿—ï¼š</p><pre><code class="bash">INFO - 2021-10-19 11:28:10,103 - process:15144 - test.py - root - line:52 - test - This is log info!WARNING - 2021-10-19 11:28:10,105 - process:15144 - test.py - root - line:53 - test - This is log warn!ERROR - 2021-10-19 11:28:10,105 - process:15144 - test.py - root - line:54 - test - This is log error!DEBUG - 2021-10-19 11:28:10,105 - process:15144 - test.py - root - line:55 - test - This is log debug!ERROR - 2021-10-19 11:28:10,105 - process:15144 - test.py - root - line:61 - test - &#39;gender&#39;Traceback (most recent call last):  File &quot;D:/python3Project/test.py&quot;, line 59, in logging_test    gender = people_info[&quot;gender&quot;]KeyError: &#39;gender&#39;</code></pre><p>å®ƒåœ¨æ§åˆ¶å°ä¸­æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/906ed37334702098905b7cff083f2c6e.png" alt="02.png"></p><p>å½“ç„¶ï¼Œå¦‚æœä½ ä¸éœ€è¦å¾ˆå¤æ‚çš„åŠŸèƒ½ï¼Œå¸Œæœ›ç®€æ´ä¸€ç‚¹ï¼Œä»…ä»…éœ€è¦åœ¨æ§åˆ¶å°è¾“å‡ºä¸€ä¸‹æ—¥å¿—çš„è¯ï¼Œä¹Ÿå¯ä»¥åªè¿›è¡Œç®€å•çš„é…ç½®ï¼š</p><pre><code class="python">import logginglogging.basicConfig(level=logging.DEBUG, format=&#39;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#39;)logging.getLogger()</code></pre><h2 id="æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼šLoguru"><a href="#æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼šLoguru" class="headerlink" title="æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼šLoguru"></a>æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼šLoguru</h2><p>å¯¹äº logging æ¨¡å—ï¼Œå³ä¾¿æ˜¯ç®€å•çš„ä½¿ç”¨ï¼Œä¹Ÿéœ€è¦è‡ªå·±å®šä¹‰æ ¼å¼ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ªæ›´åŠ ä¼˜é›…ã€é«˜æ•ˆã€ç®€æ´çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼šloguruï¼Œå®˜æ–¹çš„ä»‹ç»æ˜¯ï¼šLoguru is a library which aims to bring enjoyable logging in Python. Loguru æ—¨åœ¨ä¸º Python å¸¦æ¥æ„‰å¿«çš„æ—¥å¿—è®°å½•ã€‚è¿™é‡Œå¼•ç”¨å®˜æ–¹çš„ä¸€ä¸ª GIF æ¥å¿«é€Ÿæ¼”ç¤ºå…¶åŠŸèƒ½ï¼š</p><p><img src="https://img-blog.csdnimg.cn/d2cfb68d514240209779ae9dac5a42cb.gif#pic_center" alt="02.gif"></p><hr><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>Loguru ä»…æ”¯æŒ Python 3.5 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œä½¿ç”¨ pip å®‰è£…å³å¯ï¼š</p><pre><code class="bash">pip install loguru</code></pre><hr><h3 id="å¼€ç®±å³ç”¨"><a href="#å¼€ç®±å³ç”¨" class="headerlink" title="å¼€ç®±å³ç”¨"></a>å¼€ç®±å³ç”¨</h3><p>Loguru çš„ä¸»è¦æ¦‚å¿µæ˜¯åªæœ‰ä¸€ä¸ªï¼šlogger</p><pre><code class="python">from loguru import loggerlogger.info(&quot;This is log info!&quot;)logger.warning(&quot;This is log warn!&quot;)logger.error(&quot;This is log error!&quot;)logger.debug(&quot;This is log debug!&quot;)</code></pre><p>æ§åˆ¶å°è¾“å‡ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/345214edaba24e988379399393ac0a7f.png" alt="03.png"></p><p>å¯ä»¥çœ‹åˆ°ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼ŒLoguru ä¼šæå‰é…ç½®ä¸€äº›åŸºç¡€ä¿¡æ¯ï¼Œè‡ªåŠ¨è¾“å‡ºæ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€æ¨¡å—åã€è¡Œå·ç­‰ä¿¡æ¯ï¼Œè€Œä¸”æ ¹æ®ç­‰çº§çš„ä¸åŒï¼Œè¿˜è‡ªåŠ¨è®¾ç½®äº†ä¸åŒçš„é¢œè‰²ï¼Œæ–¹ä¾¿è§‚å¯Ÿï¼ŒçœŸæ­£åšåˆ°äº†å¼€ç®±å³ç”¨ï¼</p><hr><h3 id="add-remove"><a href="#add-remove" class="headerlink" title="add() / remove()"></a>add() / remove()</h3><p>å¦‚æœæƒ³è‡ªå®šä¹‰æ—¥å¿—çº§åˆ«ï¼Œè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ï¼Œä¿å­˜æ—¥å¿—åˆ°æ–‡ä»¶è¯¥æ€ä¹ˆåŠï¼Ÿä¸ logging æ¨¡å—ä¸åŒï¼Œä¸éœ€è¦ Handlerï¼Œä¸éœ€è¦ Formatterï¼Œåªéœ€è¦ä¸€ä¸ª <code>add()</code> å‡½æ•°å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³æŠŠæ—¥å¿—å‚¨å­˜åˆ°æ–‡ä»¶ï¼š</p><pre><code class="python">from loguru import loggerlogger.add(&#39;test.log&#39;)logger.debug(&#39;this is a debug&#39;)</code></pre><p>æˆ‘ä»¬ä¸éœ€è¦åƒ logging æ¨¡å—ä¸€æ ·å†å£°æ˜ä¸€ä¸ª FileHandler äº†ï¼Œå°±ä¸€è¡Œ <code>add()</code> è¯­å¥æå®šï¼Œè¿è¡Œä¹‹åä¼šå‘ç°ç›®å½•ä¸‹ test.log é‡Œé¢åŒæ ·å‡ºç°äº†åˆšåˆšæ§åˆ¶å°è¾“å‡ºçš„ debug ä¿¡æ¯ã€‚ </p><p>ä¸ <code>add()</code> è¯­å¥ç›¸åï¼Œ<code>remove()</code> è¯­å¥å¯ä»¥åˆ é™¤æˆ‘ä»¬æ·»åŠ çš„é…ç½®ï¼š</p><pre><code class="python">from loguru import loggerlog_file = logger.add(&#39;test.log&#39;)logger.debug(&#39;This is log debug!&#39;)logger.remove(log_file)logger.debug(&#39;This is another log debug!&#39;)</code></pre><p>æ­¤æ—¶æ§åˆ¶å°ä¼šè¾“å‡ºä¸¤æ¡ debug ä¿¡æ¯ï¼š</p><pre><code class="bash">2021-10-19 13:53:36.610 | DEBUG    | __main__:&lt;module&gt;:86 - This is log debug!2021-10-19 13:53:36.611 | DEBUG    | __main__:&lt;module&gt;:88 - This is another log debug!</code></pre><p>è€Œ test.log æ—¥å¿—æ–‡ä»¶é‡Œé¢åªæœ‰ä¸€æ¡ debug  ä¿¡æ¯ï¼ŒåŸå› å°±åœ¨äºæˆ‘ä»¬åœ¨ç¬¬äºŒæ¡ debug è¯­å¥ä¹‹å‰ä½¿ç”¨äº† <code>remove()</code> è¯­å¥ã€‚</p><hr><h3 id="å®Œæ•´å‚æ•°"><a href="#å®Œæ•´å‚æ•°" class="headerlink" title="å®Œæ•´å‚æ•°"></a>å®Œæ•´å‚æ•°</h3><p>Loguru å¯¹è¾“å‡ºåˆ°æ–‡ä»¶çš„é…ç½®æœ‰éå¸¸å¼ºå¤§çš„æ”¯æŒï¼Œæ¯”å¦‚æ”¯æŒè¾“å‡ºåˆ°å¤šä¸ªæ–‡ä»¶ï¼Œåˆ†çº§åˆ«åˆ†åˆ«è¾“å‡ºï¼Œè¿‡å¤§åˆ›å»ºæ–°æ–‡ä»¶ï¼Œè¿‡ä¹…è‡ªåŠ¨åˆ é™¤ç­‰ç­‰ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸€ä¸‹ <code>add()</code> è¯­å¥çš„è¯¦ç»†å‚æ•°ï¼š</p><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">add(sink, *, level=&#39;DEBUG&#39;, format=&#39;&lt;green&gt;&#123;time:YYYY-MM-DD HH:mm:ss.SSS&#125;&lt;/green&gt; | &lt;level&gt;&#123;level: &lt;8&#125;&lt;/level&gt; | &lt;cyan&gt;&#123;name&#125;&lt;/cyan&gt;:&lt;cyan&gt;&#123;function&#125;&lt;/cyan&gt;:&lt;cyan&gt;&#123;line&#125;&lt;/cyan&gt; - &lt;level&gt;&#123;message&#125;&lt;/level&gt;&#39;, filter=None, colorize=None, serialize=False, backtrace=True, diagnose=True, enqueue=False, catch=True, **kwargs)</code></pre><p><strong>åŸºæœ¬å‚æ•°é‡Šä¹‰ï¼š</strong></p><ul><li><strong>sink</strong>ï¼šå¯ä»¥æ˜¯ä¸€ä¸ª file å¯¹è±¡ï¼Œä¾‹å¦‚ <code>sys.stderr</code> æˆ– <code>open(&#39;file.log&#39;, &#39;w&#39;)</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>str</code> å­—ç¬¦ä¸²æˆ–è€… <code>pathlib.Path</code> å¯¹è±¡ï¼Œå³æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è‡ªè¡Œå®šä¹‰è¾“å‡ºå®ç°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª logging æ¨¡å—çš„ Handlerï¼Œæ¯”å¦‚ FileHandlerã€StreamHandler ç­‰ï¼Œè¿˜å¯ä»¥æ˜¯ <a href="https://docs.python.org/3/glossary.html#term-coroutine-function">coroutine function</a>ï¼Œå³ä¸€ä¸ªè¿”å›åç¨‹å¯¹è±¡çš„å‡½æ•°ç­‰ã€‚</li><li><strong>level</strong>ï¼šæ—¥å¿—è¾“å‡ºå’Œä¿å­˜çº§åˆ«ã€‚</li><li><strong>format</strong>ï¼šæ—¥å¿—æ ¼å¼æ¨¡æ¿ã€‚</li><li><strong>filter</strong>ï¼šä¸€ä¸ªå¯é€‰çš„æŒ‡ä»¤ï¼Œç”¨äºå†³å®šæ¯ä¸ªè®°å½•çš„æ¶ˆæ¯æ˜¯å¦åº”è¯¥å‘é€åˆ° sinkã€‚</li><li><strong>colorize</strong>ï¼šæ ¼å¼åŒ–æ¶ˆæ¯ä¸­åŒ…å«çš„é¢œè‰²æ ‡è®°æ˜¯å¦åº”è½¬æ¢ä¸ºç”¨äºç»ˆç«¯ç€è‰²çš„ ansi ä»£ç ï¼Œæˆ–ä»¥å…¶ä»–æ–¹å¼å‰¥ç¦»ã€‚ å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ ¹æ® sink æ˜¯å¦ä¸º ttyï¼ˆç”µä¼ æ‰“å­—æœºç¼©å†™ï¼‰ è‡ªåŠ¨åšå‡ºé€‰æ‹©ã€‚</li><li><strong>serialize</strong>ï¼šåœ¨å‘é€åˆ° sink ä¹‹å‰ï¼Œæ˜¯å¦åº”é¦–å…ˆå°†è®°å½•çš„æ¶ˆæ¯è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚</li><li><strong>backtrace</strong>ï¼šæ ¼å¼åŒ–çš„å¼‚å¸¸è·Ÿè¸ªæ˜¯å¦åº”è¯¥å‘ä¸Šæ‰©å±•ï¼Œè¶…å‡ºæ•è·ç‚¹ï¼Œä»¥æ˜¾ç¤ºç”Ÿæˆé”™è¯¯çš„å®Œæ•´å †æ ˆè·Ÿè¸ªã€‚</li><li><strong>diagnose</strong>ï¼šå¼‚å¸¸è·Ÿè¸ªæ˜¯å¦åº”æ˜¾ç¤ºå˜é‡å€¼ä»¥ç®€åŒ–è°ƒè¯•ã€‚å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½® <code>False</code>ï¼Œé¿å…æ³„éœ²æ•æ„Ÿæ•°æ®ã€‚</li><li><strong>enqueue</strong>ï¼šè¦è®°å½•çš„æ¶ˆæ¯æ˜¯å¦åº”åœ¨åˆ°è¾¾ sink ä¹‹å‰é¦–å…ˆé€šè¿‡å¤šè¿›ç¨‹å®‰å…¨é˜Ÿåˆ—ï¼Œè¿™åœ¨é€šè¿‡å¤šä¸ªè¿›ç¨‹è®°å½•åˆ°æ–‡ä»¶æ—¶å¾ˆæœ‰ç”¨ï¼Œè¿™æ ·åšçš„å¥½å¤„è¿˜åœ¨äºä½¿æ—¥å¿—è®°å½•è°ƒç”¨æ˜¯éé˜»å¡çš„ã€‚</li><li><strong>catch</strong>ï¼šæ˜¯å¦åº”è‡ªåŠ¨æ•è· sink å¤„ç†æ—¥å¿—æ¶ˆæ¯æ—¶å‘ç”Ÿçš„é”™è¯¯ï¼Œå¦‚æœä¸º <code>True</code>ï¼Œåˆ™ä¼šåœ¨ <code>sys.stderr</code> ä¸Šæ˜¾ç¤ºå¼‚å¸¸æ¶ˆæ¯ï¼Œä½†è¯¥å¼‚å¸¸ä¸ä¼šä¼ æ’­åˆ° sinkï¼Œä»è€Œé˜²æ­¢åº”ç”¨ç¨‹åºå´©æºƒã€‚</li><li>*<strong>*kwargs</strong>ï¼šä»…å¯¹é…ç½®åç¨‹æˆ–æ–‡ä»¶æ¥æ”¶å™¨æœ‰æ•ˆçš„é™„åŠ å‚æ•°ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</li></ul><p><strong>å½“ä¸”ä»…å½“ sink æ˜¯åç¨‹å‡½æ•°æ—¶ï¼Œä»¥ä¸‹å‚æ•°é€‚ç”¨ï¼š</strong></p><ul><li><strong>loop</strong>ï¼šå°†åœ¨å…¶ä¸­è°ƒåº¦å’Œæ‰§è¡Œå¼‚æ­¥æ—¥å¿—è®°å½•ä»»åŠ¡çš„äº‹ä»¶å¾ªç¯ã€‚å¦‚æœä¸º <code>None</code>ï¼Œå°†ä½¿ç”¨ <code>asyncio.get_event_loop()</code> è¿”å›çš„å¾ªç¯ã€‚</li></ul><p><strong>å½“ä¸”ä»…å½“ sink æ˜¯æ–‡ä»¶è·¯å¾„æ—¶ï¼Œä»¥ä¸‹å‚æ•°é€‚ç”¨ï¼š</strong></p><ul><li><strong>rotation</strong>ï¼šä¸€ç§æ¡ä»¶ï¼ŒæŒ‡ç¤ºä½•æ—¶åº”å…³é—­å½“å‰è®°å½•çš„æ–‡ä»¶å¹¶å¼€å§‹æ–°çš„æ–‡ä»¶ã€‚</li><li>**retention **ï¼šè¿‡æ»¤æ—§æ–‡ä»¶çš„æŒ‡ä»¤ï¼Œåœ¨å¾ªç¯æˆ–ç¨‹åºç»“æŸæœŸé—´ä¼šåˆ é™¤æ—§æ–‡ä»¶ã€‚</li><li><strong>compression</strong>ï¼šæ—¥å¿—æ–‡ä»¶åœ¨å…³é—­æ—¶åº”è½¬æ¢ä¸ºçš„å‹ç¼©æˆ–å­˜æ¡£æ ¼å¼ã€‚</li><li><strong>delay</strong>ï¼šæ˜¯åœ¨é…ç½® sink åç«‹å³åˆ›å»ºæ–‡ä»¶ï¼Œè¿˜æ˜¯å»¶è¿Ÿåˆ°ç¬¬ä¸€æ¡è®°å½•çš„æ¶ˆæ¯æ—¶å†åˆ›å»ºã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li><li><strong>mode</strong>ï¼šå†…ç½® <code>open()</code> å‡½æ•°çš„æ‰“å¼€æ¨¡å¼ï¼Œé»˜è®¤ä¸º <code>a</code>ï¼ˆä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼‰ã€‚</li><li><strong>buffering</strong>ï¼šå†…ç½® <code>open()</code> å‡½æ•°çš„ç¼“å†²ç­–ç•¥ï¼Œé»˜è®¤ä¸º<code>1</code>ï¼ˆè¡Œç¼“å†²æ–‡ä»¶ï¼‰ã€‚</li><li><strong>encoding</strong>ï¼šå†…ç½® <code>open()</code> å‡½æ•°çš„æ–‡ä»¶ç¼–ç ï¼Œå¦‚æœ <code>None</code>ï¼Œåˆ™é»˜è®¤ä¸º <a href="https://docs.python.org/3/library/locale.html#locale.getpreferredencoding"><code>locale.getpreferredencoding()</code></a>ã€‚</li><li>*<strong>*kwargs</strong>ï¼šå…¶ä»–ä¼ é€’ç»™å†…ç½® <code>open()</code> å‡½æ•°çš„å‚æ•°ã€‚</li></ul><p>è¿™ä¹ˆå¤šå‚æ•°å¯ä»¥è§è¯†åˆ° <code>add()</code> å‡½æ•°çš„å¼ºå¤§ä¹‹å¤„ï¼Œä»…ä»…ä¸€ä¸ªå‡½æ•°å°±èƒ½å®ç° logging æ¨¡å—çš„è¯¸å¤šåŠŸèƒ½ï¼Œæ¥ä¸‹æ¥ä»‹ç»å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚</p><hr><h3 id="rotation-æ—¥å¿—æ–‡ä»¶åˆ†éš”"><a href="#rotation-æ—¥å¿—æ–‡ä»¶åˆ†éš”" class="headerlink" title="rotation æ—¥å¿—æ–‡ä»¶åˆ†éš”"></a>rotation æ—¥å¿—æ–‡ä»¶åˆ†éš”</h3><p><code>add()</code> å‡½æ•°çš„ rotation å‚æ•°ï¼Œå¯ä»¥å®ç°æŒ‰ç…§å›ºå®šæ—¶é—´åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯”å¦‚è®¾ç½®æ¯å¤© 0 ç‚¹æ–°åˆ›å»ºä¸€ä¸ª log æ–‡ä»¶ï¼š</p><pre><code class="python">logger.add(&#39;runtime_&#123;time&#125;.log&#39;, rotation=&#39;00:00&#39;)</code></pre><p>è®¾ç½®è¶…è¿‡ 500 MB æ–°åˆ›å»ºä¸€ä¸ª log æ–‡ä»¶ï¼š</p><pre><code class="python">logger.add(&#39;runtime_&#123;time&#125;.log&#39;, rotation=&quot;500 MB&quot;)</code></pre><p>è®¾ç½®æ¯éš”ä¸€ä¸ªå‘¨æ–°åˆ›å»ºä¸€ä¸ª log æ–‡ä»¶ï¼š</p><pre><code class="python">logger.add(&#39;runtime_&#123;time&#125;.log&#39;, rotation=&#39;1 week&#39;)</code></pre><hr><h3 id="retention-æ—¥å¿—ä¿ç•™æ—¶é—´"><a href="#retention-æ—¥å¿—ä¿ç•™æ—¶é—´" class="headerlink" title="retention æ—¥å¿—ä¿ç•™æ—¶é—´"></a>retention æ—¥å¿—ä¿ç•™æ—¶é—´</h3><p><code>add()</code> å‡½æ•°çš„ retention å‚æ•°ï¼Œå¯ä»¥è®¾ç½®æ—¥å¿—çš„æœ€é•¿ä¿ç•™æ—¶é—´ï¼Œæ¯”å¦‚è®¾ç½®æ—¥å¿—æ–‡ä»¶æœ€é•¿ä¿ç•™ 15 å¤©ï¼š</p><pre><code class="python">logger.add(&#39;runtime_&#123;time&#125;.log&#39;, retention=&#39;15 days&#39;)</code></pre><p>è®¾ç½®æ—¥å¿—æ–‡ä»¶æœ€å¤šä¿ç•™ 10 ä¸ªï¼š</p><pre><code class="python">logger.add(&#39;runtime_&#123;time&#125;.log&#39;, retention=10)</code></pre><p>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª <code>datetime.timedelta</code> å¯¹è±¡ï¼Œæ¯”å¦‚è®¾ç½®æ—¥å¿—æ–‡ä»¶æœ€å¤šä¿ç•™ 5 ä¸ªå°æ—¶ï¼š</p><pre><code class="python">import datetimefrom loguru import loggerlogger.add(&#39;runtime_&#123;time&#125;.log&#39;, retention=datetime.timedelta(hours=5))</code></pre><hr><h3 id="compression-æ—¥å¿—å‹ç¼©æ ¼å¼"><a href="#compression-æ—¥å¿—å‹ç¼©æ ¼å¼" class="headerlink" title="compression æ—¥å¿—å‹ç¼©æ ¼å¼"></a>compression æ—¥å¿—å‹ç¼©æ ¼å¼</h3><p><code>add()</code> å‡½æ•°çš„ compression å‚æ•°ï¼Œå¯ä»¥é…ç½®æ—¥å¿—æ–‡ä»¶çš„å‹ç¼©æ ¼å¼ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œæ¯”å¦‚è®¾ç½®ä½¿ç”¨ zip æ–‡ä»¶æ ¼å¼ä¿å­˜ï¼š</p><pre><code class="python">logger.add(&#39;runtime_&#123;time&#125;.log&#39;, compression=&#39;zip&#39;)</code></pre><p>å…¶æ ¼å¼æ”¯æŒï¼š<code>gz</code>ã€<code>bz2</code>ã€<code>xz</code>ã€<code>lzma</code>ã€<code>tar</code>ã€<code>tar.gz</code>ã€<code>tar.bz2</code>ã€<code>tar.xz</code></p><hr><h3 id="å­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#å­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="å­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>å­—ç¬¦ä¸²æ ¼å¼åŒ–</h3><p>Loguru åœ¨è¾“å‡º log çš„æ—¶å€™è¿˜æä¾›äº†éå¸¸å‹å¥½çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–åŠŸèƒ½ï¼Œç›¸å½“äº <code>str.format()</code>ï¼š</p><pre><code class="python">logger.info(&#39;If you are using Python &#123;&#125;, prefer &#123;feature&#125; of course!&#39;, 3.6, feature=&#39;f-strings&#39;)</code></pre><p>è¾“å‡ºï¼š</p><pre><code class="python">2021-10-19 14:59:06.412 | INFO     | __main__:&lt;module&gt;:3 - If you are using Python 3.6, prefer f-strings of course!</code></pre><hr><h3 id="å¼‚å¸¸è¿½æº¯"><a href="#å¼‚å¸¸è¿½æº¯" class="headerlink" title="å¼‚å¸¸è¿½æº¯"></a>å¼‚å¸¸è¿½æº¯</h3><p>åœ¨ Loguru é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒæä¾›çš„è£…é¥°å™¨å°±å¯ä»¥ç›´æ¥è¿›è¡Œå¼‚å¸¸æ•è·ï¼Œè€Œä¸”å¾—åˆ°çš„æ—¥å¿—æ˜¯æ— æ¯”è¯¦ç»†çš„ï¼š</p><pre><code class="python">from loguru import logger@logger.catchdef my_function(x, y, z):    # An error? It&#39;s caught anyway!    return 1 / (x + y + z)my_function(0, 0, 0)</code></pre><p>æ—¥å¿—è¾“å‡ºï¼š</p><pre><code class="python">2021-10-19 15:04:51.675 | ERROR    | __main__:&lt;module&gt;:10 - An error has been caught in function &#39;&lt;module&gt;&#39;, process &#39;MainProcess&#39; (30456), thread &#39;MainThread&#39; (26268):Traceback (most recent call last):&gt; File &quot;D:/python3Project\test.py&quot;, line 10, in &lt;module&gt;    my_function(0, 0, 0)    â”” &lt;function my_function at 0x014CDFA8&gt;  File &quot;D:/python3Project\test.py&quot;, line 7, in my_function    return 1 / (x + y + z)                â”‚   â”‚   â”” 0                â”‚   â”” 0                â”” 0ZeroDivisionError: division by zero</code></pre><p>åœ¨æ§åˆ¶å°çš„è¾“å‡ºæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3b7fd75ef2a10a5a0dde917280d9224c.png" alt="04.png"></p><p>ç›¸æ¯” Loggingï¼ŒLoguru æ— è®ºæ˜¯åœ¨é…ç½®æ–¹é¢ã€æ—¥å¿—è¾“å‡ºæ ·å¼è¿˜æ˜¯å¼‚å¸¸è¿½è¸ªï¼Œéƒ½è¿œä¼˜äº Loggingï¼Œä½¿ç”¨ Loguru æ— ç–‘èƒ½æå‡å¼€å‘äººå‘˜æ•ˆç‡ã€‚æœ¬æ–‡ä»…ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œæƒ³è¦è¯¦ç»†äº†è§£å¯å‚è€ƒ <a href="https://loguru.readthedocs.io/">Loguru å®˜æ–¹æ–‡æ¡£</a>æˆ–å…³æ³¨ <a href="https://github.com/Delgan/loguru">Loguru GitHub</a>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ—¥å¿—çš„é‡è¦æ€§&quot;&gt;&lt;a href=&quot;#æ—¥å¿—çš„é‡è¦æ€§&quot; class=&quot;headerlink&quot; title=&quot;æ—¥å¿—çš„é‡è¦æ€§&quot;&gt;&lt;/a&gt;æ—¥å¿—çš„é‡è¦æ€§&lt;/h2&gt;&lt;p&gt;æ—¥å¿—çš„ä½œç”¨éå¸¸é‡è¦ï¼Œæ—¥å¿—å¯ä»¥è®°å½•ç”¨æˆ·çš„æ“ä½œã€ç¨‹åºçš„å¼‚å¸¸ï¼Œè¿˜å¯ä»¥ä¸ºæ•°æ®åˆ†ææä¾›ä¾æ®ï¼Œæ—¥å¿—çš„å­˜åœ¨æ„ä¹‰å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿ</summary>
      
    
    
    
    <category term="Python" scheme="https://www.itbob.cn/categories/Python/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>è®¤è¯† SM1/SM2/SM3/SM4/SM7/SM9/ZUC å›½å¯†ç®—æ³•</title>
    <link href="https://www.itbob.cn/article/041/"/>
    <id>https://www.itbob.cn/article/041/</id>
    <published>2021-11-04T04:39:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a><font color=#B01B15>ç®€ä»‹</font></h2><p>å›½å¯†å³å›½å®¶å¯†ç å±€è®¤å®šçš„å›½äº§åŠ å¯†ç®—æ³•ï¼Œçˆ¬è™«å·¥ç¨‹å¸ˆåœ¨åš JS é€†å‘çš„æ—¶å€™ï¼Œä¼šé‡åˆ°å„ç§å„æ ·çš„åŠ å¯†ç®—æ³•ï¼Œå…¶ä¸­ RSAã€AESã€SHA ç­‰ç®—æ³•æ˜¯æœ€å¸¸è§çš„ï¼Œè¿™äº›ç®—æ³•éƒ½æ˜¯å›½å¤–çš„ï¼Œåœ¨æˆ‘ä»¥å‰çš„æ–‡ç« é‡Œä¹Ÿæœ‰ä»‹ç»ï¼š<a href="https://itrhx.blog.csdn.net/article/details/119250052">ã€Šå²ä¸Šæœ€å…¨æ€»ç»“ï¼çˆ¬è™«å¸¸è§åŠ å¯†è§£å¯†ç®—æ³•ã€‹</a></p><p>äº‹å®ä¸Šä» 2010 å¹´å¼€å§‹ï¼Œæˆ‘å›½å›½å®¶å¯†ç ç®¡ç†å±€å°±å·²ç»å¼€å§‹é™†ç»­å‘å¸ƒäº†ä¸€ç³»åˆ—å›½äº§åŠ å¯†ç®—æ³•ï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬ SM1ã€SM2ã€SM3 ã€SM4ã€SM7ã€SM9ã€ZUCï¼ˆç¥–å†²ä¹‹åŠ å¯†ç®—æ³•ï¼‰ç­‰ï¼ŒSM ä»£è¡¨å•†å¯†ï¼Œå³å•†ä¸šå¯†ç ï¼Œæ˜¯æŒ‡ç”¨äºå•†ä¸šçš„ã€ä¸æ¶‰åŠå›½å®¶ç§˜å¯†çš„å¯†ç æŠ€æœ¯ã€‚<strong>SM1 å’Œ SM7 çš„ç®—æ³•ä¸å…¬å¼€</strong>ï¼Œå…¶ä½™ç®—æ³•éƒ½å·²æˆä¸º ISO/IEC å›½é™…æ ‡å‡†ã€‚</p><p>åœ¨è¿™äº›å›½äº§åŠ å¯†ç®—æ³•ä¸­ï¼Œ**<font color=#B01B15>SM2ã€SM3ã€SM4 ä¸‰ç§åŠ å¯†ç®—æ³•æ˜¯æ¯”è¾ƒå¸¸è§çš„</font>**ï¼Œåœ¨çˆ¬å–éƒ¨åˆ† gov ç½‘ç«™æ—¶ï¼Œä¹Ÿå¯èƒ½ä¼šé‡åˆ°è¿™äº›ç®—æ³•ï¼Œæ‰€ä»¥ä½œä¸ºçˆ¬è™«å·¥ç¨‹å¸ˆæ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹è¿™äº›ç®—æ³•çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæŸ gov ç½‘ç«™å°±ä½¿ç”¨äº† SM2 å’Œ SM4 åŠ å¯†ç®—æ³•ï¼š</p><p><img src="https://img-blog.csdnimg.cn/758cb19d1fbc4ec5ad7cc33781c2f34e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAVFJIWCDigKIg6bKN5YuD,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"></p><hr><h2 id="ç®—æ³•æ¦‚è¿°"><a href="#ç®—æ³•æ¦‚è¿°" class="headerlink" title="ç®—æ³•æ¦‚è¿°"></a><font color=#B01B15>ç®—æ³•æ¦‚è¿°</font></h2><table><thead><tr><th align="center">ç®—æ³•åç§°</th><th align="center">ç®—æ³•ç±»åˆ«</th><th align="center">åº”ç”¨é¢†åŸŸ</th><th align="center">ç‰¹ç‚¹</th></tr></thead><tbody><tr><td align="center">SM1</td><td align="center">å¯¹ç§°ï¼ˆåˆ†ç»„ï¼‰åŠ å¯†ç®—æ³•</td><td align="center">èŠ¯ç‰‡</td><td align="center">åˆ†ç»„é•¿åº¦ã€å¯†é’¥é•¿åº¦å‡ä¸º 128 æ¯”ç‰¹</td></tr><tr><td align="center">SM2</td><td align="center">éå¯¹ç§°ï¼ˆåŸºäºæ¤­åœ†æ›²çº¿ ECCï¼‰åŠ å¯†ç®—æ³•</td><td align="center">æ•°æ®åŠ å¯†</td><td align="center">ECC æ¤­åœ†æ›²çº¿å¯†ç æœºåˆ¶ 256 ä½ï¼Œç›¸æ¯” RSA å¤„ç†é€Ÿåº¦å¿«ï¼Œæ¶ˆè€—æ›´å°‘</td></tr><tr><td align="center">SM3</td><td align="center">æ•£åˆ—ï¼ˆhashï¼‰å‡½æ•°ç®—æ³•</td><td align="center">å®Œæ•´æ€§æ ¡éªŒ</td><td align="center">å®‰å…¨æ€§åŠæ•ˆç‡ä¸ SHA-256 ç›¸å½“ï¼Œå‹ç¼©å‡½æ•°æ›´å¤æ‚</td></tr><tr><td align="center">SM4</td><td align="center">å¯¹ç§°ï¼ˆåˆ†ç»„ï¼‰åŠ å¯†ç®—æ³•</td><td align="center">æ•°æ®åŠ å¯†å’Œå±€åŸŸç½‘äº§å“</td><td align="center">åˆ†ç»„é•¿åº¦ã€å¯†é’¥é•¿åº¦å‡ä¸º 128 æ¯”ç‰¹ï¼Œè®¡ç®—è½®æ•°å¤š</td></tr><tr><td align="center">SM7</td><td align="center">å¯¹ç§°ï¼ˆåˆ†ç»„ï¼‰åŠ å¯†ç®—æ³•</td><td align="center">éæ¥è§¦å¼ IC å¡</td><td align="center">åˆ†ç»„é•¿åº¦ã€å¯†é’¥é•¿åº¦å‡ä¸º 128 æ¯”ç‰¹</td></tr><tr><td align="center">SM9</td><td align="center">æ ‡è¯†åŠ å¯†ç®—æ³•ï¼ˆIBEï¼‰</td><td align="center">ç«¯å¯¹ç«¯ç¦»çº¿å®‰å…¨é€šè®¯</td><td align="center">åŠ å¯†å¼ºåº¦ç­‰åŒäº 3072 ä½å¯†é’¥çš„ RSA åŠ å¯†ç®—æ³•</td></tr><tr><td align="center">ZUC</td><td align="center">å¯¹ç§°ï¼ˆåºåˆ—ï¼‰åŠ å¯†ç®—æ³•</td><td align="center">ç§»åŠ¨é€šä¿¡ 4G ç½‘ç»œ</td><td align="center">æµå¯†ç </td></tr></tbody></table><hr><h2 id="ç®—æ³•è¯¦è§£"><a href="#ç®—æ³•è¯¦è§£" class="headerlink" title="ç®—æ³•è¯¦è§£"></a><font color=#B01B15>ç®—æ³•è¯¦è§£</font></h2><h3 id="SM1-åˆ†ç»„åŠ å¯†ç®—æ³•"><a href="#SM1-åˆ†ç»„åŠ å¯†ç®—æ³•" class="headerlink" title="SM1 åˆ†ç»„åŠ å¯†ç®—æ³•"></a>SM1 åˆ†ç»„åŠ å¯†ç®—æ³•</h3><p>SM1 ä¸ºåˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œå¯¹ç§°åŠ å¯†ï¼Œåˆ†ç»„é•¿åº¦å’Œå¯†é’¥é•¿åº¦éƒ½ä¸º 128 ä½ï¼Œæ•…å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ è§£å¯†æ—¶ï¼Œè‹¥æ¶ˆæ¯é•¿åº¦è¿‡é•¿ï¼Œéœ€è¦è¿›è¡Œåˆ†ç»„ï¼Œè¦æ¶ˆæ¯é•¿åº¦ä¸è¶³ï¼Œåˆ™è¦è¿›è¡Œå¡«å……ã€‚ç®—æ³•å®‰å…¨ä¿å¯†å¼ºåº¦åŠç›¸å…³è½¯ç¡¬ä»¶å®ç°æ€§èƒ½ä¸ AES ç›¸å½“ï¼Œè¯¥ç®—æ³•ä¸å…¬å¼€ï¼Œä»…ä»¥ IP æ ¸çš„å½¢å¼å­˜åœ¨äºèŠ¯ç‰‡ä¸­ï¼Œè°ƒç”¨è¯¥ç®—æ³•æ—¶ï¼Œéœ€è¦é€šè¿‡åŠ å¯†èŠ¯ç‰‡çš„æ¥å£è¿›è¡Œè°ƒç”¨ï¼Œé‡‡ç”¨è¯¥ç®—æ³•å·²ç»ç ”åˆ¶äº†ç³»åˆ—èŠ¯ç‰‡ã€æ™ºèƒ½ IC å¡ã€æ™ºèƒ½å¯†ç é’¥åŒ™ã€åŠ å¯†å¡ã€åŠ å¯†æœºç­‰å®‰å…¨äº§å“ï¼Œå¹¿æ³›åº”ç”¨äºç”µå­æ”¿åŠ¡ã€ç”µå­å•†åŠ¡åŠå›½æ°‘ç»æµçš„å„ä¸ªåº”ç”¨é¢†åŸŸï¼ˆåŒ…æ‹¬å›½å®¶æ”¿åŠ¡é€šã€è­¦åŠ¡é€šç­‰é‡è¦é¢†åŸŸï¼‰ï¼Œä¸€èˆ¬äº†è§£çš„äººæ¯”è¾ƒå°‘ï¼Œçˆ¬è™«å·¥ç¨‹å¸ˆä¹Ÿä¸ä¼šé‡åˆ°è¿™ç§åŠ å¯†ç®—æ³•ã€‚</p><h3 id="æ¤­åœ†æ›²çº¿å…¬é’¥åŠ å¯†ç®—æ³•"><a href="#æ¤­åœ†æ›²çº¿å…¬é’¥åŠ å¯†ç®—æ³•" class="headerlink" title="æ¤­åœ†æ›²çº¿å…¬é’¥åŠ å¯†ç®—æ³•"></a>æ¤­åœ†æ›²çº¿å…¬é’¥åŠ å¯†ç®—æ³•</h3><p>SM2 ä¸ºæ¤­åœ†æ›²çº¿ï¼ˆECCï¼‰å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œéå¯¹ç§°åŠ å¯†ï¼ŒSM2 ç®—æ³•å’Œ RSA ç®—æ³•éƒ½æ˜¯å…¬é’¥åŠ å¯†ç®—æ³•ï¼ŒSM2 ç®—æ³•æ˜¯ä¸€ç§æ›´å…ˆè¿›å®‰å…¨çš„ç®—æ³•ï¼Œåœ¨æˆ‘ä»¬å›½å®¶å•†ç”¨å¯†ç ä½“ç³»ä¸­è¢«ç”¨æ¥æ›¿æ¢ RSA ç®—æ³•ï¼Œåœ¨ä¸å°‘ gov ç½‘ç«™ä¼šè§åˆ°æ­¤ç±»åŠ å¯†ç®—æ³•ã€‚æˆ‘å›½å­¦è€…å¯¹æ¤­åœ†æ›²çº¿å¯†ç çš„ç ”ç©¶ä» 20 ä¸–çºª 80 å¹´ä»£å¼€å§‹ï¼Œç›®å‰å·²å–å¾—ä¸å°‘æˆæœï¼ŒSM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•æ¯” RSA ç®—æ³•æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><table><thead><tr><th align="center"></th><th align="center">SM2</th><th align="center">RSA</th></tr></thead><tbody><tr><td align="center">å®‰å…¨æ€§</td><td align="center">256 ä½ SM2 å¼ºåº¦å·²è¶…è¿‡ RSA-2048</td><td align="center">ä¸€èˆ¬</td></tr><tr><td align="center">ç®—æ³•ç»“æ„</td><td align="center">åŸºæœ¬æ¤­åœ†æ›²çº¿ï¼ˆECCï¼‰</td><td align="center">åŸºäºç‰¹æ®Šçš„å¯é€†æ¨¡å¹‚è¿ç®—</td></tr><tr><td align="center">è®¡ç®—å¤æ‚åº¦</td><td align="center">å®Œå…¨æŒ‡æ•°çº§</td><td align="center">äºšæŒ‡æ•°çº§</td></tr><tr><td align="center">å­˜å‚¨ç©ºé—´ï¼ˆå¯†é’¥é•¿åº¦ï¼‰</td><td align="center">192-256 bit</td><td align="center">2048-4096 bit</td></tr><tr><td align="center">ç§˜é’¥ç”Ÿæˆé€Ÿåº¦</td><td align="center">è¾ƒ RSA ç®—æ³•å¿«ç™¾å€ä»¥ä¸Š</td><td align="center">æ…¢</td></tr><tr><td align="center">è§£å¯†åŠ å¯†é€Ÿåº¦</td><td align="center">è¾ƒå¿«</td><td align="center">ä¸€èˆ¬</td></tr></tbody></table><h3 id="æ‚å‡‘ç®—æ³•"><a href="#æ‚å‡‘ç®—æ³•" class="headerlink" title="æ‚å‡‘ç®—æ³•"></a>æ‚å‡‘ç®—æ³•</h3><p>SM3 ä¸ºå¯†ç æ‚å‡‘ç®—æ³•ï¼Œé‡‡ç”¨å¯†ç æ•£åˆ—ï¼ˆhashï¼‰å‡½æ•°æ ‡å‡†ï¼Œç”¨äºæ›¿ä»£ MD5/SHA-1/SHA-2 ç­‰å›½é™…ç®—æ³•ï¼Œæ˜¯åœ¨ SHA-256 åŸºç¡€ä¸Šæ”¹è¿›å®ç°çš„ä¸€ç§ç®—æ³•ï¼Œæ¶ˆæ¯åˆ†ç»„é•¿åº¦ä¸º 512 ä½ï¼Œæ‘˜è¦å€¼é•¿åº¦ä¸º 256 ä½ï¼Œå…¶ä¸­ä½¿ç”¨äº†å¼‚æˆ–ã€æ¨¡ã€æ¨¡åŠ ã€ç§»ä½ã€ä¸ã€æˆ–ã€éè¿ç®—ï¼Œç”±å¡«å……ã€è¿­ä»£è¿‡ç¨‹ã€æ¶ˆæ¯æ‰©å±•å’Œå‹ç¼©å‡½æ•°æ‰€æ„æˆã€‚åœ¨å•†ç”¨å¯†ç ä½“ç³»ä¸­ï¼ŒSM3 ä¸»è¦ç”¨äºæ•°å­—ç­¾ååŠéªŒè¯ã€æ¶ˆæ¯è®¤è¯ç ç”ŸæˆåŠéªŒè¯ã€éšæœºæ•°ç”Ÿæˆç­‰ã€‚æ®å›½å®¶å¯†ç ç®¡ç†å±€è¡¨ç¤ºï¼Œå…¶å®‰å…¨æ€§åŠæ•ˆç‡è¦é«˜äº MD5 ç®—æ³•å’Œ SHA-1 ç®—æ³•ï¼Œä¸ SHA-256 ç›¸å½“ã€‚</p><h3 id="åˆ†ç»„åŠ å¯†ç®—æ³•"><a href="#åˆ†ç»„åŠ å¯†ç®—æ³•" class="headerlink" title="åˆ†ç»„åŠ å¯†ç®—æ³•"></a>åˆ†ç»„åŠ å¯†ç®—æ³•</h3><p>SM4 ä¸ºæ— çº¿å±€åŸŸç½‘æ ‡å‡†çš„åˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œå¯¹ç§°åŠ å¯†ï¼Œç”¨äºæ›¿ä»£ DES/AES ç­‰å›½é™…ç®—æ³•ï¼ŒSM4 ç®—æ³•ä¸ AES ç®—æ³•å…·æœ‰ç›¸åŒçš„å¯†é’¥é•¿åº¦å’Œåˆ†ç»„é•¿åº¦ï¼Œå‡ä¸º 128 ä½ï¼Œæ•…å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ è§£å¯†æ—¶ï¼Œè‹¥æ¶ˆæ¯é•¿åº¦è¿‡é•¿ï¼Œéœ€è¦è¿›è¡Œåˆ†ç»„ï¼Œè¦æ¶ˆæ¯é•¿åº¦ä¸è¶³ï¼Œåˆ™è¦è¿›è¡Œå¡«å……ã€‚åŠ å¯†ç®—æ³•ä¸å¯†é’¥æ‰©å±•ç®—æ³•éƒ½é‡‡ç”¨ 32 è½®éçº¿æ€§è¿­ä»£ç»“æ„ï¼Œè§£å¯†ç®—æ³•ä¸åŠ å¯†ç®—æ³•çš„ç»“æ„ç›¸åŒï¼Œåªæ˜¯è½®å¯†é’¥çš„ä½¿ç”¨é¡ºåºç›¸åï¼Œè§£å¯†è½®å¯†é’¥æ˜¯åŠ å¯†è½®å¯†é’¥çš„é€†åºã€‚</p><table><thead><tr><th></th><th>SM4</th><th>DES</th><th>AES</th></tr></thead><tbody><tr><td>è®¡ç®—è½®æ•°</td><td>32</td><td>16ï¼ˆ3DES ä¸º 16*3ï¼‰</td><td>10/12/14</td></tr><tr><td>å¯†ç éƒ¨ä»¶</td><td>S ç›’ã€éçº¿æ€§å˜æ¢ã€çº¿æ€§å˜æ¢ã€åˆæˆå˜æ¢</td><td>æ ‡å‡†ç®—æœ¯å’Œé€»è¾‘è¿ç®—ã€å…ˆæ›¿æ¢åç½®æ¢ï¼Œä¸å«çº¿æ€§å˜æ¢</td><td>S ç›’ã€è¡Œç§»ä½å˜æ¢ã€åˆ—æ··åˆå˜æ¢ã€åœˆå¯†é’¥åŠ å˜æ¢ï¼ˆAddRoundKeyï¼‰</td></tr></tbody></table><h3 id="åˆ†ç»„åŠ å¯†ç®—æ³•-1"><a href="#åˆ†ç»„åŠ å¯†ç®—æ³•-1" class="headerlink" title="åˆ†ç»„åŠ å¯†ç®—æ³•"></a>åˆ†ç»„åŠ å¯†ç®—æ³•</h3><p>SM7 ä¸ºåˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œå¯¹ç§°åŠ å¯†ï¼Œè¯¥ç®—æ³•ä¸å…¬å¼€ï¼Œåº”ç”¨åŒ…æ‹¬èº«ä»½è¯†åˆ«ç±»åº”ç”¨ï¼ˆéæ¥è§¦å¼ IC å¡ã€é—¨ç¦å¡ã€å·¥ä½œè¯ã€å‚èµ›è¯ç­‰ï¼‰ï¼Œç¥¨åŠ¡ç±»åº”ç”¨ï¼ˆå¤§å‹èµ›äº‹é—¨ç¥¨ã€å±•ä¼šé—¨ç¥¨ç­‰ï¼‰ï¼Œæ”¯ä»˜ä¸é€šå¡ç±»åº”ç”¨ï¼ˆç§¯åˆ†æ¶ˆè´¹å¡ã€æ ¡å›­ä¸€å¡é€šã€ä¼ä¸šä¸€å¡é€šç­‰ï¼‰ã€‚çˆ¬è™«å·¥ç¨‹å¸ˆåŸºæœ¬ä¸Šä¸ä¼šé‡åˆ°æ­¤ç±»ç®—æ³•ã€‚</p><h3 id="æ ‡è¯†åŠ å¯†ç®—æ³•"><a href="#æ ‡è¯†åŠ å¯†ç®—æ³•" class="headerlink" title="æ ‡è¯†åŠ å¯†ç®—æ³•"></a>æ ‡è¯†åŠ å¯†ç®—æ³•</h3><p>SM9 ä¸ºæ ‡è¯†åŠ å¯†ç®—æ³•ï¼ˆIdentity-Based Cryptographyï¼‰ï¼Œéå¯¹ç§°åŠ å¯†ï¼Œæ ‡è¯†åŠ å¯†å°†ç”¨æˆ·çš„æ ‡è¯†ï¼ˆå¦‚å¾®ä¿¡å·ã€é‚®ä»¶åœ°å€ã€æ‰‹æœºå·ç ã€QQ å·ç­‰ï¼‰ä½œä¸ºå…¬é’¥ï¼Œçœç•¥äº†äº¤æ¢æ•°å­—è¯ä¹¦å’Œå…¬é’¥è¿‡ç¨‹ï¼Œä½¿å¾—å®‰å…¨ç³»ç»Ÿå˜å¾—æ˜“äºéƒ¨ç½²å’Œç®¡ç†ï¼Œé€‚ç”¨äºäº’è”ç½‘åº”ç”¨çš„å„ç§æ–°å…´åº”ç”¨çš„å®‰å…¨ä¿éšœï¼Œå¦‚åŸºäºäº‘æŠ€æœ¯çš„å¯†ç æœåŠ¡ã€ç”µå­é‚®ä»¶å®‰å…¨ã€æ™ºèƒ½ç»ˆç«¯ä¿æŠ¤ã€ç‰©è”ç½‘å®‰å…¨ã€äº‘å­˜å‚¨å®‰å…¨ç­‰ç­‰ã€‚è¿™äº›å®‰å…¨åº”ç”¨å¯é‡‡ç”¨æ‰‹æœºå·ç æˆ–é‚®ä»¶åœ°å€ä½œä¸ºå…¬é’¥ï¼Œå®ç°æ•°æ®åŠ å¯†ã€èº«ä»½è®¤è¯ã€é€šè¯åŠ å¯†ã€é€šé“åŠ å¯†ç­‰ã€‚åœ¨å•†ç”¨å¯†ç ä½“ç³»ä¸­ï¼ŒSM9 ä¸»è¦ç”¨äºç”¨æˆ·çš„èº«ä»½è®¤è¯ï¼Œæ®æ–°åç½‘å…¬å¼€æŠ¥é“ï¼ŒSM9 çš„åŠ å¯†å¼ºåº¦ç­‰åŒäº 3072 ä½å¯†é’¥çš„ RSA åŠ å¯†ç®—æ³•ã€‚</p><h3 id="ç¥–å†²ä¹‹ç®—æ³•"><a href="#ç¥–å†²ä¹‹ç®—æ³•" class="headerlink" title="ç¥–å†²ä¹‹ç®—æ³•"></a>ç¥–å†²ä¹‹ç®—æ³•</h3><p>ZUC ä¸ºæµå¯†ç ç®—æ³•ï¼Œå¯¹ç§°åŠ å¯†ï¼Œè¯¥æœºå¯†æ€§ç®—æ³•å¯é€‚ç”¨äº 3GPP LTE é€šä¿¡ä¸­çš„åŠ å¯†å’Œè§£å¯†ï¼Œè¯¥ç®—æ³•åŒ…æ‹¬ç¥–å†²ä¹‹ç®—æ³•ï¼ˆZUCï¼‰ã€æœºå¯†æ€§ç®—æ³•ï¼ˆ128-EEA3ï¼‰å’Œå®Œæ•´æ€§ç®—æ³•ï¼ˆ128-EIA3ï¼‰ä¸‰ä¸ªéƒ¨åˆ†ã€‚å·²ç»è¢«å›½é™…ç»„ç»‡ 3GPP æ¨èä¸º 4G æ— çº¿é€šä¿¡çš„ç¬¬ä¸‰å¥—å›½é™…åŠ å¯†å’Œå®Œæ•´æ€§æ ‡å‡†çš„å€™é€‰ç®—æ³•ã€‚</p><hr><h2 id="ç¼–ç¨‹è¯­è¨€å®ç°"><a href="#ç¼–ç¨‹è¯­è¨€å®ç°" class="headerlink" title="ç¼–ç¨‹è¯­è¨€å®ç°"></a><font color=#B01B15>ç¼–ç¨‹è¯­è¨€å®ç°</font></h2><h3 id="Python-è¯­è¨€å®ç°"><a href="#Python-è¯­è¨€å®ç°" class="headerlink" title="Python è¯­è¨€å®ç°"></a>Python è¯­è¨€å®ç°</h3><p>åœ¨ Python é‡Œé¢å¹¶æ²¡æœ‰æ¯”è¾ƒå®˜æ–¹çš„åº“æ¥å®ç°å›½å¯†ç®—æ³•ï¼Œè¿™é‡Œä»…åˆ—å‡ºäº†å…¶ä¸­ä¸¤ä¸ªè¾ƒä¸ºå®Œå–„çš„ç¬¬ä¸‰æ–¹åº“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSM1 å’Œ SM7 ç®—æ³•ä¸å…¬å¼€ï¼Œç›®å‰å¤§å¤šåº“ä»…å®ç°äº† SM2ã€SM3ã€SM4 ä¸‰ç§å¯†ç®—æ³•ã€‚</p><ul><li>snowland-smx-pythonï¼š<a href="https://gitee.com/snowlandltd/snowland-smx-python">https://gitee.com/snowlandltd/snowland-smx-python</a></li><li>gmsslï¼š<a href="https://github.com/duanhongyi/gmssl">https://github.com/duanhongyi/gmssl</a></li><li>gmssl-pythonï¼š<a href="https://github.com/gongxian-ding/gmssl-python">https://github.com/gongxian-ding/gmssl-python</a></li></ul><p>å…¶ä¸­ gmssl-python æ˜¯ gmssl çš„æ”¹è¿›ç‰ˆï¼Œgmssl-python æ–°å¢æ”¯æŒäº† SM9 ç®—æ³•ï¼Œä¸è¿‡æˆªæ­¢æœ¬æ–‡ç¼–å†™æ—¶ï¼Œgmssl-python å¹¶æœªå‘å¸ƒ pypiï¼Œä¹Ÿæœª PR åˆ° gmsslï¼Œä½¿ç”¨ <code>pip install gmssl</code> å®‰è£…çš„ gmssl ä¸æ”¯æŒ SM9 ç®—æ³•ã€‚è‹¥è¦ä½¿ç”¨ SM9 ç®—æ³•ï¼Œå¯ä¸‹è½½ gmssl-python æºç æ‰‹åŠ¨å®‰è£…ã€‚</p><p>ä»¥ gmssl çš„ SM2 ç®—æ³•ä¸ºä¾‹ï¼Œå®ç°å¦‚ä¸‹ï¼ˆå…¶ä»–ç®—æ³•å’Œè¯¦ç»†ç”¨æ³•å¯å‚è€ƒå…¶å®˜æ–¹æ–‡æ¡£ï¼‰ï¼š</p><p>SM2 åŠ å¯†ï¼ˆencryptï¼‰å’Œè§£å¯†ï¼ˆdecryptï¼‰ï¼š</p><pre><code class="python">from gmssl import sm2# 16 è¿›åˆ¶çš„å…¬é’¥å’Œç§é’¥private_key = &#39;00B9AB0B828FF68872F21A837FC303668428DEA11DCD1B24429D0C99E24EED83D5&#39;public_key = &#39;B9C9A6E04E9C91F7BA880429273747D7EF5DDEB0BB2FF6317EB00BEF331A83081A6994B8993F3F5D6EADDDB81872266C87C018FB4162F5AF347B483E24620207&#39;sm2_crypt = sm2.CryptSM2(public_key=public_key, private_key=private_key)# å¾…åŠ å¯†æ•°æ®å’ŒåŠ å¯†åæ•°æ®ä¸º bytes ç±»å‹data = b&quot;this is the data to be encrypted&quot;enc_data = sm2_crypt.encrypt(data)dec_data = sm2_crypt.decrypt(enc_data)print(&#39;enc_data: &#39;, enc_data.hex())print(&#39;dec_data: &#39;, dec_data)# enc_data:  3cb96dd2e0b6c24df8e22a5da3951d061a6ee6ce99f46a446426feca83e501073288b1553ca8d91fad79054e26696a27c982492466dafb5ed06a573fb09947f2aed8dfae243b095ab88115c584bb6f0814efe2f338a00de42b244c99698e81c7913c1d82b7609557677a36681dd10b646229350ad0261b51ca5ed6030d660947# dec_data:  b&#39;this is the data to be encrypted&#39;</code></pre><p>SM2 ç­¾åï¼ˆsignï¼‰å’Œæ ¡éªŒï¼ˆverifyï¼‰ï¼š</p><pre><code class="python">from gmssl import sm2, func# 16 è¿›åˆ¶çš„å…¬é’¥å’Œç§é’¥private_key = &#39;00B9AB0B828FF68872F21A837FC303668428DEA11DCD1B24429D0C99E24EED83D5&#39;public_key = &#39;B9C9A6E04E9C91F7BA880429273747D7EF5DDEB0BB2FF6317EB00BEF331A83081A6994B8993F3F5D6EADDDB81872266C87C018FB4162F5AF347B483E24620207&#39;sm2_crypt = sm2.CryptSM2(public_key=public_key, private_key=private_key)# å¾…ç­¾åæ•°æ®ä¸º bytes ç±»å‹data = b&quot;this is the data to be signed&quot;random_hex_str = func.random_hex(sm2_crypt.para_len)#  16 è¿›åˆ¶sign = sm2_crypt.sign(data, random_hex_str)verify = sm2_crypt.verify(sign, data)print(&#39;sign: &#39;, sign)print(&#39;verify: &#39;, verify)# sign:  45cfe5306b1a87cf5d0034ef6712babdd1d98547e75bcf89a17f3bcb617150a3f111ab05597601bab8c41e2b980754b74ebe9a169a59db37d549569910ae273a# verify:  True</code></pre><h3 id="JavaScript-è¯­è¨€å®ç°"><a href="#JavaScript-è¯­è¨€å®ç°" class="headerlink" title="JavaScript è¯­è¨€å®ç°"></a>JavaScript è¯­è¨€å®ç°</h3><p>åœ¨ JavaScript ä¸­å·²æœ‰æ¯”è¾ƒæˆç†Ÿçš„å®ç°åº“ï¼Œè¿™é‡Œæ¨è sm-cryptoï¼Œç›®å‰æ”¯æŒ SM2ã€SM3 å’Œ SM4ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSM2 éå¯¹ç§°åŠ å¯†çš„ç»“æœç”± C1ã€C2ã€C3 ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­ C1 æ˜¯ç”Ÿæˆéšæœºæ•°çš„è®¡ç®—å‡ºçš„æ¤­åœ†æ›²çº¿ç‚¹ï¼ŒC2 æ˜¯å¯†æ–‡æ•°æ®ï¼ŒC3 æ˜¯ SM3 çš„æ‘˜è¦å€¼ï¼Œæœ€å¼€å§‹çš„å›½å¯†æ ‡å‡†çš„ç»“æœæ˜¯æŒ‰ C1C2C3 é¡ºåºçš„ï¼Œæ–°æ ‡å‡†çš„æ˜¯æŒ‰ C1C3C2 é¡ºåºå­˜æ”¾çš„ï¼Œsm-crypto æ”¯æŒè®¾ç½® cipherModeï¼Œä¹Ÿå°±æ˜¯ C1C2C3 çš„æ’åˆ—é¡ºåºã€‚</p><p>sm-cryptoï¼š<a href="https://www.npmjs.com/package/sm-crypto">https://www.npmjs.com/package/sm-crypto</a></p><p>ä»¥ SM2 ç®—æ³•ä¸ºä¾‹ï¼Œå®ç°å¦‚ä¸‹ï¼ˆå…¶ä»–ç®—æ³•å’Œè¯¦ç»†ç”¨æ³•å¯å‚è€ƒå…¶å®˜æ–¹æ–‡æ¡£ï¼‰ï¼š</p><p>SM2 åŠ å¯†ï¼ˆencryptï¼‰å’Œè§£å¯†ï¼ˆdecryptï¼‰ï¼š</p><pre><code class="javascript">const sm2 = require(&#39;sm-crypto&#39;).sm2// 1 - C1C3C2ï¼Œ0 - C1C2C3ï¼Œé»˜è®¤ä¸º1const cipherMode = 1// è·å–å¯†é’¥å¯¹let keypair = sm2.generateKeyPairHex()let publicKey = keypair.publicKey   // å…¬é’¥let privateKey = keypair.privateKey // ç§é’¥let msgString = &quot;this is the data to be encrypted&quot;let encryptData = sm2.doEncrypt(msgString, publicKey, cipherMode)    // åŠ å¯†ç»“æœlet decryptData = sm2.doDecrypt(encryptData, privateKey, cipherMode) // è§£å¯†ç»“æœconsole.log(&quot;encryptData: &quot;, encryptData)console.log(&quot;decryptData: &quot;, decryptData)// encryptData:  ddf261103fae06d0efe20ea0fe0d82bcc170e8efd8eeae24e9559b3835993f0ed2acb8ba6782fc21941ee74ca453d77664a5cb7dbb91517e6a3b0c27db7ce587ae7af54f8df48d7fa822b7062e2af66c112aa57de94d12ba28e5ba96bf4439d299b41da4a5282d054696adc64156d248049d1eb1d0af28d76b542fe8a95d427e// decryptData:  this is the data to be encrypted</code></pre><p>SM2 ç­¾åï¼ˆsignï¼‰å’Œæ ¡éªŒï¼ˆverifyï¼‰ï¼š</p><pre><code class="javascript">const sm2 = require(&#39;sm-crypto&#39;).sm2// è·å–å¯†é’¥å¯¹let keypair = sm2.generateKeyPairHex()let publicKey = keypair.publicKey   // å…¬é’¥let privateKey = keypair.privateKey // ç§é’¥// çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹let msgString = &quot;this is the data to be signed&quot;let sigValueHex = sm2.doSignature(msgString, privateKey)                    // ç­¾ålet verifyResult = sm2.doVerifySignature(msgString, sigValueHex, publicKey) // éªŒç­¾ç»“æœconsole.log(&quot;sigValueHex: &quot;, sigValueHex)console.log(&quot;verifyResult: &quot;, verifyResult)// sigValueHex:  924cbb9f2b5adb554ef77129ff1e3a00b2da42017ad3ec2f806d824a77646987ba8c8c4fb94576c38bc11ae69cc98ebbb40b5d47715171ec7dcea913dfc6ccc1// verifyResult:  true</code></pre><h3 id="å…¶ä»–è¯­è¨€å®ç°ä»¥åŠå‚è€ƒèµ„æ–™"><a href="#å…¶ä»–è¯­è¨€å®ç°ä»¥åŠå‚è€ƒèµ„æ–™" class="headerlink" title="å…¶ä»–è¯­è¨€å®ç°ä»¥åŠå‚è€ƒèµ„æ–™"></a>å…¶ä»–è¯­è¨€å®ç°ä»¥åŠå‚è€ƒèµ„æ–™</h3><ul><li>Java è¯­è¨€å®ç°ï¼š<ul><li><a href="https://github.com/bcgit/bc-csharp">https://github.com/bcgit/bc-csharp</a></li><li><a href="https://github.com/xjfuuu/SM2_SM3_SM4Encrypt">https://github.com/xjfuuu/SM2_SM3_SM4Encrypt</a></li></ul></li><li>Go è¯­è¨€å®ç°ï¼š<a href="https://github.com/tjfoc/gmsm">https://github.com/tjfoc/gmsm</a></li><li>å¼€æºå›½å¯†ç®—æ³•å·¥å…·ç®±ï¼š<a href="http://gmssl.org/">http://gmssl.org/</a></li><li>å›½å¯†ç®—æ³•æºä»£ç ä¸‹è½½ï¼š<a href="http://www.scctc.org.cn/templates/Download/index.aspx?nodeid=71">http://www.scctc.org.cn/templates/Download/index.aspx?nodeid=71</a></li><li>å›½å®¶å¯†ç ç®¡ç†å±€ï¼š<a href="https://www.sca.gov.cn/">https://www.sca.gov.cn/</a></li><li>å¯†ç æ ‡å‡†å§”å‘˜ä¼šï¼š<a href="http://www.gmbz.org.cn/">http://www.gmbz.org.cn/</a></li></ul><hr><h2 id="é™„ï¼šGM-T-å¯†ç è¡Œä¸šæ ‡å‡†"><a href="#é™„ï¼šGM-T-å¯†ç è¡Œä¸šæ ‡å‡†" class="headerlink" title="é™„ï¼šGM/T å¯†ç è¡Œä¸šæ ‡å‡†"></a><font color=#B01B15>é™„ï¼šGM/T å¯†ç è¡Œä¸šæ ‡å‡†</font></h2><ul><li><a href="http://www.gmbz.org.cn/main/viewfile/20180117202410524608.html">GM/T 0001.1-2012ï¼šç¥–å†²ä¹‹åºåˆ—å¯†ç ç®—æ³•ï¼šç¬¬1éƒ¨åˆ†ï¼šç®—æ³•æè¿°</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180107233806310781.html">GM/T 0001.2-2012ï¼šç¥–å†²ä¹‹åºåˆ—å¯†ç ç®—æ³•ï¼šç¬¬2éƒ¨åˆ†ï¼šåŸºäºç¥–å†²ä¹‹ç®—æ³•çš„æœºå¯†æ€§ç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180107234058336917.html">GM/T 0001.3-2012ï¼šç¥–å†²ä¹‹åºåˆ—å¯†ç ç®—æ³•ï¼šç¬¬3éƒ¨åˆ†ï¼šåŸºäºç¥–å†²ä¹‹ç®—æ³•çš„å®Œæ•´æ€§ç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180108015515787986.html">GM/T 0003.1-2012ï¼šSM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ç¬¬1éƒ¨åˆ†ï¼šæ€»åˆ™</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180108023346264349.html">GM/T 0003.2-2012ï¼šSM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ç¬¬2éƒ¨åˆ†ï¼šæ•°å­—ç­¾åç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180108023456003485.html">GM/T 0003.3-2012ï¼šSM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ç¬¬3éƒ¨åˆ†ï¼šå¯†é’¥äº¤æ¢åè®®</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180108023602687857.html">GM/T 0003.4-2012ï¼šSM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ç¬¬4éƒ¨åˆ†ï¼šå…¬é’¥åŠ å¯†ç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/2018010802371372251.html">GM/T 0003.5-2012ï¼šSM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ç¬¬5éƒ¨åˆ†ï¼šå‚æ•°å®šä¹‰</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180108023812835219.html">GM/T 0004-2012ï¼šSM3 å¯†ç æ‚å‡‘ç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180108015408199368.html">GM/T 0002-2012ï¼šSM4 åˆ†ç»„å¯†ç ç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/2018011002473633053.html">GM/T 0044.1-2016ï¼šSM9 æ ‡è¯†å¯†ç ç®—æ³• ç¬¬1éƒ¨åˆ†ï¼šæ€»åˆ™</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180110024900801385.html">GM/T 0044.2-2016ï¼šSM9 æ ‡è¯†å¯†ç ç®—æ³• ç¬¬2éƒ¨åˆ†ï¼šæ•°å­—ç­¾åç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180110025010004565.html">GM/T 0044.3-2016ï¼šSM9 æ ‡è¯†å¯†ç ç®—æ³• ç¬¬3éƒ¨åˆ†ï¼šå¯†é’¥äº¤æ¢åè®®</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180110025115084846.html">GM/T 0044.4-2016ï¼šSM9 æ ‡è¯†å¯†ç ç®—æ³• ç¬¬4éƒ¨åˆ†ï¼šå¯†é’¥å°è£…æœºåˆ¶å’Œå…¬é’¥åŠ å¯†ç®—æ³•</a></li><li><a href="http://www.gmbz.org.cn/main/viewfile/20180110025229918536.html">GM/T 0044.5-2016ï¼šSM9 æ ‡è¯†å¯†ç ç®—æ³• ç¬¬5éƒ¨åˆ†ï¼šå‚æ•°å®šä¹‰</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;&lt;font color=#B01B15&gt;ç®€ä»‹&lt;/font&gt;&lt;/h2&gt;&lt;p&gt;å›½å¯†å³å›½å®¶å¯†ç å±€è®¤å®šçš„å›½äº§åŠ å¯†ç®—æ³•ï¼Œçˆ¬è™«å·¥ç¨‹å¸ˆåœ¨åš JS é€†å‘çš„æ—¶å€™ï¼Œä¼šé‡åˆ°å„ç§å„æ ·çš„</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>çˆ¬è™«é€†å‘åŸºç¡€ï¼Œç†è§£ JavaScript æ¨¡å—åŒ–ç¼–ç¨‹ webpack</title>
    <link href="https://www.itbob.cn/article/040/"/>
    <id>https://www.itbob.cn/article/040/</id>
    <published>2021-10-23T23:00:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a><font color=#FFB11B>ç®€ä»‹</font></h2><p>åœ¨åˆ†æä¸€äº›ç«™ç‚¹çš„ JavaScript ä»£ç æ—¶ï¼Œæ¯”è¾ƒç®€å•çš„ä»£ç ï¼Œå‡½æ•°é€šå¸¸éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„ï¼Œä¾‹å¦‚ï¼š</p><pre><code class="javascript">function a() &#123;console.log(&quot;a&quot;)&#125;function b() &#123;console.log(&quot;a&quot;)&#125;function c() &#123;console.log(&quot;a&quot;)&#125;</code></pre><p>ä½†æ˜¯ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ç«™ç‚¹ï¼Œé€šå¸¸ä¼šé‡åˆ°ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</p><pre><code class="javascript">!function(i) &#123;    function n(t) &#123;        return i[t].call(a, b, c, d)    &#125;&#125;([    function(t, e) &#123;&#125;,     function(t, e, n) &#123;&#125;,     function(t, e, r) &#123;&#125;,     function(t, e, o) &#123;&#125;]);</code></pre><p>è¿™ç§å†™æ³•åœ¨ JavaScript ä¸­å¾ˆå¸¸è§ï¼Œå¯¹äºç†Ÿæ‚‰ JavaScript çš„äººæ¥è¯´å¯èƒ½éå¸¸ç®€å•ï¼Œä½†æ˜¯çˆ¬è™«å·¥ç¨‹å¸ˆå¤§å¤šæ•°éƒ½æ˜¯ç”¨ Python æˆ–è€… Java æ¥å†™ä»£ç çš„ï¼Œçœ‹åˆ°è¿™ç§è¯­æ³•å°±æœ‰å¯èƒ½æ‡µäº†ï¼Œç”±äºåœ¨å‰¥ç¦» JS åŠ å¯†ä»£ç æ—¶ä¼šç»å¸¸é‡åˆ°ï¼Œæ‰€ä»¥ç†è§£è¿™ç§è¯­æ³•å¯¹äºçˆ¬è™«å·¥ç¨‹å¸ˆæ¥è¯´æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>è¿™ç§å†™æ³•è²Œä¼¼æ²¡æœ‰å®˜æ–¹çš„åç§°ï¼Œç›¸å½“äºè¿›è¡Œäº†æ¨¡å—åŒ–ç¼–ç¨‹ï¼Œå› æ­¤å¤§å¤šæ•°äººç§°å…¶ä¸º webpackï¼Œä¸Šé¢çš„ç¤ºä¾‹çœ‹èµ·æ¥æ¯”è¾ƒè´¹åŠ²ï¼Œç®€å•ä¼˜åŒ–ä¸€ä¸‹ï¼š</p><pre><code class="javascript">!function (allModule) &#123;    function useModule(whichModule) &#123;        allModule[whichModule].call(null, &quot;hello world!&quot;);    &#125;    useModule(0)&#125;([    function module0(param) &#123;console.log(&quot;module0: &quot; + param)&#125;,    function module1(param) &#123;console.log(&quot;module1: &quot; + param)&#125;,    function module2(param) &#123;console.log(&quot;module2: &quot; + param)&#125;,]);</code></pre><p>è¿è¡Œä»¥ä¸Šä»£ç ï¼Œä¼šè¾“å‡º <code>module0: hello world!</code>ï¼Œç›¸ä¿¡é€šè¿‡æµ…æ˜¾æ˜“æ‡‚çš„å˜é‡åå’Œå‡½æ•°åï¼Œåº”è¯¥å°±å¯ä»¥çœ‹æ‡‚å¤§è‡´å«ä¹‰äº†ï¼Œè°ƒç”¨ <code>useModule(0)</code>ï¼Œä»æ‰€æœ‰å‡½æ•°é‡Œé€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œå°† <code>hello world!</code> ä¼ é€’ç»™ <code>module0</code> å¹¶è¾“å‡ºã€‚</p><p>ä»”ç»†è§‚å¯Ÿä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸»è¦ç”¨åˆ°äº† <code>!function()&#123;&#125;()</code> å’Œ <code>function.call()</code> è¯­æ³•ï¼Œæ¥ä¸‹æ¥å°±ä¸€ä¸€ä»‹ç»ä¸€ä¸‹ã€‚</p><hr><h2 id="å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼"><a href="#å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼"></a><font color=#FFB11B>å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼</font></h2><p>åœ¨ ECMAScriptï¼ˆJavaScript çš„ä¸€ä¸ªæ ‡å‡†ï¼‰ä¸­ï¼Œæœ‰ä¸¤ä¸ªæœ€å¸¸ç”¨çš„åˆ›å»ºå‡½æ•°å¯¹è±¡çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨å‡½æ•°å£°æ˜æˆ–è€…å‡½æ•°è¡¨è¾¾å¼ï¼ŒECMAScript è§„èŒƒæ˜ç¡®äº†ä¸€ç‚¹ï¼Œå³å‡½æ•°å£°æ˜å¿…é¡»å§‹ç»ˆå¸¦æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å‡½æ•°åï¼Œè€Œå‡½æ•°è¡¨è¾¾å¼åˆ™å¯ä»¥çœç•¥ã€‚</p><p>å‡½æ•°å£°æ˜ï¼Œä¼šç»™å‡½æ•°æŒ‡å®šä¸€ä¸ªåå­—ï¼Œä¼šåœ¨ä»£ç æ‰§è¡Œä»¥å‰è¢«åŠ è½½åˆ°ä½œç”¨åŸŸä¸­ï¼Œæ‰€ä»¥<strong>è°ƒç”¨å‡½æ•°åœ¨å‡½æ•°å£°æ˜ä¹‹å‰æˆ–ä¹‹åéƒ½æ˜¯å¯ä»¥çš„</strong>ï¼š</p><pre><code class="javascript">test(&quot;Hello World!&quot;)function test(arg) &#123;    console.log(arg)&#125;</code></pre><p>å‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç„¶åå°†è¿™ä¸ªåŒ¿åå‡½æ•°èµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œåœ¨ä»£ç æ‰§è¡Œåˆ°å‡½æ•°è¡¨è¾¾å¼çš„æ—¶å€™æ‰ä¼šæœ‰å®šä¹‰ï¼Œæ‰€ä»¥<strong>è°ƒç”¨å‡½æ•°åœ¨å‡½æ•°è¡¨è¾¾å¼ä¹‹åæ‰èƒ½æ­£ç¡®è¿è¡Œ</strong>ï¼Œå¦åˆ™æ˜¯ä¼šæŠ¥é”™çš„ï¼š</p><pre><code class="javascript">var test = function (arg) &#123;    console.log(arg)&#125;test(&quot;Hello World!&quot;)</code></pre><hr><h2 id="IIFE-ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼"><a href="#IIFE-ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="IIFE ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼"></a><font color=#FFB11B>IIFE ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼</font></h2><p>IIFE å…¨ç§° Immediately-invoked Function Expressionsï¼Œè¯‘ä¸ºç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œä¹Ÿç§°ä¸ºè‡ªæ‰§è¡Œå‡½æ•°ã€ç«‹å³æ‰§è¡Œå‡½æ•°ã€è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ç­‰ï¼ŒIIFE æ˜¯ä¸€ç§è¯­æ³•ï¼Œè¿™ç§æ¨¡å¼æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼ˆå‘½åçš„æˆ–è€…åŒ¿åçš„ï¼‰åœ¨åˆ›å»ºåç«‹å³æ‰§è¡Œã€‚å½“å‡½æ•°å˜æˆç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œè¡¨è¾¾å¼ä¸­çš„å˜é‡ä¸èƒ½ä»å¤–éƒ¨è®¿é—®ã€‚IIFE ä¸»è¦ç”¨æ¥éš”ç¦»ä½œç”¨åŸŸï¼Œé¿å…æ±¡æŸ“ã€‚</p><hr><h3 id="IIFE-åŸºæœ¬è¯­æ³•"><a href="#IIFE-åŸºæœ¬è¯­æ³•" class="headerlink" title="IIFE åŸºæœ¬è¯­æ³•"></a>IIFE åŸºæœ¬è¯­æ³•</h3><p>IIFE çš„å†™æ³•éå¸¸çµæ´»ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ ¼å¼ï¼š</p><p>1ã€åŒ¿åå‡½æ•°å‰é¢åŠ ä¸Šä¸€å…ƒæ“ä½œç¬¦ï¼Œåé¢åŠ ä¸Š <code>()</code>ï¼š</p><pre><code class="javascript">!function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;();-function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;();+function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;();~function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;();</code></pre><p>2ã€åŒ¿åå‡½æ•°åé¢åŠ ä¸Š <code>()</code>ï¼Œç„¶åå†ç”¨ <code>()</code> å°†æ•´ä¸ªæ‹¬èµ·æ¥ï¼š</p><pre><code class="javascript">(function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;());</code></pre><p>3ã€å…ˆç”¨ <code>()</code> å°†åŒ¿åå‡½æ•°æ‹¬èµ·æ¥ï¼Œå†åœ¨åé¢åŠ ä¸Š <code>()</code>ï¼š</p><pre><code class="javascript">(function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;)();</code></pre><p>4ã€ä½¿ç”¨ç®­å¤´å‡½æ•°è¡¨è¾¾å¼ï¼Œå…ˆç”¨ <code>()</code> å°†ç®­å¤´å‡½æ•°è¡¨è¾¾å¼æ‹¬èµ·æ¥ï¼Œå†åœ¨åé¢åŠ ä¸Š <code>()</code>ï¼š</p><pre><code class="javascript">(() =&gt; &#123;  console.log(&quot;I AM IIFE&quot;)&#125;)()</code></pre><p>5ã€åŒ¿åå‡½æ•°å‰é¢åŠ ä¸Š <code>void</code> å…³é”®å­—ï¼Œåé¢åŠ ä¸Š <code>()</code>ï¼Œ <code>void</code> æŒ‡å®šè¦è®¡ç®—æˆ–è¿è¡Œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä½†æ˜¯ä¸è¿”å›å€¼ï¼š</p><pre><code class="javascript">void function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;();</code></pre><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æœ‰å¯èƒ½è§åˆ°ç«‹å³æ‰§è¡Œå‡½æ•°å‰é¢ååˆ†å·çš„æƒ…å†µï¼Œä¾‹å¦‚ï¼š</p><pre><code class="javascript">;(function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;());!function () &#123;    console.log(&quot;I AM IIFE&quot;)&#125;()</code></pre><p>è¿™æ˜¯å› ä¸ºç«‹å³æ‰§è¡Œå‡½æ•°é€šå¸¸ä½œä¸ºä¸€ä¸ªå•ç‹¬æ¨¡å—ä½¿ç”¨ä¸€èˆ¬æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºè®®åœ¨ç«‹å³æ‰§è¡Œå‡½æ•°å‰é¢æˆ–è€…åé¢åŠ ä¸Šåˆ†å·ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåœ°ä¸å‰é¢æˆ–è€…åé¢çš„ä»£ç è¿›è¡Œéš”ç¦»ï¼Œå¦åˆ™å¯èƒ½å‡ºç°æ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚</p><hr><h3 id="IIFE-å‚æ•°ä¼ é€’"><a href="#IIFE-å‚æ•°ä¼ é€’" class="headerlink" title="IIFE å‚æ•°ä¼ é€’"></a>IIFE å‚æ•°ä¼ é€’</h3><p>å°†å‚æ•°æ”¾åœ¨æœ«å°¾çš„ <code>()</code> é‡Œå³å¯å®ç°å‚æ•°ä¼ é€’ï¼š</p><pre><code class="javascript">var text = &quot;I AM IIFE&quot;;(function (param) &#123;    console.log(param)&#125;)(text);// I AM IIFE</code></pre><pre><code class="javascript">var dict = &#123;name: &quot;Bob&quot;, age: &quot;20&quot;&#125;;(function () &#123;    console.log(dict.name);&#125;)(dict);// Bob</code></pre><pre><code class="javascript">var list = [1, 2, 3, 4, 5];(function () &#123;    var sum = 0;    for (var i = 0; i &lt; list.length; i++) &#123;        sum += list[i];    &#125;    console.log(sum);&#125;)(list);// 15</code></pre><hr><h2 id="Function-prototype-call-apply-bind"><a href="#Function-prototype-call-apply-bind" class="headerlink" title="Function.prototype.call() / apply() / bind()"></a><font color=#FFB11B>Function.prototype.call() / apply() / bind()</font></h2><p><code>Function.prototype.call()</code>ã€<code>Function.prototype.apply()</code>ã€<code>Function.prototype.bind()</code> éƒ½æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚å®ƒä»¬çš„ä½œç”¨ä¸€æ¨¡ä¸€æ ·ï¼Œå³<strong>æ”¹å˜å‡½æ•°ä¸­çš„ <code>this</code> æŒ‡å‘</strong>ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li><code>call()</code> æ–¹æ³•ä¼šç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªå¤šä¸ªå‚æ•°ï¼Œå‚æ•°ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼›</li><li><code>apply()</code> æ–¹æ³•ä¼šç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„ï¼›</li><li><code>bind()</code> æ–¹æ³•ä¸ä¼šç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªä¿®æ”¹è¿‡åçš„å‡½æ•°ï¼Œä¾¿äºç¨åè°ƒç”¨ï¼Œæ¥å—çš„å‚æ•°å’Œ <code>call()</code> ä¸€æ ·ã€‚</li></ul><hr><h3 id="call"><a href="#call" class="headerlink" title="call()"></a>call()</h3><p><code>call()</code> æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° thisArg æŒ‡å®šäº†å‡½æ•°ä½“å†… this å¯¹è±¡çš„æŒ‡å‘ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°å¤„äºéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŒ‡å®šä¸º null æˆ– undefined æ—¶ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­å°±æ˜¯ window å¯¹è±¡ï¼‰ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°ä½“å†…çš„ this è¿˜æ˜¯ä¸º nullã€‚ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åï¼Œæ¯ä¸ªå‚æ•°è¢«ä¾æ¬¡ä¼ å…¥å‡½æ•°ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function.call(thisArg, arg1, arg2, ...)</code></pre><p>ç¤ºä¾‹ï¼š</p><pre><code class="javascript">function test(a, b, c) &#123;    console.log(a + b + c)&#125;test.call(null, 1, 2, 3)  // 6</code></pre><pre><code class="javascript">function test() &#123;    console.log(this.firstName + &quot; &quot; + this.lastName)&#125;var data = &#123;firstName: &quot;John&quot;, lastName: &quot;Doe&quot;&#125;test.call(data)  // John Doe</code></pre><hr><h3 id="apply"><a href="#apply" class="headerlink" title="apply()"></a>apply()</h3><p><code>apply()</code> æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° thisArg ä¸ <code>call()</code> æ–¹æ³•ä¸€è‡´ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œä» ECMAScript ç¬¬5ç‰ˆå¼€å§‹ï¼Œè¿™ä¸ªé›†åˆå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ï¼Œ<code>apply()</code> æ–¹æ³•æŠŠè¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function.apply(thisArg, [arg1, arg2, ...])</code></pre><p>ç¤ºä¾‹ï¼š</p><pre><code class="javascript">function test(a, b, c) &#123;    console.log(a + b + c)&#125;test.apply(null, [1, 2, 3])  // 6</code></pre><pre><code class="javascript">function test() &#123;    console.log(this.firstName + &quot; &quot; + this.lastName)&#125;var data = &#123;firstName: &quot;John&quot;, lastName: &quot;Doe&quot;&#125;test.apply(data)  // John Doe</code></pre><hr><h3 id="bind"><a href="#bind" class="headerlink" title="bind()"></a>bind()</h3><p><code>bind()</code> æ–¹æ³•å’Œ <code>call()</code> æ¥å—çš„å‚æ•°æ˜¯ç›¸åŒçš„ï¼Œåªä¸è¿‡ <code>bind()</code> è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function.bind(thisArg, arg1, arg2, ...)</code></pre><p>ç¤ºä¾‹ï¼š</p><pre><code class="javascript">function test(a, b, c) &#123;    console.log(a + b + c)&#125;test.bind(null, 1, 2, 3)()  // 6</code></pre><pre><code class="javascript">function test() &#123;    console.log(this.firstName + &quot; &quot; + this.lastName)&#125;var data = &#123;firstName: &quot;John&quot;, lastName: &quot;Doe&quot;&#125;test.bind(data)()  // John Doe</code></pre><hr><h2 id="ç†è§£-webpack"><a href="#ç†è§£-webpack" class="headerlink" title="ç†è§£ webpack"></a><font color=#FFB11B>ç†è§£ webpack</font></h2><p>æœ‰äº†ä»¥ä¸ŠçŸ¥è¯†åï¼Œæˆ‘ä»¬å†æ¥ç†è§£ä¸€ä¸‹æ¨¡å—åŒ–ç¼–ç¨‹ï¼Œä¹Ÿå°±æ˜¯å‰é¢æ‰€è¯´çš„ webpack å†™æ³•ï¼š</p><pre><code class="javascript">!function (allModule) &#123;    function useModule(whichModule) &#123;        allModule[whichModule].call(null, &quot;hello world!&quot;);    &#125;    useModule(0)&#125;([    function module0(param) &#123;console.log(&quot;module0: &quot; + param)&#125;,    function module1(param) &#123;console.log(&quot;module1: &quot; + param)&#125;,    function module2(param) &#123;console.log(&quot;module2: &quot; + param)&#125;,]);</code></pre><p>é¦–å…ˆï¼Œè¿™æ•´ä¸ªä»£ç æ˜¯ä¸€ä¸ª IIFE ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œä¼ é€’çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢åŒ…å«ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ <code>module0</code>ã€<code>module1</code> å’Œ <code>module2</code>ï¼Œå¯ä»¥å°†å…¶è§†ä¸ºä¸‰ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆ IIFE æ¥å—çš„å‚æ•° <code>allModule</code> å°±åŒ…å«è¿™ä¸‰ä¸ªæ¨¡å—ï¼ŒIIFE é‡Œé¢è¿˜åŒ…å«ä¸€ä¸ªå‡½æ•° <code>useModule()</code>ï¼Œå¯ä»¥å°†å…¶è§†ä¸ºæ¨¡å—åŠ è½½å™¨ï¼Œå³è¦ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œç¤ºä¾‹ä¸­ <code>useModule(0)</code> å³è¡¨ç¤ºè°ƒç”¨ç¬¬ä¸€ä¸ªæ¨¡å—ï¼Œå‡½æ•°é‡Œé¢ä½¿ç”¨ <code>call()</code> æ–¹æ³•æ”¹å˜å‡½æ•°ä¸­çš„ <code>this</code> æŒ‡å‘å¹¶ä¼ é€’å‚æ•°ï¼Œè°ƒç”¨ç›¸åº”çš„æ¨¡å—è¿›è¡Œè¾“å‡ºã€‚</p><hr><h2 id="æ”¹å†™-webpack"><a href="#æ”¹å†™-webpack" class="headerlink" title="æ”¹å†™ webpack"></a><font color=#FFB11B>æ”¹å†™ webpack</font></h2><p>å¯¹äºæˆ‘ä»¬çˆ¬è™«é€†å‘å½“ä¸­ç»å¸¸é‡åˆ°çš„ webpack æ¨¡å—åŒ–çš„å†™æ³•ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¯¹å…¶è¿›è¡Œæ”¹å†™ï¼Œä»¥ä¸‹ä»¥ä¸€æ®µåŠ å¯†ä»£ç ä¸ºä¾‹ï¼š</p><pre><code class="javascript">CryptoJS = require(&quot;crypto-js&quot;)!function (func) &#123;    function acvs() &#123;        var kk = func[1].call(null, 1e3);        var data = &#123;            r: &quot;I LOVE PYTHON&quot;,            e: kk,            i: &quot;62bs819idl00oac2&quot;,            k: &quot;0123456789abcdef&quot;        &#125;        return func[0].call(data);    &#125;    console.log(&quot;åŠ å¯†æ–‡æœ¬ï¼š&quot; + acvs())    function odsc(account) &#123;        var cr = false;        var regExp = /(^\d&#123;7,8&#125;$)|(^0\d&#123;10,12&#125;$)/;        if (regExp.test(account)) &#123;            cr = true;        &#125;        return cr;    &#125;    function mkle(account) &#123;        var cr = false;        var regExp = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]&#123;2,4&#125;)+$/;        if (regExp.test(account)) &#123;            cr = true;        &#125;        return cr;    &#125;&#125;([    function () &#123;        for (var n = &quot;&quot;, t = 0; t &lt; this.r.length; t++) &#123;            var o = this.e ^ this.r.charCodeAt(t);            n += String.fromCharCode(o)        &#125;        return encodeURIComponent(n)    &#125;,    function (x) &#123;        return Math.ceil(x * Math.random())    &#125;,    function (e) &#123;        var a = CryptoJS.MD5(this.k);        var c = CryptoJS.enc.Utf8.parse(a);        var d = CryptoJS.AES.encrypt(e, c, &#123;            iv: this.i        &#125;);        return d + &quot;&quot;    &#125;,    function (e) &#123;        var b = CryptoJS.MD5(this.k);        var d = CryptoJS.enc.Utf8.parse(b);        var a = CryptoJS.AES.decrypt(e, d, &#123;            iv: this.i        &#125;).toString(CryptoJS.enc.Utf8);        return a    &#125;]);</code></pre><p>å¯ä»¥çœ‹åˆ°å…³é”®çš„åŠ å¯†å…¥å£å‡½æ•°æ˜¯ <code>acvs()</code>ï¼Œ<code>acvs()</code> é‡Œé¢åˆè°ƒç”¨äº† IIFE å‚æ•°åˆ—è¡¨é‡Œé¢çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‡½æ•°ï¼Œå‰©ä¸‹çš„å…¶ä»–å‡½æ•°éƒ½æ˜¯å¹²æ‰°é¡¹ï¼Œè€Œç¬¬ä¸€ä¸ªå‡½æ•°ä¸­ç”¨åˆ°äº† r å’Œ e å‚æ•°ï¼Œå°†å…¶ç›´æ¥ä¼ å…¥å³å¯ï¼Œæœ€ç»ˆæ”¹å†™å¦‚ä¸‹ï¼š</p><pre><code class="javascript">function a(r, e) &#123;    for (var n = &quot;&quot;, t = 0; t &lt; r.length; t++) &#123;        var o = e ^ r.charCodeAt(t);        n += String.fromCharCode(o)    &#125;    return encodeURIComponent(n)&#125;function b(x) &#123;    return Math.ceil(x * Math.random())&#125;function acvs() &#123;    var kk = b(1e3);    var r = &quot;I LOVE PYTHON&quot;;    return a(r, kk);&#125;console.log(&quot;åŠ å¯†æ–‡æœ¬ï¼š&quot; + acvs())</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;&lt;font color=#FFB11B&gt;ç®€ä»‹&lt;/font&gt;&lt;/h2&gt;&lt;p&gt;åœ¨åˆ†æä¸€äº›ç«™ç‚¹çš„ JavaScript ä»£ç æ—¶ï¼Œæ¯”è¾ƒç®€å•çš„ä»£ç ï¼Œå‡½æ•°é€šå¸¸éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="webpack" scheme="https://www.itbob.cn/tags/webpack/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>çˆ¬è™«å¸¸è§åŠ å¯†è§£å¯†ç®—æ³•æ€»ç»“</title>
    <link href="https://www.itbob.cn/article/039/"/>
    <id>https://www.itbob.cn/article/039/</id>
    <published>2021-07-28T07:25:00.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æœ¬æ–‡æ€»ç»“äº†åœ¨çˆ¬è™«ä¸­å¸¸è§çš„å„ç§åŠ å¯†ç®—æ³•ã€ç¼–ç ç®—æ³•çš„åŸç†ã€åœ¨ JavaScript ä¸­å’Œ Python ä¸­çš„åŸºæœ¬å®ç°æ–¹æ³•ï¼Œé‡åˆ° JS åŠ å¯†çš„æ—¶å€™å¯ä»¥å¿«é€Ÿè¿˜åŸåŠ å¯†è¿‡ç¨‹ï¼Œæœ‰çš„ç½‘ç«™åœ¨åŠ å¯†çš„è¿‡ç¨‹ä¸­å¯èƒ½è¿˜ç»è¿‡äº†å…¶ä»–å¤„ç†ï¼Œä½†æ˜¯å¤§è‡´çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p><p>å¸¸è§åŠ å¯†ç®—æ³•ï¼š</p><ol><li>å¯¹ç§°åŠ å¯†ï¼ˆåŠ å¯†è§£å¯†å¯†é’¥ç›¸åŒï¼‰ï¼šDESã€3DESã€AESã€RC4ã€Rabbit</li><li>éå¯¹ç§°åŠ å¯†ï¼ˆåŒºåˆ†å…¬é’¥å’Œç§é’¥ï¼‰ï¼šRSAã€DSAã€ECC</li><li>æ¶ˆæ¯æ‘˜è¦ç®—æ³•/ç­¾åç®—æ³•ï¼šMD5ã€SHAã€HMACã€PBKDF2</li></ol><p>å¸¸è§ç¼–ç ç®—æ³•ï¼šBase64</p><h3 id="JavaScript-åŠ å¯†è§£å¯†æ¨¡å—"><a href="#JavaScript-åŠ å¯†è§£å¯†æ¨¡å—" class="headerlink" title="JavaScript åŠ å¯†è§£å¯†æ¨¡å—"></a>JavaScript åŠ å¯†è§£å¯†æ¨¡å—</h3><h4 id="Crypto-JS"><a href="#Crypto-JS" class="headerlink" title="Crypto-JS"></a>Crypto-JS</h4><p>Crypto-JS æ”¯æŒ MD5ã€SHAã€RIPEMD-160ã€HMACã€PBKDF2ã€AESã€DESã€3DESï¼ˆTriple DESï¼‰ã€Rabbitã€RC4 ç­‰ï¼Œ<strong>ä¸æ”¯æŒ RSAã€ECC</strong>ï¼Œæ˜¯åº”ç”¨æ¯”è¾ƒå¹¿çš„åŠ å¯†æ¨¡å—ï¼Œä½¿ç”¨å‘½ä»¤ <code>npm install crypto-js</code> å®‰è£…ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><p>Crypto-JS æ–‡æ¡£ï¼š<a href="https://cryptojs.gitbook.io/docs/">https://cryptojs.gitbook.io/docs/</a></p></li><li><p>Crypto-JS Githubï¼š<a href="https://github.com/brix/crypto-js">https://github.com/brix/crypto-js</a></p></li></ul><h4 id="Node-RSA"><a href="#Node-RSA" class="headerlink" title="Node-RSA"></a>Node-RSA</h4><p>Node-RSA å¯¹  RSA ç®—æ³•æä¾›äº†æ”¯æŒï¼Œä½¿ç”¨å‘½ä»¤ <code>npm install node-rsa </code> å®‰è£…ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼šNode-RSA Githubï¼š<a href="https://github.com/rzcoder/node-rsa">https://github.com/rzcoder/node-rsa</a></p><h4 id="JSEncrypt"><a href="#JSEncrypt" class="headerlink" title="JSEncrypt"></a>JSEncrypt</h4><p>å‚è€ƒèµ„æ–™ï¼šJSEncrypt å¯¹  RSA ç®—æ³•æä¾›äº†æ›´åŠ å…¨é¢çš„æ”¯æŒï¼Œä½¿ç”¨å‘½ä»¤ <code>npm install jsencrypt </code> å®‰è£…ã€‚</p><ul><li>JSEncrypt æ–‡æ¡£ï¼š<a href="http://travistidwell.com/jsencrypt/">http://travistidwell.com/jsencrypt/</a></li><li>JSEncrypt Githubï¼š<a href="https://github.com/travist/jsencrypt">https://github.com/travist/jsencrypt</a></li></ul><h3 id="Python-åŠ å¯†è§£å¯†åº“"><a href="#Python-åŠ å¯†è§£å¯†åº“" class="headerlink" title="Python åŠ å¯†è§£å¯†åº“"></a>Python åŠ å¯†è§£å¯†åº“</h3><h4 id="Cryptodome-amp-Crypto"><a href="#Cryptodome-amp-Crypto" class="headerlink" title="Cryptodome &amp; Crypto"></a>Cryptodome &amp; Crypto</h4><p>åœ¨ Python ä¸­æœ‰å¾ˆå¤šç®—æ³•æ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹åº“ Cryptodome æˆ–è€… Crypto æ¥å®ç°çš„ï¼ŒCryptodome å‡ ä¹æ˜¯ Crypto çš„æ›¿ä»£å“ï¼ŒCrypto å·²ç»åœæ­¢æ›´æ–°å¥½å¤šå¹´äº†ï¼Œæœ‰å¾ˆå¤šæœªçŸ¥é”™è¯¯ï¼Œæ‰€ä»¥<strong>ä¸å»ºè®®å®‰è£… Crypto ï¼</strong></p><p>Cryptodome æ”¯æŒå‡ ä¹æ‰€æœ‰ä¸»æµåŠ å¯†ç®—æ³•ï¼ŒåŒ…æ‹¬ MD5ã€SHAã€BLAKE2bã€BLAKE2sã€HMACã€PBKDF2ã€AESã€DESã€3DESï¼ˆTriple DESï¼‰ã€ECCã€RSAã€RC4 ç­‰ã€‚</p><p>Cryptodome ä½¿ç”¨å‘½ä»¤ <code>pip install pycryptodome</code> è¿›è¡Œå®‰è£…ï¼ŒCrypto ä½¿ç”¨å‘½ä»¤ <code>pip install pycrypto </code> è¿›è¡Œå®‰è£…ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><p>Crypto åº“ï¼š<a href="https://www.dlitz.net/software/pycrypto/">https://www.dlitz.net/software/pycrypto/</a></p></li><li><p>Cryptodome åº“ï¼š<a href="https://www.pycryptodome.org/en/latest/">https://www.pycryptodome.org/en/latest/</a></p></li></ul><h4 id="Hashlib"><a href="#Hashlib" class="headerlink" title="Hashlib"></a>Hashlib</h4><p>Python çš„æ ‡å‡†åº“ hashlib æä¾›äº†å¸¸è§çš„æ‘˜è¦ç®—æ³•ï¼Œå¦‚ MD5ï¼ŒSHAã€BLAKE2bã€BLAKE2s ç­‰ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>hashlib åº“ï¼š<a href="https://docs.python.org/3/library/hashlib.html">https://docs.python.org/3/library/hashlib.html</a></li><li>å»–é›ªå³° hashlibï¼š<a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017686752491744">https://www.liaoxuefeng.com/wiki/1016959663602400/1017686752491744</a></li></ul><h4 id="HMAC"><a href="#HMAC" class="headerlink" title="HMAC"></a>HMAC</h4><p>Python çš„æ ‡å‡†åº“ hmac å¯¹ HMAC ç®—æ³•æä¾›äº†æ”¯æŒã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>hmac åº“ï¼š<a href="https://docs.python.org/3/library/hmac.html">https://docs.python.org/3/library/hmac.html</a></li><li>å»–é›ªå³° hmacï¼š<a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1183198304823296">https://www.liaoxuefeng.com/wiki/1016959663602400/1183198304823296</a></li></ul><h4 id="pyDes"><a href="#pyDes" class="headerlink" title="pyDes"></a>pyDes</h4><p>Python çš„ç¬¬ä¸‰æ–¹åº“ pyDes å¯¹ DES ç®—æ³•æä¾›äº†æ”¯æŒã€‚ä½¿ç”¨å‘½ä»¤ <code>pip install pydes</code> è¿›è¡Œå®‰è£…ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼špyDes åº“ï¼š<a href="https://github.com/twhiteman/pyDes">https://github.com/twhiteman/pyDes</a></p><h4 id="ESA"><a href="#ESA" class="headerlink" title="ESA"></a>ESA</h4><p>Python çš„ç¬¬ä¸‰æ–¹åº“ rsa å¯¹ RSA ç®—æ³•æä¾›äº†æ”¯æŒã€‚ä½¿ç”¨å‘½ä»¤ <code>pip install rsa</code> è¿›è¡Œå®‰è£…ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼šrsa åº“ï¼š<a href="https://stuvel.eu/python-rsa-doc/">https://stuvel.eu/python-rsa-doc/</a></p><h2 id="åŠ å¯†è§£å¯†åŸºæœ¬å‚æ•°"><a href="#åŠ å¯†è§£å¯†åŸºæœ¬å‚æ•°" class="headerlink" title="åŠ å¯†è§£å¯†åŸºæœ¬å‚æ•°"></a>åŠ å¯†è§£å¯†åŸºæœ¬å‚æ•°</h2><p>åœ¨ä¸€äº›å¯¹ç§°å’Œéå¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼šåˆå§‹å‘é‡ ivã€åŠ å¯†æ¨¡å¼ modeã€å¡«å……æ–¹å¼ paddingï¼Œå…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸‰ä¸ªå‚æ•°çš„å«ä¹‰å’Œä½œç”¨ï¼š</p><h3 id="åˆå§‹å‘é‡-iv"><a href="#åˆå§‹å‘é‡-iv" class="headerlink" title="åˆå§‹å‘é‡ iv"></a>åˆå§‹å‘é‡ iv</h3><p>åœ¨å¯†ç å­¦ä¸­ï¼Œåˆå§‹å‘é‡ï¼ˆinitialization vectorï¼Œç¼©å†™ä¸º ivï¼‰ï¼Œåˆç§°åˆå§‹å˜æ•°ï¼ˆstarting variableï¼Œç¼©å†™ä¸º svï¼‰ï¼Œä¸å¯†é’¥ç»“åˆä½¿ç”¨ï¼Œä½œä¸ºåŠ å¯†æ•°æ®çš„æ‰‹æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å€¼ï¼Œiv çš„é•¿åº¦å–å†³äºåŠ å¯†æ–¹æ³•ï¼Œé€šå¸¸ä¸ä½¿ç”¨çš„åŠ å¯†å¯†é’¥æˆ–å¯†ç å—çš„é•¿åº¦ç›¸å½“ï¼Œä¸€èˆ¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šè¦æ±‚å®ƒæ˜¯éšæœºæ•°æˆ–æ‹Ÿéšæœºæ•°ï¼Œä½¿ç”¨éšæœºæ•°äº§ç”Ÿçš„åˆå§‹å‘é‡æ‰èƒ½è¾¾åˆ°è¯­ä¹‰å®‰å…¨ï¼Œè®©æ”»å‡»è€…éš¾ä»¥å¯¹åŸæ–‡ä¸€è‡´ä¸”ä½¿ç”¨åŒä¸€æŠŠå¯†é’¥ç”Ÿæˆçš„å¯†æ–‡è¿›è¡Œç ´è§£ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼šç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Initialization_vector">https://en.wikipedia.org/wiki/Initialization_vector</a></p><h3 id="åŠ å¯†æ¨¡å¼-mode"><a href="#åŠ å¯†æ¨¡å¼-mode" class="headerlink" title="åŠ å¯†æ¨¡å¼ mode"></a>åŠ å¯†æ¨¡å¼ mode</h3><p>ç›®å‰æµè¡Œçš„åŠ å¯†å’Œæ•°å­—è®¤è¯ç®—æ³•ï¼Œéƒ½æ˜¯é‡‡ç”¨å—åŠ å¯†æ–¹å¼ï¼Œå°±æ˜¯å°†éœ€è¦åŠ å¯†çš„æ˜æ–‡åˆ†æˆå›ºå®šå¤§å°çš„æ•°æ®å—ï¼Œç„¶åå¯¹å…¶æ‰§è¡Œå¯†ç ç®—æ³•ï¼Œå¾—åˆ°å¯†æ–‡ã€‚æ•°æ®å—çš„å¤§å°é€šå¸¸é‡‡ç”¨è·Ÿå¯†é’¥ä¸€æ ·çš„é•¿åº¦ã€‚åŠ å¯†æ¨¡å¼åœ¨åŠ å¯†ç®—æ³•çš„åŸºç¡€ä¸Šå‘å±•å‡ºæ¥ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç‹¬ç«‹äºåŠ å¯†ç®—æ³•è€Œå­˜åœ¨ï¼ŒåŠ å¯†æ¨¡å¼å®šä¹‰äº†æ€æ ·é€šè¿‡é‡å¤åˆ©ç”¨åŠ å¯†ç®—æ³•å°†å¤§äºä¸€ä¸ªæ•°æ®å—å¤§å°çš„æ˜æ–‡è½¬åŒ–ä¸ºå¯†æ–‡ï¼Œæè¿°äº†åŠ å¯†æ¯ä¸€æ•°æ®å—çš„è¿‡ç¨‹ã€‚ç›®å‰åˆ©ç”¨è¾ƒå¤šçš„åŠ å¯†æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p><strong>ECBï¼šElectronic Code Bookï¼ˆç”µå­ç æœ¬æ¨¡å¼ï¼‰</strong>ï¼Œæ˜¯ä¸€ç§åŸºç¡€çš„åŠ å¯†æ–¹å¼ï¼Œå¯†æ–‡è¢«åˆ†å‰²æˆåˆ†ç»„é•¿åº¦ç›¸ç­‰çš„å—ï¼ˆä¸è¶³è¡¥é½ï¼‰ï¼Œç„¶åå•ç‹¬ä¸€ä¸ªä¸ªåŠ å¯†ï¼Œä¸€ä¸ªä¸ªè¾“å‡ºç»„æˆå¯†æ–‡ã€‚</p></li><li><p><strong>CBCï¼šCipher Block Chainingï¼ˆå¯†ç å—é“¾æ¥æ¨¡å¼ï¼‰</strong>ï¼Œæ˜¯ä¸€ç§å¾ªç¯æ¨¡å¼ï¼Œå‰ä¸€ä¸ªåˆ†ç»„çš„å¯†æ–‡å’Œå½“å‰åˆ†ç»„çš„æ˜æ–‡å¼‚æˆ–æ“ä½œåå†åŠ å¯†ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å¢å¼ºç ´è§£éš¾åº¦ã€‚</p></li><li><p><strong>PCBCï¼šPropagating Cipher Block Chainingï¼ˆå¡«å……å¯†ç å—é“¾æ¥æ¨¡å¼ï¼‰</strong>ï¼Œä¹Ÿç§°ä¸ºæ˜æ–‡å¯†ç å—é“¾æ¥æ¨¡å¼ï¼ˆPlaintext Cipher Block Chainingï¼‰ï¼Œæ˜¯ä¸€ç§å¯ä»¥ä½¿å¯†æ–‡ä¸­çš„å¾®å°æ›´æ”¹åœ¨è§£å¯†æ—¶å¯¼è‡´æ˜æ–‡å¤§éƒ¨åˆ†é”™è¯¯çš„æ¨¡å¼ï¼Œå¹¶åœ¨åŠ å¯†çš„æ—¶å€™ä¹Ÿå…·æœ‰åŒæ ·çš„ç‰¹æ€§ã€‚</p></li><li><p><strong>CFBï¼šCipher Feedbackï¼ˆå¯†ç åé¦ˆæ¨¡å¼ï¼‰</strong>ï¼Œå¯ä»¥å°†å—å¯†ç å˜ä¸ºè‡ªåŒæ­¥çš„æµå¯†ç ï¼Œç±»ä¼¼äº CBCï¼ŒCFB çš„è§£å¯†è¿‡ç¨‹å‡ ä¹å°±æ˜¯é¢ å€’çš„ CBC çš„åŠ å¯†è¿‡ç¨‹ã€‚</p></li><li><p><strong>OFBï¼šOutput Feedbackï¼ˆè¾“å‡ºåé¦ˆæ¨¡å¼ï¼‰</strong>ï¼Œå¯ä»¥å°†å—å¯†ç å˜æˆåŒæ­¥çš„æµå¯†ç ï¼Œå®ƒäº§ç”Ÿå¯†é’¥æµçš„å—ï¼Œç„¶åå°†å…¶ä¸æ˜æ–‡å—è¿›è¡Œå¼‚æˆ–ï¼Œå¾—åˆ°å¯†æ–‡ã€‚ä¸å…¶å®ƒæµå¯†ç ä¸€æ ·ï¼Œå¯†æ–‡ä¸­ä¸€ä¸ªä½çš„ç¿»è½¬ä¼šä½¿æ˜æ–‡ä¸­åŒæ ·ä½ç½®çš„ä½ä¹Ÿäº§ç”Ÿç¿»è½¬ã€‚</p></li><li><p><strong>CTRï¼šCounter modeï¼ˆè®¡æ•°å™¨æ¨¡å¼ï¼‰</strong>ï¼Œä¹Ÿè¢«ç§°ä¸º ICM æ¨¡å¼ï¼ˆInteger Counter Modeï¼Œæ•´æ•°è®¡æ•°æ¨¡å¼ï¼‰å’Œ SIC æ¨¡å¼ï¼ˆSegmented Integer Counterï¼‰ï¼Œåœ¨ CTR æ¨¡å¼ä¸­ï¼Œæœ‰ä¸€ä¸ªè‡ªå¢çš„ç®—å­ï¼Œè¿™ä¸ªç®—å­ç”¨å¯†é’¥åŠ å¯†ä¹‹åçš„è¾“å‡ºå’Œæ˜æ–‡å¼‚æˆ–çš„ç»“æœå¾—åˆ°å¯†æ–‡ï¼Œç›¸å½“äºä¸€æ¬¡ä¸€å¯†ã€‚è¿™ç§åŠ å¯†æ–¹å¼ç®€å•å¿«é€Ÿï¼Œå®‰å…¨å¯é ï¼Œè€Œä¸”å¯ä»¥å¹¶è¡ŒåŠ å¯†ï¼Œä½†æ˜¯åœ¨è®¡ç®—å™¨ä¸èƒ½ç»´æŒå¾ˆé•¿çš„æƒ…å†µä¸‹ï¼Œå¯†é’¥åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚</p></li></ul><p>å‚è€ƒèµ„æ–™ï¼šç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation">https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation</a></p><h3 id="å¡«å……æ–¹å¼-padding"><a href="#å¡«å……æ–¹å¼-padding" class="headerlink" title="å¡«å……æ–¹å¼ padding"></a>å¡«å……æ–¹å¼ padding</h3><p>å—å¯†ç åªèƒ½å¯¹ç¡®å®šé•¿åº¦çš„æ•°æ®å—è¿›è¡Œå¤„ç†ï¼Œè€Œæ¶ˆæ¯çš„é•¿åº¦é€šå¸¸æ˜¯å¯å˜çš„ã€‚å› æ­¤éƒ¨åˆ†æ¨¡å¼æœ€åä¸€å—æ•°æ®åœ¨åŠ å¯†å‰éœ€è¦è¿›è¡Œå¡«å……ã€‚æœ‰æ•°ç§å¡«å……æ–¹æ³•ï¼Œå…¶ä¸­æœ€ç®€å•çš„ä¸€ç§æ˜¯åœ¨æ˜æ–‡çš„æœ€åå¡«å……ç©ºå­—ç¬¦ä»¥ä½¿å…¶é•¿åº¦ä¸ºå—é•¿åº¦çš„æ•´æ•°å€ã€‚å¸¸è§å¡«å……æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p><strong>PKCS7</strong>ï¼šåœ¨å¡«å……æ—¶é¦–å…ˆè·å–éœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦ = å—é•¿åº¦ - ï¼ˆæ•°æ®é•¿åº¦ % å—é•¿åº¦ï¼‰, åœ¨å¡«å……å­—èŠ‚åºåˆ—ä¸­æ‰€æœ‰å­—èŠ‚å¡«å……ä¸ºéœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦å€¼ã€‚</p></li><li><p><strong>PKCS5</strong>ï¼šPKCS5 ä½œä¸º PKCS7 çš„å­é›†ç®—æ³•ï¼Œæ¦‚å¿µä¸Šæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯åœ¨ blockSize ä¸Šå›ºå®šä¸º 8 bytesï¼Œå³å—å¤§å°å›ºå®šä¸º 8 å­—èŠ‚ã€‚</p></li><li><p><strong>ZeroPadding</strong>ï¼šåœ¨å¡«å……æ—¶é¦–å…ˆè·å–éœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦ = å—é•¿åº¦ - ï¼ˆæ•°æ®é•¿åº¦ % å—é•¿åº¦ï¼‰, åœ¨å¡«å……å­—èŠ‚åºåˆ—ä¸­æ‰€æœ‰å­—èŠ‚å¡«å……ä¸º 0 ã€‚</p></li><li><p><strong>ISO10126</strong>ï¼šåœ¨å¡«å……æ—¶é¦–å…ˆè·å–éœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦ = å—é•¿åº¦ - ï¼ˆæ•°æ®é•¿åº¦ % å—é•¿åº¦ï¼‰ï¼Œåœ¨å¡«å……å­—èŠ‚åºåˆ—ä¸­æœ€åä¸€ä¸ªå­—èŠ‚å¡«å……ä¸ºéœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦å€¼ï¼Œå¡«å……å­—èŠ‚ä¸­å…¶ä½™å­—èŠ‚å‡å¡«å……éšæœºæ•°å€¼ã€‚</p></li><li><p><strong>ANSIX923</strong>ï¼šåœ¨å¡«å……æ—¶é¦–å…ˆè·å–éœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦ = å—é•¿åº¦ - ï¼ˆæ•°æ®é•¿åº¦ % å—é•¿åº¦ï¼‰ï¼Œåœ¨å¡«å……å­—èŠ‚åºåˆ—ä¸­æœ€åä¸€ä¸ªå­—èŠ‚å¡«å……ä¸ºéœ€è¦å¡«å……çš„å­—èŠ‚é•¿åº¦å€¼ï¼Œå¡«å……å­—èŠ‚ä¸­å…¶ä½™å­—èŠ‚å‡å¡«å……æ•°å­—é›¶ã€‚</p></li></ul><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Padding_(cryptography)">https://en.wikipedia.org/wiki/Padding_(cryptography)</a></li><li>PKCS7/PKCS5 å¡«å……ç®—æ³•ï¼š<a href="https://segmentfault.com/a/1190000019793040">https://segmentfault.com/a/1190000019793040</a></li></ul><h2 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h2><p>ç®€ä»‹ï¼šBase64 æ˜¯ä¸€ç§ç”¨ 64 ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä»»æ„äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>Base64 ç™¾åº¦ç™¾ç§‘ï¼š<a href="https://baike.baidu.com/item/base64/8545775">https://baike.baidu.com/item/base64/8545775</a></li><li>Base64 ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Base64">https://en.wikipedia.org/wiki/Base64</a></li></ul><h3 id="JavaScript-å®ç°"><a href="#JavaScript-å®ç°" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function base64Encode() &#123;    var srcs = CryptoJS.enc.Utf8.parse(text);    var encodeData = CryptoJS.enc.Base64.stringify(srcs);    return encodeData&#125;function base64Decode() &#123;    var srcs = CryptoJS.enc.Base64.parse(encodeData);    var decodeData = srcs.toString(CryptoJS.enc.Utf8);    return decodeData&#125;var text = &quot;I love Python!&quot;var encodeData = base64Encode()var decodeData = base64Decode()console.log(&quot;Base64 ç¼–ç : &quot;, encodeData)console.log(&quot;Base64 è§£ç : &quot;, decodeData)// Base64 ç¼–ç :  SSBsb3ZlIFB5dGhvbiE=// Base64 è§£ç :  I love Python!</code></pre><h3 id="Python-å®ç°"><a href="#Python-å®ç°" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import base64def base64_encode(text):    encode_data = base64.b64encode(text.encode())    return encode_datadef base64_decode(encode_data):    decode_data = base64.b64decode(encode_data)    return decode_dataif __name__ == &#39;__main__&#39;:    text = &#39;I love Python!&#39;    encode_data = base64_encode(text)    decode_data = base64_decode(encode_data)    print(&#39;Base64 ç¼–ç ï¼š&#39;, encode_data)    print(&#39;Base64 è§£ç ï¼š&#39;, decode_data)# Base64 ç¼–ç ï¼š b&#39;SSBsb3ZlIFB5dGhvbiE=&#39;# Base64 è§£ç ï¼š b&#39;I love Python!&#39;</code></pre><h2 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h2><p>ç®€ä»‹ï¼šå…¨ç§° MD5 æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼ˆè‹±æ–‡åç§°ï¼šMD5 Message-Digest Algorithmï¼‰ï¼Œåˆç§°å“ˆå¸Œç®—æ³•ã€æ•£åˆ—ç®—æ³•ï¼Œç”±ç¾å›½å¯†ç å­¦å®¶ç½—çº³å¾·Â·æç»´æ–¯ç‰¹ï¼ˆRonald Linn Rivestï¼‰è®¾è®¡ï¼Œäº 1992 å¹´ä½œä¸º RFC 1321 è¢«å…¬å¸ƒï¼Œç”¨ä»¥å–ä»£ MD4 ç®—æ³•ã€‚æ‘˜è¦ç®—æ³•æ˜¯å•å‘åŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜æ–‡é€šè¿‡æ‘˜è¦ç®—æ³•åŠ å¯†ä¹‹åï¼Œæ˜¯ä¸èƒ½è§£å¯†çš„ã€‚æ‘˜è¦ç®—æ³•çš„ç¬¬äºŒä¸ªç‰¹ç‚¹å¯†æ–‡æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªé•¿åº¦å›ºå®šçš„æ•°æ®ä¸²ï¼ˆé€šå¸¸ç”¨16è¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ã€‚ä¹‹æ‰€ä»¥å«æ‘˜è¦ç®—æ³•ï¼Œå®ƒçš„ç®—æ³•å°±æ˜¯æå–æ˜æ–‡é‡è¦çš„ç‰¹å¾ã€‚æ‰€ä»¥ï¼Œä¸¤ä¸ªä¸åŒçš„æ˜æ–‡ï¼Œä½¿ç”¨äº†æ‘˜è¦ç®—æ³•ä¹‹åï¼Œæœ‰å¯èƒ½ä»–ä»¬çš„å¯†æ–‡æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™ä¸ªæ¦‚ç‡éå¸¸çš„ä½ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 1321ï¼š<a href="https://datatracker.ietf.org/doc/rfc1321/">https://datatracker.ietf.org/doc/rfc1321/</a></li><li>MD5 ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/MD5">https://en.wikipedia.org/wiki/MD5</a></li></ul><h3 id="JavaScript-å®ç°-1"><a href="#JavaScript-å®ç°-1" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function MD5Test() &#123;    var text = &quot;I love python!&quot;    return CryptoJS.MD5(text).toString()&#125;console.log(MD5Test())  // 21169ee3acd4a24e1fcb4322cfd9a2b8</code></pre><h3 id="Python-å®ç°-1"><a href="#Python-å®ç°-1" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import hashlibdef md5_test1():    md5 = hashlib.new(&#39;md5&#39;, &#39;I love python!&#39;.encode(&#39;utf-8&#39;))    print(md5.hexdigest())def md5_test2():    md5 = hashlib.md5()    md5.update(&#39;I love &#39;.encode(&#39;utf-8&#39;))    md5.update(&#39;python!&#39;.encode(&#39;utf-8&#39;))    print(md5.hexdigest())if __name__ == &#39;__main__&#39;:    md5_test1()  # 21169ee3acd4a24e1fcb4322cfd9a2b8    md5_test2()  # 21169ee3acd4a24e1fcb4322cfd9a2b8</code></pre><h2 id="PBKDF2"><a href="#PBKDF2" class="headerlink" title="PBKDF2"></a>PBKDF2</h2><p>ç®€ä»‹ï¼šè‹±æ–‡åç§°ï¼šPassword-Based Key Derivation Function 2ï¼ŒPBKDF2 æ˜¯ RSA å®éªŒå®¤çš„å…¬é’¥åŠ å¯†æ ‡å‡†ï¼ˆPKCSï¼‰ç³»åˆ—çš„ä¸€éƒ¨åˆ†ï¼Œ2017 å¹´å‘å¸ƒçš„ RFC 8018 ï¼ˆPKCS #5 v2.1ï¼‰æ¨èä½¿ç”¨ PBKDF2 è¿›è¡Œå¯†ç æ•£åˆ—ã€‚PBKDF2 å°†ä¼ªéšæœºå‡½æ•°ï¼ˆä¾‹å¦‚ HMACï¼‰ï¼ŒæŠŠæ˜æ–‡å’Œä¸€ä¸ªç›å€¼ï¼ˆsaltï¼‰ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç„¶åè¿›è¡Œé‡å¤è¿ç®—ï¼Œå¹¶æœ€ç»ˆäº§ç”Ÿå¯†é’¥ï¼Œå¦‚æœé‡å¤çš„æ¬¡æ•°è¶³å¤Ÿå¤§ï¼Œç ´è§£çš„æˆæœ¬å°±ä¼šå˜å¾—å¾ˆé«˜ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 8018ï¼š<a href="https://datatracker.ietf.org/doc/rfc8018/">https://datatracker.ietf.org/doc/rfc8018/</a></li><li>PBKDF2 ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/PBKDF2">https://en.wikipedia.org/wiki/PBKDF2</a></li></ul><h3 id="JavaScript-å®ç°-2"><a href="#JavaScript-å®ç°-2" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function pbkdf2Encrypt() &#123;    var text = &quot;I love Python!&quot;    var salt = &quot;43215678&quot;    // key é•¿åº¦ 128ï¼Œ10 æ¬¡é‡å¤è¿ç®—    var encryptedData = CryptoJS.PBKDF2(text, salt, &#123;keySize: 128/32,iterations: 10&#125;);    return encryptedData.toString()&#125;console.log(pbkdf2Encrypt())  // 7fee6e8350cfe96314c76aaa6e853a50</code></pre><h3 id="Python-å®ç°-2"><a href="#Python-å®ç°-2" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import binasciifrom Cryptodome.Hash import SHA1from Cryptodome.Protocol.KDF import PBKDF2text = &#39;I love Python!&#39;salt = b&#39;43215678&#39;result = PBKDF2(text,  salt, count=10, hmac_hash_module=SHA1)result = binascii.hexlify(result)print(result)# b&#39;7fee6e8350cfe96314c76aaa6e853a50&#39;</code></pre><h2 id="SHA"><a href="#SHA" class="headerlink" title="SHA"></a>SHA</h2><p>ç®€ä»‹ï¼šå…¨ç§°å®‰å…¨å“ˆå¸Œç®—æ³•ï¼ˆè‹±æ–‡åç§°ï¼šSecure Hash Algorithmï¼‰ï¼Œç”±ç¾å›½å›½å®¶å®‰å…¨å±€ï¼ˆNSAï¼‰æ‰€è®¾è®¡ï¼Œä¸»è¦é€‚ç”¨äºæ•°å­—ç­¾åæ ‡å‡†ï¼ˆDigital Signature Standard DSSï¼‰é‡Œé¢å®šä¹‰çš„æ•°å­—ç­¾åç®—æ³•ï¼ˆDigital Signature Algorithm DSAï¼‰ï¼ŒSHA é€šå¸¸æŒ‡ SHA å®¶æ—çš„äº”ä¸ªç®—æ³•ï¼Œåˆ†åˆ«æ˜¯ SHA-1ã€SHA-224ã€SHA-256ã€SHA-384ã€SHA-512ï¼Œåå››è€…æœ‰æ—¶å¹¶ç§°ä¸º SHA-2ï¼ŒSHA æ˜¯æ¯” MD5 æ›´å®‰å…¨ä¸€ç‚¹çš„æ‘˜è¦ç®—æ³•ï¼ŒMD5 çš„å¯†æ–‡æ˜¯ 32 ä½ï¼Œè€Œ SHA-1 æ˜¯ 40 ä½ï¼Œç‰ˆæœ¬è¶Šå¼ºï¼Œå¯†æ–‡è¶Šé•¿ï¼Œä»£ä»·æ˜¯é€Ÿåº¦è¶Šæ…¢ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 3174ï¼š<a href="https://datatracker.ietf.org/doc/rfc3174/">https://datatracker.ietf.org/doc/rfc3174/</a></li><li>SHA ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Secure_Hash_Algorithms">https://en.wikipedia.org/wiki/Secure_Hash_Algorithms</a></li></ul><h3 id="JavaScript-å®ç°-3"><a href="#JavaScript-å®ç°-3" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function SHA1Encrypt() &#123;    var text = &quot;I love python!&quot;    return CryptoJS.SHA1(text).toString();&#125;console.log(SHA1Encrypt())  // 23c02b203bd2e2ca19da911f1d270a06d86719fb</code></pre><h3 id="Python-å®ç°-3"><a href="#Python-å®ç°-3" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import hashlibdef sha1_test1():    sha1 = hashlib.new(&#39;sha1&#39;, &#39;I love python!&#39;.encode(&#39;utf-8&#39;))    print(sha1.hexdigest())def sha1_test2():    sha1 = hashlib.sha1()    sha1.update(&#39;I love python!&#39;.encode(&#39;utf-8&#39;))    print(sha1.hexdigest())if __name__ == &#39;__main__&#39;:    sha1_test1()  # 23c02b203bd2e2ca19da911f1d270a06d86719fb    sha1_test2()  # 23c02b203bd2e2ca19da911f1d270a06d86719fb</code></pre><h2 id="HMAC-1"><a href="#HMAC-1" class="headerlink" title="HMAC"></a>HMAC</h2><p>ç®€ä»‹ï¼šå…¨ç§°æ•£åˆ—æ¶ˆæ¯è®¤è¯ç ã€å¯†é’¥ç›¸å…³çš„å“ˆå¸Œè¿ç®—æ¶ˆæ¯è®¤è¯ç ï¼ˆè‹±æ–‡åç§°ï¼šHash-based Message Authentication Code æˆ–è€… Keyed-hash Message Authentication Codeï¼‰ï¼Œäº 1996 å¹´æå‡ºï¼Œ1997 å¹´ä½œä¸º RFC 2104 è¢«å…¬å¸ƒï¼ŒHMAC åŠ å¯†ç®—æ³•æ˜¯ä¸€ç§å®‰å…¨çš„åŸºäºåŠ å¯† Hash å‡½æ•°å’Œå…±äº«å¯†é’¥çš„æ¶ˆæ¯è®¤è¯åè®®ï¼Œå®ƒè¦æ±‚é€šä¿¡åŒæ–¹å…±äº«å¯†é’¥ keyã€çº¦å®šç®—æ³•ã€å¯¹æŠ¥æ–‡è¿›è¡Œ Hash è¿ç®—ï¼Œå½¢æˆå›ºå®šé•¿åº¦çš„è®¤è¯ç ã€‚é€šä¿¡åŒæ–¹é€šè¿‡è®¤è¯ç çš„æ ¡éªŒæ¥ç¡®å®šæŠ¥æ–‡çš„åˆæ³•æ€§ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 2104ï¼š<a href="https://datatracker.ietf.org/doc/rfc2104/">https://datatracker.ietf.org/doc/rfc2104/</a></li><li>HMAC ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/HMAC">https://en.wikipedia.org/wiki/HMAC</a></li></ul><h3 id="JavaScript-å®ç°-4"><a href="#JavaScript-å®ç°-4" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function HMACEncrypt() &#123;    var text = &quot;I love python!&quot;    var key = &quot;secret&quot;    return CryptoJS.HmacMD5(text, key).toString();    // return CryptoJS.HmacSHA1(text, key).toString();    // return CryptoJS.HmacSHA256(text, key).toString();&#125;console.log(HMACEncrypt())</code></pre><h3 id="Python-å®ç°-4"><a href="#Python-å®ç°-4" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import hmacdef hmac_test1():    message = b&#39;I love python!&#39;    key = b&#39;secret&#39;    md5 = hmac.new(key, message, digestmod=&#39;MD5&#39;)    print(md5.hexdigest())def hmac_test2():    key = &#39;secret&#39;.encode(&#39;utf8&#39;)    sha1 = hmac.new(key, digestmod=&#39;sha1&#39;)    sha1.update(&#39;I love &#39;.encode(&#39;utf8&#39;))    sha1.update(&#39;Python!&#39;.encode(&#39;utf8&#39;))    print(sha1.hexdigest())if __name__ == &#39;__main__&#39;:    hmac_test1()  # 9c503a1f852edcc3526ea56976c38edf    hmac_test2()  # 2d8449a4292d4bbeed99ce9ea570880d6e19b61a</code></pre><h2 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h2><p>ç®€ä»‹ï¼šå…¨ç§°æ•°æ®åŠ å¯†æ ‡å‡†ï¼ˆè‹±æ–‡åç§°ï¼šData Encryption Standardï¼‰ï¼ŒåŠ å¯†ä¸è§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ï¼Œå±äºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œ1977 å¹´è¢«ç¾å›½è”é‚¦æ”¿åºœçš„å›½å®¶æ ‡å‡†å±€ç¡®å®šä¸ºè”é‚¦èµ„æ–™å¤„ç†æ ‡å‡†ï¼ˆFIPSï¼‰ï¼ŒDES æ˜¯ä¸€ä¸ªåˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œä½¿ç”¨ 56 ä½çš„å¯†é’¥ï¼ˆä¸€èˆ¬è®¤ä¸ºå¯†é’¥æ˜¯ 64 ä½ï¼Œä½†æ˜¯å¯†é’¥çš„æ¯ä¸ªç¬¬ 8 ä½è®¾ç½®ä¸ºå¥‡å¶æ ¡éªŒä½ï¼Œæ‰€ä»¥å®é™…ä¸Šæœ‰æ•ˆä½åªæœ‰ 56 ä½ï¼‰ï¼Œç”±äº 56 ä½å¯†é’¥é•¿åº¦ç›¸å¯¹è¾ƒçŸ­ï¼Œæ‰€ä»¥ DES æ˜¯ä¸å®‰å…¨çš„ï¼Œç°åœ¨åŸºæœ¬ä¸Šå·²è¢«æ›´é«˜çº§çš„åŠ å¯†æ ‡å‡† AES å–ä»£ã€‚</p><ul><li>mode æ”¯æŒï¼šCBCï¼ŒCFBï¼ŒCTRï¼ŒCTRGladmanï¼ŒECBï¼ŒOFB ç­‰ã€‚</li><li>padding æ”¯æŒï¼šZeroPaddingï¼ŒNoPaddingï¼ŒAnsiX923ï¼ŒIso10126ï¼ŒIso97971ï¼ŒPkcs7 ç­‰ã€‚</li></ul><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 4772ï¼š<a href="https://datatracker.ietf.org/doc/rfc4772/">https://datatracker.ietf.org/doc/rfc4772/</a></li><li>DES ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Data_Encryption_Standard">https://en.wikipedia.org/wiki/Data_Encryption_Standard</a></li></ul><h3 id="JavaScript-å®ç°-5"><a href="#JavaScript-å®ç°-5" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function desEncrypt() &#123;    var key = CryptoJS.enc.Utf8.parse(desKey),        iv = CryptoJS.enc.Utf8.parse(desIv),        srcs = CryptoJS.enc.Utf8.parse(text),        // CBC åŠ å¯†æ¨¡å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼        encrypted = CryptoJS.DES.encrypt(srcs, key, &#123;            iv: iv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);    return encrypted.toString();&#125;function desDecrypt() &#123;    var key = CryptoJS.enc.Utf8.parse(desKey),        iv = CryptoJS.enc.Utf8.parse(desIv),        srcs = encryptedData,        // CBC åŠ å¯†æ¨¡å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼        decrypted = CryptoJS.DES.decrypt(srcs, key, &#123;            iv: iv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);    return decrypted.toString(CryptoJS.enc.Utf8);&#125;var text = &quot;I love Python!&quot;       // å¾…åŠ å¯†å¯¹è±¡var desKey = &quot;6f726c64f2c2057&quot;    // å¯†é’¥var desIv = &quot;0123456789ABCDEF&quot;    // åˆå§‹å‘é‡var encryptedData = desEncrypt()var decryptedData = desDecrypt()console.log(&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;, encryptedData)console.log(&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;, decryptedData)// åŠ å¯†å­—ç¬¦ä¸²:  +ndbEkWNw2QAfIYQtwC14w==// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</code></pre><h3 id="Python-å®ç°-5"><a href="#Python-å®ç°-5" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import binascii# åŠ å¯†æ¨¡å¼ CBCï¼Œå¡«å……æ–¹å¼ PAD_PKCS5from pyDes import des, CBC, PAD_PKCS5def des_encrypt(key, text, iv):    k = des(key, CBC, iv, pad=None, padmode=PAD_PKCS5)    en = k.encrypt(text, padmode=PAD_PKCS5)    return binascii.b2a_hex(en)def des_decrypt(key, text, iv):    k = des(key, CBC, iv, pad=None, padmode=PAD_PKCS5)    de = k.decrypt(binascii.a2b_hex(text), padmode=PAD_PKCS5)    return deif __name__ == &#39;__main__&#39;:    secret_key = &#39;12345678&#39;   # å¯†é’¥    text = &#39;I love Python!&#39;   # åŠ å¯†å¯¹è±¡    iv = secret_key           # åç§»é‡    secret_str = des_encrypt(secret_key, text, iv)    print(&#39;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#39;, secret_str)    clear_str = des_decrypt(secret_key, secret_str, iv)    print(&#39;è§£å¯†å­—ç¬¦ä¸²ï¼š&#39;, clear_str)# åŠ å¯†å­—ç¬¦ä¸²ï¼š b&#39;302d3abf2421169239f829b38a9545f1&#39;# è§£å¯†å­—ç¬¦ä¸²ï¼š b&#39;I love Python!&#39;</code></pre><h2 id="3DES"><a href="#3DES" class="headerlink" title="3DES"></a>3DES</h2><p>ç®€ä»‹ï¼šå…¨ç§°ä¸‰é‡æ•°æ®åŠ å¯†ç®—æ³•ï¼ˆè‹±æ–‡åç§°ï¼šTriple Data Encryption Standardã€ Triple Data Encryption Algorithmã€TDESã€TDEAï¼‰ï¼Œæ˜¯å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­çš„ä¸€ç§ã€‚70 å¹´ä»£åˆç”± IBM ç ”å‘ï¼Œå 1977 å¹´è¢«ç¾å›½å›½å®¶æ ‡å‡†å±€é‡‡çº³ä¸ºæ•°æ®åŠ å¯†æ ‡å‡†ï¼Œå®ƒç›¸å½“äºæ˜¯å¯¹æ¯ä¸ªæ•°æ®å—åº”ç”¨ä¸‰æ¬¡ DES åŠ å¯†ç®—æ³•ã€‚ç”±äºè®¡ç®—æœºè¿ç®—èƒ½åŠ›çš„å¢å¼ºï¼ŒåŸç‰ˆ DES å¯†ç çš„å¯†é’¥é•¿åº¦å˜å¾—å®¹æ˜“è¢«æš´åŠ›ç ´è§£ï¼›3DES å³æ˜¯è®¾è®¡ç”¨æ¥æä¾›ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œå³é€šè¿‡å¢åŠ  DES çš„å¯†é’¥é•¿åº¦æ¥é¿å…ç ´è§£ï¼Œæ‰€ä»¥ä¸¥æ ¼æ¥è¯´ 3DES ä¸æ˜¯è®¾è®¡ä¸€ç§å…¨æ–°çš„å—å¯†ç ç®—æ³•ã€‚</p><ul><li>mode æ”¯æŒï¼šCBCï¼ŒCFBï¼ŒCTRï¼ŒCTRGladmanï¼ŒECBï¼ŒOFB ç­‰ã€‚</li><li>padding æ”¯æŒï¼šZeroPaddingï¼ŒNoPaddingï¼ŒAnsiX923ï¼ŒIso10126ï¼ŒIso97971ï¼ŒPkcs7 ç­‰ã€‚</li></ul><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 1851ï¼š<a href="https://datatracker.ietf.org/doc/rfc1851/">https://datatracker.ietf.org/doc/rfc1851/</a></li><li>3DES ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Triple_DES">https://en.wikipedia.org/wiki/Triple_DES</a></li></ul><h3 id="JavaScript-å®ç°-6"><a href="#JavaScript-å®ç°-6" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function tripleDesEncrypt() &#123;    var key = CryptoJS.enc.Utf8.parse(desKey),        iv = CryptoJS.enc.Utf8.parse(desIv),        srcs = CryptoJS.enc.Utf8.parse(text),        // ECB åŠ å¯†æ–¹å¼ï¼ŒIso10126 å¡«å……æ–¹å¼        encrypted = CryptoJS.TripleDES.encrypt(srcs, key, &#123;            iv: iv,            mode: CryptoJS.mode.ECB,            padding: CryptoJS.pad.Iso10126        &#125;);    return encrypted.toString();&#125;function tripleDesDecrypt() &#123;    var key = CryptoJS.enc.Utf8.parse(desKey),        iv = CryptoJS.enc.Utf8.parse(desIv),        srcs = encryptedData,        // ECB åŠ å¯†æ–¹å¼ï¼ŒIso10126 å¡«å……æ–¹å¼        decrypted = CryptoJS.TripleDES.decrypt(srcs, key, &#123;            iv: iv,            mode: CryptoJS.mode.ECB,            padding: CryptoJS.pad.Iso10126        &#125;);    return decrypted.toString(CryptoJS.enc.Utf8);&#125;var text = &quot;I love Python!&quot;       // å¾…åŠ å¯†å¯¹è±¡var desKey = &quot;6f726c64f2c2057c&quot;    // å¯†é’¥var desIv = &quot;0123456789ABCDEF&quot;    // åç§»é‡var encryptedData = tripleDesEncrypt()var decryptedData = tripleDesDecrypt()console.log(&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;, encryptedData)console.log(&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;, decryptedData)// åŠ å¯†å­—ç¬¦ä¸²:  3J0NX7x6GbewjjhoW2HKqg==// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</code></pre><h3 id="Python-å®ç°-6"><a href="#Python-å®ç°-6" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">from Cryptodome.Cipher import DES3from Cryptodome import Random# éœ€è¦è¡¥ä½ï¼Œsträ¸æ˜¯16çš„å€æ•°é‚£å°±è¡¥è¶³ä¸º16çš„å€æ•°def add_to_16(value):    while len(value) % 16 != 0:        value += &#39;\0&#39;    return str.encode(value)def des_encrypt(key, text, iv):    # åŠ å¯†æ¨¡å¼ OFB    cipher_encrypt = DES3.new(add_to_16(key), DES3.MODE_OFB, iv)    encrypted_text = cipher_encrypt.encrypt(text.encode(&quot;utf-8&quot;))    return encrypted_textdef des_decrypt(key, text, iv):    # åŠ å¯†æ¨¡å¼ OFB    cipher_decrypt = DES3.new(add_to_16(key), DES3.MODE_OFB, iv)    decrypted_text = cipher_decrypt.decrypt(text)    return decrypted_textif __name__ == &#39;__main__&#39;:    key = &#39;12345678&#39;            # å¯†é’¥ï¼Œ16 ä½    text = &#39;I love Python!&#39;     # åŠ å¯†å¯¹è±¡    iv = Random.new().read(DES3.block_size)  # DES3.block_size == 8    secret_str = des_encrypt(key, text, iv)    print(&#39;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#39;, secret_str)    clear_str = des_decrypt(key, secret_str, iv)    print(&#39;è§£å¯†å­—ç¬¦ä¸²ï¼š&#39;, clear_str)# åŠ å¯†å­—ç¬¦ä¸²ï¼š b&#39;\xa5\x8a\xd4R\x99\x16j\xba?vg\xf2\xb6\xa9&#39;# è§£å¯†å­—ç¬¦ä¸²ï¼š b&#39;I love Python!&#39;</code></pre><h2 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h2><p>ç®€ä»‹ï¼šå…¨ç§°é«˜çº§åŠ å¯†æ ‡å‡†ï¼ˆè‹±æ–‡åç§°ï¼šAdvanced Encryption Standardï¼‰ï¼Œåœ¨å¯†ç å­¦ä¸­åˆç§° Rijndael åŠ å¯†æ³•ï¼Œç”±ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ ï¼ˆNISTï¼‰äº 2001 å¹´å‘å¸ƒï¼Œå¹¶åœ¨ 2002 å¹´æˆä¸ºæœ‰æ•ˆçš„æ ‡å‡†ï¼Œæ˜¯ç¾å›½è”é‚¦æ”¿åºœé‡‡ç”¨çš„ä¸€ç§åŒºå—åŠ å¯†æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†ç”¨æ¥æ›¿ä»£åŸå…ˆçš„ DESï¼Œå·²ç»è¢«å¤šæ–¹åˆ†æä¸”å¹¿ä¸ºå…¨ä¸–ç•Œæ‰€ä½¿ç”¨ï¼Œå®ƒæœ¬èº«åªæœ‰ä¸€ä¸ªå¯†é’¥ï¼Œå³ç”¨æ¥å®ç°åŠ å¯†ï¼Œä¹Ÿç”¨äºè§£å¯†ã€‚</p><ul><li>mode æ”¯æŒï¼šCBCï¼ŒCFBï¼ŒCTRï¼ŒCTRGladmanï¼ŒECBï¼ŒOFB ç­‰ã€‚</li><li>padding æ”¯æŒï¼šZeroPaddingï¼ŒNoPaddingï¼ŒAnsiX923ï¼ŒIso10126ï¼ŒIso97971ï¼ŒPkcs7 ç­‰ã€‚</li></ul><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 3268ï¼š<a href="https://datatracker.ietf.org/doc/rfc3268/">https://datatracker.ietf.org/doc/rfc3268/</a></li><li>AES ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">https://en.wikipedia.org/wiki/Advanced_Encryption_Standard</a></li></ul><h3 id="JavaScript-å®ç°-7"><a href="#JavaScript-å®ç°-7" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function aesEncrypt() &#123;    var key = CryptoJS.enc.Utf8.parse(aesKey),        iv = CryptoJS.enc.Utf8.parse(aesIv),        srcs = CryptoJS.enc.Utf8.parse(text),        // CBC åŠ å¯†æ–¹å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼        encrypted = CryptoJS.AES.encrypt(srcs, key, &#123;            iv: iv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);    return encrypted.toString();&#125;function aesDecrypt() &#123;    var key = CryptoJS.enc.Utf8.parse(aesKey),        iv = CryptoJS.enc.Utf8.parse(aesIv),        srcs = encryptedData,        // CBC åŠ å¯†æ–¹å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼        decrypted = CryptoJS.AES.decrypt(srcs, key, &#123;            iv: iv,            mode: CryptoJS.mode.CBC,            padding: CryptoJS.pad.Pkcs7        &#125;);    return decrypted.toString(CryptoJS.enc.Utf8);&#125;var text = &quot;I love Python!&quot;       // å¾…åŠ å¯†å¯¹è±¡var aesKey = &quot;6f726c64f2c2057c&quot;   // å¯†é’¥ï¼Œ16 å€æ•°var aesIv = &quot;0123456789ABCDEF&quot;    // åç§»é‡ï¼Œ16 å€æ•°var encryptedData = aesEncrypt()var decryptedData = aesDecrypt()console.log(&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;, encryptedData)console.log(&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;, decryptedData)// åŠ å¯†å­—ç¬¦ä¸²:  dZL7TLJR786VGvuUvqYGoQ==// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</code></pre><h3 id="Python-å®ç°-7"><a href="#Python-å®ç°-7" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import base64from Cryptodome.Cipher import AES# éœ€è¦è¡¥ä½ï¼Œsträ¸æ˜¯16çš„å€æ•°é‚£å°±è¡¥è¶³ä¸º16çš„å€æ•°def add_to_16(value):    while len(value) % 16 != 0:        value += &#39;\0&#39;    return str.encode(value)# åŠ å¯†æ–¹æ³•def aes_encrypt(key, t, iv):    aes = AES.new(add_to_16(key), AES.MODE_CBC, add_to_16(iv))  # åˆå§‹åŒ–åŠ å¯†å™¨    encrypt_aes = aes.encrypt(add_to_16(t))                    # å…ˆè¿›è¡Œ aes åŠ å¯†    encrypted_text = str(base64.encodebytes(encrypt_aes), encoding=&#39;utf-8&#39;)  # æ‰§è¡ŒåŠ å¯†å¹¶è½¬ç è¿”å› bytes    return encrypted_text# è§£å¯†æ–¹æ³•def aes_decrypt(key, t, iv):    aes = AES.new(add_to_16(key), AES.MODE_CBC, add_to_16(iv))         # åˆå§‹åŒ–åŠ å¯†å™¨    base64_decrypted = base64.decodebytes(t.encode(encoding=&#39;utf-8&#39;))  # ä¼˜å…ˆé€†å‘è§£å¯† base64 æˆ bytes    decrypted_text = str(aes.decrypt(base64_decrypted), encoding=&#39;utf-8&#39;).replace(&#39;\0&#39;, &#39;&#39;)  # æ‰§è¡Œè§£å¯†å¯†å¹¶è½¬ç è¿”å›str    return decrypted_textif __name__ == &#39;__main__&#39;:    secret_key = &#39;12345678&#39;   # å¯†é’¥    text = &#39;I love Python!&#39;   # åŠ å¯†å¯¹è±¡    iv = secret_key           # åˆå§‹å‘é‡    encrypted_str = aes_encrypt(secret_key, text, iv)    print(&#39;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#39;, encrypted_str)    decrypted_str = aes_decrypt(secret_key, encrypted_str, iv)    print(&#39;è§£å¯†å­—ç¬¦ä¸²ï¼š&#39;, decrypted_str)# åŠ å¯†å­—ç¬¦ä¸²ï¼š lAVKvkQh+GtdNpoKf4/mHA==# è§£å¯†å­—ç¬¦ä¸²ï¼š I love Python!</code></pre><h2 id="RC4"><a href="#RC4" class="headerlink" title="RC4"></a>RC4</h2><p>ç®€ä»‹ï¼šè‹±æ–‡åç§°ï¼šRivest Cipher 4ï¼Œä¹Ÿç§°ä¸º ARC4 æˆ– ARCFOURï¼Œæ˜¯ä¸€ç§æµåŠ å¯†ç®—æ³•ï¼Œå¯†é’¥é•¿åº¦å¯å˜ã€‚å®ƒåŠ è§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ï¼Œå› æ­¤ä¹Ÿå±äºå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚RC4 æ˜¯æœ‰çº¿ç­‰æ•ˆåŠ å¯†ï¼ˆWEPï¼‰ä¸­é‡‡ç”¨çš„åŠ å¯†ç®—æ³•ï¼Œä¹Ÿæ›¾ç»æ˜¯ TLS å¯é‡‡ç”¨çš„ç®—æ³•ä¹‹ä¸€ï¼Œè¯¥ç®—æ³•çš„é€Ÿåº¦å¯ä»¥è¾¾åˆ° DES åŠ å¯†çš„ 10 å€å·¦å³ï¼Œä¸”å…·æœ‰å¾ˆé«˜çº§åˆ«çš„éçº¿æ€§ï¼Œè™½ç„¶å®ƒåœ¨è½¯ä»¶æ–¹é¢çš„ç®€å•æ€§å’Œé€Ÿåº¦éå¸¸å‡ºè‰²ï¼Œä½†åœ¨ RC4 ä¸­å‘ç°äº†å¤šä¸ªæ¼æ´ï¼Œå®ƒç‰¹åˆ«å®¹æ˜“å—åˆ°æ”»å‡»ï¼ŒRC4 ä½œä¸ºä¸€ç§è€æ—§çš„éªŒè¯å’ŒåŠ å¯†ç®—æ³•æ˜“äºå—åˆ°é»‘å®¢æ”»å‡»ï¼Œç°åœ¨é€æ¸ä¸æ¨èä½¿ç”¨äº†ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 7465ï¼š<a href="https://datatracker.ietf.org/doc/rfc7465/">https://datatracker.ietf.org/doc/rfc7465/</a></li><li>RC4 ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/RC4">https://en.wikipedia.org/wiki/RC4</a></li></ul><h3 id="JavaScript-å®ç°-8"><a href="#JavaScript-å®ç°-8" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function RC4Encrypt() &#123;    return CryptoJS.RC4.encrypt(text, key).toString();&#125;function RC4Decrypt()&#123;    return CryptoJS.RC4.decrypt(encryptedData, key).toString(CryptoJS.enc.Utf8);&#125;var text = &quot;I love Python!&quot;var key = &quot;6f726c64f2c2057c&quot;var encryptedData = RC4Encrypt()var decryptedData = RC4Decrypt()console.log(&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;, encryptedData)console.log(&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;, decryptedData)// åŠ å¯†å­—ç¬¦ä¸²:  U2FsdGVkX18hMm9WWdoEQGPolnXzlg9ryArdGNwv// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</code></pre><h3 id="Python-å®ç°-8"><a href="#Python-å®ç°-8" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><pre><code class="python">import base64from Cryptodome.Cipher import ARC4def rc4_encrypt(key, t):    enc = ARC4.new(key.encode(&#39;utf8&#39;))    res = enc.encrypt(t.encode(&#39;utf-8&#39;))    res = base64.b64encode(res)    return resdef rc4_decrypt(key, t):    data = base64.b64decode(t)    enc = ARC4.new(key.encode(&#39;utf8&#39;))    res = enc.decrypt(data)    return resif __name__ == &quot;__main__&quot;:    secret_key = &#39;12345678&#39;   # å¯†é’¥    text = &#39;I love Python!&#39;   # åŠ å¯†å¯¹è±¡    encrypted_str = rc4_encrypt(secret_key, text)    print(&#39;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#39;, encrypted_str)    decrypted_str = rc4_decrypt(secret_key, encrypted_str)    print(&#39;è§£å¯†å­—ç¬¦ä¸²ï¼š&#39;, decrypted_str)# åŠ å¯†å­—ç¬¦ä¸²ï¼š b&#39;8tNVu3/U/veJR2KgyBw=&#39;# è§£å¯†å­—ç¬¦ä¸²ï¼š b&#39;I love Python!&#39;</code></pre><h2 id="Rabbit"><a href="#Rabbit" class="headerlink" title="Rabbit"></a>Rabbit</h2><p>ç®€ä»‹ï¼šRabbit åŠ å¯†ç®—æ³•æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„æµå¯†ç åŠ å¯†æ–¹å¼ï¼Œ2003 å¹´é¦–æ¬¡è¢«æå‡ºï¼Œå®ƒä» 128 ä½å¯†é’¥å’Œ 64 ä½åˆå§‹å‘é‡ï¼ˆivï¼‰åˆ›å»ºä¸€ä¸ªå¯†é’¥æµã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RFC 4503ï¼š<a href="https://datatracker.ietf.org/doc/rfc4503/">https://datatracker.ietf.org/doc/rfc4503/</a></li><li>Rabbit ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/Rabbit_(cipher)">https://en.wikipedia.org/wiki/Rabbit_(cipher)</a></li></ul><h3 id="JavaScript-å®ç°-9"><a href="#JavaScript-å®ç°-9" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—var CryptoJS = require(&#39;crypto-js&#39;)function rabbitEncrypt() &#123;    return CryptoJS.Rabbit.encrypt(text, key).toString();&#125;function rabbitDecrypt() &#123;    return CryptoJS.Rabbit.decrypt(encryptedData, key).toString(CryptoJS.enc.Utf8);&#125;var text = &quot;I love Python!&quot;var key = &quot;6f726c64f2c2057&quot;var encryptedData = rabbitEncrypt()var decryptedData = rabbitDecrypt()console.log(&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;, encryptedData)console.log(&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;, decryptedData)// åŠ å¯†å­—ç¬¦ä¸²:  U2FsdGVkX1+ZVCHRXlhmG5Xw87YPWMNIBlbukuh8// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</code></pre><h3 id="Python-å®ç°-9"><a href="#Python-å®ç°-9" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><p>ç›®å‰æ²¡æœ‰æ‰¾åˆ°æœ‰ç¬¬ä¸‰æ–¹åº“å¯ä»¥ç›´æ¥å®ç° Rabbit ç®—æ³•ï¼Œåœ¨ Python ä¸­å®ç°å¯ä»¥å‚è€ƒï¼š<a href="https://asecuritysite.com/encryption/rabbit2">https://asecuritysite.com/encryption/rabbit2</a></p><h2 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h2><p>ç®€ä»‹ï¼šè‹±æ–‡åç§°ï¼šRivest-Shamir-Adlemanï¼Œæ˜¯ 1977 å¹´ç”±ç½—çº³å¾·Â·æç»´æ–¯ç‰¹ï¼ˆRon Rivestï¼‰ã€é˜¿è¿ªÂ·è¨è«å°”ï¼ˆAdi Shamirï¼‰å’Œä¼¦çº³å¾·Â·é˜¿å¾·æ›¼ï¼ˆLeonard Adlemanï¼‰ä¸€èµ·æå‡ºçš„ï¼ŒRSA å°±æ˜¯ä»–ä»¬ä¸‰äººå§“æ°å¼€å¤´å­—æ¯æ‹¼åœ¨ä¸€èµ·ç»„æˆçš„ï¼ŒRSA åŠ å¯†ç®—æ³•æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚åœ¨å…¬å¼€å¯†é’¥åŠ å¯†å’Œç”µå­å•†ä¸šä¸­RSAè¢«å¹¿æ³›ä½¿ç”¨ã€‚å®ƒè¢«æ™®éè®¤ä¸ºæ˜¯ç›®å‰æ¯”è¾ƒä¼˜ç§€çš„å…¬é’¥æ–¹æ¡ˆä¹‹ä¸€ã€‚RSAæ˜¯ç¬¬ä¸€ä¸ªèƒ½åŒæ—¶ç”¨äºåŠ å¯†å’Œæ•°å­—ç­¾åçš„ç®—æ³•ï¼Œå®ƒèƒ½å¤ŸæŠµæŠ—åˆ°ç›®å‰ä¸ºæ­¢å·²çŸ¥çš„æ‰€æœ‰å¯†ç æ”»å‡»ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li>RSA ç»´åŸºç™¾ç§‘ï¼š<a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">https://en.wikipedia.org/wiki/RSA_(cryptosystem)</a></li></ul><h3 id="JavaScript-å®ç°-10"><a href="#JavaScript-å®ç°-10" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h3><pre><code class="javascript">// å¼•ç”¨ node-rsa åŠ å¯†æ¨¡å—var NodeRSA = require(&#39;node-rsa&#39;);function rsaEncrypt() &#123;    pubKey = new NodeRSA(publicKey,&#39;pkcs8-public&#39;);    var encryptedData = pubKey.encrypt(text, &#39;base64&#39;);    return encryptedData&#125;function rsaDecrypt() &#123;    priKey = new NodeRSA(privatekey,&#39;pkcs8-private&#39;);    var decryptedData = priKey.decrypt(encryptedData, &#39;utf8&#39;);    return decryptedData&#125;var key = new NodeRSA(&#123;b: 512&#125;);                    //ç”Ÿæˆ512ä½ç§˜é’¥var publicKey = key.exportKey(&#39;pkcs8-public&#39;);    //å¯¼å‡ºå…¬é’¥var privatekey = key.exportKey(&#39;pkcs8-private&#39;);  //å¯¼å‡ºç§é’¥var text = &quot;I love Python!&quot;var encryptedData = rsaEncrypt()var decryptedData = rsaDecrypt()console.log(&quot;å…¬é’¥:\n&quot;, publicKey)console.log(&quot;ç§é’¥:\n&quot;, privatekey)console.log(&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;, encryptedData)console.log(&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;, decryptedData)/*å…¬é’¥: -----BEGIN PUBLIC KEY-----MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAOV1BwTJSVce/QjJAro5fXG9WzOpal09Qtv1yuXKE81vZSNTHxW6dICwPT/kjCfC3bA5Qs6wnYBANuwD6wlAS0UCAwEAAQ==-----END PUBLIC KEY-----ç§é’¥: -----BEGIN PRIVATE KEY-----MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEA5XUHBMlJVx79CMkCujl9cb1bM6lqXT1C2/XK5coTzW9lI1MfFbp0gLA9P+SMJ8LdsDlCzrCdgEA27APrCUBLRQIDAQABAkAiXwJbJC+5PioXG80tyhjRZdT4iyMkrl2Kh2oKO9f1iLaBXLyaD0HW82wFh+cUy8GcMl9jse8DE8wd1TdORmHhAiEA/rwmWjXHVgDqcH/fqk8Ufku0fXvs56h5QDoh1so5vokCIQDmmL3JDW6Y7RuK2qwFbHBZtYPRFRVdn5X1oqU2FOSX3QIhAOVTjVN5RtNuT6Cn/jvcpZ5tmTe+8TA8w6vGqeAsfn/BAiBvKKIUEQ2HWoU0YkUaODPQiteIKomqIAvB5S2O7HNlYQIgWMuLUxGZbbcAmIX+YmRXuET97S7OWv+zWHVfb/rbXtI=-----END PRIVATE KEY-----åŠ å¯†å­—ç¬¦ä¸²:  hHXTF1K3w55Wd6OSjVYtqxceJ5VhlySNUahel9pwKD92Ef7wIT7DYPuJRKiqz5tuHtUqujbmbZBSL0qDE/EA+A==è§£å¯†å­—ç¬¦ä¸²:  I love Python!*/</code></pre><h3 id="Python-å®ç°-10"><a href="#Python-å®ç°-10" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><p>æ¨¡å—ï¼šrsaï¼š</p><pre><code class="python">import rsadef rsa_encrypt(pu_key, t):    # å…¬é’¥åŠ å¯†    rsa = rsa.encrypt(t.encode(&quot;utf-8&quot;), pu_key)    return rsadef rsa_decrypt(pr_key, t):    # ç§é’¥è§£å¯†    rsa = rsa.decrypt(t, pr_key).decode(&quot;utf-8&quot;)    return rsaif __name__ == &quot;__main__&quot;:    public_key, private_key = rsa.newkeys(512)   # ç”Ÿæˆå…¬é’¥ã€ç§é’¥    print(&#39;å…¬é’¥ï¼š&#39;, public_key)    print(&#39;ç§é’¥ï¼š&#39;, private_key)    text = &#39;I love Python!&#39;  # åŠ å¯†å¯¹è±¡    encrypted_str = rsa_encrypt(public_key, text)    print(&#39;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#39;, encrypted_str)    decrypted_str = rsa_decrypt(private_key, encrypted_str)    print(&#39;è§£å¯†å­—ç¬¦ä¸²ï¼š&#39;, decrypted_str)&#39;&#39;&#39;å…¬é’¥ï¼š PublicKey(7636479066127060956100056267701318377455704072072698049978592945665550579944731953431504993757594103617537700972424661030900303472123028864161050235168613, 65537)ç§é’¥ï¼š PrivateKey(7636479066127060956100056267701318377455704072072698049978592945665550579944731953431504993757594103617537700972424661030900303472123028864161050235168613, 65537, 3850457767980968449796700480128630632818465005441846698224554128042451115530564586537997896922067523638756079019054611200173122138274839877369624069360253, 4713180694194659323798858305046043997526301456820208338158979730140812744181638767, 1620238976946735819854194349514460863335347861649166352709029254680140139)åŠ å¯†å­—ç¬¦ä¸²ï¼š b&quot;\x1aaeps\xa0c&#125;\xb6\xcf\xa3\xb0\xbb\xedA\x7f&#125;\x03\xdc\xd5\x1c\x9b\xdb\xda\xf9q\x80[=\xf5\x91\r\xd0&#39;f\xce\x1f\x01\xef\xa5\xdb3\x96\t0qIxF\xbd\x11\xd6\xb25\xc5\xe1pM\xb4M\xc2\xd4\x03\xa6&quot;è§£å¯†å­—ç¬¦ä¸²ï¼š I love Python!&#39;&#39;&#39;</code></pre><p>æ¨¡å— Cryptodomeï¼š</p><pre><code class="python">import base64from Cryptodome.PublicKey import RSAfrom Cryptodome.Cipher import PKCS1_v1_5data = &quot;cKK8B2rWwfwWeXhz&quot;public_key = &quot;MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAM1xhOWaThSMpfxFsjV5YaWOFHt+6RvS+zH2Pa47VVr8PkZYnRaaKKy2MYBuEh7mZfM/R1dUXTgu0gp6VTNeNQkCAwEAAQ==&quot;rsa_key = RSA.import_key(base64.b64decode(public_key))  # å¯¼å…¥è¯»å–åˆ°çš„å…¬é’¥cipher = PKCS1_v1_5.new(rsa_key)                        # ç”Ÿæˆå¯¹è±¡cipher_text = base64.b64encode(cipher.encrypt(data.encode(encoding=&quot;utf-8&quot;)))print(cipher_text)</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡æ€»ç»“äº†åœ¨çˆ¬è™«ä¸­å¸¸è§çš„å„ç§åŠ å¯†ç®—æ³•ã€ç¼–ç ç®—æ³•çš„åŸç†ã€åœ¨ JavaScript ä¸­å’Œ Python ä¸­çš„åŸºæœ¬å®ç°æ–¹æ³•ï¼Œé‡åˆ° JS åŠ å¯†çš„æ—¶å€™</summary>
      
    
    
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/categories/JS-%E9%80%86%E5%90%91/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="JS é€†å‘" scheme="https://www.itbob.cn/tags/JS-%E9%80%86%E5%90%91/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Python æ•°æ®ç»“æ„ä¹‹æ ˆçš„å®ç°</title>
    <link href="https://www.itbob.cn/article/038/"/>
    <id>https://www.itbob.cn/article/038/</id>
    <published>2020-11-30T06:48:05.000Z</published>
    <updated>2022-05-22T12:49:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ ˆçš„æ¦‚å¿µ"><a href="#æ ˆçš„æ¦‚å¿µ" class="headerlink" title="æ ˆçš„æ¦‚å¿µ"></a>æ ˆçš„æ¦‚å¿µ</h2><p>æ ˆï¼ˆstackï¼‰åˆåå †æ ˆï¼Œæ ˆæ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œç”¨å…ˆè¿›åå‡ºæˆ–è€…æ˜¯åè¿›å…ˆå‡ºçš„æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œæ ˆä¸­æ•°æ®çš„æ’å…¥åˆ é™¤æ“ä½œéƒ½æ˜¯åœ¨æ ˆçš„é¡¶ç«¯è¿›è¡Œï¼Œè¿™ä¸€ç«¯è¢«ç§°ä¸ºæ ˆé¡¶ï¼Œç›¸å¯¹åœ°ï¼ŒæŠŠå¦ä¸€ç«¯ç§°ä¸ºæ ˆåº•ã€‚å‘ä¸€ä¸ªæ ˆæ’å…¥æ–°å…ƒç´ åˆç§°ä½œè¿›æ ˆã€å…¥æ ˆæˆ–å‹æ ˆï¼Œå®ƒæ˜¯æŠŠæ–°å…ƒç´ æ”¾åˆ°æ ˆé¡¶å…ƒç´ çš„ä¸Šé¢ï¼Œä½¿ä¹‹æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ï¼›ä»ä¸€ä¸ªæ ˆåˆ é™¤å…ƒç´ åˆç§°ä½œå‡ºæ ˆæˆ–é€€æ ˆï¼Œå®ƒæ˜¯æŠŠæ ˆé¡¶å…ƒç´ åˆ é™¤æ‰ï¼Œä½¿å…¶ç›¸é‚»çš„å…ƒç´ æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201101205308521.png" alt="01"></p><hr><h2 id="æ ˆçš„ç‰¹ç‚¹"><a href="#æ ˆçš„ç‰¹ç‚¹" class="headerlink" title="æ ˆçš„ç‰¹ç‚¹"></a>æ ˆçš„ç‰¹ç‚¹</h2><p>å…ƒç´ åè¿›å…ˆå‡ºï¼ˆLast in First Outï¼ŒLIFOï¼‰</p><hr><h2 id="æ ˆçš„æ“ä½œ"><a href="#æ ˆçš„æ“ä½œ" class="headerlink" title="æ ˆçš„æ“ä½œ"></a>æ ˆçš„æ“ä½œ</h2><ul><li><font color=#FF0000><strong>push(item)</strong></font>ï¼šè¿›æ ˆï¼ˆå‘æ ˆé¡¶æ·»åŠ å…ƒç´ ï¼‰</li><li><font color=#FF0000><strong>pop()</strong></font>ï¼šå‡ºæ ˆï¼ˆåˆ é™¤æ ˆé¡¶å…ƒç´ ï¼‰</li><li><font color=#FF0000><strong>top()</strong></font>ï¼šæŸ¥çœ‹æ ˆé¡¶å…ƒç´ </li><li><font color=#FF0000><strong>empty()</strong></font>ï¼šåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</li></ul><hr><h2 id="Python-å®ç°æ ˆ"><a href="#Python-å®ç°æ ˆ" class="headerlink" title="Python å®ç°æ ˆ"></a>Python å®ç°æ ˆ</h2><p>æ ˆå¹¶ä¸æ˜¯ Python çš„å†…å»ºç±»å‹ï¼Œåœ¨å¿…è¦çš„æ—¶å€™å¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¥æ¨¡æ‹ŸåŸºäºæ•°ç»„çš„æ ˆã€‚å¦‚æœå°†åˆ—è¡¨çš„æœ«å°¾çœ‹ä½œæ˜¯æ ˆçš„é¡¶ï¼Œåˆ—è¡¨æ–¹æ³• <code>append()</code> å°±æ˜¯å°†å…ƒç´ å‹å…¥åˆ°æ ˆä¸­ï¼ˆè¿›æ ˆï¼‰ï¼Œè€Œåˆ—è¡¨æ–¹æ³• <code>pop()</code> ä¼šåˆ é™¤å¹¶è¿”å›æ ˆé¡¶çš„å…ƒç´ ï¼ˆå‡ºæ ˆï¼‰ï¼Œåˆ—è¡¨ç´¢å¼•çš„æ–¹å¼ <code>arr[-1]</code> å¯ä»¥æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ã€‚å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="python">class Stack:    def __init__(self):        self.stack = []    def push(self, item):        self.stack.append(item)    def pop(self):        if self.empty():            return None        else:            return self.stack.pop()    def top(self):        if self.empty():            return None        else:            return self.stack[-1]    def empty(self):        return len(self.stack) == 0</code></pre><hr><h2 id="æ ˆçš„ç®€å•åº”ç”¨ï¼šæ‹¬å·åŒ¹é…é—®é¢˜"><a href="#æ ˆçš„ç®€å•åº”ç”¨ï¼šæ‹¬å·åŒ¹é…é—®é¢˜" class="headerlink" title="æ ˆçš„ç®€å•åº”ç”¨ï¼šæ‹¬å·åŒ¹é…é—®é¢˜"></a>æ ˆçš„ç®€å•åº”ç”¨ï¼šæ‹¬å·åŒ¹é…é—®é¢˜</h2><p><font color=#2DAF8B><strong>é—®é¢˜æè¿°ï¼š</strong></font></p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­åªåŒ…å«å°æ‹¬å· <code>()</code>ã€ä¸­æ‹¬å· <code>[]</code>ã€å¤§æ‹¬å· <code>&#123;&#125;</code>ï¼Œæ±‚è¯¥å­—ç¬¦ä¸²ä¸­çš„æ‹¬å·æ˜¯å¦åŒ¹é…ã€‚åŒ¹é…è§„åˆ™ï¼šæˆå¯¹å‡ºç°æˆ–è€…å·¦å³å¯¹ç§°å‡ºç°ï¼Œä¾‹å¦‚ï¼š</p><p><font color=#FF0000><strong>()[]{}</strong></font>ï¼šåŒ¹é…ï¼›<font color=#FF0000><strong>{[()]}</strong></font>ï¼šåŒ¹é…ï¼›<font color=#FF0000><strong>({}]</strong></font>ï¼šä¸åŒ¹é…ï¼›<font color=#FF0000><strong>()]</strong></font>ï¼šä¸åŒ¹é…ï¼›<font color=#FF0000><strong>({)}</strong></font>ï¼šä¸åŒ¹é…</p><p><font color=#2DAF8B><strong>é€šè¿‡æ ˆæ¥è§£å†³ï¼š</strong></font></p><p>æœ‰å­—ç¬¦ä¸² <font color=#FF0000><strong>()[{}]</strong></font>ï¼Œä¾æ¬¡å–æ¯ä¸ªæ‹¬å·ï¼Œåªè¦æ˜¯å·¦æ‹¬å·å°±è¿›æ ˆï¼Œåªè¦æ˜¯å³æ‹¬å·å°±åˆ¤æ–­æ ˆé¡¶æ˜¯å¦ä¸ºå¯¹åº”çš„å·¦æ‹¬å·ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><strong>â‘ </strong> é‡åˆ°å·¦å°æ‹¬å· <font color=#FF0000><strong>(</strong></font>ï¼Œæ‰§è¡Œè¿›æ ˆæ“ä½œï¼›</li><li><strong>â‘¡</strong> é‡åˆ°å³å°æ‹¬å· <font color=#FF0000><strong>)</strong></font>ï¼Œåˆ¤æ–­æ­¤æ—¶æ ˆé¡¶æ˜¯å¦ä¸ºå·¦å°æ‹¬å· <font color=#FF0000><strong>(</strong></font>ï¼Œæ˜¯åˆ™è®©å·¦å°æ‹¬å· <font color=#FF0000><strong>(</strong></font> å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆä¸ºç©º;</li><li><strong>â‘¢</strong> é‡åˆ°å·¦ä¸­æ‹¬å· <font color=#FF0000><strong>[</strong></font>ï¼Œæ‰§è¡Œè¿›æ ˆæ“ä½œï¼›</li><li><strong>â‘£</strong> é‡åˆ°å·¦å¤§æ‹¬å· <font color=#FF0000><strong>{</strong></font>ï¼Œæ‰§è¡Œè¿›æ ˆæ“ä½œï¼›</li><li><strong>â‘¤</strong> é‡åˆ°å³å¤§æ‹¬å· <font color=#FF0000><strong>}</strong></font>ï¼Œåˆ¤æ–­æ­¤æ—¶æ ˆé¡¶æ˜¯å¦ä¸ºå·¦å¤§æ‹¬å· <font color=#FF0000><strong>{</strong></font>ï¼Œæ˜¯åˆ™è®©å·¦å¤§æ‹¬å· <font color=#FF0000><strong>{</strong></font> å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆä¸ºç©ºï¼›</li><li><strong>â‘¥</strong> é‡åˆ°å³ä¸­æ‹¬å· <font color=#FF0000><strong>]</strong></font>ï¼Œåˆ¤æ–­æ­¤æ—¶æ ˆé¡¶æ˜¯å¦ä¸ºå·¦ä¸­æ‹¬å· <font color=#FF0000><strong>[</strong></font>ï¼Œæ˜¯åˆ™è®©å·¦ä¸­æ‹¬å· <font color=#FF0000><strong>[</strong></font> å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆä¸ºç©ºï¼›</li><li><strong>â‘¦</strong> åˆ¤æ–­æœ€ç»ˆçš„æ ˆæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯åˆ™è¡¨ç¤ºåŒ¹é…ï¼Œä¸æ˜¯åˆ™è¡¨ç¤ºä¸åŒ¹é…ã€‚å…¶ä¸­ç¬¬ <strong>â‘¡ â‘¤ â‘¥</strong> æ­¥ä¸­ï¼Œè‹¥åˆ¤æ–­ä¸ºä¸æ˜¯ï¼Œåˆ™ç›´æ¥è¡¨ç¤ºä¸åŒ¹é…ã€‚</li></ul><p><font color=#2DAF8B><strong>Python ä»£ç å®ç°ï¼š</strong></font></p><pre><code class="python">class Stack:    def __init__(self):        self.stack = []    def push(self, item):        self.stack.append(item)    def pop(self):        if self.empty():            return None        else:            return self.stack.pop()    def top(self):        if self.empty():            return None        else:            return self.stack[-1]    def empty(self):        return len(self.stack) == 0def brackets_match(s):    match_dict = &#123;&#39;&#125;&#39;: &#39;&#123;&#39;, &#39;]&#39;: &quot;[&quot;, &#39;)&#39;: &#39;(&#39;&#125;    stack = Stack()    for ch in s:        if ch in [&#39;(&#39;, &#39;[&#39;, &#39;&#123;&#39;]:    # å¦‚æœä¸ºå·¦æ‹¬å·ï¼Œåˆ™æ‰§è¡Œè¿›æ ˆæ“ä½œ            stack.push(ch)        else:                        # å¦‚æœä¸ºå³æ‹¬å·            if stack.empty():        # å¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™ä¸åŒ¹é…ï¼Œå³å¤šäº†ä¸€ä¸ªå³æ‹¬å·ï¼Œæ²¡æœ‰å·¦æ‹¬å·åŒ¹é…                return False            elif stack.top() == match_dict[ch]:  # å¦‚æœæ ˆé¡¶çš„å…ƒç´ ä¸ºå¯¹åº”çš„å·¦æ‹¬å·ï¼Œåˆ™è®©æ ˆé¡¶å‡ºæ ˆ                stack.pop()            else:                    # å¦‚æœæ ˆé¡¶å…ƒç´ ä¸æ˜¯å¯¹åº”çš„å·¦æ‹¬å·ï¼Œåˆ™ä¸åŒ¹é…                return False    if stack.empty():                # æœ€åçš„æ ˆå¦‚æœä¸ºç©ºï¼Œåˆ™åŒ¹é…ï¼Œå¦åˆ™ä¸åŒ¹é…        return True    else:        return Falseprint(brackets_match(&#39;[&#123;()&#125;()&#123;()&#125;[](&#123;&#125;)&#123;&#125;]&#39;))print(brackets_match(&#39;()[&#123;&#125;]&#39;))print(brackets_match(&#39;(&#123;)&#125;&#39;))print(brackets_match(&#39;[]&#125;&#39;))</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class="python">TrueTrueFalseFalse</code></pre><hr><h2 id="æ ˆçš„ç®€å•åº”ç”¨ï¼šå€’åºè¾“å‡ºä¸€ç»„å…ƒç´ "><a href="#æ ˆçš„ç®€å•åº”ç”¨ï¼šå€’åºè¾“å‡ºä¸€ç»„å…ƒç´ " class="headerlink" title="æ ˆçš„ç®€å•åº”ç”¨ï¼šå€’åºè¾“å‡ºä¸€ç»„å…ƒç´ "></a>æ ˆçš„ç®€å•åº”ç”¨ï¼šå€’åºè¾“å‡ºä¸€ç»„å…ƒç´ </h2><p>æŠŠå…ƒç´ å­˜å…¥æ ˆï¼Œå†é¡ºåºå–å‡ºï¼š</p><pre><code class="python">class Stack:    def __init__(self):        self.stack = []    def push(self, item):        self.stack.append(item)    def pop(self):        if self.empty():            return None        else:            return self.stack.pop()    def top(self):        if self.empty():            return None        else:            return self.stack[-1]    def empty(self):        return len(self.stack) == 0def reverse_list(s):    stack = Stack()    for ch in s:        stack.push(ch)    new_list = []    while not stack.empty():        new_list.append(stack.pop())    return new_listprint(reverse_list([&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;]))</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class="python">[&#39;E&#39;, &#39;D&#39;, &#39;C&#39;, &#39;B&#39;, &#39;A&#39;]</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ ˆçš„æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#æ ˆçš„æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;æ ˆçš„æ¦‚å¿µ&quot;&gt;&lt;/a&gt;æ ˆçš„æ¦‚å¿µ&lt;/h2&gt;&lt;p&gt;æ ˆï¼ˆstackï¼‰åˆåå †æ ˆï¼Œæ ˆæ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œç”¨å…ˆè¿›åå‡ºæˆ–è€…æ˜¯åè¿›å…ˆå‡ºçš„æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œæ ˆä¸­æ•°æ®çš„æ’å…¥åˆ é™¤æ“ä½œéƒ½æ˜¯åœ¨æ ˆçš„é¡¶ç«¯</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Python ç®—æ³•ä¹‹é€’å½’ä¸å°¾é€’å½’ï¼Œæ–æ³¢é‚£å¥‘æ•°åˆ—ä»¥åŠæ±‰è¯ºå¡”çš„å®ç°</title>
    <link href="https://www.itbob.cn/article/037/"/>
    <id>https://www.itbob.cn/article/037/</id>
    <published>2020-10-28T14:05:13.000Z</published>
    <updated>2022-05-22T12:48:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é€’å½’æ¦‚å¿µ"><a href="#é€’å½’æ¦‚å¿µ" class="headerlink" title="é€’å½’æ¦‚å¿µ"></a>é€’å½’æ¦‚å¿µ</h2><p><font color=#ff0000><strong>é€’å½’</strong></font>ï¼šç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ç§°ä¸ºé€’å½’ï¼ˆ recursionï¼‰ã€‚ç”¨ä¸€ç§é€šä¿—çš„è¯æ¥è¯´å°±æ˜¯è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå®ƒé€šå¸¸æŠŠä¸€ä¸ªå¤§å‹å¤æ‚çš„é—®é¢˜å±‚å±‚è½¬åŒ–ä¸ºä¸€ä¸ªä¸åŸé—®é¢˜ç›¸ä¼¼çš„ã€ä½†æ˜¯è§„æ¨¡è¾ƒå°çš„é—®é¢˜æ¥æ±‚è§£ï¼Œå½“é—®é¢˜å°åˆ°ä¸€å®šè§„æ¨¡çš„æ—¶å€™ï¼Œéœ€è¦ä¸€ä¸ªé€’å½’å‡ºå£è¿”å›ã€‚é€’å½’ç­–ç•¥åªéœ€å°‘é‡çš„ç¨‹åºå°±å¯æè¿°å‡ºè§£é¢˜è¿‡ç¨‹æ‰€éœ€è¦çš„å¤šæ¬¡é‡å¤è®¡ç®—ï¼Œå¤§å¤§åœ°å‡å°‘äº†ç¨‹åºçš„ä»£ç é‡ã€‚é€’å½’çš„èƒ½åŠ›åœ¨äºç”¨æœ‰é™çš„è¯­å¥æ¥å®šä¹‰å¯¹è±¡çš„æ— é™é›†åˆã€‚</p><p><font color=#ff0000><strong>é€’å½’å‡½æ•°</strong></font>ï¼šåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡½æ•°ç›´æ¥æˆ–é—´æ¥è°ƒç”¨å‡½æ•°æœ¬èº«ï¼Œåˆ™è¯¥å‡½æ•°ç§°ä¸ºé€’å½’å‡½æ•°ï¼›åœ¨æ•°å­¦ä¸Šçš„å®šä¹‰å¦‚ä¸‹ï¼šå¯¹äºæŸä¸€å‡½æ•° $f(x)$ï¼Œå…¶å®šä¹‰åŸŸæ˜¯é›†åˆ Aï¼Œé‚£ä¹ˆè‹¥å¯¹äº A é›†åˆä¸­çš„æŸä¸€ä¸ªå€¼ $X_0$ï¼Œå…¶å‡½æ•°å€¼ $f(x_0)$ ç”± $f(f(x_0))$ å†³å®šï¼Œé‚£ä¹ˆå°±ç§° $f(x)$ ä¸ºé€’å½’å‡½æ•°ã€‚</p><hr><h2 id="é€’å½’è¦ç´ "><a href="#é€’å½’è¦ç´ " class="headerlink" title="é€’å½’è¦ç´ "></a>é€’å½’è¦ç´ </h2><ul><li><p>é€’å½’å¿…é¡»åŒ…å«ä¸€ä¸ªåŸºæœ¬çš„å‡ºå£ï¼ˆç»“æŸæ¡ä»¶ï¼‰ï¼Œå¦åˆ™å°±ä¼šæ— é™é€’å½’ï¼Œæœ€ç»ˆå¯¼è‡´æ ˆæº¢å‡ºï¼›</p></li><li><p>é€’å½’å¿…é¡»åŒ…å«ä¸€ä¸ªå¯ä»¥åˆ†è§£çš„é—®é¢˜ï¼Œä¾‹å¦‚è¦æƒ³æ±‚å¾— $fact(n)$ï¼Œå°±éœ€è¦ç”¨ $n * fact(n-1)$ï¼›</p></li><li><p>é€’å½’å¿…é¡»å¿…é¡»è¦å‘ç€é€’å½’å‡ºå£é è¿‘ï¼Œä¾‹å¦‚æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼š $n-1$ï¼Œå‘ç€é€’å½’å‡ºå£ $n == 0$ é è¿‘ã€‚</p></li></ul><hr><h2 id="é€’å½’ä¸è¿­ä»£çš„åŒºåˆ«"><a href="#é€’å½’ä¸è¿­ä»£çš„åŒºåˆ«" class="headerlink" title="é€’å½’ä¸è¿­ä»£çš„åŒºåˆ«"></a>é€’å½’ä¸è¿­ä»£çš„åŒºåˆ«</h2><ul><li><p><font color=#ff0000><strong>é€’å½’ï¼ˆrecursionï¼‰</strong></font>ï¼šé€’å½’åˆ™æ˜¯ä¸€æ­¥ä¸€æ­¥å¾€å‰é€’æ¨ï¼Œç›´åˆ°é€’å½’åŸºç¡€ï¼Œå¯»æ‰¾ä¸€æ¡è·¯å¾„ï¼Œ ç„¶åå†ç”±å‰å‘åè®¡ç®—ã€‚ï¼ˆAè°ƒç”¨Aï¼‰</p></li><li><p><font color=#ff0000><strong>è¿­ä»£ï¼ˆiterationï¼‰</strong></font>ï¼šè¿­ä»£æ˜¯é‡å¤åé¦ˆè¿‡ç¨‹çš„æ´»åŠ¨ï¼Œå…¶ç›®çš„é€šå¸¸æ˜¯ä¸ºäº†é€¼è¿‘æ‰€éœ€ç›®æ ‡æˆ–ç»“æœã€‚æ¯ä¸€æ¬¡å¯¹è¿‡ç¨‹çš„é‡å¤ç§°ä¸ºä¸€æ¬¡â€œè¿­ä»£â€ï¼Œè€Œæ¯ä¸€æ¬¡è¿­ä»£å¾—åˆ°çš„ç»“æœä¼šä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„åˆå§‹å€¼ï¼Œå› æ­¤è¿­ä»£æ˜¯ä»å‰å¾€åè®¡ç®—çš„ã€‚ï¼ˆAé‡å¤è°ƒç”¨Bï¼‰</p></li></ul><hr><h2 id="ç¤ºä¾‹ä¸€ï¼šé˜¶ä¹˜"><a href="#ç¤ºä¾‹ä¸€ï¼šé˜¶ä¹˜" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼šé˜¶ä¹˜"></a>ç¤ºä¾‹ä¸€ï¼šé˜¶ä¹˜</h2><p>ä¸€ä¸ªæ­£æ•´æ•°çš„é˜¶ä¹˜ï¼ˆfactorialï¼‰æ˜¯æ‰€æœ‰å°äºåŠç­‰äºè¯¥æ•°çš„æ­£æ•´æ•°çš„ç§¯ï¼Œå¹¶ä¸” 0 çš„é˜¶ä¹˜ä¸º 1ã€‚å³ $n!=1Ã—2Ã—3Ã—â€¦Ã—(n-1)Ã—n$ï¼Œä»¥é€’å½’æ–¹å¼å®šä¹‰ï¼š$n!=(n-1)!Ã—n$</p><pre><code class="python">def factorial(n):    if n == 0:        return 1    else:        return n * factorial(n-1)</code></pre><hr><h2 id="ç¤ºä¾‹äºŒï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#ç¤ºä¾‹äºŒï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="ç¤ºä¾‹äºŒï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—"></a>ç¤ºä¾‹äºŒï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—</h2><p>æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆFibonacci sequenceï¼‰ï¼Œåˆç§°é»„é‡‘åˆ†å‰²æ•°åˆ—ã€å› æ•°å­¦å®¶è±æ˜‚çº³å¤šÂ·æ–æ³¢é‚£å¥‘ä»¥å…”å­ç¹æ®–ä¸ºä¾‹å­è€Œå¼•å…¥ï¼Œæ•…åˆç§°ä¸ºâ€œå…”å­æ•°åˆ—â€ã€‚</p><p>æœ‰ä¸€ä¸ªæ•°åˆ—ï¼š0ã€1ã€1ã€2ã€3ã€5ã€8ã€13ã€21ã€34ã€55ã€89â€¦ï¼Œè¿™ä¸ªæ•°åˆ—ä»ç¬¬3é¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹ä¹‹å’Œã€‚ä»¥é€’æ¨çš„æ–¹æ³•å®šä¹‰ï¼š$F(n)=F(n - 1)+F(n - 2)ï¼ˆn â‰¥ 3ï¼Œn âˆˆ N^*ï¼‰$</p><pre><code class="python">def fibonacc(n):    if n == 1 or n == 2:        return 1    else:        return fibonacc(n-1) + fibonacc(n-2)</code></pre><p>ä»¥ä¸Šæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(2^n)$ï¼Œç¨å¾®å¤§ä¸€ç‚¹çš„æ•°éƒ½ä¼šç®—å¾ˆä¹…ï¼Œæœ‰ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ <code>lru_cache</code> ç¼“å­˜è£…é¥°å™¨ï¼Œç¼“å­˜ä¸€äº›ä¸­é—´ç»“æœï¼š</p><pre><code class="python">from functools import lru_cache# ç¼“å­˜æ–æ³¢é‚£å¥‘å‡½æ•°å·²ç»è®¡ç®—å‡ºçš„ç»“æœï¼Œæœ€å¤šå ç”¨1024å­—èŠ‚å†…å­˜@lru_cache(maxsize=1024)def fibonacc(n):    if n == 1 or n == 2:        return 1    else:        return fibonacc(n-1) + fibonacc(n-2)</code></pre><p>å¦å¤–è¿˜æœ‰æ›´åŠ èŠ‚çœæ—¶é—´å’Œç©ºé—´çš„æ–¹æ³•ï¼š</p><pre><code class="python">def fibonacc(n, current=0, next=1):    if n == 0:        return current    else:        return fibonacc(n-1, next, current+next)</code></pre><hr><h2 id="ç¤ºä¾‹ä¸‰ï¼šæ±‰è¯ºå¡”é—®é¢˜"><a href="#ç¤ºä¾‹ä¸‰ï¼šæ±‰è¯ºå¡”é—®é¢˜" class="headerlink" title="ç¤ºä¾‹ä¸‰ï¼šæ±‰è¯ºå¡”é—®é¢˜"></a>ç¤ºä¾‹ä¸‰ï¼šæ±‰è¯ºå¡”é—®é¢˜</h2><p>æ±‰è¯ºå¡”ï¼ˆåˆç§°æ²³å†…å¡”ï¼‰é—®é¢˜æ˜¯æºäºå°åº¦ä¸€ä¸ªå¤è€ä¼ è¯´çš„ç›Šæ™ºç©å…·ã€‚å¤§æ¢µå¤©åˆ›é€ ä¸–ç•Œçš„æ—¶å€™åšäº†ä¸‰æ ¹é‡‘åˆšçŸ³æŸ±å­ï¼Œåœ¨ä¸€æ ¹æŸ±å­ä¸Šä»ä¸‹å¾€ä¸ŠæŒ‰ç…§å¤§å°é¡ºåºæ‘ç€64ç‰‡é»„é‡‘åœ†ç›˜ã€‚å¤§æ¢µå¤©å‘½ä»¤å©†ç½—é—¨æŠŠåœ†ç›˜ä»ä¸‹é¢å¼€å§‹æŒ‰å¤§å°é¡ºåºé‡æ–°æ‘†æ”¾åœ¨å¦ä¸€æ ¹æŸ±å­ä¸Šã€‚å¹¶ä¸”è§„å®šï¼Œåœ¨å°åœ†ç›˜ä¸Šä¸èƒ½æ”¾å¤§åœ†ç›˜ï¼Œåœ¨ä¸‰æ ¹æŸ±å­ä¹‹é—´ä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜ã€‚64ç‰‡é»„é‡‘åœ†ç›˜ç§»åŠ¨å®Œæ¯•ä¹‹æ—¥ï¼Œå°±æ˜¯ä¸–ç•Œæ¯ç­ä¹‹æ—¶ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201028204105893.gif" alt="01æ±‰è¯ºå¡”"></p><p>å¯¹äº n ä¸ªç›˜å­ï¼Œç§»åŠ¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>æŠŠ n-1 ä¸ªç›˜å­ç”± A ç»è¿‡ C ç§»åŠ¨åˆ° B</li><li>æŠŠæœ€åä¸€ä¸ªç›˜å­ç§»åŠ¨åˆ° C</li><li>æŠŠ n-1 ä¸ªç›˜å­ç”± B ç»è¿‡ A ç§»åŠ¨åˆ° C</li></ul><p><img src="https://img-blog.csdnimg.cn/20201028220237371.png" alt="02æ±‰è¯ºå¡”"></p><p>é€’å½’ä»£ç å®ç°ï¼š</p><pre><code class="python">def hanoi(n, a, b, c):                                # n ä¸ªç›˜å­ï¼Œaï¼Œbï¼Œcä¸‰ä¸ªæŸ±å­    if n &gt; 0:        hanoi(n-1, a, c, b)                           # æŠŠ n-1 ä¸ªç›˜å­ç”± a ç»è¿‡ c ç§»åŠ¨åˆ° b        print(&#39;moving from &#123;0&#125; to &#123;1&#125;&#39;.format(a, c))  # æŠŠæœ€åä¸€ä¸ªç›˜å­ç§»åŠ¨åˆ° c        hanoi(n-1, b, a, c)                           # æŠŠ n-1 ä¸ªç›˜å­ç”± b ç»è¿‡ a ç§»åŠ¨åˆ° c</code></pre><p>ç¤ºä¾‹ï¼š</p><pre><code class="python">def hanoi(n, a, b, c):    if n &gt; 0:        hanoi(n-1, a, c, b)        print(&#39;moving from &#123;0&#125; to &#123;1&#125;&#39;.format(a, c))        hanoi(n-1, b, a, c)hanoi(3, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;)</code></pre><pre><code class="python">moving from A to Cmoving from A to Bmoving from C to Bmoving from A to Cmoving from B to Amoving from B to Cmoving from A to C</code></pre><hr><h2 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h2><p>å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­æ‰€æœ‰é€’å½’å½¢å¼çš„è°ƒç”¨éƒ½å‡ºç°åœ¨å‡½æ•°çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªé€’å½’å‡½æ•°æ˜¯å°¾é€’å½’çš„ã€‚é€šä¿—æ¥è®²å°±æ˜¯é€’å½’è°ƒç”¨æ”¾åœ¨äº†å‡½æ•°çš„æœ€åã€‚</p><pre><code class="python"># ä¸€èˆ¬é€’å½’def func(n):    if n &gt; 0:        func(n-1)        print(n)# ä¸€èˆ¬é€’å½’def func(n):    if n &gt; 0:        return func(n-1) + n# å°¾é€’å½’def func(n):    a = n    if n &gt; 0:        a += 1        print(a, n)        return func(n-1)</code></pre><p>å¯¹äºæ™®é€šçš„é€’å½’ï¼Œæ¯ä¸€çº§é€’å½’éƒ½äº§ç”Ÿäº†æ–°çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åˆ›å»ºæ–°çš„è°ƒç”¨æ ˆï¼Œéšç€é€’å½’æ·±åº¦çš„å¢åŠ ï¼Œåˆ›å»ºçš„æ ˆè¶Šæ¥è¶Šå¤šï¼Œå®¹æ˜“é€ æˆçˆ†æ ˆã€‚</p><pre><code class="python">def normal_recursion(n):    if n == 1:        return 1    else:        return n + normal_recursion(n-1)</code></pre><p><code>normal_recursion(5)</code> æ‰§è¡Œï¼š</p><pre><code class="python">normal_recursion(5)5 + normal_recursion(4)5 + 4 + normal_recursion(3)5 + 4 + 3 + normal_recursion(2)5 + 4 + 3 + 2 + normal_recursion(1)5 + 4 + 3 + 35 + 4 + 65 + 1015</code></pre><p>å°¾é€’å½’åŸºäºå‡½æ•°çš„å°¾è°ƒç”¨ï¼Œæ¯ä¸€çº§è°ƒç”¨ç›´æ¥è¿”å›é€’å½’å‡½æ•°æ›´æ–°è°ƒç”¨æ ˆï¼Œæ²¡æœ‰æ–°å±€éƒ¨å˜é‡çš„äº§ç”Ÿï¼Œç±»ä¼¼è¿­ä»£çš„å®ç°ã€‚</p><pre><code class="python">def tail_recursion(n, total=0):    if n == 0:        return total    else:        return tail_recursion(n-1, total+n)</code></pre><p><code>normal_recursion(5)</code> æ‰§è¡Œï¼š</p><pre><code class="python">tail_recursion(5, 0)tail_recursion(4, 5)tail_recursion(3, 9)tail_recursion(2, 12)tail_recursion(1, 14)tail_recursion(0, 15)15</code></pre><p>åœ¨ Pythonï¼ŒJavaï¼ŒPascal ç­‰è¯­è¨€ä¸­æ˜¯æ— æ³•å®ç°å°¾é€’å½’ä¼˜åŒ–çš„ï¼Œæ‰€ä»¥é‡‡ç”¨äº† forï¼Œwhileï¼Œgoto ç­‰ç‰¹æ®Šç»“æ„ä»¥è¿­ä»£çš„æ–¹å¼æ¥ä»£æ›¿å°¾é€’å½’ã€‚</p><hr><h2 id="Python-ä¸­å°¾é€’å½’çš„è§£å†³æ–¹æ¡ˆ"><a href="#Python-ä¸­å°¾é€’å½’çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="Python ä¸­å°¾é€’å½’çš„è§£å†³æ–¹æ¡ˆ"></a>Python ä¸­å°¾é€’å½’çš„è§£å†³æ–¹æ¡ˆ</h2><p>ä½¿ç”¨æ™®é€šçš„é€’å½’æ¥å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—çš„è®¡ç®—ï¼Œä»£ç æ®µå¦‚ä¸‹ï¼š</p><pre><code class="python">def fibonacc(n, current=0, next=1):    if n == 0:        return current    else:        return fibonacc(n-1, next, current+next)a = fibonacc(1000)print(a)</code></pre><p>æ­¤æ—¶ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¶…è¿‡äº†æœ€å¤§é€’å½’æ·±åº¦ï¼ˆé»˜è®¤æ·±åº¦900-1000å·¦å³ï¼‰ï¼š</p><pre><code class="python">Traceback (most recent call last):  File &quot;F:/PycharmProjects/algorithm/fibonacc_test.py&quot;, line 57, in &lt;module&gt;    a = fibonacc(1000)  File &quot;F:/PycharmProjects/algorithm/fibonacc_test.py&quot;, line 47, in fibonacc    return fibonacc(n-1, next, current+next)  File &quot;F:/PycharmProjects/algorithm/fibonacc_test.py&quot;, line 47, in fibonacc    return fibonacc(n-1, next, current+next)  File &quot;F:/PycharmProjects/algorithm/fibonacc_test.py&quot;, line 47, in fibonacc    return fibonacc(n-1, next, current+next)  [Previous line repeated 995 more times]  File &quot;F:/PycharmProjects/algorithm/fibonacc_test.py&quot;, line 44, in fibonacc    if n == 0:RecursionError: maximum recursion depth exceeded in comparison</code></pre><p>å¦‚æœæ˜¯é€’å½’æ·±åº¦ä¸æ˜¯å¾ˆå¤§çš„æƒ…å†µï¼Œå¯ä»¥æ‰‹åŠ¨é‡è®¾é€’å½’æ·±åº¦æ¥è§£å†³ï¼š</p><pre><code class="python">import syssys.setrecursionlimit(10000)  # é€’å½’æ·±åº¦è®¾ç½®ä¸º 10000</code></pre><p>å¦‚æœé€’å½’æ·±åº¦éå¸¸å¤§ï¼Œé‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨å°¾é€’å½’ä¼˜åŒ–ï¼Œä½†æ˜¯ Python å®˜æ–¹æ˜¯å¹¶ä¸æ”¯æŒå°¾é€’å½’çš„ï¼ˆä¸çŸ¥é“ä¸ºå•¥ï¼‰ï¼Œç„¶è€Œè¿™éš¾ä¸åˆ°å¹¿å¤§çš„ç¨‹åºå‘˜ä»¬ï¼Œæ—©åœ¨ 2006 å¹´ <a href="https://code.activestate.com/recipes/users/2792865/">Crutcher Dunnavant</a> å°±æƒ³å‡ºäº†ä¸€ä¸ªè§£å†³åŠæ³•ï¼Œå®ç°ä¸€ä¸ª <code>tail_call_optimized</code> è£…é¥°å™¨ï¼ŒåŸæ–‡é“¾æ¥ï¼š<a href="https://code.activestate.com/recipes/474088/">https://code.activestate.com/recipes/474088/</a>ï¼ŒåŸä»£ç æ˜¯ Python 2.4 å®ç°çš„ï¼Œç”¨ Python 3.x å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="python"># This program shows off a python decorator# which implements tail call optimization. It# does this by throwing an exception if it is# it&#39;s own grandparent, and catching such# exceptions to recall the stack.import sysclass TailRecurseException(BaseException):    def __init__(self, args, kwargs):        self.args = args        self.kwargs = kwargsdef tail_call_optimized(g):    &quot;&quot;&quot;    This function decorates a function with tail call    optimization. It does this by throwing an exception    if it is it&#39;s own grandparent, and catching such    exceptions to fake the tail call optimization.    This function fails if the decorated5    function recurses in a non-tail context.    &quot;&quot;&quot;    def func(*args, **kwargs):        f = sys._getframe()        if f.f_back and f.f_back.f_back and f.f_back.f_back.f_code == f.f_code:            raise TailRecurseException(args, kwargs)        else:            while 1:                try:                    return g(*args, **kwargs)                except TailRecurseException as e:                    args = e.args                    kwargs = e.kwargs    func.__doc__ = g.__doc__    return func</code></pre><p>ä½¿ç”¨è¯¥è£…é¥°å™¨å†æ¥å®ç°æ¯”è¾ƒå¤§çš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„è®¡ç®—ï¼š</p><pre><code class="python">@tail_call_optimizeddef fibonacc(n, current=0, next=1):    if n == 0:        return current    else:        return fibonacc(n-1, next, current+next)a = fibonacc(1000)print(a)</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class="python">43466557686937456435688527675040625802564660517371780402481729089536555417949051890403879840079255169295922593080322634775209689623239873322471161642996440906533187938298969649928516003704476137795166849228875</code></pre><p><code>tail_call_optimized</code> å®ç°å°¾é€’å½’ä¼˜åŒ–çš„åŸç†ï¼šå½“é€’å½’å‡½æ•°è¢«è¯¥è£…é¥°å™¨ä¿®é¥°åï¼Œé€’å½’è°ƒç”¨åœ¨è£…é¥°å™¨whileå¾ªç¯å†…éƒ¨è¿›è¡Œï¼Œæ¯å½“äº§ç”Ÿæ–°çš„é€’å½’è°ƒç”¨æ ˆå¸§æ—¶ï¼Œ<code>f.f_back.f_back.f_code == f.f_code:</code> å°±æ•è·å½“å‰å°¾è°ƒç”¨å‡½æ•°çš„å‚æ•°ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œä»è€Œé”€æ¯é€’å½’æ ˆå¹¶ä½¿ç”¨æ•è·çš„å‚æ•°æ‰‹åŠ¨è°ƒç”¨é€’å½’å‡½æ•°ï¼Œæ‰€ä»¥é€’å½’çš„è¿‡ç¨‹ä¸­å§‹ç»ˆåªå­˜åœ¨ä¸€ä¸ªæ ˆå¸§å¯¹è±¡ï¼Œè¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚</p><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXâ€¢é²å‹ƒã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/109322815æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é€’å½’æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#é€’å½’æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;é€’å½’æ¦‚å¿µ&quot;&gt;&lt;/a&gt;é€’å½’æ¦‚å¿µ&lt;/h2&gt;&lt;p&gt;&lt;font color=#ff0000&gt;&lt;strong&gt;é€’å½’&lt;/strong&gt;&lt;/font&gt;ï¼šç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ç§°ä¸ºé€’å½’</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Python å®ç°åå¤§ç»å…¸æ’åºç®—æ³•</title>
    <link href="https://www.itbob.cn/article/036/"/>
    <id>https://www.itbob.cn/article/036/</id>
    <published>2020-10-23T16:12:00.000Z</published>
    <updated>2022-05-22T12:47:00.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.bilibili.com/video/BV1mp4y1D7UP">https://www.bilibili.com/video/BV1mp4y1D7UP</a></li><li>æœ¬æ–‡åŠ¨å›¾æ¼”ç¤ºæ¥æºï¼š<a href="https://visualgo.net/">https://visualgo.net/</a></li></ul><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/108987300æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="æ’åºç®—æ³•åˆ†ç±»"><a href="#æ’åºç®—æ³•åˆ†ç±»" class="headerlink" title="æ’åºç®—æ³•åˆ†ç±»"></a><font color=#FF0000>æ’åºç®—æ³•åˆ†ç±»</font></h2><ul><li><font color=#FF0000><strong>å†…éƒ¨æ’åº</strong></font>ï¼šæŒ‡åœ¨æ’åºæœŸé—´ï¼Œå…ƒç´ å…¨éƒ¨å­˜æ”¾åœ¨å†…å­˜ä¸­çš„æ’åºï¼Œå¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼š<strong>å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åºã€å¸Œå°”æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åº</strong>ç­‰ã€‚</li><li><font color=#FF0000><strong>å¤–éƒ¨æ’åº</strong></font>ï¼šæŒ‡åœ¨æ’åºæœŸé—´ï¼Œå…ƒç´ æ— æ³•å®Œå…¨å…¨éƒ¨åŒæ—¶å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå¿…é¡»åœ¨æ’åºçš„è¿‡ç¨‹ä¸­æ ¹æ®è¦æ±‚ä¸æ–­åœ°åœ¨å†…ã€å¤–å­˜ä¹‹é—´ç§»åŠ¨çš„æ’åºï¼›</li><li><font color=#FF0000><strong>æ¯”è¾ƒç±»æ’åº</strong></font>ï¼šé€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸èƒ½çªç ´O(nlogn)ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºéçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åºã€‚</li><li><font color=#FF0000><strong>éæ¯”è¾ƒç±»æ’åº</strong></font>ï¼šä¸é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œå®ƒå¯ä»¥çªç ´åŸºäºæ¯”è¾ƒæ’åºçš„æ—¶é—´ä¸‹ç•Œï¼Œä»¥çº¿æ€§æ—¶é—´è¿è¡Œï¼Œå› æ­¤ä¹Ÿç§°ä¸ºçº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åºã€‚ å¸¸è§çš„éæ¯”è¾ƒç±»æ’åºç®—æ³•æœ‰ï¼š<strong>åŸºæ•°æ’åºã€è®¡æ•°æ’åºã€æ¡¶æ’åº</strong>ç­‰</li></ul><hr><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå†…éƒ¨æ’åºç®—æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éƒ½è¦è¿›è¡Œä¸¤ç§æ“ä½œï¼šæ¯”è¾ƒå’Œç§»åŠ¨ã€‚é€šè¿‡æ¯”è¾ƒä¸¤ä¸ªå…³é”®å­—çš„å¤§å°ï¼Œç¡®å®šå¯¹åº”å…ƒç´ çš„å‰åå…³ç³»ï¼Œç„¶åé€šè¿‡ç§»åŠ¨å…ƒç´ ä»¥è¾¾åˆ°æœ‰åºã€‚ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰çš„å†…éƒ¨æ’åºç®—æ³•éƒ½è¦åŸºäºæ¯”è¾ƒæ“ä½œã€‚</p><p>æ¯ç§æ’åºç®—æ³•éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œé€‚åˆåœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå°±å…¶å…¨é¢æ€§èƒ½è€Œè¨€ï¼Œå¾ˆéš¾æå‡ºä¸€ç§è¢«è®¤ä¸ºæ˜¯æœ€å¥½çš„ç®—æ³•ã€‚<font color=#FF0000><strong>é€šå¸¸å¯ä»¥å°†æ’åºç®—æ³•åˆ†ä¸ºæ’å…¥æ’åºã€äº¤æ¢æ’åºã€é€‰æ‹©æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºäº”å¤§ç±»</strong></font>ï¼Œå†…éƒ¨æ’åºç®—æ³•çš„æ€§èƒ½å–å†³äºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œè€Œæ—¶é—´å¤æ‚åº¦ä¸€èˆ¬æ˜¯ç”±æ¯”è¾ƒå’Œç§»åŠ¨çš„æ¬¡æ•°å†³å®šçš„ã€‚</p><hr><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/01.png" alt="01"></p><table><thead><tr><th>æ’åºç®—æ³•</th><th>æ—¶é—´å¤æ‚åº¦ï¼ˆå¹³å‡ï¼‰</th><th>æ—¶é—´å¤æ‚åº¦ï¼ˆæœ€å¥½ï¼‰</th><th>æ—¶é—´å¤æ‚åº¦ï¼ˆæœ€åï¼‰</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td>$$ O(n^2) $$</td><td>$$ O(n) $$</td><td>$$ O(n^2) $$</td><td>$$ O(1) $$</td><td>ç¨³å®š</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>$$ O(n^2) $$</td><td>$$ O(n^2) $$</td><td>$$ O(n^2) $$</td><td>$$ O(1) $$</td><td>ä¸ç¨³å®š</td></tr><tr><td>æ’å…¥æ’åº</td><td>$$ O(n^2) $$</td><td>$$ O(n) $$</td><td>$$ O(n^2) $$</td><td>$$ O(1) $$</td><td>ç¨³å®š</td></tr><tr><td>å¸Œå°”æ’åº</td><td>$$ O(nlogn) $$</td><td>$$ O(nlog^2n) $$</td><td>$$ O(nlog^2n) $$</td><td>$$ O(1) $$</td><td>ä¸ç¨³å®š</td></tr><tr><td>å½’å¹¶æ’åº</td><td>$$ O(nlogn) $$</td><td>$$ O(nlogn) $$</td><td>$$ O(nlogn) $$</td><td>$$ O(n) $$</td><td>ç¨³å®š</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td>$$ O(nlogn) $$</td><td>$$ O(nlogn) $$</td><td>$$ O(n^2) $$</td><td>$$ O(logn) $$</td><td>ä¸ç¨³å®š</td></tr><tr><td>å †æ’åº</td><td>$$ O(nlogn) $$</td><td>$$ O(nlogn) $$</td><td>$$ O(nlogn) $$</td><td>$$ O(1) $$</td><td>ä¸ç¨³å®š</td></tr><tr><td>è®¡æ•°æ’åº</td><td>$$ O(n+k) $$</td><td>$$ O(n+k) $$</td><td>$$ O(n+k) $$</td><td>$$ O(k) $$</td><td>ç¨³å®š</td></tr><tr><td>æ¡¶æ’åº</td><td>$$ O(n+k) $$</td><td>$$ O(n+k) $$</td><td>$$ O(n^2) $$</td><td>$$ O(n+k) $$</td><td>ç¨³å®š</td></tr><tr><td>åŸºæ•°æ’åº</td><td>$$ O(n*k) $$</td><td>$$ O(n*k) $$</td><td>$$ O(n*k) $$</td><td>$$ O(n+k) $$</td><td>ç¨³å®š</td></tr></tbody></table><p><strong>ç¨³å®šæ€§</strong>ï¼šæ’åºå 2 ä¸ªç›¸ç­‰é”®å€¼çš„é¡ºåºå’Œæ’åºä¹‹å‰å®ƒä»¬çš„é¡ºåºæ˜¯å¦ç›¸åŒã€‚ä¾‹ï¼šå¦‚æœ a åŸæœ¬åœ¨ b å‰é¢ï¼Œä¸” a=bï¼Œæ’åºä¹‹å a ä»ç„¶åœ¨ b çš„å‰é¢ï¼Œåˆ™è¡¨ç¤ºå…·æœ‰ç¨³å®šæ€§ã€‚</p><p>å¸¸è§æ—¶é—´å¤æ‚åº¦å¤§å°æ¯”è¾ƒï¼š</p><p>$$<br>O(1) &lt; O(logn) &lt; O(n) &lt; O(nlogn) &lt; O(n^2) &lt;â€¦&lt; O(2^n)&lt;O (n!)<br>$$</p><hr><h2 id="ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a><font color=#FF0000>ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</font></h2><h3 id="1ã€åŸç†"><a href="#1ã€åŸç†" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>é‡å¤åœ°èµ°è®¿è¦æ’åºçš„å…ƒç´ ï¼Œä¾æ¬¡æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœé¡ºåºï¼ˆå¦‚ä»å¤§åˆ°å°ï¼‰é”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿å…ƒç´ çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œï¼Œç›´åˆ°æ²¡æœ‰ç›¸é‚»å…ƒç´ éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å…ƒç´ åˆ—å·²ç»æ’åºå®Œæˆã€‚å†’æ³¡çš„æ„æ€å…¶å®å°±æ˜¯æ¯ä¸€è½®å†’æ³¡ä¸€ä¸ªæœ€å¤§çš„å…ƒç´ å°±ä¼šé€šè¿‡ä¸æ–­æ¯”è¾ƒå’Œäº¤æ¢ç›¸é‚»å…ƒç´ ä½¿å®ƒè½¬ç§»åˆ°æœ€å³è¾¹ã€‚</p><p>å‡å¦‚æœ‰ 10 ä¸ªå°ç›†å‹ä»å·¦åˆ°å³ç«™æˆä¸€æ’ï¼Œä¸ªå¤´ä¸ç­‰ã€‚è€å¸ˆæƒ³è®©ä»–ä»¬æŒ‰ç…§ä¸ªå¤´ä»ä½åˆ°é«˜ç«™å¥½ï¼Œäºæ˜¯ä»–å¼€å§‹å–Šå£å·ã€‚ æ¯å–Šä¸€æ¬¡ï¼Œä»ç¬¬ä¸€ä¸ªå°ç›†å‹å¼€å§‹ï¼Œç›¸é‚»çš„å°æœ‹å‹å¦‚æœèº«é«˜ä¸æ˜¯æ­£åºå°±ä¼šä¸¤ä¸¤è°ƒæ¢ï¼Œå°±è¿™æ ·ç¬¬ä¸€è½®ä¸ªå¤´æœ€é«˜çš„æ’åˆ°äº†æœ€å³è¾¹ï¼ˆå†’æ³¡åˆ°æœ€å³è¾¹ï¼‰ï¼Œç¬¬äºŒè½®ä¾æ¬¡è¿™ä¹ˆæ¥ï¼Œä»ç¬¬ä¸€ä¸ªå°æœ‹å‹å¼€å§‹ä¸¤ä¸¤äº¤æ¢ï¼Œè¿™æ ·æ¬¡é«˜çš„å°ç›†å‹åˆæ’åˆ°äº†å€’æ•°ç¬¬äºŒä¸ªä½ç½®ã€‚ä¾æ¬¡ç±»æ¨ã€‚</p><h3 id="2ã€æ­¥éª¤"><a href="#2ã€æ­¥éª¤" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼›</li><li><strong>â‘¡</strong> å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼›</li><li><strong>â‘¢</strong> é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤æ­¥éª¤ <strong>â‘ </strong> ~ <strong>â‘¡</strong>ï¼Œé™¤äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/02%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif" alt="02å†’æ³¡æ’åº"></p><h3 id="4ã€ä»£ç å®ç°"><a href="#4ã€ä»£ç å®ç°" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def bubbleSort(arr):    for i in range(len(arr)-1):         # å¾ªç¯ç¬¬ i è¶Ÿ        for j in range(len(arr)-i-1):   # j ä¸ºä¸‹æ ‡            if arr[j] &gt; arr[j+1]:       # å¦‚æœè¿™ä¸ªæ•°å¤§äºåé¢çš„æ•°å°±äº¤æ¢ä¸¤è€…çš„ä½ç½®                arr[j], arr[j+1] = arr[j+1], arr[j]    return arr</code></pre><p>å†’æ³¡æ’åºè¿˜æœ‰ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œå°±æ˜¯ç«‹ä¸€ä¸ª flagï¼Œå½“æŸä¸€è¶Ÿåºåˆ—éå†ä¸­å…ƒç´ æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œåˆ™è¯æ˜è¯¥åºåˆ—å·²ç»æœ‰åºï¼Œå°±ä¸å†è¿›è¡Œåç»­çš„æ’åºã€‚åŠ¨ç”»æ¼”ç¤ºé‡Œå°±æ˜¯æ”¹è¿›åçš„ç®—æ³•ï¼Œæ”¹è¿›åçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="python">def bubbleSort(arr):    for i in range(len(arr)-1):         # å¾ªç¯ç¬¬ i è¶Ÿ    flag = False        for j in range(len(arr)-i-1):   # j ä¸ºä¸‹æ ‡            if arr[j] &gt; arr[j+1]:       # å¦‚æœè¿™ä¸ªæ•°å¤§äºåé¢çš„æ•°å°±äº¤æ¢ä¸¤è€…çš„ä½ç½®                arr[j], arr[j+1] = arr[j+1], arr[j]                flag = True        if not flag:            return    return arr</code></pre><p>å†’æ³¡æ’åºæœ€å¿«çš„æƒ…å†µï¼šå½“è¾“å…¥çš„æ•°æ®æ˜¯æ­£åºæ—¶ï¼›æœ€æ…¢çš„æƒ…å†µï¼šå½“è¾“å…¥çš„æ•°æ®æ˜¯ååºæ—¶ã€‚</p><h3 id="5ã€å…·ä½“ç¤ºä¾‹"><a href="#5ã€å…·ä½“ç¤ºä¾‹" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><p>æœªæ”¹è¿›ç‰ˆæœ¬ï¼š</p><pre><code class="python">def bubble_sort(arr):    for i in range(len(arr)-1):         # å¾ªç¯ç¬¬ i è¶Ÿ        for j in range(len(arr)-i-1):   # j ä¸ºä¸‹æ ‡            if arr[j] &gt; arr[j+1]:       # å¦‚æœè¿™ä¸ªæ•°å¤§äºåé¢çš„æ•°å°±äº¤æ¢ä¸¤è€…çš„ä½ç½®                arr[j], arr[j+1] = arr[j+1], arr[j]        print(arr)                      # æ¯ä¸€è¶Ÿæ¯”è¾ƒå®Œäº†å°±æ‰“å°ä¸€æ¬¡arr = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]bubble_sort(arr)</code></pre><pre><code class="python">[3, 38, 5, 44, 15, 36, 26, 27, 2, 46, 4, 19, 47, 48, 50][3, 5, 38, 15, 36, 26, 27, 2, 44, 4, 19, 46, 47, 48, 50][3, 5, 15, 36, 26, 27, 2, 38, 4, 19, 44, 46, 47, 48, 50][3, 5, 15, 26, 27, 2, 36, 4, 19, 38, 44, 46, 47, 48, 50][3, 5, 15, 26, 2, 27, 4, 19, 36, 38, 44, 46, 47, 48, 50][3, 5, 15, 2, 26, 4, 19, 27, 36, 38, 44, 46, 47, 48, 50][3, 5, 2, 15, 4, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][3, 2, 5, 4, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><p>æ”¹è¿›ç‰ˆæœ¬ï¼š</p><pre><code class="python">def bubble_sort(arr):    for i in range(len(arr)-1):         # å¾ªç¯ç¬¬ i è¶Ÿ        flag = False        for j in range(len(arr)-i-1):   # j ä¸ºä¸‹æ ‡            if arr[j] &gt; arr[j+1]:       # å¦‚æœè¿™ä¸ªæ•°å¤§äºåé¢çš„æ•°å°±äº¤æ¢ä¸¤è€…çš„ä½ç½®                arr[j], arr[j+1] = arr[j+1], arr[j]                flag = True        if not flag:            return        print(arr)                      # æ¯ä¸€è¶Ÿæ¯”è¾ƒå®Œäº†å°±æ‰“å°ä¸€æ¬¡arr = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]bubble_sort(arr)</code></pre><pre><code class="python">[3, 38, 5, 44, 15, 36, 26, 27, 2, 46, 4, 19, 47, 48, 50][3, 5, 38, 15, 36, 26, 27, 2, 44, 4, 19, 46, 47, 48, 50][3, 5, 15, 36, 26, 27, 2, 38, 4, 19, 44, 46, 47, 48, 50][3, 5, 15, 26, 27, 2, 36, 4, 19, 38, 44, 46, 47, 48, 50][3, 5, 15, 26, 2, 27, 4, 19, 36, 38, 44, 46, 47, 48, 50][3, 5, 15, 2, 26, 4, 19, 27, 36, 38, 44, 46, 47, 48, 50][3, 5, 2, 15, 4, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][3, 2, 5, 4, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><hr><h2 id="äºŒã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#äºŒã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="äºŒã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a><font color=#FF0000>äºŒã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</font></h2><h3 id="1ã€åŸç†-1"><a href="#1ã€åŸç†-1" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>ç¬¬ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œå­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åå†ä»å‰©ä½™çš„æœªæ’åºå…ƒç´ ä¸­å¯»æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºçš„åºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ çš„ä¸ªæ•°ä¸ºé›¶ã€‚å¯ä»¥ç†è§£ä¸º ä¸€ä¸ª 0 åˆ° n-1 çš„è¿­ä»£ï¼Œæ¯æ¬¡å‘åæŸ¥æ‰¾é€‰æ‹©ä¸€ä¸ªæœ€å°çš„å…ƒç´ ã€‚é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚</p><p>å‡å¦‚æœ‰ 10 ä¸ªå°ç›†å‹ä»å·¦åˆ°å³ç«™æˆä¸€æ’ï¼Œä¸ªå¤´ä¸ç­‰ã€‚è€å¸ˆæƒ³è®©ä»–ä»¬æŒ‰ç…§ä¸ªå¤´ä»ä½åˆ°é«˜ç«™å¥½ï¼Œæˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œä»å¤´åˆ°å°¾æ‰¾ä¸€ä¸ªä¸ªå¤´æœ€å°çš„å°ç›†å‹ï¼Œç„¶åæŠŠå®ƒå’Œç¬¬ä¸€ä¸ªå°ç›†å‹äº¤æ¢ã€‚ ç„¶åä»ç¬¬äºŒä¸ªå°ç›†å‹å¼€å§‹é‡‡å–åŒæ ·çš„ç­–ç•¥ï¼Œè¿™æ ·ä¸€åœˆä¸‹æ¥å°ç›†å‹å°±æ˜¯æœ‰åºçš„äº†ã€‚</p><h3 id="2ã€æ­¥éª¤-1"><a href="#2ã€æ­¥éª¤-1" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›</li><li><strong>â‘¡</strong> å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼›</li><li><strong>â‘¢</strong> é‡å¤æ­¥éª¤ <strong>â‘¡</strong>ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-1"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-1" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/03%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F.gif" alt="03é€‰æ‹©æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-1"><a href="#4ã€ä»£ç å®ç°-1" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><p>Python ä»£ç ï¼š</p><pre><code class="python">def selection_sort(arr):    for i in range(len(arr)-1):          # å¾ªç¯ç¬¬ i è¶Ÿ        min_index = i                    # è®°å½•æœ€å°æ•°çš„ä¸‹æ ‡        for j in range(i+1, len(arr)):   # j ä¸ºä¸‹æ ‡            if arr[j] &lt; arr[min_index]:  # å¦‚æœè¿™ä¸ªæ•°å°äºè®°å½•çš„æœ€å°æ•°ï¼Œåˆ™æ›´æ–°æœ€å°æ•°çš„ä¸‹æ ‡                min_index = j        arr[i], arr[min_index] = arr[min_index], arr[i]  # å°† i ä½ç½®çš„æ•°ï¼ˆå·²æ’åºåºåˆ—çš„æœ«å°¾çš„æ•°ï¼‰å’Œæœ€å°æ•°è¿›è¡Œäº¤æ¢    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-1"><a href="#5ã€å…·ä½“ç¤ºä¾‹-1" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def selection_sort(arr):    for i in range(len(arr)-1):          # å¾ªç¯ç¬¬ i è¶Ÿ        min_index = i                    # è®°å½•æœ€å°æ•°çš„ä¸‹æ ‡        for j in range(i+1, len(arr)):   # j ä¸ºä¸‹æ ‡            if arr[j] &lt; arr[min_index]:  # å¦‚æœè¿™ä¸ªæ•°å°äºè®°å½•çš„æœ€å°æ•°ï¼Œåˆ™æ›´æ–°æœ€å°æ•°çš„ä¸‹æ ‡                min_index = j        arr[i], arr[min_index] = arr[min_index], arr[i]  # å°† i ä½ç½®çš„æ•°ï¼ˆå·²æ’åºåºåˆ—çš„æœ«å°¾çš„æ•°ï¼‰å’Œæœ€å°æ•°è¿›è¡Œäº¤æ¢        print(arr)                       # æ¯ä¸€è¶Ÿæ¯”è¾ƒå®Œäº†å°±æ‰“å°ä¸€æ¬¡arr = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]selection_sort(arr)</code></pre><pre><code class="python">[2, 44, 38, 5, 47, 15, 36, 26, 27, 3, 46, 4, 19, 50, 48][2, 3, 38, 5, 47, 15, 36, 26, 27, 44, 46, 4, 19, 50, 48][2, 3, 4, 5, 47, 15, 36, 26, 27, 44, 46, 38, 19, 50, 48][2, 3, 4, 5, 47, 15, 36, 26, 27, 44, 46, 38, 19, 50, 48][2, 3, 4, 5, 15, 47, 36, 26, 27, 44, 46, 38, 19, 50, 48][2, 3, 4, 5, 15, 19, 36, 26, 27, 44, 46, 38, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 36, 27, 44, 46, 38, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 44, 46, 38, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 44, 46, 38, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 46, 44, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 50, 48][2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><hr><h2 id="ä¸‰ã€æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#ä¸‰ã€æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="ä¸‰ã€æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a><font color=#FF0000>ä¸‰ã€æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</font></h2><h3 id="1ã€åŸç†-2"><a href="#1ã€åŸç†-2" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>æ’å…¥æ’åºä¸€èˆ¬ä¹Ÿè¢«ç§°ä¸ºç›´æ¥æ’å…¥æ’åºã€‚å¯¹äºå°‘é‡å…ƒç´ çš„æ’åºï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç®—æ³•ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„æœ‰åºè¡¨ä¸­ï¼Œä»è€Œå½¢æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ã€‚åœ¨å…¶å®ç°è¿‡ç¨‹ä½¿ç”¨åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯å¯¹é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œéå†ï¼Œå†…å±‚å¾ªç¯å¯¹å½“å‰å…ƒç´ å‰é¢æœ‰åºè¡¨è¿›è¡Œå¾…æ’å…¥ä½ç½®æŸ¥æ‰¾ï¼Œå¹¶è¿›è¡Œç§»åŠ¨ã€‚</p><p>æ’å…¥æ’åºçš„å·¥ä½œæ–¹å¼åƒè®¸å¤šäººæ’åºä¸€æ‰‹æ‰‘å…‹ç‰Œã€‚å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬çš„å·¦æ‰‹ä¸ºç©ºå¹¶ä¸”æ¡Œå­ä¸Šçš„ç‰Œé¢å‘ä¸‹ã€‚ç„¶åï¼Œæˆ‘ä»¬æ¯æ¬¡ä»æ¡Œå­ä¸Šæ‹¿èµ°ä¸€å¼ ç‰Œå¹¶å°†å®ƒæ’å…¥å·¦æ‰‹ä¸­æ­£ç¡®çš„ä½ç½®ã€‚ä¸ºäº†æ‰¾åˆ°ä¸€å¼ ç‰Œçš„æ­£ç¡®ä½ç½®ï¼Œæˆ‘ä»¬ä»å³åˆ°å·¦å°†å®ƒä¸å·²åœ¨æ‰‹ä¸­çš„æ¯å¼ ç‰Œè¿›è¡Œæ¯”è¾ƒã€‚æ‹¿åœ¨å·¦æ‰‹ä¸Šçš„ç‰Œæ€»æ˜¯æ’åºå¥½çš„ï¼ŒåŸæ¥è¿™äº›ç‰Œæ˜¯æ¡Œå­ä¸Šç‰Œå †ä¸­é¡¶éƒ¨çš„ç‰Œã€‚</p><h3 id="2ã€æ­¥éª¤-2"><a href="#2ã€æ­¥éª¤-2" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼›</li><li><strong>â‘¡</strong> å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼›</li><li><strong>â‘¢</strong> å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºçš„ï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ å¾€å³ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼Œé‡å¤è¯¥æ­¥éª¤ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼›</li><li><strong>â‘£</strong> å°†æ–°å…ƒç´ æ’å…¥åˆ°æ­¥éª¤ <strong>â‘¢</strong> æ‰¾åˆ°çš„ä½ç½®çš„åé¢ï¼›</li><li><strong>â‘¤</strong> é‡å¤æ­¥éª¤ <strong>â‘¡</strong> ~ <strong>â‘£</strong>ã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-2"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-2" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/04%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.gif" alt="04æ’å…¥æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-2"><a href="#4ã€ä»£ç å®ç°-2" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def insertion_sort(arr):    for i in range(1, len(arr)):    # å°† i çœ‹åšæ‘¸åˆ°çš„ç‰Œçš„ä¸‹æ ‡        tmp = arr[i]                # å°†æ‘¸åˆ°çš„ç‰Œå‚¨å­˜åˆ° tmp        j = i-1                     # å°† j çœ‹åšæ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡        while j &gt;= 0 and arr[j] &gt; tmp:  # å¦‚æœæ‰‹é‡Œçš„ç‰Œå¤§äºæ‘¸åˆ°çš„ç‰Œ            arr[j+1] = arr[j]       # å°†æ‰‹é‡Œçš„ç‰Œå¾€å³ç§»ä¸€ä¸ªä½ç½®ï¼ˆå°†æ‰‹é‡Œçš„ç‰Œèµ‹å€¼ç»™ä¸‹ä¸€ä¸ªä½ç½®ï¼‰            j -= 1                  # å°†æ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡å‡ 1ï¼Œå†æ¬¡å‡†å¤‡ä¸æ‘¸åˆ°çš„ç‰Œè¿›è¡Œæ¯”è¾ƒ        arr[j+1] = tmp              # å°†æ‘¸åˆ°çš„ç‰Œæ’å…¥åˆ° j+1 ä½ç½®    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-2"><a href="#5ã€å…·ä½“ç¤ºä¾‹-2" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def insertion_sort(arr):    for i in range(1, len(arr)):    # å°† i çœ‹åšæ‘¸åˆ°çš„ç‰Œçš„ä¸‹æ ‡        tmp = arr[i]                # å°†æ‘¸åˆ°çš„ç‰Œå‚¨å­˜åˆ° tmp        j = i-1                     # å°† j çœ‹åšæ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡        while j &gt;= 0 and arr[j] &gt; tmp:  # å¦‚æœæ‰‹é‡Œçš„ç‰Œå¤§äºæ‘¸åˆ°çš„ç‰Œ            arr[j+1] = arr[j]       # å°†æ‰‹é‡Œçš„ç‰Œå¾€å³ç§»ä¸€ä¸ªä½ç½®ï¼ˆå°†æ‰‹é‡Œçš„ç‰Œèµ‹å€¼ç»™ä¸‹ä¸€ä¸ªä½ç½®ï¼‰            j -= 1                  # å°†æ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡å‡ 1ï¼Œå†æ¬¡å‡†å¤‡ä¸æ‘¸åˆ°çš„ç‰Œè¿›è¡Œæ¯”è¾ƒ        arr[j+1] = tmp              # å°†æ‘¸åˆ°çš„ç‰Œæ’å…¥åˆ° j+1 ä½ç½®        print(arr)                  # æ¯ä¸€è¶Ÿæ¯”è¾ƒå®Œäº†å°±æ‰“å°ä¸€æ¬¡arr = [0, 9, 8, 7, 1, 2, 3, 4, 5, 6]insertion_sort(arr)</code></pre><pre><code class="python">[0, 9, 8, 7, 1, 2, 3, 4, 5, 6]  # æ‰‹é‡Œç¬¬ä¸€å¼ ç‰Œä¸º 0ï¼Œæ‘¸åˆ° 9ï¼Œæ­¤æ—¶ i=1ï¼Œj=0ï¼Œ0 æ¯” 9 å°ï¼Œå°† 9 æ’åˆ°ç´¢å¼• j+1=1 å¤„ã€‚[0, 8, 9, 7, 1, 2, 3, 4, 5, 6]  # æ‰‹é‡Œçš„ç‰Œä¸º 0ï¼Œ9ï¼Œæ‘¸åˆ° 8ï¼Œæ­¤æ—¶ i=2ï¼Œj=1ï¼Œ9 æ¯” 8 å¤§ï¼Œå°† 9 å³ç§»ä¸€ä¸ªä½ç½®ï¼Œj-1=0ï¼Œå°† 8 æ’åˆ° j+1=1 å¤„[0, 7, 8, 9, 1, 2, 3, 4, 5, 6][0, 1, 7, 8, 9, 2, 3, 4, 5, 6][0, 1, 2, 7, 8, 9, 3, 4, 5, 6][0, 1, 2, 3, 7, 8, 9, 4, 5, 6][0, 1, 2, 3, 4, 7, 8, 9, 5, 6][0, 1, 2, 3, 4, 5, 7, 8, 9, 6][0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre><hr><h2 id="å››ã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰"><a href="#å››ã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰" class="headerlink" title="å››ã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰"></a><font color=#FF0000>å››ã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰</font></h2><h3 id="1ã€åŸç†-3"><a href="#1ã€åŸç†-3" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>å¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œæ˜¯ä¸€ç§åˆ†ç»„æ’å…¥æ’åºç®—æ³•ï¼Œåˆç§°ç¼©å°å¢é‡æ’åºï¼ˆDiminishing Increment Sortï¼‰ï¼Œå¸Œå°”æ’åºæ˜¯éç¨³å®šæ’åºç®—æ³•ã€‚è¯¥æ–¹æ³•å›  D.L.Shell äº 1959 å¹´æå‡ºè€Œå¾—åã€‚</p><p>å¸Œå°”æ’åºæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š</p><ul><li>æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡ï¼›</li><li>ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½ï¼›</li></ul><p>å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><h3 id="2ã€æ­¥éª¤-3"><a href="#2ã€æ­¥éª¤-3" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> n ä¸ºæ•°ç»„é•¿åº¦ï¼Œé¦–å…ˆå–ä¸€ä¸ªæ•´æ•° <strong>d1=n/2</strong>ï¼Œå°†å…ƒç´ åˆ†ä¸º <strong>d1</strong> ä¸ªç»„ï¼Œæ¯ç»„ç›¸é‚»é‡å…ƒç´ ä¹‹é—´è·ç¦»ä¸º <strong>d1-1</strong>ï¼Œåœ¨å„ç»„å†…è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼›</li><li><strong>â‘¡</strong> å–ç¬¬äºŒä¸ªæ•´æ•° <strong>d2=d1/2</strong>ï¼Œé‡å¤æ­¥éª¤ <strong>â‘ </strong> åˆ†ç»„æ’åºè¿‡ç¨‹ï¼Œç›´åˆ° <strong>di=1</strong>ï¼Œå³æ‰€æœ‰å…ƒç´ åœ¨åŒä¸€ç»„å†…è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚</li></ul><p>PSï¼šå¸Œå°”æ’åºæ¯è¶Ÿå¹¶ä¸ä½¿æŸäº›å…ƒç´ æœ‰åºï¼Œè€Œæ˜¯ä½¿æ•´ä½“æ•°æ®è¶Šæ¥è¶Šæ¥è¿‘æœ‰åºï¼›æœ€åä¸€è¶Ÿæ’åºä½¿å¾—æ‰€æœ‰æ•°æ®æœ‰åºã€‚</p><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-3"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-3" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/05%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F.gif" alt="05å¸Œå°”æ’åº"></p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/06%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F.gif" alt="06å¸Œå°”æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-3"><a href="#4ã€ä»£ç å®ç°-3" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def insertion_sort_gap(arr, gap):     # å°† gap çœ‹åšéš” gap ä¸ªè·ç¦»æ‘¸ä¸€å¼ ç‰Œï¼Œè€Œä¸æ˜¯ä¾æ¬¡æŒ‰ç…§é¡ºåºæ‘¸ç‰Œ    for i in range(gap, len(arr)):    # å°† i çœ‹åšæ‘¸åˆ°çš„ç‰Œçš„ä¸‹æ ‡        tmp = arr[i]                  # å°†æ‘¸åˆ°çš„ç‰Œå‚¨å­˜åˆ° tmp        j = i-gap                     # å°† j çœ‹åšæ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡        while j &gt;= 0 and arr[j] &gt; tmp:  # å¦‚æœæ‰‹é‡Œçš„ç‰Œå¤§äºæ‘¸åˆ°çš„ç‰Œ            arr[j+gap] = arr[j]         # å°†æ‰‹é‡Œçš„ç‰Œå¾€å³ç§»ä¸€ä¸ªä½ç½®ï¼ˆå°†æ‰‹é‡Œçš„ç‰Œèµ‹å€¼ç»™ä¸‹ä¸€ä¸ªä½ç½®ï¼‰            j -= gap                    # å°†æ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡å‡ gapï¼Œå†æ¬¡å‡†å¤‡ä¸æ‘¸åˆ°çš„ç‰Œè¿›è¡Œæ¯”è¾ƒ        arr[j+gap] = tmp                # å°†æ‘¸åˆ°çš„ç‰Œæ’å…¥åˆ° j+gap ä½ç½®def shell_sort(arr):    d = len(arr) // 2                   # ç¬¬ä¸€æ¬¡åˆ†ç»„    while d &gt;= 1:        insertion_sort_gap(arr, d)      # è°ƒç”¨æ’å…¥æ’åº        d //= 2                         # æ•´é™¤ 2 åå†æ¬¡åˆ†ç»„    return arr</code></pre><p>ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼Œå†™åœ¨ä¸€èµ·å³å¯ï¼š</p><pre><code class="python">def shell_sort(arr):    d = len(arr) // 2                   # ç¬¬ä¸€æ¬¡åˆ†ç»„    while d &gt;= 1:                       # å°† d çœ‹åšéš” d ä¸ªè·ç¦»æ‘¸ä¸€å¼ ç‰Œï¼Œè€Œä¸æ˜¯ä¾æ¬¡æŒ‰ç…§é¡ºåºæ‘¸ç‰Œ        for i in range(d, len(arr)):    # å°† i çœ‹åšæ‘¸åˆ°çš„ç‰Œçš„ä¸‹æ ‡            tmp = arr[i]                # å°†æ‘¸åˆ°çš„ç‰Œå‚¨å­˜åˆ° tmp            j = i - d                   # å°† j çœ‹åšæ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡            while j &gt;= 0 and arr[j] &gt; tmp:   # å¦‚æœæ‰‹é‡Œçš„ç‰Œå¤§äºæ‘¸åˆ°çš„ç‰Œ                arr[j + d] = arr[j]          # å°†æ‰‹é‡Œçš„ç‰Œå¾€å³ç§»ä¸€ä¸ªä½ç½®ï¼ˆå°†æ‰‹é‡Œçš„ç‰Œèµ‹å€¼ç»™ä¸‹ä¸€ä¸ªä½ç½®ï¼‰                j -= d                       # å°†æ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡å‡ dï¼Œå†æ¬¡å‡†å¤‡ä¸æ‘¸åˆ°çš„ç‰Œè¿›è¡Œæ¯”è¾ƒ            arr[j + d] = tmp                 # å°†æ‘¸åˆ°çš„ç‰Œæ’å…¥åˆ° j+d ä½ç½®        d //= 2                              # æ•´é™¤ 2 åå†æ¬¡åˆ†ç»„    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-3"><a href="#5ã€å…·ä½“ç¤ºä¾‹-3" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def insertion_sort_gap(arr, gap):     # å°† gap çœ‹åšéš” gap ä¸ªè·ç¦»æ‘¸ä¸€å¼ ç‰Œï¼Œè€Œä¸æ˜¯ä¾æ¬¡æŒ‰ç…§é¡ºåºæ‘¸ç‰Œ    for i in range(gap, len(arr)):    # å°† i çœ‹åšæ‘¸åˆ°çš„ç‰Œçš„ä¸‹æ ‡        tmp = arr[i]                  # å°†æ‘¸åˆ°çš„ç‰Œå‚¨å­˜åˆ° tmp        j = i-gap                     # å°† j çœ‹åšæ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡        while j &gt;= 0 and arr[j] &gt; tmp:  # å¦‚æœæ‰‹é‡Œçš„ç‰Œå¤§äºæ‘¸åˆ°çš„ç‰Œ            arr[j+gap] = arr[j]         # å°†æ‰‹é‡Œçš„ç‰Œå¾€å³ç§»ä¸€ä¸ªä½ç½®ï¼ˆå°†æ‰‹é‡Œçš„ç‰Œèµ‹å€¼ç»™ä¸‹ä¸€ä¸ªä½ç½®ï¼‰            j -= gap                    # å°†æ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡å‡ gapï¼Œå†æ¬¡å‡†å¤‡ä¸æ‘¸åˆ°çš„ç‰Œè¿›è¡Œæ¯”è¾ƒ        arr[j+gap] = tmp                # å°†æ‘¸åˆ°çš„ç‰Œæ’å…¥åˆ° j+gap ä½ç½®def shell_sort(arr):    d = len(arr) // 2                   # ç¬¬ä¸€æ¬¡åˆ†ç»„    while d &gt;= 1:        insertion_sort_gap(arr, d)      # è°ƒç”¨æ’å…¥æ’åº        print(arr)                      # æ¯ä¸€è½®æ’åºåæ‰“å°ä¸€æ¬¡        d //= 2                         # æ•´é™¤ 2 åå†æ¬¡åˆ†ç»„arr = [5, 7, 4, 6, 3, 1, 2, 9, 8]shell_sort(arr)</code></pre><pre><code class="python">[3, 1, 2, 6, 5, 7, 4, 9, 8][2, 1, 3, 6, 4, 7, 5, 9, 8][1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre><pre><code class="python">def shell_sort(arr):    d = len(arr) // 2                   # ç¬¬ä¸€æ¬¡åˆ†ç»„    while d &gt;= 1:                       # å°† d çœ‹åšéš” d ä¸ªè·ç¦»æ‘¸ä¸€å¼ ç‰Œï¼Œè€Œä¸æ˜¯ä¾æ¬¡æŒ‰ç…§é¡ºåºæ‘¸ç‰Œ        for i in range(d, len(arr)):    # å°† i çœ‹åšæ‘¸åˆ°çš„ç‰Œçš„ä¸‹æ ‡            tmp = arr[i]                # å°†æ‘¸åˆ°çš„ç‰Œå‚¨å­˜åˆ° tmp            j = i - d                   # å°† j çœ‹åšæ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡            while j &gt;= 0 and arr[j] &gt; tmp:   # å¦‚æœæ‰‹é‡Œçš„ç‰Œå¤§äºæ‘¸åˆ°çš„ç‰Œ                arr[j + d] = arr[j]          # å°†æ‰‹é‡Œçš„ç‰Œå¾€å³ç§»ä¸€ä¸ªä½ç½®ï¼ˆå°†æ‰‹é‡Œçš„ç‰Œèµ‹å€¼ç»™ä¸‹ä¸€ä¸ªä½ç½®ï¼‰                j -= d                       # å°†æ‰‹é‡Œçš„ç‰Œçš„ä¸‹æ ‡å‡ dï¼Œå†æ¬¡å‡†å¤‡ä¸æ‘¸åˆ°çš„ç‰Œè¿›è¡Œæ¯”è¾ƒ            arr[j + d] = tmp                 # å°†æ‘¸åˆ°çš„ç‰Œæ’å…¥åˆ° j+d ä½ç½®        print(arr)                           # æ¯ä¸€è½®æ’åºåæ‰“å°ä¸€æ¬¡        d //= 2                              # æ•´é™¤ 2 åå†æ¬¡åˆ†ç»„arr = [5, 7, 4, 6, 3, 1, 2, 9, 8]shell_sort(arr)</code></pre><pre><code class="python">[3, 1, 2, 6, 5, 7, 4, 9, 8][2, 1, 3, 6, 4, 7, 5, 9, 8][1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre><hr><h2 id="äº”ã€å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰"><a href="#äº”ã€å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰" class="headerlink" title="äº”ã€å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰"></a><font color=#FF0000>äº”ã€å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</font></h2><h3 id="1ã€åŸç†-4"><a href="#1ã€åŸç†-4" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>å½’å¹¶çš„æ¦‚å¿µï¼šå‡è®¾ä¸€ä¸ªåˆ—è¡¨åˆ†ä¸ºä¸¤æ®µï¼Œå…¶ä¸­æ¯ä¸€æ®µéƒ½æ˜¯æœ‰åºåˆ—è¡¨ï¼Œç°åœ¨å°†è¯¥ä¸¤æ®µåˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œè¿™ç§æ“ä½œç§°ä¸ºä¸€æ¬¡å½’å¹¶ã€‚</p><p>å½’å¹¶æ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆï¼Œç¨³å®šçš„æ’åºç®—æ³•ï¼Œè¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—ï¼›å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åºã€‚è‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸ºäºŒè·¯å½’å¹¶ã€‚</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/08.png" alt="08"></p><h3 id="2ã€æ­¥éª¤-4"><a href="#2ã€æ­¥éª¤-4" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><p><font color=#ff0000><strong>å½’å¹¶çš„åŸºæœ¬æ­¥éª¤ï¼š</strong></font></p><ul><li><strong>â‘ </strong> ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸º<strong>ä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œ</strong>ï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼›</li><li><strong>â‘¡</strong> è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›</li><li><strong>â‘¢</strong> æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼›</li><li><strong>â‘£</strong> é‡å¤æ­¥éª¤ <strong>â‘¢</strong> ç›´åˆ°æŸä¸€æŒ‡é’ˆè¾¾åˆ°åºåˆ—å°¾ï¼›</li><li><strong>â‘¤</strong> å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚</li></ul><p><font color=#ff0000><strong>å½’å¹¶æ’åºçš„æ­¥éª¤ï¼š</strong></font></p><ul><li><strong>â‘ </strong> åˆ†è§£ï¼šå°†åˆ—è¡¨è¶Šåˆ†è¶Šå°ï¼Œç›´è‡³åˆ†æˆä¸€ä¸ªå…ƒç´ ï¼Œç»ˆæ­¢æ¡ä»¶ï¼šä¸€ä¸ªå…ƒç´ æ˜¯æœ‰åºçš„ã€‚</li><li><strong>â‘¡</strong> åˆå¹¶ï¼šä¸æ–­å°†ä¸¤ä¸ªæœ‰åºåˆ—è¡¨è¿›è¡Œå½’å¹¶ï¼Œåˆ—è¡¨è¶Šæ¥è¶Šå¤§ï¼Œç›´åˆ°æ‰€æœ‰åºåˆ—å½’å¹¶å®Œæ¯•ã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-4"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-4" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/07%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F.gif" alt="07å½’å¹¶æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-4"><a href="#4ã€ä»£ç å®ç°-4" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def merge(arr, low, mid, high):    # low å’Œ high ä¸ºæ•´ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç´¢å¼•ï¼Œmid ä¸ºä¸­é—´ä½ç½®ç´¢å¼•    # i å’Œ j ä¸ºæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªæœ‰åºåºåˆ—çš„èµ·å§‹ä½ç½®    # ltmp ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—    i = low    j = mid+1    ltmp = []    while i &lt;= mid and j &lt;= high:  # åªè¦å·¦å³ä¸¤è¾¹éƒ½æœ‰æ•°        if arr[i] &lt; arr[j]:        # å½“å·¦è¾¹çš„æ•°å°äºå³è¾¹çš„æ•°            ltmp.append(arr[i])    # å°†å·¦è¾¹çš„æ•°å­˜å…¥ ltmp            i += 1                 # å·¦è¾¹çš„æŒ‡é’ˆå¾€å³ç§»ä¸€ä½        else:                      # å½“å³è¾¹çš„æ•°å°äºå·¦è¾¹çš„æ•°            ltmp.append(arr[j])    # å°†å³è¾¹çš„æ•°å­˜å…¥ ltmp            j += 1                 # å³è¾¹çš„æŒ‡é’ˆå¾€å³ç§»ä¸€ä½    # ä¸Šé¢çš„ while è¯­å¥æ‰§è¡Œå®Œåï¼Œå·¦è¾¹æˆ–è€…å³è¾¹æ²¡æœ‰æ•°äº†    while i &lt;= mid:                # å½“å·¦è¾¹è¿˜æœ‰æ•°çš„æ—¶å€™        ltmp.append(arr[i])        # å°†å·¦è¾¹å‰©ä¸‹çš„æ•°å…¨éƒ¨å­˜å…¥ ltmp        i += 1    while j &lt;= high:               # å½“å³è¾¹è¿˜æœ‰æ•°çš„æ—¶å€™        ltmp.append(arr[j])        # å°†å³è¾¹å‰©ä¸‹çš„æ•°å…¨éƒ¨å­˜å…¥ ltmp        j += 1    arr[low:high+1] = ltmp         # å°†æ’åºåçš„æ•°ç»„å†™å›åŸæ•°ç»„def merge_sort(arr, low, high):       # low å’Œ high ä¸ºæ•´ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç´¢å¼•    if low &lt; high:                    # è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´         mid = (low + high) // 2        merge_sort(arr, low, mid)     # æŠŠå·¦è¾¹é€’å½’åˆ†è§£        merge_sort(arr, mid+1, high)  # æŠŠå³è¾¹é€’å½’åˆ†è§£        merge(arr, low, mid, high)    # åšå½’å¹¶</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-4"><a href="#5ã€å…·ä½“ç¤ºä¾‹-4" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def merge(arr, low, mid, high):    # low å’Œ high ä¸ºæ•´ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç´¢å¼•ï¼Œmid ä¸ºä¸­é—´ä½ç½®ç´¢å¼•    # i å’Œ j ä¸ºæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªæœ‰åºåºåˆ—çš„èµ·å§‹ä½ç½®    # ltmp ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—    i = low    j = mid+1    ltmp = []    while i &lt;= mid and j &lt;= high:  # åªè¦å·¦å³ä¸¤è¾¹éƒ½æœ‰æ•°        if arr[i] &lt; arr[j]:        # å½“å·¦è¾¹çš„æ•°å°äºå³è¾¹çš„æ•°            ltmp.append(arr[i])    # å°†å·¦è¾¹çš„æ•°å­˜å…¥ ltmp            i += 1                 # å·¦è¾¹çš„æŒ‡é’ˆå¾€å³ç§»ä¸€ä½        else:                      # å½“å³è¾¹çš„æ•°å°äºå·¦è¾¹çš„æ•°            ltmp.append(arr[j])    # å°†å³è¾¹çš„æ•°å­˜å…¥ ltmp            j += 1                 # å³è¾¹çš„æŒ‡é’ˆå¾€å³ç§»ä¸€ä½    # ä¸Šé¢çš„ while è¯­å¥æ‰§è¡Œå®Œåï¼Œå·¦è¾¹æˆ–è€…å³è¾¹æ²¡æœ‰æ•°äº†    while i &lt;= mid:                # å½“å·¦è¾¹è¿˜æœ‰æ•°çš„æ—¶å€™        ltmp.append(arr[i])        # å°†å·¦è¾¹å‰©ä¸‹çš„æ•°å…¨éƒ¨å­˜å…¥ ltmp        i += 1    while j &lt;= high:               # å½“å³è¾¹è¿˜æœ‰æ•°çš„æ—¶å€™        ltmp.append(arr[j])        # å°†å³è¾¹å‰©ä¸‹çš„æ•°å…¨éƒ¨å­˜å…¥ ltmp        j += 1    arr[low:high+1] = ltmp         # å°†æ’åºåçš„æ•°ç»„å†™å›åŸæ•°ç»„def merge_sort(arr, low, high):       # low å’Œ high ä¸ºæ•´ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç´¢å¼•    if low &lt; high:                    # è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´         mid = (low + high) // 2        merge_sort(arr, low, mid)     # æŠŠå·¦è¾¹é€’å½’åˆ†è§£        merge_sort(arr, mid+1, high)  # æŠŠå³è¾¹é€’å½’åˆ†è§£        merge(arr, low, mid, high)    # åšå½’å¹¶        print(arr)                    # æ¯ä¸€æ¬¡å½’å¹¶æ‰“å°ä¸€æ¬¡arr = [7, 1, 3, 2, 6, 9, 4]merge_sort(arr, 0, len(arr)-1)</code></pre><pre><code class="python">[1, 7, 3, 2, 6, 9, 4][1, 7, 2, 3, 6, 9, 4][1, 2, 3, 7, 6, 9, 4][1, 2, 3, 7, 6, 9, 4][1, 2, 3, 7, 4, 6, 9][1, 2, 3, 4, 6, 7, 9]</code></pre><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/108987300æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰"></a><font color=#FF0000>å…­ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</font></h2><h3 id="1ã€åŸç†-5"><a href="#1ã€åŸç†-5" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>å¿«é€Ÿæ’åºæ˜¯å¯¹å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ã€‚é¡¾åæ€ä¹‰å¿«é€Ÿæ’åºå°±æ˜¯å¿«ï¼Œè€Œä¸”æ•ˆç‡é«˜ï¼å®ƒæ˜¯å¤„ç†å¤§æ•°æ®æœ€å¿«çš„æ’åºç®—æ³•ä¹‹ä¸€äº†ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥é€’å½’è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚</p><h3 id="2ã€æ­¥éª¤-5"><a href="#2ã€æ­¥éª¤-5" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†å€¼â€;</li><li><strong>â‘¡</strong> é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ”¾åœ¨åŸºå‡†å€¼çš„å·¦è¾¹ï¼Œæ¯”åŸºå‡†å€¼å¤§çš„æ”¾åœ¨åŸºå‡†å€¼çš„å³è¾¹ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å€¼å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºä¸€æ¬¡å½’ä½æ“ä½œï¼Œå½’ä½æ“ä½œçš„è¿‡ç¨‹è§ä¸‹åŠ¨å›¾ï¼›</li><li><strong>â‘¢</strong> é€’å½’åœ°æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æŒ‰ç…§æ­¥éª¤ <strong>â‘  â‘¡</strong> æ’åºã€‚</li></ul><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/09%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.gif" alt="09å¿«é€Ÿæ’åº"></p><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-5"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-5" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/10%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.gif" alt="10å¿«é€Ÿæ’åº"></p><h3 id="4ã€ä»£ç å®ç°-5"><a href="#4ã€ä»£ç å®ç°-5" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def partition(arr, left, right):    # å½’ä½æ“ä½œï¼Œleftï¼Œright åˆ†åˆ«ä¸ºæ•°ç»„å·¦è¾¹å’Œå³è¾¹çš„ä½ç½®ç´¢å¼•    tmp = arr[left]    while left &lt; right:        while left &lt; right and arr[right] &gt;= tmp:  # ä»å³è¾¹æ‰¾æ¯” tmp å°çš„æ•°ï¼Œå¦‚æœæ¯” tmp å¤§ï¼Œåˆ™ç§»åŠ¨æŒ‡é’ˆ            right -= 1                             # å°†æŒ‡é’ˆå·¦ç§»ä¸€ä¸ªä½ç½®        arr[left] = arr[right]                     # å°†å³è¾¹çš„å€¼å†™åˆ°å·¦è¾¹çš„ç©ºä½ä¸Š        while left &lt; right and arr[left] &lt;= tmp:   # ä»å·¦è¾¹æ‰¾æ¯” tmp å¤§çš„æ•°ï¼Œå¦‚æœæ¯” tmp å°ï¼Œåˆ™ç§»åŠ¨æŒ‡é’ˆ            left += 1                              # å°†æŒ‡é’ˆå³ç§»ä¸€ä¸ªä½ç½®        arr[right] = arr[left]                     # å°†å·¦è¾¹çš„å€¼å†™åˆ°å³è¾¹çš„ç©ºä½ä¸Š    arr[left] = tmp                                # æŠŠ tmp å½’ä½    return left                   # è¿”å› leftï¼Œright éƒ½å¯ä»¥ï¼Œç›®çš„æ˜¯ä¾¿äºåé¢çš„é€’å½’æ“ä½œå¯¹å·¦å³ä¸¤éƒ¨åˆ†è¿›è¡Œæ’åºdef quick_sort(arr, left, right):          # å¿«é€Ÿæ’åº    if left &lt; right:        mid = partition(arr, left, right)        quick_sort(arr, left, mid-1)       # å¯¹å·¦åŠéƒ¨åˆ†è¿›è¡Œå½’ä½æ“ä½œ        quick_sort(arr, mid+1, right)      # å¯¹å³åŠéƒ¨åˆ†è¿›è¡Œå½’ä½æ“ä½œ    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-5"><a href="#5ã€å…·ä½“ç¤ºä¾‹-5" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def partition(arr, left, right):    # å½’ä½æ“ä½œï¼Œleftï¼Œright åˆ†åˆ«ä¸ºæ•°ç»„å·¦è¾¹å’Œå³è¾¹çš„ä½ç½®ç´¢å¼•    tmp = arr[left]    while left &lt; right:        while left &lt; right and arr[right] &gt;= tmp:  # ä»å³è¾¹æ‰¾æ¯” tmp å°çš„æ•°ï¼Œå¦‚æœæ¯” tmp å¤§ï¼Œåˆ™ç§»åŠ¨æŒ‡é’ˆ            right -= 1                             # å°†æŒ‡é’ˆå·¦ç§»ä¸€ä¸ªä½ç½®        arr[left] = arr[right]                     # å°†å³è¾¹çš„å€¼å†™åˆ°å·¦è¾¹çš„ç©ºä½ä¸Š        while left &lt; right and arr[left] &lt;= tmp:   # ä»å·¦è¾¹æ‰¾æ¯” tmp å¤§çš„æ•°ï¼Œå¦‚æœæ¯” tmp å°ï¼Œåˆ™ç§»åŠ¨æŒ‡é’ˆ            left += 1                              # å°†æŒ‡é’ˆå³ç§»ä¸€ä¸ªä½ç½®        arr[right] = arr[left]                     # å°†å·¦è¾¹çš„å€¼å†™åˆ°å³è¾¹çš„ç©ºä½ä¸Š    arr[left] = tmp                                # æŠŠ tmp å½’ä½    return left                   # è¿”å› leftï¼Œright éƒ½å¯ä»¥ï¼Œç›®çš„æ˜¯ä¾¿äºåé¢çš„é€’å½’æ“ä½œå¯¹å·¦å³ä¸¤éƒ¨åˆ†è¿›è¡Œæ’åºdef quick_sort(arr, left, right):    if left &lt; right:        mid = partition(arr, left, right)        print(arr)                         # æ¯æ¬¡å½’ä½åæ‰“å°ä¸€æ¬¡        quick_sort(arr, left, mid-1)       # å¯¹å·¦åŠéƒ¨åˆ†è¿›è¡Œå½’ä½æ“ä½œ        quick_sort(arr, mid+1, right)      # å¯¹å³åŠéƒ¨åˆ†è¿›è¡Œå½’ä½æ“ä½œarr = [5, 7, 4, 6, 3, 1, 2, 9, 8]quick_sort(arr, 0, len(arr)-1)</code></pre><pre><code class="python">[2, 1, 4, 3, 5, 6, 7, 9, 8][1, 2, 4, 3, 5, 6, 7, 9, 8][1, 2, 3, 4, 5, 6, 7, 9, 8][1, 2, 3, 4, 5, 6, 7, 9, 8][1, 2, 3, 4, 5, 6, 7, 9, 8][1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre><hr><h2 id="ä¸ƒã€å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#ä¸ƒã€å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="ä¸ƒã€å †æ’åºï¼ˆHeap Sortï¼‰"></a><font color=#FF0000>ä¸ƒã€å †æ’åºï¼ˆHeap Sortï¼‰</font></h2><h3 id="1ã€åŸç†-6"><a href="#1ã€åŸç†-6" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>å †æ’åºæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚</p><ul><li>å †ï¼šä¸€ç§ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ç»“æ„</li><li>å¤§æ ¹å †ï¼šä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œæ»¡è¶³ä»»ä¸€èŠ‚ç‚¹éƒ½æ¯”å…¶å­©å­èŠ‚ç‚¹å¤§</li><li>å°æ ¹å †ï¼šä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œæ»¡è¶³ä»»ä¸€èŠ‚ç‚¹éƒ½æ¯”å…¶å­©å­èŠ‚ç‚¹å°</li></ul><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/11%E5%A0%86%E6%8E%92%E5%BA%8F.png" alt="11å †æ’åº"></p><h3 id="2ã€æ­¥éª¤-6"><a href="#2ã€æ­¥éª¤-6" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li>â‘  æ„å»ºå †ï¼šå°†å¾…æ’åºåºåˆ—æ„å»ºæˆä¸€ä¸ªå † H[0â€¦â€¦n-1]ï¼Œä»æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹ï¼Œä»å·¦è‡³å³ï¼Œä»ä¸‹è‡³ä¸Šè¿›è¡Œè°ƒæ•´ã€‚æ ¹æ®å‡åºæˆ–é™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †æˆ–å°é¡¶å †ï¼›</li><li>â‘¡ æ­¤æ—¶çš„å †é¡¶å…ƒç´ ï¼Œä¸ºæœ€å¤§æˆ–è€…æœ€å°å…ƒç´ ï¼›</li><li>â‘¢ æŠŠå †é¡¶å…ƒç´ å’Œå †å°¾å…ƒç´ äº’æ¢ï¼Œè°ƒæ•´å †ï¼Œé‡æ–°ä½¿å †æœ‰åºï¼›</li><li>â‘£ æ­¤æ—¶å †é¡¶å…ƒç´ ä¸ºç¬¬äºŒå¤§å…ƒç´ ï¼›</li><li>â‘¤ é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°å †å˜ç©ºã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-6"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-6" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/12%E6%9E%84%E5%BB%BA%E5%A0%86.gif" alt="12æ„å»ºå †"></p><p>å †æ„å»ºå®Œæˆåå†è¿›è¡Œæ¨æ’åºï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/13%E5%A0%86%E6%8E%92%E5%BA%8F.gif" alt="13å †æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-6"><a href="#4ã€ä»£ç å®ç°-6" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def sift(arr, low, high):    &quot;&quot;&quot;    :param li: åˆ—è¡¨    :param low: å †çš„æ ¹èŠ‚ç‚¹ä½ç½®    :param high: å †çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®    &quot;&quot;&quot;    i = low                 # iæœ€å¼€å§‹æŒ‡å‘æ ¹èŠ‚ç‚¹    j = 2 * i + 1           # jå¼€å§‹æ˜¯å·¦å­©å­    tmp = arr[low]          # æŠŠå †é¡¶å­˜èµ·æ¥    while j &lt;= high:        # åªè¦jä½ç½®æœ‰æ•°        if j + 1 &lt;= high and arr[j+1] &gt; arr[j]:   # å¦‚æœå³å­©å­æœ‰å¹¶ä¸”æ¯”è¾ƒå¤§            j = j + 1       # jæŒ‡å‘å³å­©å­        if arr[j] &gt; tmp:            arr[i] = arr[j]            i = j           # å¾€ä¸‹çœ‹ä¸€å±‚            j = 2 * i + 1        else:               # tmpæ›´å¤§ï¼ŒæŠŠtmpæ”¾åˆ°içš„ä½ç½®ä¸Š            arr[i] = tmp    # æŠŠtmpæ”¾åˆ°æŸä¸€çº§é¢†å¯¼ä½ç½®ä¸Š            break    else:        arr[i] = tmp        # æŠŠtmpæ”¾åˆ°å¶å­èŠ‚ç‚¹ä¸Šdef heap_sort(arr):    n = len(arr)    for i in range((n-2)//2, -1, -1):   # iè¡¨ç¤ºå»ºå †çš„æ—¶å€™è°ƒæ•´çš„éƒ¨åˆ†çš„æ ¹çš„ä¸‹æ ‡        sift(arr, i, n-1)    # å»ºå †å®Œæˆ    for i in range(n-1, -1, -1):        # i æŒ‡å‘å½“å‰å †çš„æœ€åä¸€ä¸ªå…ƒç´         arr[0], arr[i] = arr[i], arr[0]        sift(arr, 0, i - 1)             # i-1æ˜¯æ–°çš„high    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-6"><a href="#5ã€å…·ä½“ç¤ºä¾‹-6" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def sift(arr, low, high):    &quot;&quot;&quot;    :param li: åˆ—è¡¨    :param low: å †çš„æ ¹èŠ‚ç‚¹ä½ç½®    :param high: å †çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®    &quot;&quot;&quot;    i = low                 # iæœ€å¼€å§‹æŒ‡å‘æ ¹èŠ‚ç‚¹    j = 2 * i + 1           # jå¼€å§‹æ˜¯å·¦å­©å­    tmp = arr[low]          # æŠŠå †é¡¶å­˜èµ·æ¥    while j &lt;= high:        # åªè¦jä½ç½®æœ‰æ•°        if j + 1 &lt;= high and arr[j+1] &gt; arr[j]:   # å¦‚æœå³å­©å­æœ‰å¹¶ä¸”æ¯”è¾ƒå¤§            j = j + 1       # jæŒ‡å‘å³å­©å­        if arr[j] &gt; tmp:            arr[i] = arr[j]            i = j           # å¾€ä¸‹çœ‹ä¸€å±‚            j = 2 * i + 1        else:               # tmpæ›´å¤§ï¼ŒæŠŠtmpæ”¾åˆ°içš„ä½ç½®ä¸Š            arr[i] = tmp    # æŠŠtmpæ”¾åˆ°æŸä¸€çº§é¢†å¯¼ä½ç½®ä¸Š            break    else:        arr[i] = tmp        # æŠŠtmpæ”¾åˆ°å¶å­èŠ‚ç‚¹ä¸Šdef heap_sort(arr):    n = len(arr)    print(&#39;å»ºå †è¿‡ç¨‹ï¼š&#39;)    print(arr)    for i in range((n-2)//2, -1, -1):   # iè¡¨ç¤ºå»ºå †çš„æ—¶å€™è°ƒæ•´çš„éƒ¨åˆ†çš„æ ¹çš„ä¸‹æ ‡        sift(arr, i, n-1)        print(arr)    # å»ºå †å®Œæˆ    print(&#39;å †æ’åºè¿‡ç¨‹ï¼š&#39;)    print(arr)    for i in range(n-1, -1, -1):        # i æŒ‡å‘å½“å‰å †çš„æœ€åä¸€ä¸ªå…ƒç´         arr[0], arr[i] = arr[i], arr[0]        sift(arr, 0, i - 1)             # i-1æ˜¯æ–°çš„high        print(arr)arr = [2, 7, 26, 25, 19, 17, 1, 90, 3, 36]heap_sort(arr)</code></pre><pre><code class="python">å»ºå †è¿‡ç¨‹ï¼š[2, 7, 26, 25, 19, 17, 1, 90, 3, 36][2, 7, 26, 25, 36, 17, 1, 90, 3, 19][2, 7, 26, 90, 36, 17, 1, 25, 3, 19][2, 7, 26, 90, 36, 17, 1, 25, 3, 19][2, 90, 26, 25, 36, 17, 1, 7, 3, 19][90, 36, 26, 25, 19, 17, 1, 7, 3, 2]å †æ’åºè¿‡ç¨‹ï¼š[90, 36, 26, 25, 19, 17, 1, 7, 3, 2][36, 25, 26, 7, 19, 17, 1, 2, 3, 90][26, 25, 17, 7, 19, 3, 1, 2, 36, 90][25, 19, 17, 7, 2, 3, 1, 26, 36, 90][19, 7, 17, 1, 2, 3, 25, 26, 36, 90][17, 7, 3, 1, 2, 19, 25, 26, 36, 90][7, 2, 3, 1, 17, 19, 25, 26, 36, 90][3, 2, 1, 7, 17, 19, 25, 26, 36, 90][2, 1, 3, 7, 17, 19, 25, 26, 36, 90][1, 2, 3, 7, 17, 19, 25, 26, 36, 90][1, 2, 3, 7, 17, 19, 25, 26, 36, 90]</code></pre><hr><h2 id="å…«ã€è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰"><a href="#å…«ã€è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰" class="headerlink" title="å…«ã€è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰"></a><font color=#FF0000>å…«ã€è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰</font></h2><h3 id="1ã€åŸç†-7"><a href="#1ã€åŸç†-7" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>è®¡æ•°æ’åºæ˜¯ä¸€ä¸ªéåŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºåœ¨å¯¹ä¸€å®šèŒƒå›´å†…çš„æ•´æ•°æ’åºæ—¶ï¼Œå®ƒçš„å¤æ‚åº¦ä¸º ÎŸ(n+k)ï¼Œå…¶ä¸­ k æ˜¯æ•´æ•°çš„èŒƒå›´ï¼Œå¿«äºä»»ä½•æ¯”è¾ƒæ’åºç®—æ³•ã€‚è®¡æ•°æ’åºæ˜¯ä¸€ç§ç‰ºç‰²ç©ºé—´æ¢å–æ—¶é—´çš„åšæ³•ã€‚è®¡æ•°æ’åºçš„æ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚ä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºï¼Œ<strong>è®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚</strong></p><h3 id="2ã€æ­¥éª¤-7"><a href="#2ã€æ­¥éª¤-7" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> æ‰¾åˆ°å¾…æ’åºåˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ kï¼Œå¼€è¾Ÿä¸€ä¸ªé•¿åº¦ä¸º k+1 çš„è®¡æ•°åˆ—è¡¨ï¼Œè®¡æ•°åˆ—è¡¨ä¸­çš„å€¼éƒ½ä¸º 0ã€‚</li><li><strong>â‘¡</strong> éå†å¾…æ’åºåˆ—è¡¨ï¼Œå¦‚æœéå†åˆ°çš„å…ƒç´ å€¼ä¸º iï¼Œåˆ™è®¡æ•°åˆ—è¡¨ä¸­ç´¢å¼• i çš„å€¼åŠ 1ã€‚</li><li><strong>â‘¢</strong> éå†å®Œæ•´ä¸ªå¾…æ’åºåˆ—è¡¨ï¼Œè®¡æ•°åˆ—è¡¨ä¸­ç´¢å¼• i çš„å€¼ j è¡¨ç¤º i çš„ä¸ªæ•°ä¸º jï¼Œç»Ÿè®¡å‡ºå¾…æ’åºåˆ—è¡¨ä¸­æ¯ä¸ªå€¼çš„æ•°é‡ã€‚</li><li><strong>â‘£</strong> åˆ›å»ºä¸€ä¸ªæ–°åˆ—è¡¨ï¼ˆä¹Ÿå¯ä»¥æ¸…ç©ºåŸåˆ—è¡¨ï¼Œåœ¨åŸåˆ—è¡¨ä¸­æ·»åŠ ï¼‰ï¼Œéå†è®¡æ•°åˆ—è¡¨ï¼Œä¾æ¬¡åœ¨æ–°åˆ—è¡¨ä¸­æ·»åŠ  j ä¸ª iï¼Œæ–°åˆ—è¡¨å°±æ˜¯æ’å¥½åºåçš„åˆ—è¡¨ï¼Œæ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰æ¯”è¾ƒå¾…æ’åºåˆ—è¡¨ä¸­çš„æ•°æ®å¤§å°ã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-7"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-7" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/14%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F.gif" alt="14è®¡æ•°æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-7"><a href="#4ã€ä»£ç å®ç°-7" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def count_sort(arr):    if len(arr) &lt; 2:                       # å¦‚æœæ•°ç»„é•¿åº¦å°äº 2 åˆ™ç›´æ¥è¿”å›        return arr    max_num = max(arr)    count = [0 for _ in range(max_num+1)]  # å¼€è¾Ÿä¸€ä¸ªè®¡æ•°åˆ—è¡¨    for val in arr:        count[val] += 1    arr.clear()                        # åŸæ•°ç»„æ¸…ç©º    for ind, val in enumerate(count):  # éå†å€¼å’Œä¸‹æ ‡ï¼ˆå€¼çš„æ•°é‡ï¼‰        for i in range(val):            arr.append(ind)    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-7"><a href="#5ã€å…·ä½“ç¤ºä¾‹-7" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def count_sort(arr):    if len(arr) &lt; 2:                       # å¦‚æœæ•°ç»„é•¿åº¦å°äº 2 åˆ™ç›´æ¥è¿”å›        return arr    max_num = max(arr)    count = [0 for _ in range(max_num+1)]  # å¼€è¾Ÿä¸€ä¸ªè®¡æ•°åˆ—è¡¨    for val in arr:        count[val] += 1    arr.clear()                        # åŸæ•°ç»„æ¸…ç©º    for ind, val in enumerate(count):  # éå†å€¼å’Œä¸‹æ ‡ï¼ˆå€¼çš„æ•°é‡ï¼‰        for i in range(val):            arr.append(ind)    return arrarr = [2, 3, 8, 7, 1, 2, 2, 2, 7, 3, 9, 8, 2, 1, 4, 2, 4, 6, 9, 2]sorted_arr = count_sort(arr)print(sorted_arr)</code></pre><pre><code class="python">[1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 4, 4, 6, 7, 7, 8, 8, 9, 9]</code></pre><hr><h2 id="ä¹ã€æ¡¶æ’åºï¼ˆBucket-Sortï¼‰"><a href="#ä¹ã€æ¡¶æ’åºï¼ˆBucket-Sortï¼‰" class="headerlink" title="ä¹ã€æ¡¶æ’åºï¼ˆBucket Sortï¼‰"></a><font color=#FF0000>ä¹ã€æ¡¶æ’åºï¼ˆBucket Sortï¼‰</font></h2><h3 id="1ã€åŸç†-8"><a href="#1ã€åŸç†-8" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>æ¡¶æ’åºåˆå«ç®±æ’åºï¼Œå·¥ä½œçš„åŸç†æ˜¯å°†æ•°ç»„åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶å­é‡Œã€‚æ¯ä¸ªæ¡¶å­å†ä¸ªåˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ã€‚æ¡¶æ’åºæ˜¯é¸½å·¢æ’åºçš„ä¸€ç§å½’çº³ç»“æœã€‚</p><p>æ¡¶æ’åºä¹Ÿæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚ä¸ºäº†ä½¿æ¡¶æ’åºæ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°è¿™ä¸¤ç‚¹ï¼š</p><ul><li>åœ¨é¢å¤–ç©ºé—´å……è¶³çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¢å¤§æ¡¶çš„æ•°é‡ï¼›</li><li>ä½¿ç”¨çš„æ˜ å°„å‡½æ•°èƒ½å¤Ÿå°†è¾“å…¥çš„ N ä¸ªæ•°æ®å‡åŒ€çš„åˆ†é…åˆ° K ä¸ªæ¡¶ä¸­ã€‚</li></ul><p>åŒæ—¶ï¼Œå¯¹äºæ¡¶ä¸­å…ƒç´ çš„æ’åºï¼Œé€‰æ‹©ä½•ç§æ¯”è¾ƒæ’åºç®—æ³•å¯¹äºæ€§èƒ½çš„å½±å“è‡³å…³é‡è¦ã€‚</p><ul><li>æœ€å¿«æƒ…å†µï¼šå½“è¾“å…¥çš„æ•°æ®å¯ä»¥å‡åŒ€çš„åˆ†é…åˆ°æ¯ä¸€ä¸ªæ¡¶ä¸­ï¼›</li><li>æœ€æ…¢æƒ…å†µï¼šå½“è¾“å…¥çš„æ•°æ®è¢«åˆ†é…åˆ°äº†åŒä¸€ä¸ªæ¡¶ä¸­ã€‚</li></ul><h3 id="2ã€æ­¥éª¤-8"><a href="#2ã€æ­¥éª¤-8" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> åˆ›å»ºä¸€ä¸ªå®šé‡çš„æ•°ç»„å½“ä½œç©ºæ¡¶å­ï¼›</li><li><strong>â‘¡</strong> éå†åºåˆ—ï¼ŒæŠŠå…ƒç´ ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶å­å»ï¼›</li><li><strong>â‘¢</strong> å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶å­è¿›è¡Œæ’åºï¼›</li><li><strong>â‘£</strong> ä»ä¸æ˜¯ç©ºçš„æ¡¶å­é‡ŒæŠŠå…ƒç´ å†æ”¾å›åŸæ¥çš„åºåˆ—ä¸­ã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-8"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-8" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p>ï¼ˆåŠ¨å›¾æ¥æºäº@äº”åˆ†é’Ÿå­¦ç®—æ³•ï¼Œä¾µåˆ ï¼‰</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/15%E6%A1%B6%E6%8E%92%E5%BA%8F.gif" alt="15æ¡¶æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-8"><a href="#4ã€ä»£ç å®ç°-8" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def bucket_sort(arr):    max_num = max(arr)    n = len(arr)    buckets = [[] for _ in range(n)]         # åˆ›å»ºæ¡¶    for var in arr:        i = min(var // (max_num // n), n-1)  # i è¡¨ç¤º var æ”¾åˆ°å‡ å·æ¡¶é‡Œ        buckets[i].append(var)               # æŠŠ var åŠ åˆ°æ¡¶é‡Œè¾¹        # ä¿æŒæ¡¶å†…çš„é¡ºåº        for j in range(len(buckets[i])-1, 0, -1):            if buckets[i][j] &lt; buckets[i][j-1]:                buckets[i][j], buckets[i][j-1] = buckets[i][j-1], buckets[i][j]            else:                break    sorted_arr = []    for buc in buckets:        sorted_arr.extend(buc)    return sorted_arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-8"><a href="#5ã€å…·ä½“ç¤ºä¾‹-8" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def bucket_sort(arr):    max_num = max(arr)    n = len(arr)    buckets = [[] for _ in range(n)]         # åˆ›å»ºæ¡¶    for var in arr:        i = min(var // (max_num // n), n-1)  # i è¡¨ç¤º var æ”¾åˆ°å‡ å·æ¡¶é‡Œ        buckets[i].append(var)               # æŠŠ var åŠ åˆ°æ¡¶é‡Œè¾¹        # ä¿æŒæ¡¶å†…çš„é¡ºåº        for j in range(len(buckets[i])-1, 0, -1):            if buckets[i][j] &lt; buckets[i][j-1]:                buckets[i][j], buckets[i][j-1] = buckets[i][j-1], buckets[i][j]            else:                break    sorted_arr = []    for buc in buckets:        sorted_arr.extend(buc)    return sorted_arrarr = [7, 12, 56, 23, 19, 33, 35, 42, 42, 2, 8, 22, 39, 26, 17]sorted_arr = bucket_sort(arr)print(sorted_arr)</code></pre><pre><code class="python">[2, 7, 8, 12, 17, 19, 22, 23, 26, 33, 35, 39, 42, 42, 56]</code></pre><hr><h2 id="åã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰"><a href="#åã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰" class="headerlink" title="åã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰"></a><font color=#FF0000>åã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰</font></h2><h3 id="1ã€åŸç†-9"><a href="#1ã€åŸç†-9" class="headerlink" title="1ã€åŸç†"></a>1ã€åŸç†</h3><p>åŸºæ•°æ’åºå±äºåˆ†é…å¼æ’åºï¼Œæ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚</p><p>åŸºæ•°æ’åºã€è®¡æ•°æ’åºã€æ¡¶æ’åºä¸‰ç§æ’åºç®—æ³•éƒ½åˆ©ç”¨äº†æ¡¶çš„æ¦‚å¿µï¼Œä½†å¯¹æ¡¶çš„ä½¿ç”¨æ–¹æ³•ä¸Šæ˜¯æœ‰æ˜æ˜¾å·®å¼‚çš„ï¼š</p><ul><li>åŸºæ•°æ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶ï¼›</li><li>è®¡æ•°æ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼ï¼›</li><li>æ¡¶æ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼ã€‚</li></ul><h3 id="2ã€æ­¥éª¤-9"><a href="#2ã€æ­¥éª¤-9" class="headerlink" title="2ã€æ­¥éª¤"></a>2ã€æ­¥éª¤</h3><ul><li><strong>â‘ </strong> å–æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›</li><li><strong>â‘¡</strong> ä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºï¼›</li><li><strong>â‘¢</strong> ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</li></ul><h3 id="3ã€åŠ¨ç”»æ¼”ç¤º-9"><a href="#3ã€åŠ¨ç”»æ¼”ç¤º-9" class="headerlink" title="3ã€åŠ¨ç”»æ¼”ç¤º"></a>3ã€åŠ¨ç”»æ¼”ç¤º</h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A91/16%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F.gif" alt="16åŸºæ•°æ’åº"></p><h3 id="4ã€ä»£ç å®ç°-9"><a href="#4ã€ä»£ç å®ç°-9" class="headerlink" title="4ã€ä»£ç å®ç°"></a>4ã€ä»£ç å®ç°</h3><pre><code class="python">def radix_sort(li):    max_num = max(li)      # æœ€å¤§å€¼ 9-&gt;1æ¬¡å¾ªç¯, 99-&gt;2æ¬¡å¾ªç¯, 888-&gt;3æ¬¡å¾ªç¯, 10000-&gt;5æ¬¡å¾ªç¯    it = 0    while 10 ** it &lt;= max_num:        buckets = [[] for _ in range(10)]        for var in li:            # var=987, it=1, 987//10-&gt;98, 98%10-&gt;8; it=2, 987//100-&gt;9, 9%10=9            digit = (var // 10 ** it) % 10   # ä¾æ¬¡å–ä¸€ä½æ•°            buckets[digit].append(var)        # åˆ†æ¡¶å®Œæˆ        li.clear()        for buc in buckets:            li.extend(buc)        it += 1            # æŠŠæ•°é‡æ–°å†™å› li    return arr</code></pre><h3 id="5ã€å…·ä½“ç¤ºä¾‹-9"><a href="#5ã€å…·ä½“ç¤ºä¾‹-9" class="headerlink" title="5ã€å…·ä½“ç¤ºä¾‹"></a>5ã€å…·ä½“ç¤ºä¾‹</h3><pre><code class="python">def radix_sort(li):    max_num = max(li)      # æœ€å¤§å€¼ 9-&gt;1æ¬¡å¾ªç¯, 99-&gt;2æ¬¡å¾ªç¯, 888-&gt;3æ¬¡å¾ªç¯, 10000-&gt;5æ¬¡å¾ªç¯    it = 0    while 10 ** it &lt;= max_num:        buckets = [[] for _ in range(10)]        for var in li:            # var=987, it=1, 987//10-&gt;98, 98%10-&gt;8; it=2, 987//100-&gt;9, 9%10=9            digit = (var // 10 ** it) % 10   # ä¾æ¬¡å–ä¸€ä½æ•°            buckets[digit].append(var)        # åˆ†æ¡¶å®Œæˆ        li.clear()        for buc in buckets:            li.extend(buc)        it += 1            # æŠŠæ•°é‡æ–°å†™å› li    return arrarr = [3221, 1, 10, 9680, 577, 9420, 7, 5622, 4793, 2030, 3138, 82, 2599, 743, 4127]sorted_arr = radix_sort(arr)print(sorted_arr)</code></pre><pre><code class="python">[1, 7, 10, 82, 577, 743, 2030, 2599, 3138, 3221, 4127, 4793, 5622, 9420, 9680]</code></pre><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/108987300æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;å‚è€ƒèµ„æ–™ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1mp4y1D7UP&quot;&gt;https://www.bilibili.com/video/BV1mp4y1D7UP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æœ¬æ–‡åŠ¨å›¾æ¼”ç¤ºæ¥æºï¼š&lt;a hre</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="ç®—æ³•" scheme="https://www.itbob.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>COVID-19 è‚ºç‚ç–«æƒ…æ•°æ®å®æ—¶ç›‘æ§ï¼ˆpython çˆ¬è™« + pyecharts æ•°æ®å¯è§†åŒ– + wordcloud è¯äº‘å›¾ï¼‰</title>
    <link href="https://www.itbob.cn/article/035/"/>
    <id>https://www.itbob.cn/article/035/</id>
    <published>2020-07-06T04:49:35.000Z</published>
    <updated>2022-05-22T12:46:00.000Z</updated>
    
    <content type="html"><![CDATA[<pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/107140534æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="ã€1x00ã€‘å‰è¨€"><a href="#ã€1x00ã€‘å‰è¨€" class="headerlink" title="ã€1x00ã€‘å‰è¨€"></a><font color=#FF0000>ã€1x00ã€‘å‰è¨€</font></h2><p>æœ¬æ¥ä¸¤ä¸‰ä¸ªæœˆä¹‹å‰å°±æƒ³æä¸ªç–«æƒ…æ•°æ®å®æ—¶æ•°æ®å±•ç¤ºçš„ï¼Œç”±äºå„ç§ä¸å¯æŠ—æ‹’å› ç´ ä¸€è€Œå†å†è€Œä¸‰çš„é¸½äº†ï¼Œæœ€è¿‘ç»ˆäºæŠ½ç©ºå†™äº†ä¸€ä¸ªï¼Œæ•°æ®æ˜¯ç”¨ Python çˆ¬å–çš„<a href="https://voice.baidu.com/act/newpneumonia/newpneumonia/">ç™¾åº¦ç–«æƒ…å®æ—¶å¤§æ•°æ®æŠ¥å‘Š</a>ï¼Œè¯·æ±‚åº“ç”¨çš„ requestsï¼Œè§£æç”¨çš„ Xpath è¯­æ³•ï¼Œè¯äº‘ç”¨çš„ wordcloud åº“ï¼Œæ•°æ®å¯è§†åŒ–ç”¨ pyecharts ç»˜åˆ¶çš„åœ°å›¾å’ŒæŠ˜çº¿å›¾ï¼Œæ•°æ®å‚¨å­˜åœ¨ Excel è¡¨æ ¼é‡Œé¢ï¼Œä½¿ç”¨ openpyxl å¯¹è¡¨æ ¼è¿›è¡Œå¤„ç†ã€‚</p><p>æœ¬ç¨‹åºå®ç°äº†ç´¯è®¡ç¡®è¯Šåœ°å›¾å±•ç¤ºå’Œæ¯æ—¥æ•°æ®å˜åŒ–æŠ˜çº¿å›¾å±•ç¤ºï¼Œå…¶ä»–æ›´å¤šæ•°æ®çš„è·å–å’Œå±•ç¤ºå‡å¯åœ¨ç¨‹åºä¸­è¿›è¡Œæ‹“å±•ï¼Œå¯ä»¥å°†ç¨‹åºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šï¼Œè®¾ç½®å®šæ—¶è¿è¡Œï¼Œå³å¯å®æ—¶å±•ç¤ºæ•°æ®ï¼Œpyecharts ç»˜å›¾æ¨¡å—ä¹Ÿå¯ä»¥æ•´åˆåˆ° Web æ¡†æ¶ï¼ˆDjangoã€Flaskç­‰ï¼‰ä¸­ä½¿ç”¨ã€‚</p><p>åœ¨è·å–æ•°æ®æ—¶æœ‰<font color=#FF0000><strong>å…¨çƒ</strong></font>å’Œ<font color=#FF0000><strong>å¢ƒå¤–</strong></font>ä¸¤ä¸ªæ¦‚å¿µï¼Œå…¨çƒåŒ…å«ä¸­å›½ï¼Œå¢ƒå¤–ä¸åŒ…å«ä¸­å›½ï¼ŒåæœŸç»˜åˆ¶çš„å››ä¸ªå›¾ï¼šä¸­å›½ç´¯è®¡ç¡®è¯Šåœ°å›¾ã€å…¨çƒç´¯è®¡ç¡®è¯Šåœ°å›¾ï¼ˆåŒ…å«ä¸­å›½ï¼‰ã€ä¸­å›½æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾ã€å¢ƒå¤–æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾ï¼ˆä¸åŒ…å«ä¸­å›½ï¼‰ã€‚</p><p><font color=#FF0000><strong>æ³¨æ„é¡¹ï¼šç›´æ¥å‘è¯¥ç½‘é¡µå‘é€è¯·æ±‚è·å–çš„å“åº”ä¸­ï¼Œæ²¡æœ‰æ¯ä¸ªå›½å®¶çš„æ¯æ—¥æ•°æ®ï¼Œè¯¥æ•°æ®è·å–çš„åœ°å€æ˜¯ï¼š<a href="https://voice.baidu.com/newpneumonia/get?target=trend&isCaseIn=1&stage=publish">https://voice.baidu.com/newpneumonia/get?target=trend&amp;isCaseIn=1&amp;stage=publish</a></strong></font></p><ul><li><strong>é¢„è§ˆåœ°å€</strong>ï¼š<del><a href="http://cov.itrhx.com/">http://cov.itrhx.com/</a></del>ï¼ˆå·²å¤±æ•ˆï¼‰</li><li><strong>æ•°æ®æ¥æº</strong>ï¼š<a href="https://voice.baidu.com/act/newpneumonia/newpneumonia/">https://voice.baidu.com/act/newpneumonia/newpneumonia/</a></li><li><strong>pyecharts æ–‡æ¡£</strong>ï¼š<a href="https://pyecharts.org/">https://pyecharts.org/</a></li><li><strong>openpyxl æ–‡æ¡£</strong>ï¼š<a href="https://openpyxl.readthedocs.io/">https://openpyxl.readthedocs.io/</a></li><li><strong>wordcloud æ–‡æ¡£</strong>ï¼š<a href="http://amueller.github.io/word_cloud/">http://amueller.github.io/word_cloud/</a></li></ul><h2 id="ã€2x00ã€‘æ€ç»´å¯¼å›¾"><a href="#ã€2x00ã€‘æ€ç»´å¯¼å›¾" class="headerlink" title="ã€2x00ã€‘æ€ç»´å¯¼å›¾"></a><font color=#FF0000>ã€2x00ã€‘æ€ç»´å¯¼å›¾</font></h2><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/01.png" alt="01"></p><h2 id="ã€3x00ã€‘æ•°æ®ç»“æ„åˆ†æ"><a href="#ã€3x00ã€‘æ•°æ®ç»“æ„åˆ†æ" class="headerlink" title="ã€3x00ã€‘æ•°æ®ç»“æ„åˆ†æ"></a><font color=#FF0000>ã€3x00ã€‘æ•°æ®ç»“æ„åˆ†æ</font></h2><p>é€šè¿‡æŸ¥çœ‹ç™¾åº¦çš„ç–«æƒ…æ•°æ®é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šæ•´é½çš„æ•°æ®ï¼ŒçŒœæµ‹å°±æ˜¯ç–«æƒ…ç›¸å…³çš„æ•°æ®ï¼Œä¿å­˜è¯¥é¡µé¢ï¼Œå¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¾ˆå®¹æ˜“å¯ä»¥åˆ†æå‡ºæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨ <code>&lt;script type=&quot;application/json&quot; id=&quot;captain-config&quot;&gt;&lt;/script&gt;</code> é‡Œé¢ï¼Œå…¶ä¸­ title é‡Œé¢æ˜¯ä¸€äº› Unicode ç¼–ç ï¼Œå°†å…¶è½¬ä¸ºä¸­æ–‡åæ›´å®¹æ˜“å¾—åˆ°ä¸åŒçš„åˆ†ç±»æ•°æ®ã€‚</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/02.png" alt="02"></p><p>ç”±äºæ•°æ®ç¹å¤šï¼Œå¯ä»¥å°†æ•°æ®ä¸»ä½“éƒ¨åˆ†æå–å‡ºæ¥ï¼Œåˆ é™¤ä¸€äº›é‡å¤é¡¹å’Œå…¶ä»–æ‚é¡¹ï¼Œç•™ä¸‹æ•°æ®å¤§ä½“ä½ç½®å¹¶åˆ†ææ•°æ®ç»“æ„ï¼Œä¾¿äºåæœŸçš„æ•°æ®æå–ï¼Œç»è¿‡å¤„ç†åçš„æ•°æ®å¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š</p><pre><code class="json">&lt;script type=&quot;application/json&quot; id=&quot;captain-config&quot;&gt;    &#123;        &quot;component&quot;: [            &#123;                &quot;mapLastUpdatedTime&quot;: &quot;2020.07.05 16:13&quot;,        // å›½å†…ç–«æƒ…æ•°æ®æœ€åæ›´æ–°æ—¶é—´                &quot;caseList&quot;: [                                    // caseList åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸                    &#123;                        &quot;confirmed&quot;: &quot;1&quot;,                        // æ¯ä¸ªå­—å…¸åŒ…å«ä¸­å›½æ¯ä¸ªçœçš„æ¯ä¸€é¡¹ç–«æƒ…æ•°æ®                        &quot;died&quot;: &quot;0&quot;,                        &quot;crued&quot;: &quot;1&quot;,                        &quot;relativeTime&quot;: &quot;1593792000&quot;,                        &quot;confirmedRelative&quot;: &quot;0&quot;,                        &quot;diedRelative&quot;: &quot;0&quot;,                        &quot;curedRelative&quot;: &quot;0&quot;,                        &quot;curConfirm&quot;: &quot;0&quot;,                        &quot;curConfirmRelative&quot;: &quot;0&quot;,                        &quot;icuDisable&quot;: &quot;1&quot;,                        &quot;area&quot;: &quot;è¥¿è—&quot;,                        &quot;subList&quot;: [                            // subList åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸                            &#123;                                &quot;city&quot;: &quot;æ‹‰è¨&quot;,                 // æ¯ä¸ªå­—å…¸åŒ…å«è¯¥çœä»½å¯¹åº”çš„æ¯ä¸ªåŸå¸‚ç–«æƒ…æ•°æ®                                &quot;confirmed&quot;: &quot;1&quot;,                                &quot;died&quot;: &quot;0&quot;,                                &quot;crued&quot;: &quot;1&quot;,                                &quot;confirmedRelative&quot;: &quot;0&quot;,                                &quot;curConfirm&quot;: &quot;0&quot;,                                &quot;cityCode&quot;: &quot;100&quot;                            &#125;                        ]                    &#125;                ],                &quot;caseOutsideList&quot;: [                           // caseOutsideList åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸                    &#123;                        &quot;confirmed&quot;: &quot;241419&quot;,                 // æ¯ä¸ªå­—å…¸åŒ…å«å„å›½çš„æ¯ä¸€é¡¹ç–«æƒ…æ•°æ®                        &quot;died&quot;: &quot;34854&quot;,                        &quot;crued&quot;: &quot;191944&quot;,                        &quot;relativeTime&quot;: &quot;1593792000&quot;,                        &quot;confirmedRelative&quot;: &quot;223&quot;,                        &quot;curConfirm&quot;: &quot;14621&quot;,                        &quot;icuDisable&quot;: &quot;1&quot;,                        &quot;area&quot;: &quot;æ„å¤§åˆ©&quot;,                        &quot;subList&quot;: [                          // subList åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸                            &#123;                                &quot;city&quot;: &quot;ä¼¦å·´ç¬¬&quot;,              // æ¯ä¸ªå­—å…¸åŒ…å«æ¯ä¸ªå›½å®¶å¯¹åº”çš„æ¯ä¸ªåŸå¸‚ç–«æƒ…æ•°æ®                                &quot;confirmed&quot;: &quot;94318&quot;,                                &quot;died&quot;: &quot;16691&quot;,                                &quot;crued&quot;: &quot;68201&quot;,                                &quot;curConfirm&quot;: &quot;9426&quot;                            &#125;                        ]                    &#125;                ],                &quot;summaryDataIn&quot;: &#123;                           // summaryDataIn å›½å†…æ€»çš„ç–«æƒ…æ•°æ®                    &quot;confirmed&quot;: &quot;85307&quot;,                    &quot;died&quot;: &quot;4648&quot;,                    &quot;cured&quot;: &quot;80144&quot;,                    &quot;asymptomatic&quot;: &quot;99&quot;,                    &quot;asymptomaticRelative&quot;: &quot;7&quot;,                    &quot;unconfirmed&quot;: &quot;7&quot;,                    &quot;relativeTime&quot;: &quot;1593792000&quot;,                    &quot;confirmedRelative&quot;: &quot;19&quot;,                    &quot;unconfirmedRelative&quot;: &quot;1&quot;,                    &quot;curedRelative&quot;: &quot;27&quot;,                    &quot;diedRelative&quot;: &quot;0&quot;,                    &quot;icu&quot;: &quot;6&quot;,                    &quot;icuRelative&quot;: &quot;0&quot;,                    &quot;overseasInput&quot;: &quot;1931&quot;,                    &quot;unOverseasInputCumulative&quot;: &quot;83375&quot;,                    &quot;overseasInputRelative&quot;: &quot;6&quot;,                    &quot;unOverseasInputNewAdd&quot;: &quot;13&quot;,                    &quot;curConfirm&quot;: &quot;515&quot;,                    &quot;curConfirmRelative&quot;: &quot;-8&quot;,                    &quot;icuDisable&quot;: &quot;1&quot;                &#125;,                &quot;summaryDataOut&quot;: &#123;                           // summaryDataOut å›½å¤–æ€»çš„ç–«æƒ…æ•°æ®                    &quot;confirmed&quot;: &quot;11302569&quot;,                    &quot;died&quot;: &quot;528977&quot;,                    &quot;curConfirm&quot;: &quot;4410601&quot;,                    &quot;cured&quot;: &quot;6362991&quot;,                    &quot;confirmedRelative&quot;: &quot;206165&quot;,                    &quot;curedRelative&quot;: &quot;190018&quot;,                    &quot;diedRelative&quot;: &quot;4876&quot;,                    &quot;curConfirmRelative&quot;: &quot;11271&quot;,                    &quot;relativeTime&quot;: &quot;1593792000&quot;                &#125;,                &quot;trend&quot;: &#123;                                    // trend å­—å…¸ï¼ŒåŒ…å«å›½å†…æ¯æ—¥çš„ç–«æƒ…æ•°æ®                    &quot;updateDate&quot;: [],                         // æ—¥æœŸ                    &quot;list&quot;: [                                 // list åˆ—è¡¨ï¼Œæ¯é¡¹æ•°æ®åŠå…¶å¯¹åº”çš„å€¼                        &#123;                            &quot;name&quot;: &quot;ç¡®è¯Š&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;ç–‘ä¼¼&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ²»æ„ˆ&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ­»äº¡&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ–°å¢ç¡®è¯Š&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ–°å¢ç–‘ä¼¼&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ–°å¢æ²»æ„ˆ&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ–°å¢æ­»äº¡&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;ç´¯è®¡å¢ƒå¤–è¾“å…¥&quot;,                            &quot;data&quot;: []                        &#125;,                        &#123;                            &quot;name&quot;: &quot;æ–°å¢å¢ƒå¤–è¾“å…¥&quot;,                            &quot;data&quot;: []                        &#125;                    ]                &#125;,                &quot;foreignLastUpdatedTime&quot;: &quot;2020.07.05 16:13&quot;,       // å›½å¤–ç–«æƒ…æ•°æ®æœ€åæ›´æ–°æ—¶é—´                &quot;globalList&quot;: [                                     // globalList åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸                    &#123;                        &quot;area&quot;: &quot;äºšæ´²&quot;,                              // æŒ‰ç…§ä¸åŒæ´²è¿›è¡Œåˆ†ç±»                        &quot;subList&quot;: [                                // subList åˆ—è¡¨ï¼Œæ¯ä¸ªæ´²å„ä¸ªå›½å®¶çš„ç–«æƒ…æ•°æ®                            &#123;                                &quot;died&quot;: &quot;52&quot;,                                &quot;confirmed&quot;: &quot;6159&quot;,                                &quot;crued&quot;: &quot;4809&quot;,                                &quot;curConfirm&quot;: &quot;1298&quot;,                                &quot;confirmedRelative&quot;: &quot;0&quot;,                                &quot;relativeTime&quot;: &quot;1593792000&quot;,                                &quot;country&quot;: &quot;å¡”å‰å…‹æ–¯å¦&quot;                            &#125;                        ],                        &quot;died&quot;: &quot;56556&quot;,                            // æ¯ä¸ªæ´²æ€»çš„ç–«æƒ…æ•°æ®                        &quot;crued&quot;: &quot;1625562&quot;,                        &quot;confirmed&quot;: &quot;2447873&quot;,                        &quot;curConfirm&quot;: &quot;765755&quot;,                        &quot;confirmedRelative&quot;: &quot;60574&quot;                    &#125;,                    &#123;                        &quot;area&quot;: &quot;å…¶ä»–&quot;,                             // å…¶ä»–ç‰¹æ®ŠåŒºåŸŸç–«æƒ…æ•°æ®                        &quot;subList&quot;: [                            &#123;                                &quot;died&quot;: &quot;13&quot;,                                &quot;confirmed&quot;: &quot;712&quot;,                                &quot;crued&quot;: &quot;651&quot;,                                &quot;curConfirm&quot;: &quot;48&quot;,                                &quot;confirmedRelative&quot;: &quot;0&quot;,                                &quot;relativeTime&quot;: &quot;1593792000&quot;,                                &quot;country&quot;: &quot;é’»çŸ³å…¬ä¸»å·é‚®è½®&quot;                            &#125;                        ],                        &quot;died&quot;: &quot;13&quot;,                              // å…¶ä»–ç‰¹æ®ŠåŒºåŸŸç–«æƒ…æ€»çš„æ•°æ®                        &quot;crued&quot;: &quot;651&quot;,                        &quot;confirmed&quot;: &quot;712&quot;,                        &quot;curConfirm&quot;: &quot;48&quot;,                        &quot;confirmedRelative&quot;: &quot;0&quot;                    &#125;,                    &#123;                        &quot;area&quot;: &quot;çƒ­é—¨&quot;,                            // çƒ­é—¨å›½å®¶ç–«æƒ…æ•°æ®                        &quot;subList&quot;: [                            &#123;                                &quot;died&quot;: &quot;5206&quot;,                                &quot;confirmed&quot;: &quot;204610&quot;,                                &quot;crued&quot;: &quot;179492&quot;,                                &quot;curConfirm&quot;: &quot;19912&quot;,                                &quot;confirmedRelative&quot;: &quot;1172&quot;,                                &quot;relativeTime&quot;: &quot;1593792000&quot;,                                &quot;country&quot;: &quot;åœŸè€³å…¶&quot;                            &#125;                        ],                        &quot;died&quot;: &quot;528967&quot;,                         // çƒ­é—¨å›½å®¶ç–«æƒ…æ€»çš„æ•°æ®                        &quot;crued&quot;: &quot;6362924&quot;,                        &quot;confirmed&quot;: &quot;11302357&quot;,                        &quot;confirmedRelative&quot;: &quot;216478&quot;,                        &quot;curConfirm&quot;: &quot;4410466&quot;                    &#125;],                &quot;allForeignTrend&quot;: &#123;                            // allForeignTrend å­—å…¸ï¼ŒåŒ…å«å›½å¤–æ¯æ—¥çš„ç–«æƒ…æ•°æ®                        &quot;updateDate&quot;: [],                       // æ—¥æœŸ                        &quot;list&quot;: [                               // list åˆ—è¡¨ï¼Œæ¯é¡¹æ•°æ®åŠå…¶å¯¹åº”çš„å€¼                            &#123;                                &quot;name&quot;: &quot;ç´¯è®¡ç¡®è¯Š&quot;,                                &quot;data&quot;: []                            &#125;,                            &#123;                                &quot;name&quot;: &quot;æ²»æ„ˆ&quot;,                                &quot;data&quot;: []                            &#125;,                            &#123;                                &quot;name&quot;: &quot;æ­»äº¡&quot;,                                &quot;data&quot;: []                            &#125;,                            &#123;                                &quot;name&quot;: &quot;ç°æœ‰ç¡®è¯Š&quot;,                                &quot;data&quot;: []                            &#125;,                            &#123;                                &quot;name&quot;: &quot;æ–°å¢ç¡®è¯Š&quot;,                                &quot;data&quot;: []                            &#125;                        ]                    &#125;,                &quot;topAddCountry&quot;: [                    // ç¡®è¯Šå¢é‡æœ€é«˜çš„å›½å®¶                        &#123;                            &quot;name&quot;: &quot;ç¾å›½&quot;,                            &quot;value&quot;: 53162                        &#125;                    ],                &quot;topOverseasInput&quot;: [                // å¢ƒå¤–è¾“å…¥æœ€å¤šçš„çœä»½                    &#123;                        &quot;name&quot;: &quot;é»‘é¾™æ±Ÿ&quot;,                        &quot;value&quot;: 386                    &#125;                ]            &#125;        ]    &#125;&lt;/script&gt;</code></pre><h2 id="ã€4x00ã€‘ä¸»å‡½æ•°-main"><a href="#ã€4x00ã€‘ä¸»å‡½æ•°-main" class="headerlink" title="ã€4x00ã€‘ä¸»å‡½æ•° main()"></a><font color=#FF0000>ã€4x00ã€‘ä¸»å‡½æ•° main()</font></h2><p>åˆ†åˆ«å°†æ•°æ®è·å–ã€è¯äº‘å›¾ç»˜åˆ¶ã€åœ°å›¾ç»˜åˆ¶å†™å…¥ä¸‰ä¸ªæ–‡ä»¶ï¼š<code>data_get()</code>ã€<code>data_wordcloud()</code>ã€<code>data_map()</code>ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªä¸»å‡½æ•°æ–‡ä»¶ main.py æ¥è°ƒç”¨è¿™ä¸‰ä¸ªæ–‡ä»¶é‡Œé¢çš„å‡½æ•°ã€‚</p><pre><code class="python">import data_getimport data_wordcloudimport data_mapdata_dict = data_get.init()data_get.china_total_data(data_dict)data_get.global_total_data(data_dict)data_get.china_daily_data(data_dict)data_get.foreign_daily_data(data_dict)data_wordcloud.china_wordcloud()data_wordcloud.global_wordcloud()data_map.all_map()</code></pre><h2 id="ã€5x00ã€‘æ•°æ®è·å–æ¨¡å—-data-get"><a href="#ã€5x00ã€‘æ•°æ®è·å–æ¨¡å—-data-get" class="headerlink" title="ã€5x00ã€‘æ•°æ®è·å–æ¨¡å— data_get"></a><font color=#FF0000>ã€5x00ã€‘æ•°æ®è·å–æ¨¡å— data_get</font></h2><h3 id="ã€5x01ã€‘åˆå§‹åŒ–å‡½æ•°-init"><a href="#ã€5x01ã€‘åˆå§‹åŒ–å‡½æ•°-init" class="headerlink" title="ã€5x01ã€‘åˆå§‹åŒ–å‡½æ•° init()"></a><font color="#4876FF">ã€5x01ã€‘åˆå§‹åŒ–å‡½æ•° init()</font></h3><p>ä½¿ç”¨ xpath è¯­æ³• <code>//script[@id=&quot;captain-config&quot;]/text()</code> æå–é‡Œé¢çš„å€¼ï¼Œåˆ©ç”¨ <code>json.loads</code> æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºå­—å…¸å¯¹è±¡ï¼Œä»¥ä¾¿åç»­çš„å…¶ä»–å‡½æ•°è°ƒç”¨ã€‚</p><pre><code class="python">def init():    headers = &#123;        &#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.13 Safari/537.36&#39;    &#125;    url = &#39;https://voice.baidu.com/act/newpneumonia/newpneumonia/&#39;    response = requests.get(url=url, headers=headers)    tree = etree.HTML(response.text)    dict1 = tree.xpath(&#39;//script[@id=&quot;captain-config&quot;]/text()&#39;)    print(type(dict1[0]))    dict2 = json.loads(dict1[0])    return dict2</code></pre><h3 id="ã€5x02ã€‘ä¸­å›½æ€»æ•°æ®-china-total-data"><a href="#ã€5x02ã€‘ä¸­å›½æ€»æ•°æ®-china-total-data" class="headerlink" title="ã€5x02ã€‘ä¸­å›½æ€»æ•°æ® china_total_data()"></a><font color="#4876FF">ã€5x02ã€‘ä¸­å›½æ€»æ•°æ® china_total_data()</font></h3><pre><code class="python">def china_total_data(data):    &quot;&quot;&quot;    1ã€ä¸­å›½çœ/ç›´è¾–å¸‚/è‡ªæ²»åŒº/è¡Œæ”¿åŒºç–«æƒ…æ•°æ®    çœ/ç›´è¾–å¸‚/è‡ªæ²»åŒº/è¡Œæ”¿åŒºï¼šarea    ç°æœ‰ç¡®è¯Šï¼š    curConfirm    ç´¯è®¡ç¡®è¯Šï¼š    confirmed    ç´¯è®¡æ²»æ„ˆï¼š    crued    ç´¯è®¡æ­»äº¡ï¼š    died    ç°æœ‰ç¡®è¯Šå¢é‡ï¼š curConfirmRelative    ç´¯è®¡ç¡®è¯Šå¢é‡ï¼š confirmedRelative    ç´¯è®¡æ²»æ„ˆå¢é‡ï¼š curedRelative    ç´¯è®¡æ­»äº¡å¢é‡ï¼š diedRelative    &quot;&quot;&quot;    wb = openpyxl.Workbook()            # åˆ›å»ºå·¥ä½œç°¿    ws_china = wb.active                # è·å–å·¥ä½œè¡¨    ws_china.title = &quot;ä¸­å›½çœä»½ç–«æƒ…æ•°æ®&quot;   # å‘½åå·¥ä½œè¡¨    ws_china.append([&#39;çœ/ç›´è¾–å¸‚/è‡ªæ²»åŒº/è¡Œæ”¿åŒº&#39;, &#39;ç°æœ‰ç¡®è¯Š&#39;, &#39;ç´¯è®¡ç¡®è¯Š&#39;, &#39;ç´¯è®¡æ²»æ„ˆ&#39;,                     &#39;ç´¯è®¡æ­»äº¡&#39;, &#39;ç°æœ‰ç¡®è¯Šå¢é‡&#39;, &#39;ç´¯è®¡ç¡®è¯Šå¢é‡&#39;,                     &#39;ç´¯è®¡æ²»æ„ˆå¢é‡&#39;, &#39;ç´¯è®¡æ­»äº¡å¢é‡&#39;])    china = data[&#39;component&#39;][0][&#39;caseList&#39;]    for province in china:        ws_china.append([province[&#39;area&#39;],                        province[&#39;curConfirm&#39;],                        province[&#39;confirmed&#39;],                        province[&#39;crued&#39;],                        province[&#39;died&#39;],                        province[&#39;curConfirmRelative&#39;],                        province[&#39;confirmedRelative&#39;],                        province[&#39;curedRelative&#39;],                        province[&#39;diedRelative&#39;]])    &quot;&quot;&quot;    2ã€ä¸­å›½åŸå¸‚ç–«æƒ…æ•°æ®    åŸå¸‚ï¼šcity    ç°æœ‰ç¡®è¯Šï¼šcurConfirm    ç´¯è®¡ç¡®è¯Šï¼šconfirmed    ç´¯è®¡æ²»æ„ˆï¼šcrued    ç´¯è®¡æ­»äº¡ï¼šdied    ç´¯è®¡ç¡®è¯Šå¢é‡ï¼šconfirmedRelative    &quot;&quot;&quot;    ws_city = wb.create_sheet(&#39;ä¸­å›½åŸå¸‚ç–«æƒ…æ•°æ®&#39;)    ws_city.append([&#39;åŸå¸‚&#39;, &#39;ç°æœ‰ç¡®è¯Š&#39;, &#39;ç´¯è®¡ç¡®è¯Š&#39;,                    &#39;ç´¯è®¡æ²»æ„ˆ&#39;, &#39;ç´¯è®¡æ­»äº¡&#39;, &#39;ç´¯è®¡ç¡®è¯Šå¢é‡&#39;])    for province in china:        for city in province[&#39;subList&#39;]:            # æŸäº›åŸå¸‚æ²¡æœ‰ curConfirm æ•°æ®ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸º 0ï¼Œcrued å’Œ died ä¸ºç©ºæ—¶ï¼Œæ›¿æ¢æˆ 0            if &#39;curConfirm&#39; not in city:                city[&#39;curConfirm&#39;] = &#39;0&#39;            if city[&#39;crued&#39;] == &#39;&#39;:                city[&#39;crued&#39;] = &#39;0&#39;            if city[&#39;died&#39;] == &#39;&#39;:                city[&#39;died&#39;] = &#39;0&#39;            ws_city.append([city[&#39;city&#39;], &#39;0&#39;, city[&#39;confirmed&#39;],                           city[&#39;crued&#39;], city[&#39;died&#39;], city[&#39;confirmedRelative&#39;]])    &quot;&quot;&quot;    3ã€ä¸­å›½ç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´ï¼šmapLastUpdatedTime    &quot;&quot;&quot;    time_domestic = data[&#39;component&#39;][0][&#39;mapLastUpdatedTime&#39;]    ws_time = wb.create_sheet(&#39;ä¸­å›½ç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´&#39;)    ws_time.column_dimensions[&#39;A&#39;].width = 22  # è°ƒæ•´åˆ—å®½    ws_time.append([&#39;ä¸­å›½ç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´&#39;])    ws_time.append([time_domestic])    wb.save(&#39;COVID-19-China.xlsx&#39;)    print(&#39;ä¸­å›½ç–«æƒ…æ•°æ®å·²ä¿å­˜è‡³ COVID-19-China.xlsxï¼&#39;)</code></pre><h3 id="ã€5x03ã€‘å…¨çƒæ€»æ•°æ®-global-total-data"><a href="#ã€5x03ã€‘å…¨çƒæ€»æ•°æ®-global-total-data" class="headerlink" title="ã€5x03ã€‘å…¨çƒæ€»æ•°æ® global_total_data()"></a><font color="#4876FF">ã€5x03ã€‘å…¨çƒæ€»æ•°æ® global_total_data()</font></h3><p>å…¨çƒæ€»æ•°æ®åœ¨æå–å®Œæˆåï¼Œè¿›è¡Œåœ°å›¾ç»˜åˆ¶æ—¶å‘ç°å¹¶æ²¡æœ‰ä¸­å›½çš„æ•°æ®ï¼Œå› æ­¤åœ¨å†™å…¥å…¨çƒæ•°æ®æ—¶æ³¨æ„è¦å•ç‹¬å°†ä¸­å›½çš„æ•°æ®æ’å…¥ Excel ä¸­ã€‚</p><pre><code class="python">def global_total_data(data):    &quot;&quot;&quot;    1ã€å…¨çƒå„å›½ç–«æƒ…æ•°æ®    å›½å®¶ï¼šcountry    ç°æœ‰ç¡®è¯Šï¼šcurConfirm    ç´¯è®¡ç¡®è¯Šï¼šconfirmed    ç´¯è®¡æ²»æ„ˆï¼šcrued    ç´¯è®¡æ­»äº¡ï¼šdied    ç´¯è®¡ç¡®è¯Šå¢é‡ï¼šconfirmedRelative    &quot;&quot;&quot;    wb = openpyxl.Workbook()    ws_global = wb.active    ws_global.title = &quot;å…¨çƒå„å›½ç–«æƒ…æ•°æ®&quot;    # æŒ‰ç…§å›½å®¶ä¿å­˜æ•°æ®    countries = data[&#39;component&#39;][0][&#39;caseOutsideList&#39;]    ws_global.append([&#39;å›½å®¶&#39;, &#39;ç°æœ‰ç¡®è¯Š&#39;, &#39;ç´¯è®¡ç¡®è¯Š&#39;, &#39;ç´¯è®¡æ²»æ„ˆ&#39;, &#39;ç´¯è®¡æ­»äº¡&#39;, &#39;ç´¯è®¡ç¡®è¯Šå¢é‡&#39;])    for country in countries:        ws_global.append([country[&#39;area&#39;],                          country[&#39;curConfirm&#39;],                          country[&#39;confirmed&#39;],                          country[&#39;crued&#39;],                          country[&#39;died&#39;],                          country[&#39;confirmedRelative&#39;]])    # æŒ‰ç…§æ´²ä¿å­˜æ•°æ®    continent = data[&#39;component&#39;][0][&#39;globalList&#39;]    for area in continent:        ws_foreign = wb.create_sheet(area[&#39;area&#39;] + &#39;ç–«æƒ…æ•°æ®&#39;)        ws_foreign.append([&#39;å›½å®¶&#39;, &#39;ç°æœ‰ç¡®è¯Š&#39;, &#39;ç´¯è®¡ç¡®è¯Š&#39;, &#39;ç´¯è®¡æ²»æ„ˆ&#39;, &#39;ç´¯è®¡æ­»äº¡&#39;, &#39;ç´¯è®¡ç¡®è¯Šå¢é‡&#39;])        for country in area[&#39;subList&#39;]:            ws_foreign.append([country[&#39;country&#39;],                               country[&#39;curConfirm&#39;],                               country[&#39;confirmed&#39;],                               country[&#39;crued&#39;],                               country[&#39;died&#39;],                               country[&#39;confirmedRelative&#39;]])    # åœ¨â€œå…¨çƒå„å›½ç–«æƒ…æ•°æ®â€å’Œâ€œäºšæ´²ç–«æƒ…æ•°æ®â€ä¸¤å¼ è¡¨ä¸­å†™å…¥ä¸­å›½ç–«æƒ…æ•°æ®    ws1, ws2 = wb[&#39;å…¨çƒå„å›½ç–«æƒ…æ•°æ®&#39;], wb[&#39;äºšæ´²ç–«æƒ…æ•°æ®&#39;]    original_data = data[&#39;component&#39;][0][&#39;summaryDataIn&#39;]    add_china_data = [&#39;ä¸­å›½&#39;,                      original_data[&#39;curConfirm&#39;],                      original_data[&#39;confirmed&#39;],                      original_data[&#39;cured&#39;],                      original_data[&#39;died&#39;],                      original_data[&#39;confirmedRelative&#39;]]    ws1.append(add_china_data)    ws2.append(add_china_data)    &quot;&quot;&quot;    2ã€å…¨çƒç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´ï¼šforeignLastUpdatedTime    &quot;&quot;&quot;    time_foreign = data[&#39;component&#39;][0][&#39;foreignLastUpdatedTime&#39;]    ws_time = wb.create_sheet(&#39;å…¨çƒç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´&#39;)    ws_time.column_dimensions[&#39;A&#39;].width = 22  # è°ƒæ•´åˆ—å®½    ws_time.append([&#39;å…¨çƒç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´&#39;])    ws_time.append([time_foreign])    wb.save(&#39;COVID-19-Global.xlsx&#39;)    print(&#39;å…¨çƒç–«æƒ…æ•°æ®å·²ä¿å­˜è‡³ COVID-19-Global.xlsxï¼&#39;)</code></pre><h3 id="ã€5x04ã€‘ä¸­å›½æ¯æ—¥æ•°æ®-china-daily-data"><a href="#ã€5x04ã€‘ä¸­å›½æ¯æ—¥æ•°æ®-china-daily-data" class="headerlink" title="ã€5x04ã€‘ä¸­å›½æ¯æ—¥æ•°æ® china_daily_data()"></a><font color="#4876FF">ã€5x04ã€‘ä¸­å›½æ¯æ—¥æ•°æ® china_daily_data()</font></h3><pre><code class="python">def china_daily_data(data):    &quot;&quot;&quot;    i_dict = data[&#39;component&#39;][0][&#39;trend&#39;]    i_dict[&#39;updateDate&#39;]ï¼šæ—¥æœŸ    i_dict[&#39;list&#39;][0]ï¼šç¡®è¯Š    i_dict[&#39;list&#39;][1]ï¼šç–‘ä¼¼    i_dict[&#39;list&#39;][2]ï¼šæ²»æ„ˆ    i_dict[&#39;list&#39;][3]ï¼šæ­»äº¡    i_dict[&#39;list&#39;][4]ï¼šæ–°å¢ç¡®è¯Š    i_dict[&#39;list&#39;][5]ï¼šæ–°å¢ç–‘ä¼¼    i_dict[&#39;list&#39;][6]ï¼šæ–°å¢æ²»æ„ˆ    i_dict[&#39;list&#39;][7]ï¼šæ–°å¢æ­»äº¡    i_dict[&#39;list&#39;][8]ï¼šç´¯è®¡å¢ƒå¤–è¾“å…¥    i_dict[&#39;list&#39;][9]ï¼šæ–°å¢å¢ƒå¤–è¾“å…¥    &quot;&quot;&quot;    ccd_dict = data[&#39;component&#39;][0][&#39;trend&#39;]    update_date = ccd_dict[&#39;updateDate&#39;]              # æ—¥æœŸ    china_confirmed = ccd_dict[&#39;list&#39;][0][&#39;data&#39;]     # æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®    china_crued = ccd_dict[&#39;list&#39;][2][&#39;data&#39;]         # æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®    china_died = ccd_dict[&#39;list&#39;][3][&#39;data&#39;]          # æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®    wb = openpyxl.load_workbook(&#39;COVID-19-China.xlsx&#39;)    # å†™å…¥æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®    ws_china_confirmed = wb.create_sheet(&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®&#39;)    ws_china_confirmed.append([&#39;æ—¥æœŸ&#39;, &#39;æ•°æ®&#39;])    for data in zip(update_date, china_confirmed):        ws_china_confirmed.append(data)    # å†™å…¥æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®    ws_china_crued = wb.create_sheet(&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®&#39;)    ws_china_crued.append([&#39;æ—¥æœŸ&#39;, &#39;æ•°æ®&#39;])    for data in zip(update_date, china_crued):        ws_china_crued.append(data)    # å†™å…¥æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®    ws_china_died = wb.create_sheet(&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®&#39;)    ws_china_died.append([&#39;æ—¥æœŸ&#39;, &#39;æ•°æ®&#39;])    for data in zip(update_date, china_died):        ws_china_died.append(data)    wb.save(&#39;COVID-19-China.xlsx&#39;)    print(&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡ç¡®è¯Š/æ²»æ„ˆ/æ­»äº¡æ•°æ®å·²ä¿å­˜è‡³ COVID-19-China.xlsxï¼&#39;)</code></pre><h3 id="ã€5x05ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ®-foreign-daily-data"><a href="#ã€5x05ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ®-foreign-daily-data" class="headerlink" title="ã€5x05ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ® foreign_daily_data()"></a><font color="#4876FF">ã€5x05ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ® foreign_daily_data()</font></h3><pre><code class="python">def foreign_daily_data(data):    &quot;&quot;&quot;    te_dict = data[&#39;component&#39;][0][&#39;allForeignTrend&#39;]    te_dict[&#39;updateDate&#39;]ï¼šæ—¥æœŸ    te_dict[&#39;list&#39;][0]ï¼šç´¯è®¡ç¡®è¯Š    te_dict[&#39;list&#39;][1]ï¼šæ²»æ„ˆ    te_dict[&#39;list&#39;][2]ï¼šæ­»äº¡    te_dict[&#39;list&#39;][3]ï¼šç°æœ‰ç¡®è¯Š    te_dict[&#39;list&#39;][4]ï¼šæ–°å¢ç¡®è¯Š    &quot;&quot;&quot;    te_dict = data[&#39;component&#39;][0][&#39;allForeignTrend&#39;]    update_date = te_dict[&#39;updateDate&#39;]                # æ—¥æœŸ    foreign_confirmed = te_dict[&#39;list&#39;][0][&#39;data&#39;]     # æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®    foreign_crued = te_dict[&#39;list&#39;][1][&#39;data&#39;]         # æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®    foreign_died = te_dict[&#39;list&#39;][2][&#39;data&#39;]          # æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®    wb = openpyxl.load_workbook(&#39;COVID-19-Global.xlsx&#39;)    # å†™å…¥æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®    ws_foreign_confirmed = wb.create_sheet(&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®&#39;)    ws_foreign_confirmed.append([&#39;æ—¥æœŸ&#39;, &#39;æ•°æ®&#39;])    for data in zip(update_date, foreign_confirmed):        ws_foreign_confirmed.append(data)    # å†™å…¥ç´¯è®¡æ²»æ„ˆæ•°æ®    ws_foreign_crued = wb.create_sheet(&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®&#39;)    ws_foreign_crued.append([&#39;æ—¥æœŸ&#39;, &#39;æ•°æ®&#39;])    for data in zip(update_date, foreign_crued):        ws_foreign_crued.append(data)    # å†™å…¥ç´¯è®¡æ­»äº¡æ•°æ®    ws_foreign_died = wb.create_sheet(&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®&#39;)    ws_foreign_died.append([&#39;æ—¥æœŸ&#39;, &#39;æ•°æ®&#39;])    for data in zip(update_date, foreign_died):        ws_foreign_died.append(data)    wb.save(&#39;COVID-19-Global.xlsx&#39;)    print(&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡ç¡®è¯Š/æ²»æ„ˆ/æ­»äº¡æ•°æ®å·²ä¿å­˜è‡³ COVID-19-Global.xlsxï¼&#39;)</code></pre><h2 id="ã€6x00ã€‘è¯äº‘å›¾ç»˜åˆ¶æ¨¡å—-data-wordcloud"><a href="#ã€6x00ã€‘è¯äº‘å›¾ç»˜åˆ¶æ¨¡å—-data-wordcloud" class="headerlink" title="ã€6x00ã€‘è¯äº‘å›¾ç»˜åˆ¶æ¨¡å— data_wordcloud"></a><font color=#FF0000>ã€6x00ã€‘è¯äº‘å›¾ç»˜åˆ¶æ¨¡å— data_wordcloud</font></h2><h3 id="ã€6x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šè¯äº‘å›¾-foreign-daily-data"><a href="#ã€6x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šè¯äº‘å›¾-foreign-daily-data" class="headerlink" title="ã€6x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šè¯äº‘å›¾ foreign_daily_data()"></a><font color="#4876FF">ã€6x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šè¯äº‘å›¾ foreign_daily_data()</font></h3><pre><code class="python">def china_wordcloud():    wb = openpyxl.load_workbook(&#39;COVID-19-China.xlsx&#39;)  # è·å–å·²æœ‰çš„xlsxæ–‡ä»¶    ws_china = wb[&#39;ä¸­å›½çœä»½ç–«æƒ…æ•°æ®&#39;]                     # è·å–ä¸­å›½çœä»½ç–«æƒ…æ•°æ®è¡¨    ws_china.delete_rows(1)                             # åˆ é™¤ç¬¬ä¸€è¡Œ    china_dict = &#123;&#125;                                     # å°†çœä»½åŠå…¶ç´¯è®¡ç¡®è¯ŠæŒ‰ç…§é”®å€¼å¯¹å½¢å¼å‚¨å­˜åœ¨å­—å…¸ä¸­    for data in ws_china.values:        china_dict[data[0]] = int(data[2])    word_cloud = wordcloud.WordCloud(font_path=&#39;C:/Windows/Fonts/simsun.ttc&#39;,                                     background_color=&#39;#CDC9C9&#39;,                                     min_font_size=15,                                     width=900, height=500)    word_cloud.generate_from_frequencies(china_dict)    word_cloud.to_file(&#39;WordCloud-China.png&#39;)    print(&#39;ä¸­å›½çœä»½ç–«æƒ…è¯äº‘å›¾ç»˜åˆ¶å®Œæ¯•ï¼&#39;)</code></pre><h3 id="ã€6x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šè¯äº‘å›¾-foreign-daily-data"><a href="#ã€6x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šè¯äº‘å›¾-foreign-daily-data" class="headerlink" title="ã€6x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šè¯äº‘å›¾ foreign_daily_data()"></a><font color="#4876FF">ã€6x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šè¯äº‘å›¾ foreign_daily_data()</font></h3><pre><code class="python">def global_wordcloud():    wb = openpyxl.load_workbook(&#39;COVID-19-Global.xlsx&#39;)    ws_global = wb[&#39;å…¨çƒå„å›½ç–«æƒ…æ•°æ®&#39;]    ws_global.delete_rows(1)    global_dict = &#123;&#125;    for data in ws_global.values:        global_dict[data[0]] = int(data[2])    word_cloud = wordcloud.WordCloud(font_path=&#39;C:/Windows/Fonts/simsun.ttc&#39;,                                     background_color=&#39;#CDC9C9&#39;,                                     width=900, height=500)    word_cloud.generate_from_frequencies(global_dict)    word_cloud.to_file(&#39;WordCloud-Global.png&#39;)    print(&#39;å…¨çƒå„å›½ç–«æƒ…è¯äº‘å›¾ç»˜åˆ¶å®Œæ¯•ï¼&#39;)</code></pre><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/107140534æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="ã€7x00ã€‘åœ°å›¾ç»˜åˆ¶æ¨¡å—-data-map"><a href="#ã€7x00ã€‘åœ°å›¾ç»˜åˆ¶æ¨¡å—-data-map" class="headerlink" title="ã€7x00ã€‘åœ°å›¾ç»˜åˆ¶æ¨¡å— data_map"></a><font color=#FF0000>ã€7x00ã€‘åœ°å›¾ç»˜åˆ¶æ¨¡å— data_map</font></h2><h3 id="ã€7x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šåœ°å›¾-china-total-map"><a href="#ã€7x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šåœ°å›¾-china-total-map" class="headerlink" title="ã€7x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šåœ°å›¾ china_total_map()"></a><font color="#4876FF">ã€7x01ã€‘ä¸­å›½ç´¯è®¡ç¡®è¯Šåœ°å›¾ china_total_map()</font></h3><pre><code class="python">def china_total_map():    wb = openpyxl.load_workbook(&#39;COVID-19-China.xlsx&#39;)  # è·å–å·²æœ‰çš„xlsxæ–‡ä»¶    ws_time = wb[&#39;ä¸­å›½ç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´&#39;]                   # è·å–æ–‡ä»¶ä¸­ä¸­å›½ç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´è¡¨    ws_data = wb[&#39;ä¸­å›½çœä»½ç–«æƒ…æ•°æ®&#39;]                      # è·å–æ–‡ä»¶ä¸­ä¸­å›½çœä»½ç–«æƒ…æ•°æ®è¡¨    ws_data.delete_rows(1)                              # åˆ é™¤ç¬¬ä¸€è¡Œ    province = []                                       # çœä»½    curconfirm = []                                     # ç´¯è®¡ç¡®è¯Š    for data in ws_data.values:        province.append(data[0])        curconfirm.append(data[2])    time_china = ws_time[&#39;A2&#39;].value                    # æ›´æ–°æ—¶é—´    # è®¾ç½®åˆ†çº§é¢œè‰²    pieces = [        &#123;&#39;max&#39;: 0, &#39;min&#39;: 0, &#39;label&#39;: &#39;0&#39;, &#39;color&#39;: &#39;#FFFFFF&#39;&#125;,        &#123;&#39;max&#39;: 9, &#39;min&#39;: 1, &#39;label&#39;: &#39;1-9&#39;, &#39;color&#39;: &#39;#FFE5DB&#39;&#125;,        &#123;&#39;max&#39;: 99, &#39;min&#39;: 10, &#39;label&#39;: &#39;10-99&#39;, &#39;color&#39;: &#39;#FF9985&#39;&#125;,        &#123;&#39;max&#39;: 999, &#39;min&#39;: 100, &#39;label&#39;: &#39;100-999&#39;, &#39;color&#39;: &#39;#F57567&#39;&#125;,        &#123;&#39;max&#39;: 9999, &#39;min&#39;: 1000, &#39;label&#39;: &#39;1000-9999&#39;, &#39;color&#39;: &#39;#E64546&#39;&#125;,        &#123;&#39;max&#39;: 99999, &#39;min&#39;: 10000, &#39;label&#39;: &#39;â‰§10000&#39;, &#39;color&#39;: &#39;#B80909&#39;&#125;    ]    # ç»˜åˆ¶åœ°å›¾    ct_map = (        Map()        .add(series_name=&#39;ç´¯è®¡ç¡®è¯Šäººæ•°&#39;, data_pair=[list(z) for z in zip(province, curconfirm)], maptype=&quot;china&quot;)        .set_global_opts(            title_opts=opts.TitleOpts(title=&quot;ä¸­å›½ç–«æƒ…æ•°æ®ï¼ˆç´¯è®¡ç¡®è¯Šï¼‰&quot;,                                      subtitle=&#39;æ•°æ®æ›´æ–°è‡³ï¼š&#39; + time_china + &#39;\n\næ¥æºï¼šç™¾åº¦ç–«æƒ…å®æ—¶å¤§æ•°æ®æŠ¥å‘Š&#39;),            visualmap_opts=opts.VisualMapOpts(max_=300, is_piecewise=True, pieces=pieces)        )    )    return ct_map</code></pre><h3 id="ã€7x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šåœ°å›¾-global-total-map"><a href="#ã€7x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šåœ°å›¾-global-total-map" class="headerlink" title="ã€7x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šåœ°å›¾ global_total_map()"></a><font color="#4876FF">ã€7x02ã€‘å…¨çƒç´¯è®¡ç¡®è¯Šåœ°å›¾ global_total_map()</font></h3><pre><code class="python">def global_total_map():    wb = openpyxl.load_workbook(&#39;COVID-19-Global.xlsx&#39;)    ws_time = wb[&#39;å…¨çƒç–«æƒ…æ•°æ®æ›´æ–°æ—¶é—´&#39;]    ws_data = wb[&#39;å…¨çƒå„å›½ç–«æƒ…æ•°æ®&#39;]    ws_data.delete_rows(1)    country = []                        # å›½å®¶    curconfirm = []                     # ç´¯è®¡ç¡®è¯Š    for data in ws_data.values:        country.append(data[0])        curconfirm.append(data[2])    time_global = ws_time[&#39;A2&#39;].value   # æ›´æ–°æ—¶é—´    # å›½å®¶åç§°ä¸­è‹±æ–‡æ˜ å°„è¡¨    name_map = &#123;          &quot;Somalia&quot;: &quot;ç´¢é©¬é‡Œ&quot;,          &quot;Liechtenstein&quot;: &quot;åˆ—æ”¯æ•¦å£«ç™»&quot;,          &quot;Morocco&quot;: &quot;æ‘©æ´›å“¥&quot;,          &quot;W. Sahara&quot;: &quot;è¥¿æ’’å“ˆæ‹‰&quot;,          &quot;Serbia&quot;: &quot;å¡å°”ç»´äºš&quot;,          &quot;Afghanistan&quot;: &quot;é˜¿å¯Œæ±—&quot;,          &quot;Angola&quot;: &quot;å®‰å“¥æ‹‰&quot;,          &quot;Albania&quot;: &quot;é˜¿å°”å·´å°¼äºš&quot;,          &quot;Andorra&quot;: &quot;å®‰é“å°”å…±å’Œå›½&quot;,          &quot;United Arab Emirates&quot;: &quot;é˜¿æ‹‰ä¼¯è”åˆé…‹é•¿å›½&quot;,          &quot;Argentina&quot;: &quot;é˜¿æ ¹å»·&quot;,          &quot;Armenia&quot;: &quot;äºšç¾å°¼äºš&quot;,          &quot;Australia&quot;: &quot;æ¾³å¤§åˆ©äºš&quot;,          &quot;Austria&quot;: &quot;å¥¥åœ°åˆ©&quot;,          &quot;Azerbaijan&quot;: &quot;é˜¿å¡æ‹œç–†&quot;,          &quot;Burundi&quot;: &quot;å¸ƒéš†è¿ª&quot;,          &quot;Belgium&quot;: &quot;æ¯”åˆ©æ—¶&quot;,          &quot;Benin&quot;: &quot;è´å®&quot;,          &quot;Burkina Faso&quot;: &quot;å¸ƒåŸºçº³æ³•ç´¢&quot;,          &quot;Bangladesh&quot;: &quot;å­ŸåŠ æ‹‰å›½&quot;,          &quot;Bulgaria&quot;: &quot;ä¿åŠ åˆ©äºš&quot;,          &quot;Bahrain&quot;: &quot;å·´æ—&quot;,          &quot;Bahamas&quot;: &quot;å·´å“ˆé©¬&quot;,          &quot;Bosnia and Herz.&quot;: &quot;æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£&quot;,          &quot;Belarus&quot;: &quot;ç™½ä¿„ç½—æ–¯&quot;,          &quot;Belize&quot;: &quot;ä¼¯åˆ©å…¹&quot;,          &quot;Bermuda&quot;: &quot;ç™¾æ…•å¤§&quot;,          &quot;Bolivia&quot;: &quot;ç»åˆ©ç»´äºš&quot;,          &quot;Brazil&quot;: &quot;å·´è¥¿&quot;,          &quot;Barbados&quot;: &quot;å·´å·´å¤šæ–¯&quot;,          &quot;Brunei&quot;: &quot;æ–‡è±&quot;,          &quot;Bhutan&quot;: &quot;ä¸ä¸¹&quot;,          &quot;Botswana&quot;: &quot;åšèŒ¨ç“¦çº³&quot;,          &quot;Central African Rep.&quot;: &quot;ä¸­éå…±å’Œå›½&quot;,          &quot;Canada&quot;: &quot;åŠ æ‹¿å¤§&quot;,          &quot;Switzerland&quot;: &quot;ç‘å£«&quot;,          &quot;Chile&quot;: &quot;æ™ºåˆ©&quot;,          &quot;China&quot;: &quot;ä¸­å›½&quot;,          &quot;CÃ´te d&#39;Ivoire&quot;: &quot;ç§‘ç‰¹è¿ªç“¦&quot;,          &quot;Cameroon&quot;: &quot;å–€éº¦éš†&quot;,          &quot;Dem. Rep. Congo&quot;: &quot;åˆšæœï¼ˆå¸ƒï¼‰&quot;,          &quot;Congo&quot;: &quot;åˆšæœï¼ˆé‡‘ï¼‰&quot;,          &quot;Colombia&quot;: &quot;å“¥ä¼¦æ¯”äºš&quot;,          &quot;Cape Verde&quot;: &quot;ä½›å¾—è§’&quot;,          &quot;Costa Rica&quot;: &quot;å“¥æ–¯è¾¾é»åŠ &quot;,          &quot;Cuba&quot;: &quot;å¤å·´&quot;,          &quot;N. Cyprus&quot;: &quot;åŒ—å¡æµ¦è·¯æ–¯&quot;,          &quot;Cyprus&quot;: &quot;å¡æµ¦è·¯æ–¯&quot;,          &quot;Czech Rep.&quot;: &quot;æ·å…‹&quot;,          &quot;Germany&quot;: &quot;å¾·å›½&quot;,          &quot;Djibouti&quot;: &quot;å‰å¸ƒæ&quot;,          &quot;Denmark&quot;: &quot;ä¸¹éº¦&quot;,          &quot;Dominican Rep.&quot;: &quot;å¤šç±³å°¼åŠ &quot;,          &quot;Algeria&quot;: &quot;é˜¿å°”åŠåˆ©äºš&quot;,          &quot;Ecuador&quot;: &quot;å„ç“œå¤šå°”&quot;,          &quot;Egypt&quot;: &quot;åŸƒåŠ&quot;,          &quot;Eritrea&quot;: &quot;å„ç«‹ç‰¹é‡Œäºš&quot;,          &quot;Spain&quot;: &quot;è¥¿ç­ç‰™&quot;,          &quot;Estonia&quot;: &quot;çˆ±æ²™å°¼äºš&quot;,          &quot;Ethiopia&quot;: &quot;åŸƒå¡ä¿„æ¯”äºš&quot;,          &quot;Finland&quot;: &quot;èŠ¬å…°&quot;,          &quot;Fiji&quot;: &quot;æ–æµ&quot;,          &quot;France&quot;: &quot;æ³•å›½&quot;,          &quot;Gabon&quot;: &quot;åŠ è“¬&quot;,          &quot;United Kingdom&quot;: &quot;è‹±å›½&quot;,          &quot;Georgia&quot;: &quot;æ ¼é²å‰äºš&quot;,          &quot;Ghana&quot;: &quot;åŠ çº³&quot;,          &quot;Guinea&quot;: &quot;å‡ å†…äºš&quot;,          &quot;Gambia&quot;: &quot;å†ˆæ¯”äºš&quot;,          &quot;Guinea-Bissau&quot;: &quot;å‡ å†…äºšæ¯”ç»&quot;,          &quot;Eq. Guinea&quot;: &quot;èµ¤é“å‡ å†…äºš&quot;,          &quot;Greece&quot;: &quot;å¸Œè…Š&quot;,          &quot;Grenada&quot;: &quot;æ ¼æ—çº³è¾¾&quot;,          &quot;Greenland&quot;: &quot;æ ¼é™µå…°å²›&quot;,          &quot;Guatemala&quot;: &quot;å±åœ°é©¬æ‹‰&quot;,          &quot;Guam&quot;: &quot;å…³å²›&quot;,          &quot;Guyana&quot;: &quot;åœ­äºšé‚£åˆä½œå…±å’Œå›½&quot;,          &quot;Honduras&quot;: &quot;æ´ªéƒ½æ‹‰æ–¯&quot;,          &quot;Croatia&quot;: &quot;å…‹ç½—åœ°äºš&quot;,          &quot;Haiti&quot;: &quot;æµ·åœ°&quot;,          &quot;Hungary&quot;: &quot;åŒˆç‰™åˆ©&quot;,          &quot;Indonesia&quot;: &quot;å°åº¦å°¼è¥¿äºš&quot;,          &quot;India&quot;: &quot;å°åº¦&quot;,          &quot;Br. Indian Ocean Ter.&quot;: &quot;è‹±å±å°åº¦æ´‹é¢†åœŸ&quot;,          &quot;Ireland&quot;: &quot;çˆ±å°”å…°&quot;,          &quot;Iran&quot;: &quot;ä¼Šæœ—&quot;,          &quot;Iraq&quot;: &quot;ä¼Šæ‹‰å…‹&quot;,          &quot;Iceland&quot;: &quot;å†°å²›&quot;,          &quot;Israel&quot;: &quot;ä»¥è‰²åˆ—&quot;,          &quot;Italy&quot;: &quot;æ„å¤§åˆ©&quot;,          &quot;Jamaica&quot;: &quot;ç‰™ä¹°åŠ &quot;,          &quot;Jordan&quot;: &quot;çº¦æ—¦&quot;,          &quot;Japan&quot;: &quot;æ—¥æœ¬&quot;,          &quot;Siachen Glacier&quot;: &quot;é”¡äºšç´å†°å·&quot;,          &quot;Kazakhstan&quot;: &quot;å“ˆè¨å…‹æ–¯å¦&quot;,          &quot;Kenya&quot;: &quot;è‚¯å°¼äºš&quot;,          &quot;Kyrgyzstan&quot;: &quot;å‰å°”å‰æ–¯æ–¯å¦&quot;,          &quot;Cambodia&quot;: &quot;æŸ¬åŸ”å¯¨&quot;,          &quot;Korea&quot;: &quot;éŸ©å›½&quot;,          &quot;Kuwait&quot;: &quot;ç§‘å¨ç‰¹&quot;,          &quot;Lao PDR&quot;: &quot;è€æŒ&quot;,          &quot;Lebanon&quot;: &quot;é»å·´å«©&quot;,          &quot;Liberia&quot;: &quot;åˆ©æ¯”é‡Œäºš&quot;,          &quot;Libya&quot;: &quot;åˆ©æ¯”äºš&quot;,          &quot;Sri Lanka&quot;: &quot;æ–¯é‡Œå…°å¡&quot;,          &quot;Lesotho&quot;: &quot;è±ç´¢æ‰˜&quot;,          &quot;Lithuania&quot;: &quot;ç«‹é™¶å®›&quot;,          &quot;Luxembourg&quot;: &quot;å¢æ£®å ¡&quot;,          &quot;Latvia&quot;: &quot;æ‹‰è„±ç»´äºš&quot;,          &quot;Moldova&quot;: &quot;æ‘©å°”å¤šç“¦&quot;,          &quot;Madagascar&quot;: &quot;é©¬è¾¾åŠ æ–¯åŠ &quot;,          &quot;Mexico&quot;: &quot;å¢¨è¥¿å“¥&quot;,          &quot;Macedonia&quot;: &quot;é©¬å…¶é¡¿&quot;,          &quot;Mali&quot;: &quot;é©¬é‡Œ&quot;,          &quot;Malta&quot;: &quot;é©¬è€³ä»–&quot;,          &quot;Myanmar&quot;: &quot;ç¼…ç”¸&quot;,          &quot;Montenegro&quot;: &quot;é»‘å±±&quot;,          &quot;Mongolia&quot;: &quot;è’™å¤å›½&quot;,          &quot;Mozambique&quot;: &quot;è«æ¡‘æ¯”å…‹&quot;,          &quot;Mauritania&quot;: &quot;æ¯›é‡Œå¡”å°¼äºš&quot;,          &quot;Mauritius&quot;: &quot;æ¯›é‡Œæ±‚æ–¯&quot;,          &quot;Malawi&quot;: &quot;é©¬æ‹‰ç»´&quot;,          &quot;Malaysia&quot;: &quot;é©¬æ¥è¥¿äºš&quot;,          &quot;Namibia&quot;: &quot;çº³ç±³æ¯”äºš&quot;,          &quot;New Caledonia&quot;: &quot;æ–°å–€é‡Œå¤šå°¼äºš&quot;,          &quot;Niger&quot;: &quot;å°¼æ—¥å°”&quot;,          &quot;Nigeria&quot;: &quot;å°¼æ—¥åˆ©äºš&quot;,          &quot;Nicaragua&quot;: &quot;å°¼åŠ æ‹‰ç“œ&quot;,          &quot;Netherlands&quot;: &quot;è·å…°&quot;,          &quot;Norway&quot;: &quot;æŒªå¨&quot;,          &quot;Nepal&quot;: &quot;å°¼æ³Šå°”&quot;,          &quot;New Zealand&quot;: &quot;æ–°è¥¿å…°&quot;,          &quot;Oman&quot;: &quot;é˜¿æ›¼&quot;,          &quot;Pakistan&quot;: &quot;å·´åŸºæ–¯å¦&quot;,          &quot;Panama&quot;: &quot;å·´æ‹¿é©¬&quot;,          &quot;Peru&quot;: &quot;ç§˜é²&quot;,          &quot;Philippines&quot;: &quot;è²å¾‹å®¾&quot;,          &quot;Papua New Guinea&quot;: &quot;å·´å¸ƒäºšæ–°å‡ å†…äºš&quot;,          &quot;Poland&quot;: &quot;æ³¢å…°&quot;,          &quot;Puerto Rico&quot;: &quot;æ³¢å¤šé»å„&quot;,          &quot;Dem. Rep. Korea&quot;: &quot;æœé²œ&quot;,          &quot;Portugal&quot;: &quot;è‘¡è„ç‰™&quot;,          &quot;Paraguay&quot;: &quot;å·´æ‹‰åœ­&quot;,          &quot;Palestine&quot;: &quot;å·´å‹’æ–¯å¦&quot;,          &quot;Qatar&quot;: &quot;å¡å¡”å°”&quot;,          &quot;Romania&quot;: &quot;ç½—é©¬å°¼äºš&quot;,          &quot;Russia&quot;: &quot;ä¿„ç½—æ–¯&quot;,          &quot;Rwanda&quot;: &quot;å¢æ—ºè¾¾&quot;,          &quot;Saudi Arabia&quot;: &quot;æ²™ç‰¹é˜¿æ‹‰ä¼¯&quot;,          &quot;Sudan&quot;: &quot;è‹ä¸¹&quot;,          &quot;S. Sudan&quot;: &quot;å—è‹ä¸¹&quot;,          &quot;Senegal&quot;: &quot;å¡å†…åŠ å°”&quot;,          &quot;Singapore&quot;: &quot;æ–°åŠ å¡&quot;,          &quot;Solomon Is.&quot;: &quot;æ‰€ç½—é—¨ç¾¤å²›&quot;,          &quot;Sierra Leone&quot;: &quot;å¡æ‹‰åˆ©æ˜‚&quot;,          &quot;El Salvador&quot;: &quot;è¨å°”ç“¦å¤š&quot;,          &quot;Suriname&quot;: &quot;è‹é‡Œå—&quot;,          &quot;Slovakia&quot;: &quot;æ–¯æ´›ä¼å…‹&quot;,          &quot;Slovenia&quot;: &quot;æ–¯æ´›æ–‡å°¼äºš&quot;,          &quot;Sweden&quot;: &quot;ç‘å…¸&quot;,          &quot;Swaziland&quot;: &quot;æ–¯å¨å£«å…°&quot;,          &quot;Seychelles&quot;: &quot;å¡èˆŒå°”&quot;,          &quot;Syria&quot;: &quot;å™åˆ©äºš&quot;,          &quot;Chad&quot;: &quot;ä¹å¾—&quot;,          &quot;Togo&quot;: &quot;å¤šå“¥&quot;,          &quot;Thailand&quot;: &quot;æ³°å›½&quot;,          &quot;Tajikistan&quot;: &quot;å¡”å‰å…‹æ–¯å¦&quot;,          &quot;Turkmenistan&quot;: &quot;åœŸåº“æ›¼æ–¯å¦&quot;,          &quot;Timor-Leste&quot;: &quot;ä¸œå¸æ±¶&quot;,          &quot;Tonga&quot;: &quot;æ±¤åŠ &quot;,          &quot;Trinidad and Tobago&quot;: &quot;ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥&quot;,          &quot;Tunisia&quot;: &quot;çªå°¼æ–¯&quot;,          &quot;Turkey&quot;: &quot;åœŸè€³å…¶&quot;,          &quot;Tanzania&quot;: &quot;å¦æ¡‘å°¼äºš&quot;,          &quot;Uganda&quot;: &quot;ä¹Œå¹²è¾¾&quot;,          &quot;Ukraine&quot;: &quot;ä¹Œå…‹å…°&quot;,          &quot;Uruguay&quot;: &quot;ä¹Œæ‹‰åœ­&quot;,          &quot;United States&quot;: &quot;ç¾å›½&quot;,          &quot;Uzbekistan&quot;: &quot;ä¹Œå…¹åˆ«å…‹æ–¯å¦&quot;,          &quot;Venezuela&quot;: &quot;å§”å†…ç‘æ‹‰&quot;,          &quot;Vietnam&quot;: &quot;è¶Šå—&quot;,          &quot;Vanuatu&quot;: &quot;ç“¦åŠªé˜¿å›¾&quot;,          &quot;Yemen&quot;: &quot;ä¹Ÿé—¨&quot;,          &quot;South Africa&quot;: &quot;å—é&quot;,          &quot;Zambia&quot;: &quot;èµæ¯”äºš&quot;,          &quot;Zimbabwe&quot;: &quot;æ´¥å·´å¸ƒéŸ¦&quot;,          &quot;Aland&quot;: &quot;å¥¥å…°ç¾¤å²›&quot;,          &quot;American Samoa&quot;: &quot;ç¾å±è¨æ‘©äºš&quot;,          &quot;Fr. S. Antarctic Lands&quot;: &quot;å—ææ´²&quot;,          &quot;Antigua and Barb.&quot;: &quot;å®‰æç“œå’Œå·´å¸ƒè¾¾&quot;,          &quot;Comoros&quot;: &quot;ç§‘æ‘©ç½—&quot;,          &quot;CuraÃ§ao&quot;: &quot;åº“æ‹‰ç´¢å²›&quot;,          &quot;Cayman Is.&quot;: &quot;å¼€æ›¼ç¾¤å²›&quot;,          &quot;Dominica&quot;: &quot;å¤šç±³å°¼åŠ &quot;,          &quot;Falkland Is.&quot;: &quot;ç¦å…‹å…°ç¾¤å²›é©¬å°”ç»´çº³æ–¯&quot;,          &quot;Faeroe Is.&quot;: &quot;æ³•ç½—ç¾¤å²›&quot;,          &quot;Micronesia&quot;: &quot;å¯†å…‹ç½—å°¼è¥¿äºš&quot;,          &quot;Heard I. and McDonald Is.&quot;: &quot;èµ«å¾·å²›å’Œéº¦å…‹å”çº³ç¾¤å²›&quot;,          &quot;Isle of Man&quot;: &quot;æ›¼å²›&quot;,          &quot;Jersey&quot;: &quot;æ³½è¥¿å²›&quot;,          &quot;Kiribati&quot;: &quot;åŸºé‡Œå·´æ–¯&quot;,          &quot;Saint Lucia&quot;: &quot;åœ£å¢è¥¿äºš&quot;,          &quot;N. Mariana Is.&quot;: &quot;åŒ—é©¬é‡Œäºšçº³ç¾¤å²›&quot;,          &quot;Montserrat&quot;: &quot;è’™ç‰¹å¡æ‹‰ç‰¹&quot;,          &quot;Niue&quot;: &quot;çº½åŸƒ&quot;,          &quot;Palau&quot;: &quot;å¸•åŠ³&quot;,          &quot;Fr. Polynesia&quot;: &quot;æ³•å±æ³¢åˆ©å°¼è¥¿äºš&quot;,          &quot;S. Geo. and S. Sandw. Is.&quot;: &quot;å—ä¹”æ²»äºšå²›å’Œå—æ¡‘å¨å¥‡ç¾¤å²›&quot;,          &quot;Saint Helena&quot;: &quot;åœ£èµ«å‹’æ‹¿&quot;,          &quot;St. Pierre and Miquelon&quot;: &quot;åœ£çš®åŸƒå°”å’Œå¯†å…‹éš†ç¾¤å²›&quot;,          &quot;SÃ£o TomÃ© and Principe&quot;: &quot;åœ£å¤šç¾å’Œæ™®æ—è¥¿æ¯”&quot;,          &quot;Turks and Caicos Is.&quot;: &quot;ç‰¹å…‹æ–¯å’Œå‡¯ç§‘æ–¯ç¾¤å²›&quot;,          &quot;St. Vin. and Gren.&quot;: &quot;åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯&quot;,          &quot;U.S. Virgin Is.&quot;: &quot;ç¾å±ç»´å°”äº¬ç¾¤å²›&quot;,          &quot;Samoa&quot;: &quot;è¨æ‘©äºš&quot;        &#125;    pieces = [        &#123;&#39;max&#39;: 0, &#39;min&#39;: 0, &#39;label&#39;: &#39;0&#39;, &#39;color&#39;: &#39;#FFFFFF&#39;&#125;,        &#123;&#39;max&#39;: 49, &#39;min&#39;: 1, &#39;label&#39;: &#39;1-49&#39;, &#39;color&#39;: &#39;#FFE5DB&#39;&#125;,        &#123;&#39;max&#39;: 99, &#39;min&#39;: 50, &#39;label&#39;: &#39;50-99&#39;, &#39;color&#39;: &#39;#FFC4B3&#39;&#125;,        &#123;&#39;max&#39;: 999, &#39;min&#39;: 100, &#39;label&#39;: &#39;100-999&#39;, &#39;color&#39;: &#39;#FF9985&#39;&#125;,        &#123;&#39;max&#39;: 9999, &#39;min&#39;: 1000, &#39;label&#39;: &#39;1000-9999&#39;, &#39;color&#39;: &#39;#F57567&#39;&#125;,        &#123;&#39;max&#39;: 99999, &#39;min&#39;: 10000, &#39;label&#39;: &#39;10000-99999&#39;, &#39;color&#39;: &#39;#E64546&#39;&#125;,        &#123;&#39;max&#39;: 999999, &#39;min&#39;: 100000, &#39;label&#39;: &#39;100000-999999&#39;, &#39;color&#39;: &#39;#B80909&#39;&#125;,        &#123;&#39;max&#39;: 9999999, &#39;min&#39;: 1000000, &#39;label&#39;: &#39;â‰§1000000&#39;, &#39;color&#39;: &#39;#8A0808&#39;&#125;    ]    gt_map = (        Map()        .add(series_name=&#39;ç´¯è®¡ç¡®è¯Šäººæ•°&#39;, data_pair=[list(z) for z in zip(country, curconfirm)], maptype=&quot;world&quot;, name_map=name_map, is_map_symbol_show=False)        .set_series_opts(label_opts=opts.LabelOpts(is_show=False))        .set_global_opts(            title_opts=opts.TitleOpts(title=&quot;å…¨çƒç–«æƒ…æ•°æ®ï¼ˆç´¯è®¡ç¡®è¯Šï¼‰&quot;,                                      subtitle=&#39;æ•°æ®æ›´æ–°è‡³ï¼š&#39; + time_global + &#39;\n\næ¥æºï¼šç™¾åº¦ç–«æƒ…å®æ—¶å¤§æ•°æ®æŠ¥å‘Š&#39;),            visualmap_opts=opts.VisualMapOpts(max_=300, is_piecewise=True, pieces=pieces),        )    )    return gt_map</code></pre><h3 id="ã€7x03ã€‘ä¸­å›½æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾-china-daily-map"><a href="#ã€7x03ã€‘ä¸­å›½æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾-china-daily-map" class="headerlink" title="ã€7x03ã€‘ä¸­å›½æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾ china_daily_map()"></a><font color="#4876FF">ã€7x03ã€‘ä¸­å›½æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾ china_daily_map()</font></h3><pre><code class="python">def china_daily_map():    wb = openpyxl.load_workbook(&#39;COVID-19-China.xlsx&#39;)    ws_china_confirmed = wb[&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®&#39;]    ws_china_crued = wb[&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®&#39;]    ws_china_died = wb[&#39;ä¸­å›½æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®&#39;]    ws_china_confirmed.delete_rows(1)    ws_china_crued.delete_rows(1)    ws_china_died.delete_rows(1)    x_date = []               # æ—¥æœŸ    y_china_confirmed = []    # æ¯æ—¥ç´¯è®¡ç¡®è¯Š    y_china_crued = []        # æ¯æ—¥ç´¯è®¡æ²»æ„ˆ    y_china_died = []         # æ¯æ—¥ç´¯è®¡æ­»äº¡    for china_confirmed in ws_china_confirmed.values:        y_china_confirmed.append(china_confirmed[1])    for china_crued in ws_china_crued.values:        x_date.append(china_crued[0])        y_china_crued.append(china_crued[1])    for china_died in ws_china_died.values:        y_china_died.append(china_died[1])    fi_map = (        Line(init_opts=opts.InitOpts(height=&#39;420px&#39;))            .add_xaxis(xaxis_data=x_date)            .add_yaxis(            series_name=&quot;ä¸­å›½ç´¯è®¡ç¡®è¯Šæ•°æ®&quot;,            y_axis=y_china_confirmed,            label_opts=opts.LabelOpts(is_show=False),        )            .add_yaxis(            series_name=&quot;ä¸­å›½ç´¯è®¡æ²»æ„ˆè¶‹åŠ¿&quot;,            y_axis=y_china_crued,            label_opts=opts.LabelOpts(is_show=False),        )            .add_yaxis(            series_name=&quot;ä¸­å›½ç´¯è®¡æ­»äº¡è¶‹åŠ¿&quot;,            y_axis=y_china_died,            label_opts=opts.LabelOpts(is_show=False),        )            .set_global_opts(            title_opts=opts.TitleOpts(title=&quot;ä¸­å›½æ¯æ—¥ç´¯è®¡ç¡®è¯Š/æ²»æ„ˆ/æ­»äº¡è¶‹åŠ¿&quot;),            legend_opts=opts.LegendOpts(pos_bottom=&quot;bottom&quot;, orient=&#39;horizontal&#39;),            tooltip_opts=opts.TooltipOpts(trigger=&quot;axis&quot;),            yaxis_opts=opts.AxisOpts(                type_=&quot;value&quot;,                axistick_opts=opts.AxisTickOpts(is_show=True),                splitline_opts=opts.SplitLineOpts(is_show=True),            ),            xaxis_opts=opts.AxisOpts(type_=&quot;category&quot;, boundary_gap=False),        )    )    return fi_map</code></pre><h3 id="ã€7x04ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾-foreign-daily-map"><a href="#ã€7x04ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾-foreign-daily-map" class="headerlink" title="ã€7x04ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾ foreign_daily_map()"></a><font color="#4876FF">ã€7x04ã€‘å¢ƒå¤–æ¯æ—¥æ•°æ®æŠ˜çº¿å›¾ foreign_daily_map()</font></h3><pre><code class="python">def foreign_daily_map():    wb = openpyxl.load_workbook(&#39;COVID-19-Global.xlsx&#39;)    ws_foreign_confirmed = wb[&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡ç¡®è¯Šæ•°æ®&#39;]    ws_foreign_crued = wb[&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡æ²»æ„ˆæ•°æ®&#39;]    ws_foreign_died = wb[&#39;å¢ƒå¤–æ¯æ—¥ç´¯è®¡æ­»äº¡æ•°æ®&#39;]    ws_foreign_confirmed.delete_rows(1)    ws_foreign_crued.delete_rows(1)    ws_foreign_died.delete_rows(1)    x_date = []                # æ—¥æœŸ    y_foreign_confirmed = []   # ç´¯è®¡ç¡®è¯Š    y_foreign_crued = []       # ç´¯è®¡æ²»æ„ˆ    y_foreign_died = []        # ç´¯è®¡æ­»äº¡    for foreign_confirmed in ws_foreign_confirmed.values:        y_foreign_confirmed.append(foreign_confirmed[1])    for foreign_crued in ws_foreign_crued.values:        x_date.append(foreign_crued[0])        y_foreign_crued.append(foreign_crued[1])    for foreign_died in ws_foreign_died.values:        y_foreign_died.append(foreign_died[1])    fte_map = (        Line(init_opts=opts.InitOpts(height=&#39;420px&#39;))            .add_xaxis(xaxis_data=x_date)            .add_yaxis(            series_name=&quot;å¢ƒå¤–ç´¯è®¡ç¡®è¯Šè¶‹åŠ¿&quot;,            y_axis=y_foreign_confirmed,            label_opts=opts.LabelOpts(is_show=False),        )            .add_yaxis(            series_name=&quot;å¢ƒå¤–ç´¯è®¡æ²»æ„ˆè¶‹åŠ¿&quot;,            y_axis=y_foreign_crued,            label_opts=opts.LabelOpts(is_show=False),        )            .add_yaxis(            series_name=&quot;å¢ƒå¤–ç´¯è®¡æ­»äº¡è¶‹åŠ¿&quot;,            y_axis=y_foreign_died,            label_opts=opts.LabelOpts(is_show=False),        )            .set_global_opts(            title_opts=opts.TitleOpts(title=&quot;å¢ƒå¤–æ¯æ—¥ç´¯è®¡ç¡®è¯Š/æ²»æ„ˆ/æ­»äº¡è¶‹åŠ¿&quot;),            legend_opts=opts.LegendOpts(pos_bottom=&quot;bottom&quot;, orient=&#39;horizontal&#39;),            tooltip_opts=opts.TooltipOpts(trigger=&quot;axis&quot;),            yaxis_opts=opts.AxisOpts(                type_=&quot;value&quot;,                axistick_opts=opts.AxisTickOpts(is_show=True),                splitline_opts=opts.SplitLineOpts(is_show=True),            ),            xaxis_opts=opts.AxisOpts(type_=&quot;category&quot;, boundary_gap=False),        )    )    return fte_map</code></pre><h2 id="ã€8x00ã€‘ç»“æœæˆªå›¾"><a href="#ã€8x00ã€‘ç»“æœæˆªå›¾" class="headerlink" title="ã€8x00ã€‘ç»“æœæˆªå›¾"></a><font color=#FF0000>ã€8x00ã€‘ç»“æœæˆªå›¾</font></h2><h3 id="ã€8x01ã€‘æ•°æ®å‚¨å­˜-Excel"><a href="#ã€8x01ã€‘æ•°æ®å‚¨å­˜-Excel" class="headerlink" title="ã€8x01ã€‘æ•°æ®å‚¨å­˜ Excel"></a><font color="#4876FF">ã€8x01ã€‘æ•°æ®å‚¨å­˜ Excel</font></h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/03.png" alt="03"></p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/04.png" alt="04"></p><h3 id="ã€8x02ã€‘è¯äº‘å›¾"><a href="#ã€8x02ã€‘è¯äº‘å›¾" class="headerlink" title="ã€8x02ã€‘è¯äº‘å›¾"></a><font color="#4876FF">ã€8x02ã€‘è¯äº‘å›¾</font></h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/05.png" alt="05"></p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/06.png" alt="06"></p><h3 id="ã€8x03ã€‘åœ°å›¾-æŠ˜çº¿å›¾"><a href="#ã€8x03ã€‘åœ°å›¾-æŠ˜çº¿å›¾" class="headerlink" title="ã€8x03ã€‘åœ°å›¾ + æŠ˜çº¿å›¾"></a><font color="#4876FF">ã€8x03ã€‘åœ°å›¾ + æŠ˜çº¿å›¾</font></h3><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A89/07.png" alt="07"></p><h2 id="ã€9x00ã€‘å®Œæ•´ä»£ç "><a href="#ã€9x00ã€‘å®Œæ•´ä»£ç " class="headerlink" title="ã€9x00ã€‘å®Œæ•´ä»£ç "></a><font color=#FF0000>ã€9x00ã€‘å®Œæ•´ä»£ç </font></h2><p>é¢„è§ˆåœ°å€ï¼š<del><a href="http://cov.itrhx.com/">http://cov.itrhx.com/</a></del>ï¼ˆå·²å¤±æ•ˆï¼‰<br>å®Œæ•´ä»£ç åœ°å€ï¼ˆç‚¹äº® star æœ‰ buff åŠ æˆï¼‰ï¼š<a href="https://github.com/TRHX/Python3-Spider-Practice">https://github.com/TRHX/Python3-Spider-Practice</a><br>çˆ¬è™«å®æˆ˜ä¸“æ ï¼ˆæŒç»­æ›´æ–°ï¼‰ï¼š<a href="https://itrhx.blog.csdn.net/article/category/9351278">https://itrhx.blog.csdn.net/article/category/9351278</a></p><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/107140534æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚
æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚
åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/
æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/d</summary>
      
    
    
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/categories/%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="çˆ¬è™«" scheme="https://www.itbob.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="è‚ºç‚ç–«æƒ…" scheme="https://www.itbob.cn/tags/%E8%82%BA%E7%82%8E%E7%96%AB%E6%83%85/"/>
    
    <category term="COVID-19" scheme="https://www.itbob.cn/tags/COVID-19/"/>
    
    <category term="æ•°æ®å¯è§†åŒ–" scheme="https://www.itbob.cn/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆåï¼‰ï¼šæ•°æ®è¯»å†™</title>
    <link href="https://www.itbob.cn/article/034/"/>
    <id>https://www.itbob.cn/article/034/</id>
    <published>2020-06-26T14:54:56.000Z</published>
    <updated>2022-05-22T12:45:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Pandas ç³»åˆ—æ–‡ç« ï¼š</p><ul><li><a href="https://www.itbob.cn/article/025/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸€ï¼‰ï¼šè®¤è¯† Pandas åŠå…¶ Seriesã€DataFrame å¯¹è±¡</a></li><li><a href="https://www.itbob.cn/article/026/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆäºŒï¼‰ï¼šIndex ç´¢å¼•å¯¹è±¡ä»¥åŠå„ç§ç´¢å¼•æ“ä½œ</a></li><li><a href="https://www.itbob.cn/article/027/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸‰ï¼‰ï¼šç®—æœ¯è¿ç®—ä¸ç¼ºå¤±å€¼çš„å¤„ç†</a></li><li><a href="https://www.itbob.cn/article/028/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆå››ï¼‰ï¼šå‡½æ•°åº”ç”¨ã€æ˜ å°„ã€æ’åºå’Œå±‚çº§ç´¢å¼•</a></li><li><a href="https://www.itbob.cn/article/029/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆäº”ï¼‰ï¼šç»Ÿè®¡è®¡ç®—ä¸ç»Ÿè®¡æè¿°</a></li><li><a href="https://www.itbob.cn/article/030/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆå…­ï¼‰ï¼šGroupBy æ•°æ®åˆ†è£‚ã€åº”ç”¨ä¸åˆå¹¶</a></li><li><a href="https://www.itbob.cn/article/031/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸ƒï¼‰ï¼šåˆå¹¶æ•°æ®é›†</a></li><li><a href="https://www.itbob.cn/article/032/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆå…«ï¼‰ï¼šæ•°æ®é‡å¡‘ã€é‡å¤æ•°æ®å¤„ç†ä¸æ•°æ®æ›¿æ¢</a></li><li><a href="https://www.itbob.cn/article/033/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¹ï¼‰ï¼šæ—¶é—´åºåˆ—</a></li><li><a href="https://www.itbob.cn/article/034/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆåï¼‰ï¼šæ•°æ®è¯»å†™</a></li></ul><hr><p>ä¸“æ ï¼š</p><ul><li>NumPy ä¸“æ ï¼š<a href="https://itrhx.blog.csdn.net/category_9780393.html">https://itrhx.blog.csdn.net/category_9780393.html</a></li><li>Pandas ä¸“æ ï¼š<a href="https://itrhx.blog.csdn.net/category_9780397.html">https://itrhx.blog.csdn.net/category_9780397.html</a></li><li>Matplotlib ä¸“æ ï¼š<a href="https://itrhx.blog.csdn.net/category_9780418.html">https://itrhx.blog.csdn.net/category_9780418.html</a></li></ul><p>æ¨èå­¦ä¹ èµ„æ–™ä¸ç½‘ç«™ï¼š</p><ul><li>NumPy å®˜æ–¹ä¸­æ–‡ç½‘ï¼š<a href="https://www.numpy.org.cn/">https://www.numpy.org.cn/</a></li><li>Pandas å®˜æ–¹ä¸­æ–‡ç½‘ï¼š<a href="https://www.pypandas.cn/">https://www.pypandas.cn/</a></li><li>Matplotlib å®˜æ–¹ä¸­æ–‡ç½‘ï¼š<a href="https://www.matplotlib.org.cn/">https://www.matplotlib.org.cn/</a></li><li>NumPyã€Matplotlibã€Pandas é€ŸæŸ¥è¡¨ï¼š<a href="https://github.com/TRHX/Python-quick-reference-table">https://github.com/TRHX/Python-quick-reference-table</a></li></ul><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/106963135æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="ã€01x00ã€‘è¯»å–æ•°æ®"><a href="#ã€01x00ã€‘è¯»å–æ•°æ®" class="headerlink" title="ã€01x00ã€‘è¯»å–æ•°æ®"></a><font color=#FF0000>ã€01x00ã€‘è¯»å–æ•°æ®</font></h2><p>Pandas æä¾›äº†ä¸€äº›ç”¨äºå°†è¡¨æ ¼å‹æ•°æ®è¯»å–ä¸º DataFrame å¯¹è±¡çš„å‡½æ•°ã€‚å¸¸è§æ–¹æ³•å¦‚ä¸‹ï¼š</p><p>Pandas å®˜æ–¹å¯¹ IO å·¥å…·çš„ä»‹ç»ï¼š<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html">https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html</a></p><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>read_csv</td><td>ä»æ–‡ä»¶ã€URLã€æ–‡ä»¶å‹å¯¹è±¡ä¸­åŠ è½½å¸¦åˆ†éš”ç¬¦çš„æ•°æ®ã€‚é»˜è®¤åˆ†éš”ç¬¦ä¸ºé€—å·</td></tr><tr><td>read_table</td><td>ä»æ–‡ä»¶ã€URLã€æ–‡ä»¶å‹å¯¹è±¡ä¸­åŠ è½½å¸¦åˆ†éš”ç¬¦çš„æ•°æ®ã€‚é»˜è®¤åˆ†éš”ç¬¦ä¸ºåˆ¶è¡¨ç¬¦ï¼ˆ<code>&#39;\t&#39;</code>ï¼‰</td></tr><tr><td>read_fwf</td><td>è¯»å–å®šå®½åˆ—æ ¼å¼æ•°æ®ï¼ˆæ²¡æœ‰åˆ†éš”ç¬¦ï¼‰</td></tr><tr><td>read_clipboard</td><td>è¯»å–å‰ªè´´æ¿ä¸­çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åš read_table çš„å‰ªè´´æ¿ç‰ˆæœ¬ã€‚åœ¨å°†ç½‘é¡µè½¬æ¢ä¸ºè¡¨æ ¼æ—¶å¾ˆæœ‰ç”¨</td></tr><tr><td>read_excel</td><td>ä» Excel XLS æˆ– XLSX file è¯»å–è¡¨æ ¼æ•°æ®</td></tr><tr><td>read_hdf</td><td>è¯»å– pandaså†™çš„ HDF5 æ–‡ä»¶</td></tr><tr><td>read_html</td><td>è¯»å– HTML æ–‡æ¡£ä¸­çš„æ‰€æœ‰è¡¨æ ¼</td></tr><tr><td>read_json</td><td>è¯»å– JSONï¼ˆ JavaScript Object Notationï¼‰å­—ç¬¦ä¸²ä¸­çš„æ•°æ®</td></tr><tr><td>read_msgpack</td><td>è¯»å–äºŒè¿›åˆ¶æ ¼å¼ç¼–ç çš„ pandas æ•°æ®ï¼ˆPandas v1.0.0 ä¸­å·²åˆ é™¤å¯¹ msgpack çš„æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨ <a href="https://pandas.pydata.org/docs/user_guide/io.html#io-msgpack">pyarrow</a>ï¼‰</td></tr><tr><td>read_pickle</td><td>è¯»å– Python pickle æ ¼å¼ä¸­å­˜å‚¨çš„ä»»æ„å¯¹è±¡</td></tr><tr><td>read_sas</td><td>è¯»å–å­˜å‚¨äº SAS ç³»ç»Ÿè‡ªå®šä¹‰å­˜å‚¨æ ¼å¼çš„ SAS æ•°æ®é›†</td></tr><tr><td>read_sql</td><td>ï¼ˆä½¿ç”¨ SQLAlchemyï¼‰è¯»å– SQL æŸ¥è¯¢ç»“æœä¸º pandas çš„ DataFrame</td></tr><tr><td>read_stata</td><td>è¯»å– Stata æ–‡ä»¶æ ¼å¼çš„æ•°æ®é›†</td></tr><tr><td>read_feather</td><td>è¯»å– Feather äºŒè¿›åˆ¶æ ¼å¼æ–‡ä»¶</td></tr></tbody></table><p>ä»¥ä¸‹ä»¥ read_csv å’Œ read_table ä¸ºä¾‹ï¼Œå®ƒä»¬çš„å‚æ•°å¤šè¾¾ 50 å¤šä¸ªï¼Œå…·ä½“å¯å‚è§å®˜æ–¹æ–‡æ¡£ï¼š</p><p>read_csvï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html">https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html</a></p><p>read_tableï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.read_table.html">https://pandas.pydata.org/docs/reference/api/pandas.read_table.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>path</td><td>è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿä½ç½®ã€URLã€æ–‡ä»¶å‹å¯¹è±¡çš„å­—ç¬¦ä¸²</td></tr><tr><td>sep / delimiter</td><td>ç”¨äºå¯¹è¡Œä¸­å„å­—æ®µè¿›è¡Œæ‹†åˆ†çš„å­—ç¬¦åºåˆ—æˆ–æ­£åˆ™è¡¨è¾¾å¼</td></tr><tr><td>header</td><td>ç”¨ä½œåˆ—åçš„è¡Œå·ï¼Œé»˜è®¤ä¸º 0ï¼ˆç¬¬ä¸€è¡Œï¼‰ï¼Œå¦‚æœæ²¡æœ‰ header è¡Œå°±åº”è¯¥è®¾ç½®ä¸º None</td></tr><tr><td>index_col</td><td>ç”¨ä½œè¡Œç´¢å¼•çš„åˆ—ç¼–å·æˆ–åˆ—åã€‚å¯ä»¥æ˜¯å•ä¸ªåç§°ã€æ•°å­—æˆ–ç”±å¤šä¸ªåç§°ã€æ•°å­—ç»„æˆçš„åˆ—è¡¨ï¼ˆå±‚æ¬¡åŒ–ç´¢å¼•ï¼‰</td></tr><tr><td>names</td><td>ç”¨äºç»“æœçš„åˆ—ååˆ—è¡¨ï¼Œç»“åˆ header=None</td></tr><tr><td>skiprows</td><td>éœ€è¦å¿½ç•¥çš„è¡Œæ•°ï¼ˆä»æ–‡ä»¶å¼€å§‹å¤„ç®—èµ·ï¼‰ï¼Œæˆ–éœ€è¦è·³è¿‡çš„è¡Œå·åˆ—è¡¨ï¼ˆä»0å¼€å§‹ï¼‰</td></tr><tr><td>na_values</td><td>æŒ‡å®šä¸€ç»„å€¼ï¼Œå°†è¯¥ç»„å€¼è®¾ç½®ä¸º NaNï¼ˆç¼ºå¤±å€¼ï¼‰</td></tr><tr><td>comment</td><td>ç”¨äºå°†æ³¨é‡Šä¿¡æ¯ä»è¡Œå°¾æ‹†åˆ†å‡ºå»çš„å­—ç¬¦ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰</td></tr><tr><td>parse_dates</td><td>å°è¯•å°†æ•°æ®è§£æä¸ºæ—¥æœŸï¼Œé»˜è®¤ä¸º Falseã€‚å¦‚æœä¸º Trueï¼Œåˆ™å°è¯•è§£ææ‰€æœ‰åˆ—ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šéœ€è¦è§£æçš„ä¸€ç»„åˆ—å·æˆ–åˆ—åã€‚<br>å¦‚æœåˆ—è¡¨çš„å…ƒç´ ä¸ºåˆ—è¡¨æˆ–å…ƒç»„ï¼Œå°±ä¼šå°†å¤šä¸ªåˆ—ç»„åˆåˆ°ä¸€èµ·å†è¿›è¡Œæ—¥æœŸè§£æå·¥ä½œï¼ˆä¾‹å¦‚ï¼Œæ—¥æœŸã€æ—¶é—´åˆ†åˆ«ä½äºä¸¤ä¸ªåˆ—ä¸­ï¼‰</td></tr><tr><td>keep_date_col</td><td>å¦‚æœè¿æ¥å¤šåˆ—è§£ææ—¥æœŸï¼Œåˆ™ä¿æŒå‚ä¸è¿æ¥çš„åˆ—ã€‚é»˜è®¤ä¸º False</td></tr><tr><td>converters</td><td>ç”±åˆ—å· / åˆ—åè·Ÿå‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»ç»„æˆçš„å­—å…¸ã€‚ä¾‹å¦‚ï¼Œ<code>&#123;&#39;foo&#39;: f&#125;</code> ä¼šå¯¹ foo åˆ—çš„æ‰€æœ‰å€¼åº”ç”¨å‡½æ•° f</td></tr><tr><td>dayfirst</td><td>å½“è§£ææœ‰æ­§ä¹‰çš„æ—¥æœŸæ—¶ï¼Œå°†å…¶çœ‹åšå›½é™…æ ¼å¼ï¼ˆä¾‹å¦‚ï¼Œ7/6/2012 â€”&gt; June 7,2012ï¼‰ï¼Œé»˜è®¤ä¸º Fase</td></tr><tr><td>date_parser</td><td>ç”¨äºè§£ææ—¥æœŸçš„å‡½æ•°</td></tr><tr><td>nrows</td><td>éœ€è¦è¯»å–çš„è¡Œæ•°ï¼ˆä»æ–‡ä»¶å¼€å§‹å¤„ç®—èµ·ï¼‰</td></tr><tr><td>iterator</td><td>è¿”å›ä¸€ä¸ª TextParser ä»¥ä¾¿é€å—è¯»å–æ–‡ä»¶</td></tr><tr><td>chunksize</td><td>æ–‡ä»¶å—çš„å¤§å°ï¼ˆç”¨äºè¿­ä»£ï¼‰</td></tr><tr><td>skip_footer</td><td>éœ€è¦å¿½ç•¥çš„è¡Œæ•°ï¼ˆä»æ–‡ä»¶æœ«å°¾å¤„ç®—èµ·ï¼‰</td></tr><tr><td>verbose</td><td>æ‰“å°å„ç§è§£æå™¨è¾“å‡ºä¿¡æ¯ï¼Œæ¯”å¦‚â€œéæ•°å€¼åˆ—ä¸­ç¼ºå¤±å€¼çš„æ•°é‡â€ç­‰</td></tr><tr><td>encoding</td><td>ç”¨äº unicode çš„æ–‡æœ¬ç¼–ç æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œâ€œutf-8â€ è¡¨ç¤ºç”¨ UTF-8 ç¼–ç çš„æ–‡æœ¬</td></tr><tr><td>squeeze</td><td>å¦‚æœæ•°æ®ç»è§£æåä»…å«ä¸€åˆ—ï¼Œåˆ™è¿”å› Series</td></tr><tr><td>thousands</td><td>åƒåˆ†ä½åˆ†éš”ç¬¦ï¼Œå¦‚ <code>,</code> æˆ– <code>.</code></td></tr></tbody></table><h3 id="ã€01x01ã€‘ç®€å•ç¤ºä¾‹"><a href="#ã€01x01ã€‘ç®€å•ç¤ºä¾‹" class="headerlink" title="ã€01x01ã€‘ç®€å•ç¤ºä¾‹"></a><font color=#4876FF>ã€01x01ã€‘ç®€å•ç¤ºä¾‹</font></h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª test1.csv æ–‡ä»¶ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/01.png" alt="01"></p><p>ä½¿ç”¨ read_csv æ–¹æ³•å°†å…¶è¯»å‡ºä¸ºä¸€ä¸ª DataFrame å¯¹è±¡ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test1.csv&#39;)&gt;&gt;&gt; obj   a   b   c   d message0  1   2   3   4   hello1  5   6   7   8   world2  9  10  11  12  python&gt;&gt;&gt; &gt;&gt;&gt; type(obj)&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</code></pre><p>å‰é¢çš„ csv æ–‡ä»¶æ˜¯ä»¥é€—å·åˆ†éš”çš„ï¼Œå¯ä»¥ä½¿ç”¨ read_table æ–¹æ³•å¹¶æŒ‡å®šåˆ†éš”ç¬¦æ¥è¯»å–ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.read_table(r&#39;C:\Users\TanRe\Desktop\test1.csv&#39;, sep=&#39;,&#39;)&gt;&gt;&gt; obj   a   b   c   d message0  1   2   3   4   hello1  5   6   7   8   world2  9  10  11  12  python</code></pre><h3 id="ã€01x02ã€‘header-names-å®šåˆ¶åˆ—æ ‡ç­¾"><a href="#ã€01x02ã€‘header-names-å®šåˆ¶åˆ—æ ‡ç­¾" class="headerlink" title="ã€01x02ã€‘header / names å®šåˆ¶åˆ—æ ‡ç­¾"></a><font color=#4876FF>ã€01x02ã€‘header / names å®šåˆ¶åˆ—æ ‡ç­¾</font></h3><p>ä»¥ä¸Šç¤ºä¾‹ä¸­ç¬¬ä¸€è¡Œä¸ºåˆ—æ ‡ç­¾ï¼Œå¦‚æœæ²¡æœ‰å•ç‹¬å®šä¹‰åˆ—æ ‡ç­¾ï¼Œä½¿ç”¨ read_csv æ–¹æ³•ä¹Ÿä¼šé»˜è®¤å°†ç¬¬ä¸€è¡Œå½“ä½œåˆ—æ ‡ç­¾ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/02.png" alt="02"></p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test2.csv&#39;)&gt;&gt;&gt; obj   1   2   3   4   hello0  5   6   7   8   world1  9  10  11  12  python</code></pre><p>é¿å…ä»¥ä¸Šæƒ…å†µï¼Œå¯ä»¥è®¾ç½® <code>header=None</code>ï¼ŒPandas ä¼šä¸ºå…¶è‡ªåŠ¨åˆ†é…åˆ—æ ‡ç­¾ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test2.csv&#39;, header=None)   0   1   2   3       40  1   2   3   4   hello1  5   6   7   8   world2  9  10  11  12  python</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>names</code> å‚æ•°è‡ªå®šä¹‰åˆ—æ ‡ç­¾ï¼Œä¼ é€’çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test2.csv&#39;, names=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;message&#39;])   a   b   c   d message0  1   2   3   4   hello1  5   6   7   8   world2  9  10  11  12  python</code></pre><h3 id="ã€01x03ã€‘index-col-æŒ‡å®šåˆ—ä¸ºè¡Œç´¢å¼•"><a href="#ã€01x03ã€‘index-col-æŒ‡å®šåˆ—ä¸ºè¡Œç´¢å¼•" class="headerlink" title="ã€01x03ã€‘index_col æŒ‡å®šåˆ—ä¸ºè¡Œç´¢å¼•"></a><font color=#4876FF>ã€01x03ã€‘index_col æŒ‡å®šåˆ—ä¸ºè¡Œç´¢å¼•</font></h3><p><code>index_col</code> å‚æ•°å¯ä»¥æŒ‡å®šæŸä¸€åˆ—ä½œä¸º DataFrame çš„è¡Œç´¢å¼•ï¼Œä¼ é€’çš„å‚æ•°æ˜¯åˆ—åç§°ï¼Œåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä¼šå°†åˆ—åä¸º <code>message</code> çš„åˆ—ä½œä¸º DataFrame çš„è¡Œç´¢å¼•ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/03.png" alt="03"></p><pre><code class="python">&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test2.csv&#39;,                 names=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;message&#39;],                 index_col=&#39;message&#39;)         a   b   c   dmessage               hello    1   2   3   4world    5   6   7   8python   9  10  11  12</code></pre><p>å¦‚æœéœ€è¦æ„é€ å¤šå±‚ç´¢å¼•çš„ DataFrame å¯¹è±¡ï¼Œåˆ™åªéœ€ä¼ å…¥ç”±åˆ—ç¼–å·æˆ–åˆ—åç»„æˆçš„åˆ—è¡¨å³å¯ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/04.png" alt="04"></p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test3.csv&#39;, index_col=[&#39;key1&#39;, &#39;key2&#39;])           value1  value2key1 key2                one  a          1       2     b          3       4     c          5       6     d          7       8two  a          9      10     b         11      12     c         13      14     d         15      16</code></pre><h3 id="ã€01x04ã€‘sep-æŒ‡å®šåˆ†éš”ç¬¦"><a href="#ã€01x04ã€‘sep-æŒ‡å®šåˆ†éš”ç¬¦" class="headerlink" title="ã€01x04ã€‘sep æŒ‡å®šåˆ†éš”ç¬¦"></a><font color=#4876FF>ã€01x04ã€‘sep æŒ‡å®šåˆ†éš”ç¬¦</font></h3><p>åœ¨ read_table ä¸­ï¼Œsep å‚æ•°ç”¨äºæ¥æ”¶åˆ†éš”ç¬¦ï¼Œå¦‚æœé‡åˆ°ä¸æ˜¯ç”¨å›ºå®šçš„åˆ†éš”ç¬¦å»åˆ†éš”å­—æ®µçš„ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½œä¸º read_table çš„åˆ†éš”ç¬¦ï¼Œå¦‚ä¸‹é¢çš„ txt æ–‡ä»¶æ•°æ®ä¹‹é—´æ˜¯ç”±ä¸åŒçš„ç©ºç™½å­—ç¬¦é—´éš”å¼€çš„ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/05.png" alt="05"></p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.read_table(r&#39;C:\Users\TanRe\Desktop\test1.txt&#39;, sep=&#39;\s+&#39;)            A         B         Caaa -0.264438 -1.026059 -0.619500bbb  0.927272  0.302904 -0.032399ccc -0.264273 -0.386314 -0.217601ddd -0.871858 -0.348382  1.100491</code></pre><h3 id="ã€01x05ã€‘skiprows-å¿½ç•¥è¡Œ"><a href="#ã€01x05ã€‘skiprows-å¿½ç•¥è¡Œ" class="headerlink" title="ã€01x05ã€‘skiprows å¿½ç•¥è¡Œ"></a><font color=#4876FF>ã€01x05ã€‘skiprows å¿½ç•¥è¡Œ</font></h3><p>skiprows    å‚æ•°å¯ç”¨äºè®¾ç½®éœ€è¦å¿½ç•¥çš„è¡Œæ•°ï¼Œæˆ–éœ€è¦è·³è¿‡çš„è¡Œå·åˆ—è¡¨ï¼Œåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œè¯»å–æ–‡ä»¶æ—¶é€‰æ‹©è·³è¿‡ç¬¬1ã€3ã€4è¡Œï¼ˆç´¢å¼•å€¼åˆ†åˆ«ä¸º0ã€2ã€3ï¼‰ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/06.png" alt="06"></p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test4.csv&#39;, skiprows=[0, 2, 3])   a   b   c   d message0  1   2   3   4   hello1  5   6   7   8   world2  9  10  11  12  python</code></pre><h3 id="ã€01x06ã€‘na-values-è®¾ç½®ç¼ºå¤±å€¼"><a href="#ã€01x06ã€‘na-values-è®¾ç½®ç¼ºå¤±å€¼" class="headerlink" title="ã€01x06ã€‘na_values è®¾ç½®ç¼ºå¤±å€¼"></a><font color=#4876FF>ã€01x06ã€‘na_values è®¾ç½®ç¼ºå¤±å€¼</font></h3><p>å½“æ–‡ä»¶ä¸­å‡ºç°äº†ç©ºå­—ç¬¦ä¸²æˆ–è€… NA å€¼ï¼ŒPandas ä¼šå°†å…¶æ ‡è®°æˆ NaNï¼ˆç¼ºå¤±å€¼ï¼‰ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>isnull</code> æ–¹æ³•æ¥åˆ¤æ–­ç»“æœå€¼æ˜¯å¦ä¸ºç¼ºå¤±å€¼ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/07.png" alt="07"></p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; obj  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt; &gt;&gt;&gt; pd.isnull(obj)   something      a      b      c      d  message0      False  False  False  False  False     True1      False  False  False   True  False    False2      False  False  False  False  False    False</code></pre><p><code>na_values</code> æ–¹æ³•å¯ä»¥ä¼ é€’ä¸€ç»„å€¼ï¼Œå°†è¿™ç»„å€¼è®¾ç½®ä¸ºç¼ºå¤±å€¼ï¼Œå¦‚æœä¼ é€’çš„ä¸ºå­—å…¸å¯¹è±¡ï¼Œåˆ™å­—å…¸çš„å„å€¼å°†è¢«è®¾ç½®ä¸º NaNï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj1 = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; obj1  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt; &gt;&gt;&gt; obj2 = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;, na_values=[&#39;1&#39;, &#39;12&#39;])&gt;&gt;&gt; obj2  something    a   b     c    d message0       one  NaN   2   3.0  4.0     NaN1       two  5.0   6   NaN  8.0   world2     three  9.0  10  11.0  NaN  python&gt;&gt;&gt; &gt;&gt;&gt; sentinels = &#123;&#39;message&#39;: [&#39;python&#39;, &#39;world&#39;], &#39;something&#39;: [&#39;two&#39;]&#125;&gt;&gt;&gt; obj3 = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;, na_values=sentinels)&gt;&gt;&gt; obj3  something  a   b     c   d  message0       one  1   2   3.0   4      NaN1       NaN  5   6   NaN   8      NaN2     three  9  10  11.0  12      NaN</code></pre><h3 id="ã€01x07ã€‘nrows-chunksize-è¡Œä¸å—"><a href="#ã€01x07ã€‘nrows-chunksize-è¡Œä¸å—" class="headerlink" title="ã€01x07ã€‘nrows / chunksize è¡Œä¸å—"></a><font color=#4876FF>ã€01x07ã€‘nrows / chunksize è¡Œä¸å—</font></h3><p>ä»¥ä¸‹ test6.csv æ–‡ä»¶ä¸­åŒ…å« 50 è¡Œæ•°æ®ï¼š</p><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/08.png" alt="08"></p><p>å¯ä»¥è®¾ç½® <code>pd.options.display.max_rows</code> æ¥ç´§å‡‘åœ°æ˜¾ç¤ºæŒ‡å®šè¡Œæ•°çš„æ•°æ®ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.options.display.max_rows = 10&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test6.csv&#39;)         one       two     three      four key0   0.467976 -0.038649 -0.295344 -1.824726   L1  -0.358893  1.404453  0.704965 -0.200638   B2  -0.501840  0.659254 -0.421691 -0.057688   G3   0.204886  1.074134  1.388361 -0.982404   R4   0.354628 -0.133116  0.283763 -0.837063   Q..       ...       ...       ...       ...  ..45  2.311896 -0.417070 -1.409599 -0.515821   L46 -0.479893 -0.633419  0.745152 -0.646038   E47  0.523331  0.787112  0.486066  1.093156   K48 -0.362559  0.598894 -1.843201  0.887292   G49 -0.096376 -1.012999 -0.657431 -0.573315   0[50 rows x 5 columns]</code></pre><p>é€šè¿‡ nrows å‚æ•°å¯ä»¥è¯»å–æŒ‡å®šè¡Œæ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test6.csv&#39;, nrows=5)        one       two     three      four key0  0.467976 -0.038649 -0.295344 -1.824726   L1 -0.358893  1.404453  0.704965 -0.200638   B2 -0.501840  0.659254 -0.421691 -0.057688   G3  0.204886  1.074134  1.388361 -0.982404   R4  0.354628 -0.133116  0.283763 -0.837063   Q</code></pre><p>è¦é€å—è¯»å–æ–‡ä»¶ï¼Œå¯ä»¥æŒ‡å®š chunksizeï¼ˆè¡Œæ•°ï¼‰ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; chunker = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test6.csv&#39;, chunksize=50)&gt;&gt;&gt; chunker&lt;pandas.io.parsers.TextFileReader object at 0x07A20D60&gt;</code></pre><p>è¿”å›çš„ TextParser å¯¹è±¡ï¼Œå¯ä»¥æ ¹æ® chunksize å¯¹æ–‡ä»¶è¿›è¡Œé€å—è¿­ä»£ã€‚ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå¯¹ test6.csv æ–‡ä»¶æ•°æ®è¿›è¡Œè¿­ä»£å¤„ç†ï¼Œå°†å€¼è®¡æ•°èšåˆåˆ° â€œkeyâ€ åˆ—ä¸­ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; chunker = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test6.csv&#39;, chunksize=50)&gt;&gt;&gt; tot = pd.Series([], dtype=&#39;float64&#39;)&gt;&gt;&gt; for piece in chunker:    tot = tot.add(piece[&#39;key&#39;].value_counts(), fill_value=0)&gt;&gt;&gt; tot = tot.sort_values(ascending=False)&gt;&gt;&gt; tot[:10]G    6.0E    5.0B    5.0L    5.00    5.0K    4.0A    4.0R    4.0C    2.0Q    2.0dtype: float64</code></pre><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/106963135æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="ã€02x00ã€‘å†™å…¥æ•°æ®"><a href="#ã€02x00ã€‘å†™å…¥æ•°æ®" class="headerlink" title="ã€02x00ã€‘å†™å…¥æ•°æ®"></a><font color=#FF0000>ã€02x00ã€‘å†™å…¥æ•°æ®</font></h2><p>Pandas æä¾›äº†ä¸€äº›ç”¨äºå°†è¡¨æ ¼å‹æ•°æ®è¯»å–ä¸º DataFrame å¯¹è±¡çš„å‡½æ•°ã€‚å¸¸è§æ–¹æ³•å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>to_csv</td><td>å°†å¯¹è±¡å†™å…¥é€—å·åˆ†éš”å€¼ï¼ˆcsvï¼‰æ–‡ä»¶</td></tr><tr><td>to_clipboard</td><td>å°†å¯¹è±¡å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿</td></tr><tr><td>to_excel</td><td>å°†å¯¹è±¡å†™å…¥ Excel å·¥ä½œè¡¨</td></tr><tr><td>to_hdf</td><td>ä½¿ç”¨ HDFStore å°†åŒ…å«çš„æ•°æ®å†™å…¥ HDF5 æ–‡ä»¶</td></tr><tr><td>to_html</td><td>å°† DataFrame å‘ˆç°ä¸º HTML è¡¨æ ¼</td></tr><tr><td>to_json</td><td>å°†å¯¹è±¡è½¬æ¢ä¸º JSONï¼ˆ JavaScript Object Notationï¼‰å­—ç¬¦ä¸²</td></tr><tr><td>to_msgpack</td><td>å°†å¯¹è±¡å†™å…¥äºŒè¿›åˆ¶æ ¼å¼ç¼–ç çš„æ–‡ä»¶ï¼ˆPandas v1.0.0 ä¸­å·²åˆ é™¤å¯¹ msgpack çš„æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨ <a href="https://pandas.pydata.org/docs/user_guide/io.html#io-msgpack">pyarrow</a>ï¼‰</td></tr><tr><td>to_pickle</td><td>Pickleï¼ˆåºåˆ—åŒ–ï¼‰å¯¹è±¡åˆ°æ–‡ä»¶</td></tr><tr><td>to_sql</td><td>å°†å­˜å‚¨åœ¨ DataFrame ä¸­çš„æ•°æ®å†™å…¥ SQL æ•°æ®åº“</td></tr><tr><td>to_stata</td><td>å°† DataFrame å¯¹è±¡å¯¼å‡ºä¸º Stata æ ¼å¼</td></tr><tr><td>to_feather</td><td>å°† DataFrames å†™å…¥ Feather äºŒè¿›åˆ¶æ ¼å¼æ–‡ä»¶</td></tr></tbody></table><p>ä»¥ä¸‹ä»¥ to_csv ä¸ºä¾‹ï¼Œå®ƒçš„å‚æ•°åŒæ ·å¤šè¾¾ 50 å¤šä¸ªï¼Œå…·ä½“å¯å‚è§å®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><p><a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html">https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html</a></p></li><li><p><a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.to_csv.html">https://pandas.pydata.org/docs/reference/api/pandas.Series.to_csv.html</a></p></li></ul><h3 id="ã€02x01ã€‘ç®€å•ç¤ºä¾‹"><a href="#ã€02x01ã€‘ç®€å•ç¤ºä¾‹" class="headerlink" title="ã€02x01ã€‘ç®€å•ç¤ºä¾‹"></a><font color=#4876FF>ã€02x01ã€‘ç®€å•ç¤ºä¾‹</font></h3><p>ä»¥ä¹‹å‰çš„ test5.csv æ–‡ä»¶ä¸ºä¾‹ï¼Œå…ˆè¯»å‡ºæ•°æ®ï¼Œå†å°†æ•°æ®å†™å…¥å¦å¤–çš„æ–‡ä»¶ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; data = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; data  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt; &gt;&gt;&gt; data.to_csv(r&#39;C:\Users\TanRe\Desktop\out1.csv&#39;)</code></pre><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/09.png" alt="09"></p><h3 id="ã€02x02ã€‘sep-æŒ‡å®šåˆ†éš”ç¬¦"><a href="#ã€02x02ã€‘sep-æŒ‡å®šåˆ†éš”ç¬¦" class="headerlink" title="ã€02x02ã€‘sep æŒ‡å®šåˆ†éš”ç¬¦"></a><font color=#4876FF>ã€02x02ã€‘sep æŒ‡å®šåˆ†éš”ç¬¦</font></h3><p>sep å‚æ•°å¯ç”¨äºå…¶ä»–åˆ†éš”ç¬¦ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; data = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; data  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt;&gt;&gt;&gt; data.to_csv(r&#39;C:\Users\TanRe\Desktop\out2.csv&#39;, sep=&#39;|&#39;)</code></pre><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/10.png" alt="10"></p><h3 id="ã€02x03ã€‘na-rep-æ›¿æ¢ç¼ºå¤±å€¼"><a href="#ã€02x03ã€‘na-rep-æ›¿æ¢ç¼ºå¤±å€¼" class="headerlink" title="ã€02x03ã€‘na_rep æ›¿æ¢ç¼ºå¤±å€¼"></a><font color=#4876FF>ã€02x03ã€‘na_rep æ›¿æ¢ç¼ºå¤±å€¼</font></h3><p>na_rep å‚æ•°å¯å°†ç¼ºå¤±å€¼ï¼ˆNaNï¼‰æ›¿æ¢æˆå…¶ä»–å­—ç¬¦ä¸²ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; data = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; data  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt; &gt;&gt;&gt; data.to_csv(r&#39;C:\Users\TanRe\Desktop\out3.csv&#39;, na_rep=&#39;X&#39;)</code></pre><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/11.png" alt="11"></p><h3 id="ã€02x04ã€‘index-header-è¡Œä¸åˆ—æ ‡ç­¾"><a href="#ã€02x04ã€‘index-header-è¡Œä¸åˆ—æ ‡ç­¾" class="headerlink" title="ã€02x04ã€‘index / header è¡Œä¸åˆ—æ ‡ç­¾"></a><font color=#4876FF>ã€02x04ã€‘index / header è¡Œä¸åˆ—æ ‡ç­¾</font></h3><p>è®¾ç½® <code>index=False</code>, <code>header=False</code>ï¼Œå¯ä»¥ç¦ç”¨è¡Œæ ‡ç­¾ä¸åˆ—æ ‡ç­¾ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; data = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; data  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt; &gt;&gt;&gt; data.to_csv(r&#39;C:\Users\TanRe\Desktop\out4.csv&#39;, index=False, header=False)</code></pre><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/12.png" alt="12"></p><p>è¿˜å¯ä»¥ä¼ å…¥åˆ—è¡¨æ¥é‡æ–°è®¾ç½®åˆ—æ ‡ç­¾ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; data = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; data  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt; &gt;&gt;&gt; data.to_csv(r&#39;C:\Users\TanRe\Desktop\out5.csv&#39;, header=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;])</code></pre><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/13.png" alt="13"></p><h3 id="ã€02x05ã€‘columns-æŒ‡å®šåˆ—"><a href="#ã€02x05ã€‘columns-æŒ‡å®šåˆ—" class="headerlink" title="ã€02x05ã€‘columns æŒ‡å®šåˆ—"></a><font color=#4876FF>ã€02x05ã€‘columns æŒ‡å®šåˆ—</font></h3><p>å¯ä»¥é€šè¿‡è®¾ç½® columns å‚æ•°ï¼Œåªå†™å…¥éƒ¨åˆ†åˆ—ï¼Œå¹¶æŒ‰ç…§æŒ‡å®šé¡ºåºæ’åºï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; data = pd.read_csv(r&#39;C:\Users\TanRe\Desktop\test5.csv&#39;)&gt;&gt;&gt; data  something  a   b     c   d message0       one  1   2   3.0   4     NaN1       two  5   6   NaN   8   world2     three  9  10  11.0  12  python&gt;&gt;&gt;&gt;&gt;&gt; data.to_csv(r&#39;C:\Users\TanRe\Desktop\out6.csv&#39;, columns=[&#39;c&#39;, &#39;b&#39;, &#39;a&#39;])</code></pre><p><img src="https://fastly.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A88/14.png" alt="14"></p><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/106963135æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Pandas ç³»åˆ—æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.itbob.cn/article/025/&quot;&gt;Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸€ï¼‰ï¼šè®¤è¯† Pandas åŠå…¶ Seriesã€DataFrame å¯¹è±¡&lt;/a&gt;&lt;/li&gt;</summary>
      
    
    
    
    <category term="æ•°æ®åˆ†æ" scheme="https://www.itbob.cn/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="æ•°æ®åˆ†æ" scheme="https://www.itbob.cn/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    <category term="Pandas" scheme="https://www.itbob.cn/tags/Pandas/"/>
    
  </entry>
  
  <entry>
    <title>Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¹ï¼‰ï¼šæ—¶é—´åºåˆ—</title>
    <link href="https://www.itbob.cn/article/033/"/>
    <id>https://www.itbob.cn/article/033/</id>
    <published>2020-06-25T13:55:49.000Z</published>
    <updated>2022-05-22T12:44:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Pandas ç³»åˆ—æ–‡ç« ï¼š</p><ul><li><a href="https://www.itbob.cn/article/025/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸€ï¼‰ï¼šè®¤è¯† Pandas åŠå…¶ Seriesã€DataFrame å¯¹è±¡</a></li><li><a href="https://www.itbob.cn/article/026/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆäºŒï¼‰ï¼šIndex ç´¢å¼•å¯¹è±¡ä»¥åŠå„ç§ç´¢å¼•æ“ä½œ</a></li><li><a href="https://www.itbob.cn/article/027/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸‰ï¼‰ï¼šç®—æœ¯è¿ç®—ä¸ç¼ºå¤±å€¼çš„å¤„ç†</a></li><li><a href="https://www.itbob.cn/article/028/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆå››ï¼‰ï¼šå‡½æ•°åº”ç”¨ã€æ˜ å°„ã€æ’åºå’Œå±‚çº§ç´¢å¼•</a></li><li><a href="https://www.itbob.cn/article/029/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆäº”ï¼‰ï¼šç»Ÿè®¡è®¡ç®—ä¸ç»Ÿè®¡æè¿°</a></li><li><a href="https://www.itbob.cn/article/030/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆå…­ï¼‰ï¼šGroupBy æ•°æ®åˆ†è£‚ã€åº”ç”¨ä¸åˆå¹¶</a></li><li><a href="https://www.itbob.cn/article/031/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸ƒï¼‰ï¼šåˆå¹¶æ•°æ®é›†</a></li><li><a href="https://www.itbob.cn/article/032/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆå…«ï¼‰ï¼šæ•°æ®é‡å¡‘ã€é‡å¤æ•°æ®å¤„ç†ä¸æ•°æ®æ›¿æ¢</a></li><li><a href="https://www.itbob.cn/article/033/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¹ï¼‰ï¼šæ—¶é—´åºåˆ—</a></li><li><a href="https://www.itbob.cn/article/034/">Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆåï¼‰ï¼šæ•°æ®è¯»å†™</a></li></ul><hr><p>ä¸“æ ï¼š</p><ul><li>NumPy ä¸“æ ï¼š<a href="https://itrhx.blog.csdn.net/category_9780393.html">https://itrhx.blog.csdn.net/category_9780393.html</a></li><li>Pandas ä¸“æ ï¼š<a href="https://itrhx.blog.csdn.net/category_9780397.html">https://itrhx.blog.csdn.net/category_9780397.html</a></li><li>Matplotlib ä¸“æ ï¼š<a href="https://itrhx.blog.csdn.net/category_9780418.html">https://itrhx.blog.csdn.net/category_9780418.html</a></li></ul><p>æ¨èå­¦ä¹ èµ„æ–™ä¸ç½‘ç«™ï¼š</p><ul><li>NumPy å®˜æ–¹ä¸­æ–‡ç½‘ï¼š<a href="https://www.numpy.org.cn/">https://www.numpy.org.cn/</a></li><li>Pandas å®˜æ–¹ä¸­æ–‡ç½‘ï¼š<a href="https://www.pypandas.cn/">https://www.pypandas.cn/</a></li><li>Matplotlib å®˜æ–¹ä¸­æ–‡ç½‘ï¼š<a href="https://www.matplotlib.org.cn/">https://www.matplotlib.org.cn/</a></li><li>NumPyã€Matplotlibã€Pandas é€ŸæŸ¥è¡¨ï¼š<a href="https://github.com/TRHX/Python-quick-reference-table">https://github.com/TRHX/Python-quick-reference-table</a></li></ul><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/106947061æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="ã€01x00ã€‘æ—¶é—´åºåˆ—"><a href="#ã€01x00ã€‘æ—¶é—´åºåˆ—" class="headerlink" title="ã€01x00ã€‘æ—¶é—´åºåˆ—"></a><font color=#FF0000>ã€01x00ã€‘æ—¶é—´åºåˆ—</font></h2><p>å®˜ç½‘å¯¹äºæ—¶é—´åºåˆ—çš„ä»‹ç»ï¼š<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html</a></p><p>æ—¶é—´åºåˆ—ï¼ˆtime seriesï¼‰æ˜¯ä¸€ç§é‡è¦çš„ç»“æ„åŒ–æ•°æ®å½¢å¼ï¼Œåº”ç”¨äºå¤šä¸ªé¢†åŸŸï¼ŒåŒ…æ‹¬é‡‘èå­¦ã€ç»æµå­¦ã€ç”Ÿæ€å­¦ã€ç¥ç»ç§‘å­¦ã€ç‰©ç†å­¦ç­‰ã€‚åœ¨å¤šä¸ªæ—¶é—´ç‚¹è§‚å¯Ÿæˆ–æµ‹é‡åˆ°çš„ä»»ä½•äº‹ç‰©éƒ½å¯ä»¥å½¢æˆä¸€æ®µæ—¶é—´åºåˆ—ã€‚å¾ˆå¤šæ—¶é—´åºåˆ—æ˜¯å›ºå®šé¢‘ç‡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®ç‚¹æ˜¯æ ¹æ®æŸç§è§„å¾‹å®šæœŸå‡ºç°çš„ï¼ˆæ¯”å¦‚æ¯15ç§’ã€æ¯5åˆ†é’Ÿã€æ¯æœˆå‡ºç°ä¸€æ¬¡ï¼‰ã€‚æ—¶é—´åºåˆ—ä¹Ÿå¯ä»¥æ˜¯ä¸å®šæœŸçš„ï¼Œæ²¡æœ‰å›ºå®šçš„æ—¶é—´å•ä½æˆ–å•ä½ä¹‹é—´çš„åç§»é‡ã€‚æ—¶é—´åºåˆ—æ•°æ®çš„æ„ä¹‰å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p><font color=#4169E1><strong>æ—¶é—´æˆ³ï¼ˆtimestampï¼‰ï¼Œè¡¨ç¤ºæŸä¸ªå…·ä½“çš„æ—¶é—´ç‚¹ï¼Œä¾‹å¦‚ 2020-6-24 15:30ï¼›</strong></font></p></li><li><p><font color=#4169E1><strong>å›ºå®šå‘¨æœŸï¼ˆperiodï¼‰ï¼Œè¡¨ç¤ºæŸä¸ªæ—¶é—´å‘¨æœŸï¼Œä¾‹å¦‚ 2020-01ï¼›</strong></font></p></li><li><p><font color=#4169E1><strong>æ—¶é—´é—´éš”ï¼ˆtimedeltaï¼‰ï¼ŒæŒç»­æ—¶é—´ï¼Œå³ä¸¤ä¸ªæ—¥æœŸæˆ–æ—¶é—´ä¹‹é—´çš„å·®å¼‚ã€‚</strong></font></p></li><li><p><font color=#FFA500><strong>é’ˆå¯¹æ—¶é—´æˆ³æ•°æ®ï¼ŒPandas æä¾›äº† Timestamp ç±»å‹ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ Python çš„åŸç”Ÿ datetime ç±»å‹çš„æ›¿ä»£å“ï¼Œä½†æ˜¯åœ¨æ€§èƒ½æ›´å¥½çš„ numpy.datetime64 ç±»å‹çš„åŸºç¡€ä¸Šåˆ›å»ºã€‚å¯¹åº”çš„ç´¢å¼•æ•°æ®ç»“æ„æ˜¯ DatetimeIndexã€‚</strong></font></p></li><li><p><font color=#FFA500><strong>é’ˆå¯¹æ—¶é—´å‘¨æœŸæ•°æ®ï¼ŒPandas æä¾›äº† Period ç±»å‹ã€‚è¿™æ˜¯åˆ©ç”¨ numpy.datetime64 ç±»å‹å°†å›ºå®šé¢‘ç‡çš„æ—¶é—´é—´éš”è¿›è¡Œç¼–ç ã€‚å¯¹åº”çš„ç´¢å¼•æ•°æ®ç»“æ„æ˜¯ PeriodIndexã€‚</strong></font></p></li><li><p><font color=#FFA500><strong>é’ˆå¯¹æ—¶é—´å¢é‡æˆ–æŒç»­æ—¶é—´ï¼ŒPandas æä¾›äº† Timedelta ç±»å‹ã€‚Timedelta æ˜¯ä¸€ç§ä»£æ›¿ Python åŸç”Ÿdatetime.timedelta ç±»å‹çš„é«˜æ€§èƒ½æ•°æ®ç»“æ„ï¼ŒåŒæ ·æ˜¯åŸºäº numpy.timedelta64 ç±»å‹ã€‚å¯¹åº”çš„ç´¢å¼•æ•°æ®ç»“æ„æ˜¯ TimedeltaIndexã€‚</strong></font></p></li></ul><h2 id="ã€02x00ã€‘Timestamp-æ—¶é—´æˆ³"><a href="#ã€02x00ã€‘Timestamp-æ—¶é—´æˆ³" class="headerlink" title="ã€02x00ã€‘Timestamp æ—¶é—´æˆ³"></a><font color=#FF0000>ã€02x00ã€‘Timestamp æ—¶é—´æˆ³</font></h2><h3 id="ã€02x01ã€‘pandas-Timestamp"><a href="#ã€02x01ã€‘pandas-Timestamp" class="headerlink" title="ã€02x01ã€‘pandas.Timestamp"></a><font color=#4876FF>ã€02x01ã€‘pandas.Timestamp</font></h3><p>åœ¨ pandas ä¸­ï¼Œ<code>pandas.Timestamp</code> æ–¹æ³•ç”¨æ¥ä»£æ›¿ Python ä¸­çš„ <code>datetime.datetime</code> æ–¹æ³•ã€‚</p><p>Timestamp ä¸ Python çš„ Datetime ç­‰æ•ˆï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å¯ä»¥äº’æ¢ã€‚ æ­¤ç±»å‹ç”¨äºç»„æˆ DatetimeIndex ä»¥åŠ Pandas ä¸­å…¶ä»–é¢å‘æ—¶é—´åºåˆ—çš„æ•°æ®ç»“æ„ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.html">https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.html</a></p><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">class pandas.Timestamp(ts_input=&lt;object object&gt;,                        freq=None, tz=None, unit=None,                        year=None, month=None, day=None,                        hour=None, minute=None, second=None,                        microsecond=None, nanosecond=None, tzinfo=None)</code></pre><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>ts_input</td><td>è¦è½¬æ¢ä¸ºæ—¶é—´æˆ³çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ datetime-likeï¼Œstrï¼Œintï¼Œfloat ç±»å‹</td></tr><tr><td>freq</td><td>æ—¶é—´æˆ³å°†å…·æœ‰çš„åç§»é‡ï¼Œå¯ä»¥æ˜¯ strï¼Œæ—¥æœŸåç§»é‡ç±»å‹ï¼Œå–å€¼å‚è§<a href="#t4">ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</a></td></tr><tr><td>tz</td><td>æ—¶é—´æˆ³å°†å…·æœ‰çš„æ—¶åŒº</td></tr><tr><td>unit</td><td>å¦‚æœ ts_input æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œè¯¥å‚æ•°ç”¨äºè®¾ç½®å…¶å•ä½ï¼ˆDã€sã€msã€usã€nsï¼‰</td></tr></tbody></table><p>ç®€å•ç¤ºä¾‹ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Timestamp(&#39;2017-01-01T12&#39;)Timestamp(&#39;2017-01-01 12:00:00&#39;)</code></pre><p>è®¾ç½® <code>unit=&#39;s&#39;</code>ï¼Œå³å¾…è½¬æ¢å¯¹è±¡å•ä½ä¸ºç§’ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Timestamp(1513393355.5, unit=&#39;s&#39;)Timestamp(&#39;2017-12-16 03:02:35.500000&#39;)</code></pre><p>ä½¿ç”¨ <code>tz</code> å‚æ•°è®¾ç½®æ—¶åŒºï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Timestamp(1513393355, unit=&#39;s&#39;, tz=&#39;US/Pacific&#39;)Timestamp(&#39;2017-12-15 19:02:35-0800&#39;, tz=&#39;US/Pacific&#39;)</code></pre><p>å•ç‹¬è®¾ç½®å¹´æœˆæ—¥ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Timestamp(year=2020, month=6, day=24, hour=12)Timestamp(&#39;2020-06-24 12:00:00&#39;)</code></pre><h3 id="ã€02x02ã€‘freq-é¢‘ç‡éƒ¨åˆ†å–å€¼"><a href="#ã€02x02ã€‘freq-é¢‘ç‡éƒ¨åˆ†å–å€¼" class="headerlink" title="ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼"></a><font color=#4876FF>ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</font></h3><p>å®Œæ•´å–å€¼å‚è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/user_guide/timeseries.html#timeseries-offset-aliases">https://pandas.pydata.org/docs/user_guide/timeseries.html#timeseries-offset-aliases</a></p><table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>D</td><td>Day</td><td>æ¯æ—¥å†æ—¥</td></tr><tr><td>B</td><td>BusinessDay</td><td>æ¯å·¥ä½œæ—¥</td></tr><tr><td>H</td><td>Hour</td><td>æ¯å°æ—¶</td></tr><tr><td>T æˆ– min</td><td>Minute</td><td>æ¯åˆ†</td></tr><tr><td>S</td><td>Second</td><td>æ¯ç§’</td></tr><tr><td>L æˆ– ms</td><td>Milli</td><td>æ¯æ¯«ç§’ï¼ˆå³æ¯åƒåˆ†ä¹‹ä¸€ç§’ï¼‰</td></tr><tr><td>U</td><td>Micro</td><td>æ¯å¾®ç§’ï¼ˆå³æ¯ç™¾ä¸‡åˆ†ä¹‹ä¸€ç§’ï¼‰</td></tr><tr><td>M</td><td>MonthEnd</td><td>æ¯æœˆæœ€åä¸€ä¸ªæ—¥å†æ—¥</td></tr><tr><td>BM</td><td>BusinessMonthEnd</td><td>æ¯æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥</td></tr><tr><td>MS</td><td>MonthBegin</td><td>æ¯æœˆç¬¬ä¸€ä¸ªæ—¥å†æ—¥</td></tr><tr><td>BMS</td><td>BusinessMonthBegin</td><td>æ¯æœˆç¬¬ä¸€ä¸ªå·¥ä½œæ—¥</td></tr><tr><td>W-MONã€W-TUEâ€¦</td><td>Week</td><td>ä»æŒ‡å®šçš„æ˜ŸæœŸå‡ ï¼ˆMONã€TUEã€ WEDã€THUã€FRã€SATã€SUNï¼‰å¼€å§‹ç®—èµ·ï¼Œæ¯å‘¨</td></tr><tr><td>WoM-1MONã€WOM-2MONâ€¦</td><td>WeekOfMonth</td><td>äº§ç”Ÿæ¯æœˆç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰æˆ–ç¬¬å››å‘¨çš„æ˜ŸæœŸå‡ ã€‚ä¾‹å¦‚ï¼ŒWoM-3FRI è¡¨ç¤ºæ¯æœˆç¬¬3ä¸ªæ˜ŸæœŸäº”</td></tr><tr><td>Q-JANã€Q-FEBâ€¦</td><td>QuarterEnd</td><td>å¯¹äºä»¥æŒ‡å®šæœˆä»½ï¼ˆJANã€FEBã€MARã€APRã€MAYã€JUNã€JULã€AUGã€SEPã€OCTã€NOVã€DECï¼‰ç»“æŸçš„å¹´åº¦ï¼Œæ¯å­£åº¦æœ€åä¸€æœˆçš„æœ€åä¸ªæ—¥å†æ—¥</td></tr><tr><td>BQ-JANã€BQ-FEBâ€¦</td><td>BusinessQuarterEnd</td><td>å¯¹äºä»¥æŒ‡å®šæœˆä»½ç»“æŸçš„å¹´åº¦ï¼Œæ¯å­£åº¦æœ€åä¸€æœˆçš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥</td></tr><tr><td>QS-JANã€QS-FEBâ€¦</td><td>QuarterBegin</td><td>å¯¹äºä»¥æŒ‡å®šæœˆä»½ç»“æŸçš„å¹´åº¦ï¼Œæ¯å­£åº¦æœ€åä¸€æœˆçš„ç¬¬ä¸€ä¸ªæ—¥å†æ—¥</td></tr><tr><td>BQS-JANã€ BQS-FEBâ€¦</td><td>BusinessQuarterBegin</td><td>å¯¹äºä»¥æŒ‡å®šæœˆä»½ç»“æŸçš„å¹´åº¦ï¼Œæ¯å­£åº¦æœ€åä¸€æœˆçš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥</td></tr><tr><td>A-JANã€A-FEBâ€¦</td><td>YearEnd</td><td>æ¯å¹´æŒ‡å®šæœˆä»½ï¼ˆJANã€FEBã€MARã€APRã€MAYã€JUNã€JULã€AUGã€SEPã€ OCTã€NOVã€DECï¼‰çš„æœ€åä¸€ä¸ªæ—¥å†æ—¥</td></tr><tr><td>BA-JANã€BA-FEBâ€¦</td><td>BusinessYearEnd</td><td>æ¯å¹´æŒ‡å®šæœˆä»½çš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥</td></tr><tr><td>AS-JANã€AS-FEBâ€¦</td><td>YearBegin</td><td>æ¯å¹´æŒ‡å®šæœˆä»½çš„ç¬¬ä¸€ä¸ªå†æ—¥æ—¥</td></tr><tr><td>BAS-JANã€BAS-FEBâ€¦</td><td>BusinessYearBegin</td><td>æ¯å¹´æŒ‡å®šæœˆä»½çš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥</td></tr></tbody></table><h3 id="ã€02x03ã€‘to-datetime"><a href="#ã€02x03ã€‘to-datetime" class="headerlink" title="ã€02x03ã€‘to_datetime"></a><font color=#4876FF>ã€02x03ã€‘to_datetime</font></h3><p>åœ¨ Python ä¸­ï¼Œdatetime åº“æä¾›äº†æ—¥æœŸå’Œæ—¶é—´å¤„ç†æ–¹æ³•ï¼Œåˆ©ç”¨ <code>str</code> æˆ– <code>strftime</code> æ–¹æ³•å¯ä»¥å°† datetime å¯¹è±¡è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œå…·ä½“ç”¨æ³•å¯å‚è§<a href="https://blog.csdn.net/qq_36759224/article/details/104427220">ã€Python æ ‡å‡†åº“å­¦ä¹ ã€‘æ—¥æœŸå’Œæ—¶é—´å¤„ç†åº“ â€” datetime</a>ã€‚</p><pre><code class="python">&gt;&gt;&gt; from datetime import datetime&gt;&gt;&gt; stamp = datetime(2020, 6, 24)&gt;&gt;&gt; stampdatetime.datetime(2020, 6, 24, 0, 0)&gt;&gt;&gt;&gt;&gt;&gt; str(stamp)&#39;2020-06-24 00:00:00&#39;&gt;&gt;&gt; &gt;&gt;&gt; stamp.strftime(&#39;%Y-%m-%d&#39;)&#39;2020-06-24&#39;</code></pre><p><font color=#FF0000><strong>åœ¨ pandas ä¸­ to_datetime æ–¹æ³•å¯ä»¥å°†å­—ç¬¦ä¸²è§£ææˆå¤šç§ä¸åŒçš„ Timestampï¼ˆæ—¶é—´æˆ³ï¼‰ å¯¹è±¡ï¼š</strong></font></p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; datestrs = &#39;2011-07-06 12:00:00&#39;&gt;&gt;&gt; type(datestrs)&lt;class &#39;str&#39;&gt;&gt;&gt;&gt; &gt;&gt;&gt; pd.to_datetime(datestrs)Timestamp(&#39;2011-07-06 12:00:00&#39;)</code></pre><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">pandas.to_datetime(arg, errors=&#39;raise&#39;, dayfirst=False,                    yearfirst=False, utc=None, format=None,                    exact=True, unit=None, infer_datetime_format=False,                    origin=&#39;unix&#39;, cache=True)</code></pre><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html">https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>arg</td><td>è¦è½¬æ¢ä¸ºæ—¥æœŸæ—¶é—´çš„å¯¹è±¡ï¼Œå¯ä»¥æ¥å— int, float, str, datetime, list, tuple, 1-d array, Series DataFrame/dict-like ç±»å‹</td></tr><tr><td>errors</td><td>å¦‚æœå­—ç¬¦ä¸²ä¸æ»¡è¶³æ—¶é—´æˆ³çš„å½¢å¼ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿå¼‚å¸¸<br><code>ignore</code>ï¼šä¸å¼•å‘å¼‚å¸¸ï¼Œè¿”å›åŸå§‹è¾“å…¥ï¼›<code>raise</code>ï¼šæ— æ•ˆè§£æå°†å¼•å‘å¼‚å¸¸ï¼ˆé»˜è®¤ï¼‰ï¼›<code>coerce</code>ï¼šæ— æ•ˆè§£æå°†è¢«è®¾ç½®ä¸ºNaT</td></tr><tr><td>dayfirst</td><td>bool ç±»å‹ï¼Œé»˜è®¤ Falseï¼Œå¦‚æœ arg æ˜¯ str æˆ–åˆ—è¡¨ï¼Œæ˜¯å¦é¦–å…ˆè§£æä¸ºæ—¥æœŸ<br>ä¾‹å¦‚ dayfirst ä¸º Trueï¼Œ<code>10/11/12</code> è¢«è§£æä¸º <code>2012-11-10</code>ï¼Œä¸º False åˆ™è§£æä¸º <code>2012-10-11</code></td></tr><tr><td>yearfirst</td><td>bool ç±»å‹ï¼Œé»˜è®¤ Falseï¼Œå¦‚æœ arg æ˜¯ str æˆ–åˆ—è¡¨ï¼Œæ˜¯å¦é¦–å…ˆè§£æä¸ºå¹´ä»½<br>ä¾‹å¦‚ dayfirst ä¸º Trueï¼Œ<code>10/11/12</code> è¢«è§£æä¸º <code>2010-11-12</code>ï¼Œä¸º False åˆ™è§£æä¸º <code>2012-10-11</code><br>å¦‚æœ dayfirst å’Œ yearfirst éƒ½ä¸º Trueï¼Œåˆ™ä¼˜å…ˆ yearfirst</td></tr><tr><td>utc</td><td>bool ç±»å‹ï¼Œæ˜¯å¦è½¬æ¢ä¸ºåè°ƒä¸–ç•Œæ—¶ï¼Œé»˜è®¤ None</td></tr><tr><td>format</td><td>æ ¼å¼åŒ–æ—¶é—´ï¼Œå¦‚ <code>21/2/20 16:10</code> ä½¿ç”¨ <code>%d/%m/%y %H:%M</code> ä¼šè¢«è§£æä¸º <code>2020-02-21 16:10:00</code><br>ç¬¦å·å«ä¹‰å¸¸è§æ–‡ç« ï¼š<a href="https://blog.csdn.net/qq_36759224/article/details/104427220">ã€Python æ ‡å‡†åº“å­¦ä¹ ã€‘æ—¥æœŸå’Œæ—¶é—´å¤„ç†åº“ â€” datetime</a> æˆ–è€…<a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior">å®˜æ–¹æ–‡æ¡£</a></td></tr><tr><td>exact</td><td>å¦‚æœä¸º Trueï¼Œåˆ™éœ€è¦ç²¾ç¡®çš„æ ¼å¼åŒ¹é…ã€‚å¦‚æœä¸º Falseï¼Œåˆ™å…è®¸æ ¼å¼ä¸ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„ä»»ä½•ä½ç½®åŒ¹é…</td></tr><tr><td>unit</td><td>å¦‚æœ arg æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œè¯¥å‚æ•°ç”¨äºè®¾ç½®å…¶å•ä½ï¼ˆDã€sã€msã€usã€nsï¼‰</td></tr></tbody></table><p>ç®€å•åº”ç”¨ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.DataFrame(&#123;&#39;year&#39;: [2015, 2016], &#39;month&#39;: [2, 3], &#39;day&#39;: [4, 5]&#125;)&gt;&gt;&gt; obj   year  month  day0  2015      2    41  2016      3    5&gt;&gt;&gt; &gt;&gt;&gt; pd.to_datetime(obj)0   2015-02-041   2016-03-05dtype: datetime64[ns]</code></pre><p>è®¾ç½® <code>format</code> å’Œ <code>errors</code> å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.to_datetime(&#39;13000101&#39;, format=&#39;%Y%m%d&#39;, errors=&#39;ignore&#39;)datetime.datetime(1300, 1, 1, 0, 0)&gt;&gt;&gt; &gt;&gt;&gt; pd.to_datetime(&#39;13000101&#39;, format=&#39;%Y%m%d&#39;, errors=&#39;coerce&#39;)NaT&gt;&gt;&gt; &gt;&gt;&gt; pd.to_datetime(&#39;13000101&#39;, format=&#39;%Y%m%d&#39;, errors=&#39;raise&#39;)Traceback (most recent call last):...pandas._libs.tslibs.np_datetime.OutOfBoundsDatetime: Out of bounds nanosecond timestamp: 1300-01-01 00:00:00</code></pre><p>è®¾ç½® <code>unit</code> å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.to_datetime(1490195805, unit=&#39;s&#39;)Timestamp(&#39;2017-03-22 15:16:45&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.to_datetime(1490195805433502912, unit=&#39;ns&#39;)Timestamp(&#39;2017-03-22 15:16:45.433502912&#39;)</code></pre><h3 id="ã€02x04ã€‘date-range"><a href="#ã€02x04ã€‘date-range" class="headerlink" title="ã€02x04ã€‘date_range"></a><font color=#4876FF>ã€02x04ã€‘date_range</font></h3><p><code>pandas.date_range</code> æ–¹æ³•å¯ç”¨äºæ ¹æ®æŒ‡å®šçš„é¢‘ç‡ç”ŸæˆæŒ‡å®šé•¿åº¦çš„ DatetimeIndexã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">pandas.date_range(start=None, end=None, periods=None, freq=None,                   tz=None, normalize=False, name=None, closed=None,                   **kwargs) â†’ pandas.core.indexes.datetimes.DatetimeIndex</code></pre><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.date_range.html">https://pandas.pydata.org/docs/reference/api/pandas.date_range.html</a></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>start</td><td>å¼€å§‹æ—¥æœŸ</td></tr><tr><td>end</td><td>ç»“æŸæ—¥æœŸ</td></tr><tr><td>periods</td><td>int ç±»å‹ï¼Œè¦ç”Ÿæˆçš„æ—¶æ®µæ•°ï¼ˆå¤©ï¼‰</td></tr><tr><td>freq</td><td>é¢‘ç‡å­—ç¬¦ä¸²ï¼Œå³æŒ‰ç…§æŸç§ç‰¹å®šçš„é¢‘ç‡æ¥ç”Ÿæˆæ—¥æœŸï¼Œå–å€¼å‚è§<a href="#t4">ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</a></td></tr><tr><td>tz</td><td>è®¾ç½®æ—¶åŒºï¼Œä¾‹å¦‚ â€œAsia/Hong_Kongâ€</td></tr><tr><td>normalize</td><td>bool ç±»å‹ï¼Œé»˜è®¤ Falseï¼Œæ˜¯å¦åœ¨ç”Ÿæˆæ—¥æœŸä¹‹å‰å¯¹å…¶è¿›è¡Œè§„èŒƒåŒ–ï¼ˆä»…ä¿ç•™å¹´æœˆæ—¥ï¼‰</td></tr><tr><td>name</td><td>ç»“æœ DatetimeIndex çš„åç§°</td></tr><tr><td>closed</td><td><code>None</code>ï¼šé»˜è®¤å€¼ï¼ŒåŒæ—¶ä¿ç•™å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ<br><code>&#39;left&#39;</code>ï¼šä¿ç•™å¼€å§‹æ—¥æœŸï¼Œä¸ä¿ç•™ç»“æŸæ—¥æœŸ<br><code>&#39;right&#39;</code>ï¼šä¿ç•™ç»“æŸæ—¥æœŸï¼Œä¸ä¿ç•™å¼€å§‹æ—¥æœŸ</td></tr></tbody></table><p>ç®€å•ç¤ºä¾‹ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(start=&#39;1/1/2018&#39;, end=&#39;1/08/2018&#39;)DatetimeIndex([&#39;2018-01-01&#39;, &#39;2018-01-02&#39;, &#39;2018-01-03&#39;, &#39;2018-01-04&#39;,               &#39;2018-01-05&#39;, &#39;2018-01-06&#39;, &#39;2018-01-07&#39;, &#39;2018-01-08&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</code></pre><p>æŒ‡å®š <code>periods</code> å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(start=&#39;2012-04-01&#39;, periods=20)DatetimeIndex([&#39;2012-04-01&#39;, &#39;2012-04-02&#39;, &#39;2012-04-03&#39;, &#39;2012-04-04&#39;,               &#39;2012-04-05&#39;, &#39;2012-04-06&#39;, &#39;2012-04-07&#39;, &#39;2012-04-08&#39;,               &#39;2012-04-09&#39;, &#39;2012-04-10&#39;, &#39;2012-04-11&#39;, &#39;2012-04-12&#39;,               &#39;2012-04-13&#39;, &#39;2012-04-14&#39;, &#39;2012-04-15&#39;, &#39;2012-04-16&#39;,               &#39;2012-04-17&#39;, &#39;2012-04-18&#39;, &#39;2012-04-19&#39;, &#39;2012-04-20&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.date_range(end=&#39;2012-06-01&#39;, periods=20)DatetimeIndex([&#39;2012-05-13&#39;, &#39;2012-05-14&#39;, &#39;2012-05-15&#39;, &#39;2012-05-16&#39;,               &#39;2012-05-17&#39;, &#39;2012-05-18&#39;, &#39;2012-05-19&#39;, &#39;2012-05-20&#39;,               &#39;2012-05-21&#39;, &#39;2012-05-22&#39;, &#39;2012-05-23&#39;, &#39;2012-05-24&#39;,               &#39;2012-05-25&#39;, &#39;2012-05-26&#39;, &#39;2012-05-27&#39;, &#39;2012-05-28&#39;,               &#39;2012-05-29&#39;, &#39;2012-05-30&#39;, &#39;2012-05-31&#39;, &#39;2012-06-01&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)&gt;&gt;&gt;&gt;&gt;&gt; pd.date_range(start=&#39;2018-04-24&#39;, end=&#39;2018-04-27&#39;, periods=3)DatetimeIndex([&#39;2018-04-24 00:00:00&#39;, &#39;2018-04-25 12:00:00&#39;, &#39;2018-04-27 00:00:00&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=None)&gt;&gt;&gt;&gt;&gt;&gt; pd.date_range(start=&#39;2018-04-24&#39;, end=&#39;2018-04-28&#39;, periods=3)DatetimeIndex([&#39;2018-04-24&#39;, &#39;2018-04-26&#39;, &#39;2018-04-28&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</code></pre><p>æŒ‡å®š <code>freq=&#39;M&#39;</code> ä¼šæŒ‰ç…§æ¯æœˆæœ€åä¸€ä¸ªæ—¥å†æ—¥çš„é¢‘ç‡ç”Ÿæˆæ—¥æœŸï¼ŒæŒ‡å®š <code>freq=&#39;3M&#39;</code> ä¼šæ¯éš”3ä¸ªæœˆæŒ‰ç…§æ¯æœˆæœ€åä¸€ä¸ªæ—¥å†æ—¥çš„é¢‘ç‡ç”Ÿæˆæ—¥æœŸï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(start=&#39;1/1/2018&#39;, periods=5, freq=&#39;M&#39;)DatetimeIndex([&#39;2018-01-31&#39;, &#39;2018-02-28&#39;, &#39;2018-03-31&#39;, &#39;2018-04-30&#39;,               &#39;2018-05-31&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;M&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.date_range(start=&#39;1/1/2018&#39;, periods=5, freq=&#39;3M&#39;)DatetimeIndex([&#39;2018-01-31&#39;, &#39;2018-04-30&#39;, &#39;2018-07-31&#39;, &#39;2018-10-31&#39;,               &#39;2019-01-31&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;3M&#39;)&gt;&gt;&gt; </code></pre><p>ä½¿ç”¨ <code>tz</code> å‚æ•°è®¾ç½®æ—¶åŒºï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(start=&#39;1/1/2018&#39;, periods=5, tz=&#39;Asia/Tokyo&#39;)DatetimeIndex([&#39;2018-01-01 00:00:00+09:00&#39;, &#39;2018-01-02 00:00:00+09:00&#39;,               &#39;2018-01-03 00:00:00+09:00&#39;, &#39;2018-01-04 00:00:00+09:00&#39;,               &#39;2018-01-05 00:00:00+09:00&#39;],              dtype=&#39;datetime64[ns, Asia/Tokyo]&#39;, freq=&#39;D&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.date_range(start=&#39;6/24/2020&#39;, periods=5, tz=&#39;Asia/Hong_Kong&#39;)DatetimeIndex([&#39;2020-06-24 00:00:00+08:00&#39;, &#39;2020-06-25 00:00:00+08:00&#39;,               &#39;2020-06-26 00:00:00+08:00&#39;, &#39;2020-06-27 00:00:00+08:00&#39;,               &#39;2020-06-28 00:00:00+08:00&#39;],              dtype=&#39;datetime64[ns, Asia/Hong_Kong]&#39;, freq=&#39;D&#39;)</code></pre><p>è®¾ç½® <code>normalize</code> å‚æ•°ï¼Œåœ¨ç”Ÿæˆæ—¶é—´æˆ³ä¹‹å‰å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–æ“ä½œï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(&#39;2020-06-24 12:56:31&#39;, periods=5, normalize=True)DatetimeIndex([&#39;2020-06-24&#39;, &#39;2020-06-25&#39;, &#39;2020-06-26&#39;, &#39;2020-06-27&#39;,               &#39;2020-06-28&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</code></pre><p>è®¾ç½® <code>closed</code> å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(start=&#39;2020-06-20&#39;, end=&#39;2020-06-24&#39;, closed=None)DatetimeIndex([&#39;2020-06-20&#39;, &#39;2020-06-21&#39;, &#39;2020-06-22&#39;, &#39;2020-06-23&#39;,               &#39;2020-06-24&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.date_range(start=&#39;2020-06-20&#39;, end=&#39;2020-06-24&#39;, closed=&#39;left&#39;)DatetimeIndex([&#39;2020-06-20&#39;, &#39;2020-06-21&#39;, &#39;2020-06-22&#39;, &#39;2020-06-23&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.date_range(start=&#39;2020-06-20&#39;, end=&#39;2020-06-24&#39;, closed=&#39;right&#39;)DatetimeIndex([&#39;2020-06-21&#39;, &#39;2020-06-22&#39;, &#39;2020-06-23&#39;, &#39;2020-06-24&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</code></pre><h3 id="ã€02x05ã€‘ç´¢å¼•ä¸åˆ‡ç‰‡"><a href="#ã€02x05ã€‘ç´¢å¼•ä¸åˆ‡ç‰‡" class="headerlink" title="ã€02x05ã€‘ç´¢å¼•ä¸åˆ‡ç‰‡"></a><font color=#4876FF>ã€02x05ã€‘ç´¢å¼•ä¸åˆ‡ç‰‡</font></h3><p>Pandas æœ€åŸºæœ¬çš„æ—¶é—´åºåˆ—ç±»å‹å°±æ˜¯ä»¥æ—¶é—´æˆ³ï¼ˆé€šå¸¸ä»¥ Python å­—ç¬¦ä¸²æˆ– datatime å¯¹è±¡è¡¨ç¤ºï¼‰ä¸ºç´¢å¼•çš„Seriesï¼Œè¿™äº› datetime å¯¹è±¡å®é™…ä¸Šæ˜¯è¢«æ”¾åœ¨ DatetimeIndex ä¸­çš„ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼ pandas.Series å¯¹è±¡çš„åˆ‡ç‰‡æ–¹æ³•å¯¹å…¶è¿›è¡Œç´¢å¼•ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; dates = [datetime(2011, 1, 2), datetime(2011, 1, 5),             datetime(2011, 1, 7), datetime(2011, 1, 8),             datetime(2011, 1, 10), datetime(2011, 1, 12)]&gt;&gt;&gt; obj = pd.Series(np.random.randn(6), index=dates)&gt;&gt;&gt; &gt;&gt;&gt; obj2011-01-02   -0.4071102011-01-05   -0.1866612011-01-07   -0.7310802011-01-08    0.8609702011-01-10    1.9299732011-01-12   -0.168599dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj.indexDatetimeIndex([&#39;2011-01-02&#39;, &#39;2011-01-05&#39;, &#39;2011-01-07&#39;, &#39;2011-01-08&#39;,               &#39;2011-01-10&#39;, &#39;2011-01-12&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=None)&gt;&gt;&gt;&gt;&gt;&gt; obj.index[0]Timestamp(&#39;2011-01-02 00:00:00&#39;)&gt;&gt;&gt; &gt;&gt;&gt; obj.index[0:3]DatetimeIndex([&#39;2011-01-02&#39;, &#39;2011-01-05&#39;, &#39;2011-01-07&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</code></pre><p>å¦å¤–è¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯ä»¥è¢«è§£é‡Šä¸ºæ—¥æœŸçš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…åªéœ€ä¼ å…¥â€œå¹´â€æˆ–â€œå¹´æœˆâ€å³å¯è½»æ¾é€‰å–æ•°æ®çš„åˆ‡ç‰‡ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; obj = pd.Series(np.random.randn(1000), index=pd.date_range(&#39;1/1/2000&#39;, periods=1000))&gt;&gt;&gt; obj2000-01-01   -1.1422842000-01-02    1.1987852000-01-03    2.4669092000-01-04   -0.0867282000-01-05   -0.978437                ...   2002-09-22   -0.2522402002-09-23    0.1485612002-09-24   -1.3304092002-09-25   -0.6734712002-09-26   -0.253271Freq: D, Length: 1000, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj[&#39;26/9/2002&#39;]-0.25327100684233356&gt;&gt;&gt; &gt;&gt;&gt; obj[&#39;2002&#39;]2002-01-01    1.0587152002-01-02    0.9008592002-01-03    1.9935082002-01-04   -0.1032112002-01-05   -0.950090                ...   2002-09-22   -0.2522402002-09-23    0.1485612002-09-24   -1.3304092002-09-25   -0.6734712002-09-26   -0.253271Freq: D, Length: 269, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj[&#39;2002-09&#39;]2002-09-01   -0.9955282002-09-02    0.5015282002-09-03   -0.4867532002-09-04   -1.0839062002-09-05    1.4589752002-09-06   -1.3316852002-09-07    0.1953382002-09-08   -0.4296132002-09-09    1.1258232002-09-10    1.6070512002-09-11    0.5303872002-09-12   -0.0159382002-09-13    1.7810432002-09-14   -0.2771232002-09-15    0.3445692002-09-16   -1.0108102002-09-17    0.4630012002-09-18    1.8836362002-09-19    0.2745202002-09-20    0.6241842002-09-21   -1.2030572002-09-22   -0.2522402002-09-23    0.1485612002-09-24   -1.3304092002-09-25   -0.6734712002-09-26   -0.253271Freq: D, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj[&#39;20/9/2002&#39;:&#39;26/9/2002&#39;]2002-09-20    0.6241842002-09-21   -1.2030572002-09-22   -0.2522402002-09-23    0.1485612002-09-24   -1.3304092002-09-25   -0.6734712002-09-26   -0.253271Freq: D, dtype: float64</code></pre><h3 id="ã€02x06ã€‘ç§»åŠ¨æ•°æ®ä¸æ•°æ®åç§»"><a href="#ã€02x06ã€‘ç§»åŠ¨æ•°æ®ä¸æ•°æ®åç§»" class="headerlink" title="ã€02x06ã€‘ç§»åŠ¨æ•°æ®ä¸æ•°æ®åç§»"></a><font color=#4876FF>ã€02x06ã€‘ç§»åŠ¨æ•°æ®ä¸æ•°æ®åç§»</font></h3><p>ç§»åŠ¨ï¼ˆshiftingï¼‰æŒ‡çš„æ˜¯æ²¿ç€æ—¶é—´è½´å°†æ•°æ®å‰ç§»æˆ–åç§»ã€‚Series å’Œ DataFrame éƒ½æœ‰ä¸€ä¸ª shift æ–¹æ³•ç”¨äºæ‰§è¡Œå•çº¯çš„å‰ç§»æˆ–åç§»æ“ä½œï¼Œä¿æŒç´¢å¼•ä¸å˜ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; obj = pd.Series(np.random.randn(4),            index=pd.date_range(&#39;1/1/2000&#39;, periods=4, freq=&#39;M&#39;))&gt;&gt;&gt; obj2000-01-31   -0.1002172000-02-29    1.1778342000-03-31   -0.6443532000-04-30   -1.954679Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj.shift(2)2000-01-31         NaN2000-02-29         NaN2000-03-31   -0.1002172000-04-30    1.177834Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj.shift(-2)2000-01-31   -0.6443532000-02-29   -1.9546792000-03-31         NaN2000-04-30         NaNFreq: M, dtype: float64</code></pre><p>å› ä¸ºç®€å•çš„ç§»ä½æ“ä½œä¸ä¼šä¿®æ”¹ç´¢å¼•ï¼Œæ‰€ä»¥éƒ¨åˆ†æ•°æ®ä¼šè¢«ä¸¢å¼ƒå¹¶å¼•å…¥ NaNï¼ˆç¼ºå¤±å€¼ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœé¢‘ç‡å·²çŸ¥ï¼Œåˆ™å¯ä»¥å°†å…¶ä¼ ç»™ shift ä»¥ä¾¿å®ç°å¯¹æ—¶é—´æˆ³è¿›è¡Œä½ç§»è€Œä¸æ˜¯å¯¹æ•°æ®è¿›è¡Œç®€å•ä½ç§»ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; obj = pd.Series(np.random.randn(4),            index=pd.date_range(&#39;1/1/2000&#39;, periods=4, freq=&#39;M&#39;))&gt;&gt;&gt; obj2000-01-31   -0.1002172000-02-29    1.1778342000-03-31   -0.6443532000-04-30   -1.954679Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj.shift(2, freq=&#39;M&#39;)2000-03-31   -0.1002172000-04-30    1.1778342000-05-31   -0.6443532000-06-30   -1.954679Freq: M, dtype: float64</code></pre><p>Pandas ä¸­çš„é¢‘ç‡æ˜¯ç”±ä¸€ä¸ªåŸºç¡€é¢‘ç‡ï¼ˆbase frequencyï¼‰å’Œä¸€ä¸ªä¹˜æ•°ç»„æˆçš„ã€‚åŸºç¡€é¢‘ç‡é€šå¸¸ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ«åè¡¨ç¤ºï¼Œæ¯”å¦‚ <code>&quot;M&quot;</code> è¡¨ç¤ºæ¯æœˆï¼Œ<code>&quot;H&quot;</code> è¡¨ç¤ºæ¯å°æ—¶ã€‚å¯¹äºæ¯ä¸ªåŸºç¡€é¢‘ç‡ï¼Œéƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºæ—¥æœŸåç§»é‡ï¼ˆdate offsetï¼‰çš„å¯¹è±¡ä¸ä¹‹å¯¹åº”ã€‚ä¾‹å¦‚ï¼ŒæŒ‰å°æ—¶è®¡ç®—çš„é¢‘ç‡å¯ä»¥ç”¨ <code>Hour</code> ç±»è¡¨ç¤ºï¼š</p><pre><code class="python">&gt;&gt;&gt; from pandas.tseries.offsets import Hour, Minute&gt;&gt;&gt; hour = Hour()&gt;&gt;&gt; hour&lt;Hour&gt;&gt;&gt;&gt; &gt;&gt;&gt; four_hours = Hour(4)&gt;&gt;&gt; four_hours&lt;4 * Hours&gt;</code></pre><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ— éœ€æ˜ç¡®åˆ›å»ºè¿™æ ·çš„å¯¹è±¡ï¼Œåªéœ€ä½¿ç”¨è¯¸å¦‚ <code>&quot;H&quot;</code> æˆ– <code>&quot;4H&quot;</code> è¿™æ ·çš„å­—ç¬¦ä¸²åˆ«åå³å¯ã€‚åœ¨åŸºç¡€é¢‘ç‡å‰é¢æ”¾ä¸Šä¸€ä¸ªæ•´æ•°å³å¯åˆ›å»ºå€æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(&#39;2000-01-01&#39;, &#39;2000-01-03 23:59&#39;, freq=&#39;4h&#39;)DatetimeIndex([&#39;2000-01-01 00:00:00&#39;, &#39;2000-01-01 04:00:00&#39;,               &#39;2000-01-01 08:00:00&#39;, &#39;2000-01-01 12:00:00&#39;,               &#39;2000-01-01 16:00:00&#39;, &#39;2000-01-01 20:00:00&#39;,               &#39;2000-01-02 00:00:00&#39;, &#39;2000-01-02 04:00:00&#39;,               &#39;2000-01-02 08:00:00&#39;, &#39;2000-01-02 12:00:00&#39;,               &#39;2000-01-02 16:00:00&#39;, &#39;2000-01-02 20:00:00&#39;,               &#39;2000-01-03 00:00:00&#39;, &#39;2000-01-03 04:00:00&#39;,               &#39;2000-01-03 08:00:00&#39;, &#39;2000-01-03 12:00:00&#39;,               &#39;2000-01-03 16:00:00&#39;, &#39;2000-01-03 20:00:00&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;4H&#39;)</code></pre><p>å¤§éƒ¨åˆ†åç§»é‡å¯¹è±¡éƒ½å¯é€šè¿‡åŠ æ³•è¿›è¡Œè¿æ¥ï¼š</p><pre><code class="python">&gt;&gt;&gt; from pandas.tseries.offsets import Hour, Minute&gt;&gt;&gt; Hour(2) + Minute(30)&lt;150 * Minutes&gt;</code></pre><p>å¯¹äº <code>freq</code> å‚æ•°ä¹Ÿå¯ä»¥ä¼ å…¥é¢‘ç‡å­—ç¬¦ä¸²ï¼ˆå¦‚ <code>&quot;2h30min&quot;</code>ï¼‰ï¼Œè¿™ç§å­—ç¬¦ä¸²å¯ä»¥è¢«é«˜æ•ˆåœ°è§£æä¸ºç­‰æ•ˆçš„è¡¨è¾¾å¼ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.date_range(&#39;2000-01-01&#39;, periods=10, freq=&#39;1h30min&#39;)DatetimeIndex([&#39;2000-01-01 00:00:00&#39;, &#39;2000-01-01 01:30:00&#39;,               &#39;2000-01-01 03:00:00&#39;, &#39;2000-01-01 04:30:00&#39;,               &#39;2000-01-01 06:00:00&#39;, &#39;2000-01-01 07:30:00&#39;,               &#39;2000-01-01 09:00:00&#39;, &#39;2000-01-01 10:30:00&#39;,               &#39;2000-01-01 12:00:00&#39;, &#39;2000-01-01 13:30:00&#39;],              dtype=&#39;datetime64[ns]&#39;, freq=&#39;90T&#39;)</code></pre><p>è¿™ç§åç§»é‡è¿˜å¯ä»¥ç”¨åœ¨ datetime æˆ– Timestamp å¯¹è±¡ä¸Šï¼š</p><pre><code class="python">&gt;&gt;&gt; from pandas.tseries.offsets import Day, MonthEnd&gt;&gt;&gt; now = datetime(2011, 11, 17)&gt;&gt;&gt; now + 3 * Day()Timestamp(&#39;2011-11-20 00:00:00&#39;)</code></pre><p>å¦‚æœåŠ çš„æ˜¯é”šç‚¹åç§»é‡ï¼Œæ¯”å¦‚ MonthEndï¼Œç¬¬ä¸€æ¬¡å¢é‡ä¼šå°†åŸæ—¥æœŸå‘å‰æ»šåŠ¨åˆ°ç¬¦åˆé¢‘ç‡è§„åˆ™çš„ä¸‹ä¸€ä¸ªæ—¥æœŸï¼š</p><pre><code class="python">&gt;&gt;&gt; from pandas.tseries.offsets import Day, MonthEnd&gt;&gt;&gt; now = datetime(2011, 11, 17)&gt;&gt;&gt; now + MonthEnd()Timestamp(&#39;2011-11-30 00:00:00&#39;)&gt;&gt;&gt; now + MonthEnd(2)Timestamp(&#39;2011-12-31 00:00:00&#39;)</code></pre><p>é€šè¿‡é”šç‚¹åç§»é‡çš„ rollforward å’Œ rollback æ–¹æ³•ï¼Œå¯æ˜ç¡®åœ°å°†æ—¥æœŸå‘å‰æˆ–å‘åæ»šåŠ¨ï¼š</p><pre><code class="python">&gt;&gt;&gt; from pandas.tseries.offsets import Day, MonthEnd&gt;&gt;&gt; now = datetime(2011, 11, 17)&gt;&gt;&gt; offset = MonthEnd()&gt;&gt;&gt; offset.rollforward(now)Timestamp(&#39;2011-11-30 00:00:00&#39;)&gt;&gt;&gt; offset.rollback(now)Timestamp(&#39;2011-10-31 00:00:00&#39;)</code></pre><p>ä¸ <code>groupby</code> æ–¹æ³•ç»“åˆä½¿ç”¨ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; from pandas.tseries.offsets import Day, MonthEnd&gt;&gt;&gt; obj = pd.Series(np.random.randn(20),            index=pd.date_range(&#39;1/15/2000&#39;, periods=20, freq=&#39;4d&#39;))&gt;&gt;&gt; obj2000-01-15   -0.5917292000-01-19   -0.7758442000-01-23   -0.7456032000-01-27   -0.0764392000-01-31    1.7964172000-02-04   -0.5003492000-02-08    0.5158512000-02-12   -0.3441712000-02-16    0.4196572000-02-20    0.3072882000-02-24    0.1151132000-02-28   -0.3625852000-03-03    1.0748922000-03-07    1.1113662000-03-11    0.9499102000-03-15   -1.5357272000-03-19    0.5459442000-03-23   -0.8101392000-03-27   -1.2606272000-03-31   -0.128403Freq: 4D, dtype: float64&gt;&gt;&gt;&gt;&gt;&gt; offset = MonthEnd()&gt;&gt;&gt; obj.groupby(offset.rollforward).mean()2000-01-31   -0.0786402000-02-29    0.0215432000-03-31   -0.006598dtype: float64</code></pre><h3 id="ã€02x07ã€‘æ—¶åŒºå¤„ç†"><a href="#ã€02x07ã€‘æ—¶åŒºå¤„ç†" class="headerlink" title="ã€02x07ã€‘æ—¶åŒºå¤„ç†"></a><font color=#4876FF>ã€02x07ã€‘æ—¶åŒºå¤„ç†</font></h3><p>åœ¨ Python ä¸­ï¼Œæ—¶åŒºä¿¡æ¯æ¥è‡ªç¬¬ä¸‰æ–¹åº“ pytzï¼Œä½¿ç”¨ <code>pytz.common_timezones</code> æ–¹æ³•å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„æ—¶åŒºåç§°ï¼Œä½¿ç”¨ <code>pytz.timezone</code> æ–¹æ³•ä» pytz ä¸­è·å–æ—¶åŒºå¯¹è±¡ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pytz&gt;&gt;&gt; pytz.common_timezones[&#39;Africa/Abidjan&#39;, &#39;Africa/Accra&#39;, &#39;Africa/Addis_Ababa&#39;, ..., &#39;UTC&#39;]&gt;&gt;&gt;&gt;&gt;&gt; tz = pytz.timezone(&#39;Asia/Shanghai&#39;)&gt;&gt;&gt; tz&lt;DstTzInfo &#39;Asia/Shanghai&#39; LMT+8:06:00 STD&gt;  # è¡¨ç¤ºä¸ UTC æ—¶é—´ç›¸å·®8å°æ—¶6åˆ†</code></pre><p>åœ¨ <code>date_range</code> æ–¹æ³•ä¸­ï¼Œ<code>tz</code> å‚æ•°ç”¨äºæŒ‡å®šæ—¶åŒºï¼Œé»˜è®¤ä¸º Noneï¼Œå¯ä»¥ä½¿ç”¨ <code>tz_localize</code> æ–¹æ³•å°†å…¶è¿›è¡Œæœ¬åœ°åŒ–æ—¶åŒºè½¬æ¢ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œå°†æ— æ—¶åŒºè½¬æœ¬åœ°åŒ– UTC æ—¶åŒºï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; rng = pd.date_range(&#39;3/9/2012 9:30&#39;, periods=6, freq=&#39;D&#39;)&gt;&gt;&gt; ts = pd.Series(np.random.randn(len(rng)), index=rng)&gt;&gt;&gt; ts2012-03-09 09:30:00   -1.5279132012-03-10 09:30:00   -1.1161012012-03-11 09:30:00    0.3593582012-03-12 09:30:00   -0.4759202012-03-13 09:30:00   -0.3365702012-03-14 09:30:00   -1.075952Freq: D, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; print(ts.index.tz)None&gt;&gt;&gt; &gt;&gt;&gt; ts_utc = ts.tz_localize(&#39;UTC&#39;)&gt;&gt;&gt; ts_utc2012-03-09 09:30:00+00:00   -1.5279132012-03-10 09:30:00+00:00   -1.1161012012-03-11 09:30:00+00:00    0.3593582012-03-12 09:30:00+00:00   -0.4759202012-03-13 09:30:00+00:00   -0.3365702012-03-14 09:30:00+00:00   -1.075952Freq: D, dtype: float64&gt;&gt;&gt;&gt;&gt;&gt; ts_utc.indexDatetimeIndex([&#39;2012-03-09 09:30:00+00:00&#39;, &#39;2012-03-10 09:30:00+00:00&#39;,               &#39;2012-03-11 09:30:00+00:00&#39;, &#39;2012-03-12 09:30:00+00:00&#39;,               &#39;2012-03-13 09:30:00+00:00&#39;, &#39;2012-03-14 09:30:00+00:00&#39;],              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;D&#39;)</code></pre><p>æ—¶é—´åºåˆ—è¢«æœ¬åœ°åŒ–åˆ°æŸä¸ªç‰¹å®šæ—¶åŒºåï¼Œå°±å¯ä»¥ç”¨ <code>tz_convert</code> æ–¹æ³•å°†å…¶è½¬æ¢åˆ°åˆ«çš„æ—¶åŒºäº†ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; rng = pd.date_range(&#39;3/9/2012 9:30&#39;, periods=6, freq=&#39;D&#39;)&gt;&gt;&gt; ts = pd.Series(np.random.randn(len(rng)), index=rng)&gt;&gt;&gt; ts2012-03-09 09:30:00    0.4803032012-03-10 09:30:00   -1.4610392012-03-11 09:30:00   -1.5127492012-03-12 09:30:00   -2.1854212012-03-13 09:30:00    1.6578452012-03-14 09:30:00    0.175633Freq: D, dtype: float64&gt;&gt;&gt;&gt;&gt;&gt; ts.tz_localize(&#39;UTC&#39;).tz_convert(&#39;Asia/Shanghai&#39;)2012-03-09 17:30:00+08:00    0.4803032012-03-10 17:30:00+08:00   -1.4610392012-03-11 17:30:00+08:00   -1.5127492012-03-12 17:30:00+08:00   -2.1854212012-03-13 17:30:00+08:00    1.6578452012-03-14 17:30:00+08:00    0.175633Freq: D, dtype: float64</code></pre><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/106947061æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr><h2 id="ã€03x00ã€‘period-å›ºå®šæ—¶æœŸ"><a href="#ã€03x00ã€‘period-å›ºå®šæ—¶æœŸ" class="headerlink" title="ã€03x00ã€‘period å›ºå®šæ—¶æœŸ"></a><font color=#FF0000>ã€03x00ã€‘period å›ºå®šæ—¶æœŸ</font></h2><h3 id="ã€03x01ã€‘pandas-Period"><a href="#ã€03x01ã€‘pandas-Period" class="headerlink" title="ã€03x01ã€‘pandas.Period"></a><font color=#4876FF>ã€03x01ã€‘pandas.Period</font></h3><p>å›ºå®šæ—¶æœŸï¼ˆperiodï¼‰è¡¨ç¤ºçš„æ˜¯æ—¶é—´åŒºé—´ï¼Œæ¯”å¦‚æ•°æ—¥ã€æ•°æœˆã€æ•°å­£ã€æ•°å¹´ç­‰ã€‚Period ç±»æ‰€è¡¨ç¤ºçš„å°±æ˜¯è¿™ç§æ•°æ®ç±»å‹ï¼Œå…¶æ„é€ å‡½æ•°éœ€è¦ç”¨åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•´æ•°ã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">class pandas.Period(value=None, freq=None, ordinal=None,                     year=None, month=None, quarter=None,                     day=None, hour=None, minute=None, second=None)</code></pre><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.Period.html">https://pandas.pydata.org/docs/reference/api/pandas.Period.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>value</td><td>æ—¶é—´æ®µ</td></tr><tr><td>freq</td><td>æ—¶é—´æˆ³å°†å…·æœ‰çš„åç§»é‡ï¼Œå¯ä»¥æ˜¯ strï¼Œæ—¥æœŸåç§»é‡ç±»å‹ï¼Œå–å€¼å‚è§<a href="#t4">ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</a></td></tr></tbody></table><p>ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼ŒPeriod å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä»2020å¹´1æœˆ1æ—¥åˆ°2020å¹´12æœˆ31æ—¥ä¹‹é—´çš„æ•´æ®µæ—¶é—´</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Period(2020, freq=&#39;A-DEC&#39;)Period(&#39;2020&#39;, &#39;A-DEC&#39;)</code></pre><p>åˆ©ç”¨åŠ å‡æ³•å¯¹å…¶æŒ‰ç…§é¢‘ç‡è¿›è¡Œä½ç§»ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.Period(2020, freq=&#39;A-DEC&#39;)&gt;&gt;&gt; objPeriod(&#39;2020&#39;, &#39;A-DEC&#39;)&gt;&gt;&gt; &gt;&gt;&gt; obj + 5Period(&#39;2025&#39;, &#39;A-DEC&#39;)&gt;&gt;&gt; &gt;&gt;&gt; obj - 5Period(&#39;2015&#39;, &#39;A-DEC&#39;)</code></pre><p>PeriodIndex ç±»ä¿å­˜äº†ä¸€ç»„ Periodï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½• pandas æ•°æ®ç»“æ„ä¸­è¢«ç”¨ä½œè½´ç´¢å¼•ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; rng = [pd.Period(&#39;2000-01&#39;), pd.Period(&#39;2000-02&#39;), pd.Period(&#39;2000-03&#39;),            pd.Period(&#39;2000-04&#39;), pd.Period(&#39;2000-05&#39;), pd.Period(&#39;2000-06&#39;)]&gt;&gt;&gt; obj = pd.Series(np.random.randn(6), index=rng)&gt;&gt;&gt; obj2000-01    0.2290922000-02    1.5154982000-03   -0.3344012000-04   -0.4926812000-05   -2.0128182000-06    0.338804Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; obj.indexPeriodIndex([&#39;2000-01&#39;, &#39;2000-02&#39;, &#39;2000-03&#39;, &#39;2000-04&#39;, &#39;2000-05&#39;, &#39;2000-06&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</code></pre><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; values = [&#39;2001Q3&#39;, &#39;2002Q2&#39;, &#39;2003Q1&#39;]&gt;&gt;&gt; index = pd.PeriodIndex(values, freq=&#39;Q-DEC&#39;)&gt;&gt;&gt; indexPeriodIndex([&#39;2001Q3&#39;, &#39;2002Q2&#39;, &#39;2003Q1&#39;], dtype=&#39;period[Q-DEC]&#39;, freq=&#39;Q-DEC&#39;)&gt;&gt;&gt; </code></pre><h3 id="ã€03x02ã€‘period-range"><a href="#ã€03x02ã€‘period-range" class="headerlink" title="ã€03x02ã€‘period_range"></a><font color=#4876FF>ã€03x02ã€‘period_range</font></h3><p><code>pandas.period_range</code> æ–¹æ³•å¯æ ¹æ®æŒ‡å®šçš„é¢‘ç‡ç”ŸæˆæŒ‡å®šé•¿åº¦çš„ PeriodIndexã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š</p><p><code>pandas.period_range(start=None, end=None, periods=None, freq=None, name=None) â†’ pandas.core.indexes.period.PeriodIndex</code></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.period_range.html">https://pandas.pydata.org/docs/reference/api/pandas.period_range.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>start</td><td>èµ·å§‹æ—¥æœŸ</td></tr><tr><td>end</td><td>ç»“æŸæ—¥æœŸ</td></tr><tr><td>periods</td><td>è¦ç”Ÿæˆçš„æ—¶æ®µæ•°</td></tr><tr><td>freq</td><td>æ—¶é—´æˆ³å°†å…·æœ‰çš„åç§»é‡ï¼Œå¯ä»¥æ˜¯ strï¼Œæ—¥æœŸåç§»é‡ç±»å‹ï¼Œå–å€¼å‚è§<a href="#t4">ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</a></td></tr><tr><td>name</td><td>ç»“æœ PeriodIndex å¯¹è±¡åç§°</td></tr></tbody></table><p>ç®€å•åº”ç”¨ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.period_range(start=&#39;2019-01-01&#39;, end=&#39;2020-01-01&#39;, freq=&#39;M&#39;)PeriodIndex([&#39;2019-01&#39;, &#39;2019-02&#39;, &#39;2019-03&#39;, &#39;2019-04&#39;, &#39;2019-05&#39;, &#39;2019-06&#39;,             &#39;2019-07&#39;, &#39;2019-08&#39;, &#39;2019-09&#39;, &#39;2019-10&#39;, &#39;2019-11&#39;, &#39;2019-12&#39;,             &#39;2020-01&#39;],            dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)&gt;&gt;&gt;&gt;&gt;&gt; pd.period_range(start=pd.Period(&#39;2017Q1&#39;, freq=&#39;Q&#39;),                    end=pd.Period(&#39;2017Q2&#39;, freq=&#39;Q&#39;), freq=&#39;M&#39;)PeriodIndex([&#39;2017-03&#39;, &#39;2017-04&#39;, &#39;2017-05&#39;, &#39;2017-06&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</code></pre><h3 id="ã€03x03ã€‘asfreq-æ—¶æœŸé¢‘ç‡è½¬æ¢"><a href="#ã€03x03ã€‘asfreq-æ—¶æœŸé¢‘ç‡è½¬æ¢" class="headerlink" title="ã€03x03ã€‘asfreq æ—¶æœŸé¢‘ç‡è½¬æ¢"></a><font color=#4876FF>ã€03x03ã€‘asfreq æ—¶æœŸé¢‘ç‡è½¬æ¢</font></h3><p>Period å’Œ PeriodIndex å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡ asfreq æ–¹æ³•è¢«è½¬æ¢æˆåˆ«çš„é¢‘ç‡ã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š<code>PeriodIndex.asfreq(self, *args, **kwargs)</code></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>freq</td><td>æ–°çš„é¢‘ç‡ï¼ˆåç§»é‡ï¼‰ï¼Œå–å€¼å‚è§<a href="#t4">ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</a></td></tr><tr><td>how</td><td>æŒ‰ç…§å¼€å§‹æˆ–è€…ç»“æŸå¯¹é½ï¼Œ<code>&#39;E&#39;</code> or <code>&#39;END&#39;</code> or <code>&#39;FINISH&#39;</code>ï¼›<code>&#39;S&#39;</code> or <code>&#39;START&#39;</code> or <code>&#39;BEGIN&#39;</code></td></tr></tbody></table><p>åº”ç”¨ç¤ºä¾‹ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pidx = pd.period_range(&#39;2010-01-01&#39;, &#39;2015-01-01&#39;, freq=&#39;A&#39;)&gt;&gt;&gt; pidxPeriodIndex([&#39;2010&#39;, &#39;2011&#39;, &#39;2012&#39;, &#39;2013&#39;, &#39;2014&#39;, &#39;2015&#39;], dtype=&#39;period[A-DEC]&#39;, freq=&#39;A-DEC&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pidx.asfreq(&#39;M&#39;)PeriodIndex([&#39;2010-12&#39;, &#39;2011-12&#39;, &#39;2012-12&#39;, &#39;2013-12&#39;, &#39;2014-12&#39;, &#39;2015-12&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pidx.asfreq(&#39;M&#39;, how=&#39;S&#39;)PeriodIndex([&#39;2010-01&#39;, &#39;2011-01&#39;, &#39;2012-01&#39;, &#39;2013-01&#39;, &#39;2014-01&#39;, &#39;2015-01&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</code></pre><h3 id="ã€03x04ã€‘to-period-ä¸-to-timestamp"><a href="#ã€03x04ã€‘to-period-ä¸-to-timestamp" class="headerlink" title="ã€03x04ã€‘to_period ä¸ to_timestamp()"></a><font color=#4876FF>ã€03x04ã€‘to_period ä¸ to_timestamp()</font></h3><p><code>to_period</code> æ–¹æ³•å¯ä»¥å°† Timestampï¼ˆæ—¶é—´æˆ³ï¼‰ è½¬æ¢ä¸º Periodï¼ˆå›ºå®šæ—¶æœŸï¼‰ï¼›</p><p><code>to_timestamp</code> æ–¹æ³•å¯ä»¥å°† Periodï¼ˆå›ºå®šæ—¶æœŸï¼‰è½¬æ¢ä¸º Timestampï¼ˆæ—¶é—´æˆ³ï¼‰ ã€‚</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; rng = pd.date_range(&#39;2000-01-01&#39;, periods=3, freq=&#39;M&#39;)&gt;&gt;&gt; ts = pd.Series(np.random.randn(3), index=rng)&gt;&gt;&gt; ts2000-01-31    0.2207592000-02-29   -0.1082212000-03-31    0.819433Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; pts = ts.to_period()&gt;&gt;&gt; pts2000-01    0.2207592000-02   -0.1082212000-03    0.819433Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; pts2 = pts.to_timestamp()&gt;&gt;&gt; pts22000-01-01    0.2207592000-02-01   -0.1082212000-03-01    0.819433Freq: MS, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; ts.indexDatetimeIndex([&#39;2000-01-31&#39;, &#39;2000-02-29&#39;, &#39;2000-03-31&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;M&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pts.indexPeriodIndex([&#39;2000-01&#39;, &#39;2000-02&#39;, &#39;2000-03&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pts2.indexDatetimeIndex([&#39;2000-01-01&#39;, &#39;2000-02-01&#39;, &#39;2000-03-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;MS&#39;)</code></pre><h2 id="ã€04x00ã€‘timedelta-æ—¶é—´é—´éš”"><a href="#ã€04x00ã€‘timedelta-æ—¶é—´é—´éš”" class="headerlink" title="ã€04x00ã€‘timedelta æ—¶é—´é—´éš”"></a><font color=#FF0000>ã€04x00ã€‘timedelta æ—¶é—´é—´éš”</font></h2><h3 id="ã€04x01ã€‘pandas-Timedelta"><a href="#ã€04x01ã€‘pandas-Timedelta" class="headerlink" title="ã€04x01ã€‘pandas.Timedelta"></a><font color=#4876FF>ã€04x01ã€‘pandas.Timedelta</font></h3><p>Timedelta è¡¨ç¤ºæŒç»­æ—¶é—´ï¼Œå³ä¸¤ä¸ªæ—¥æœŸæˆ–æ—¶é—´ä¹‹é—´çš„å·®ã€‚</p><p>Timedelta ç›¸å½“äº Python çš„ datetime.timedeltaï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸¤è€…å¯ä»¥äº’æ¢ã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š<code>class pandas.Timedelta(value=&lt;object object&gt;, unit=None, **kwargs)</code></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.Timedelta.html">https://pandas.pydata.org/docs/reference/api/pandas.Timedelta.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>value</td><td>ä¼ å…¥çš„å€¼ï¼Œå¯ä»¥æ˜¯ Timedeltaï¼Œtimedeltaï¼Œnp.timedelta64ï¼Œstring æˆ– integer å¯¹è±¡</td></tr><tr><td>unit</td><td>ç”¨äºè®¾ç½® value çš„å•ä½ï¼Œå…·ä½“å–å€¼å‚è§å®˜æ–¹æ–‡æ¡£</td></tr></tbody></table><p>è¡¨ç¤ºä¸¤ä¸ª datetime å¯¹è±¡ä¹‹é—´çš„æ—¶é—´å·®ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.to_datetime(&#39;2020-6-24&#39;) - pd.to_datetime(&#39;2016-1-1&#39;)Timedelta(&#39;1636 days 00:00:00&#39;)</code></pre><p>é€šè¿‡å­—ç¬¦ä¸²ä¼ é€’å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Timedelta(&#39;3 days 3 hours 3 minutes 30 seconds&#39;)Timedelta(&#39;3 days 03:03:30&#39;)</code></pre><p>é€šè¿‡æ•´æ•°ä¼ é€’å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.Timedelta(5,unit=&#39;h&#39;)Timedelta(&#39;0 days 05:00:00&#39;)</code></pre><p>è·å–å±æ€§ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; obj = pd.Timedelta(&#39;3 days 3 hours 3 minutes 30 seconds&#39;)&gt;&gt;&gt; objTimedelta(&#39;3 days 03:03:30&#39;)&gt;&gt;&gt; &gt;&gt;&gt; obj.days3&gt;&gt;&gt; obj.seconds11010</code></pre><h3 id="ã€04x02ã€‘to-timedelta"><a href="#ã€04x02ã€‘to-timedelta" class="headerlink" title="ã€04x02ã€‘to_timedelta"></a><font color=#4876FF>ã€04x02ã€‘to_timedelta</font></h3><p>to_timedelta æ–¹æ³•å¯ä»¥å°†ä¼ å…¥çš„å¯¹è±¡è½¬æ¢æˆ timedelta å¯¹è±¡ã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š<code>pandas.to_timedelta(arg, unit=&#39;ns&#39;, errors=&#39;raise&#39;)</code></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.to_timedelta.html">https://pandas.pydata.org/docs/reference/api/pandas.to_timedelta.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>arg</td><td>è¦è½¬æ¢ä¸º timedelta çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ strï¼Œtimedeltaï¼Œlist-like æˆ– Series å¯¹è±¡</td></tr><tr><td>unit</td><td>ç”¨äºè®¾ç½® arg çš„å•ä½ï¼Œå…·ä½“å–å€¼å‚è§å®˜æ–¹æ–‡æ¡£</td></tr><tr><td>errors</td><td>å¦‚æœ arg ä¸æ»¡è¶³æ—¶é—´æˆ³çš„å½¢å¼ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿå¼‚å¸¸<br><code>ignore</code>ï¼šä¸å¼•å‘å¼‚å¸¸ï¼Œè¿”å›åŸå§‹è¾“å…¥ï¼›<code>raise</code>ï¼šæ— æ•ˆè§£æå°†å¼•å‘å¼‚å¸¸ï¼ˆé»˜è®¤ï¼‰ï¼›<code>coerce</code>ï¼šæ— æ•ˆè§£æå°†è¢«è®¾ç½®ä¸ºNaT</td></tr></tbody></table><p>å°†å•ä¸ªå­—ç¬¦ä¸²è§£æä¸º timedelta å¯¹è±¡ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.to_timedelta(&#39;1 days 06:05:01.00003&#39;)Timedelta(&#39;1 days 06:05:01.000030&#39;)&gt;&gt;&gt;&gt;&gt;&gt; pd.to_timedelta(&#39;15.5us&#39;)Timedelta(&#39;0 days 00:00:00.000015&#39;)</code></pre><p>å°†å­—ç¬¦ä¸²åˆ—è¡¨æˆ–æ•°ç»„è§£æä¸º  timedelta å¯¹è±¡ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.to_timedelta([&#39;1 days 06:05:01.00003&#39;, &#39;15.5us&#39;, &#39;nan&#39;])TimedeltaIndex([&#39;1 days 06:05:01.000030&#39;, &#39;0 days 00:00:00.000015&#39;, NaT], dtype=&#39;timedelta64[ns]&#39;, freq=None)</code></pre><p>æŒ‡å®š <code>unit</code> å‚æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.to_timedelta(np.arange(5), unit=&#39;s&#39;)TimedeltaIndex([&#39;00:00:00&#39;, &#39;00:00:01&#39;, &#39;00:00:02&#39;, &#39;00:00:03&#39;, &#39;00:00:04&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=None)&gt;&gt;&gt; &gt;&gt;&gt; pd.to_timedelta(np.arange(5), unit=&#39;d&#39;)TimedeltaIndex([&#39;0 days&#39;, &#39;1 days&#39;, &#39;2 days&#39;, &#39;3 days&#39;, &#39;4 days&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=None)</code></pre><h3 id="ã€04x03ã€‘timedelta-range"><a href="#ã€04x03ã€‘timedelta-range" class="headerlink" title="ã€04x03ã€‘timedelta_range"></a><font color=#4876FF>ã€04x03ã€‘timedelta_range</font></h3><p><code>timedelta_range</code> æ–¹æ³•å¯æ ¹æ®æŒ‡å®šçš„é¢‘ç‡ç”ŸæˆæŒ‡å®šé•¿åº¦çš„ TimedeltaIndexã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">pandas.timedelta_range(start=None, end=None, periods=None,                       freq=None, name=None, closed=None) â†’ pandas.core.indexes.timedeltas.TimedeltaIndex</code></pre><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/docs/reference/api/pandas.timedelta_range.html">https://pandas.pydata.org/docs/reference/api/pandas.timedelta_range.html</a></p><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>start</td><td>å¼€å§‹æ—¥æœŸ</td></tr><tr><td>end</td><td>ç»“æŸæ—¥æœŸ</td></tr><tr><td>periods</td><td>int ç±»å‹ï¼Œè¦ç”Ÿæˆçš„æ—¶æ®µæ•°</td></tr><tr><td>freq</td><td>é¢‘ç‡å­—ç¬¦ä¸²ï¼Œå³æŒ‰ç…§æŸç§ç‰¹å®šçš„é¢‘ç‡æ¥ç”Ÿæˆæ—¥æœŸï¼Œå–å€¼å‚è§<a href="#t4">ã€02x02ã€‘freq é¢‘ç‡éƒ¨åˆ†å–å€¼</a></td></tr><tr><td>name</td><td>ç»“æœ TimedeltaIndex çš„åç§°</td></tr><tr><td>closed</td><td><code>None</code>ï¼šé»˜è®¤å€¼ï¼ŒåŒæ—¶ä¿ç•™å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ<br><code>&#39;left&#39;</code>ï¼šä¿ç•™å¼€å§‹æ—¥æœŸï¼Œä¸ä¿ç•™ç»“æŸæ—¥æœŸ<br><code>&#39;right&#39;</code>ï¼šä¿ç•™ç»“æŸæ—¥æœŸï¼Œä¸ä¿ç•™å¼€å§‹æ—¥æœŸ</td></tr></tbody></table><p>åº”ç”¨ç¤ºä¾‹ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.timedelta_range(start=&#39;1 day&#39;, periods=4)TimedeltaIndex([&#39;1 days&#39;, &#39;2 days&#39;, &#39;3 days&#39;, &#39;4 days&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=&#39;D&#39;)</code></pre><p>closed å‚æ•°æŒ‡å®šä¿ç•™å“ªä¸ªç«¯ç‚¹ã€‚é»˜è®¤ä¿ç•™ä¸¤ä¸ªç«¯ç‚¹ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.timedelta_range(start=&#39;1 day&#39;, periods=4, closed=&#39;right&#39;)TimedeltaIndex([&#39;2 days&#39;, &#39;3 days&#39;, &#39;4 days&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=&#39;D&#39;)</code></pre><p>freq å‚æ•°æŒ‡å®š TimedeltaIndex çš„é¢‘ç‡ã€‚åªæ¥å—å›ºå®šé¢‘ç‡ï¼Œéå›ºå®šé¢‘ç‡å¦‚ <code>&#39;M&#39;</code> å°†ä¼šæŠ¥é”™ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; pd.timedelta_range(start=&#39;1 day&#39;, end=&#39;2 days&#39;, freq=&#39;6H&#39;)TimedeltaIndex([&#39;1 days 00:00:00&#39;, &#39;1 days 06:00:00&#39;, &#39;1 days 12:00:00&#39;,                &#39;1 days 18:00:00&#39;, &#39;2 days 00:00:00&#39;],               dtype=&#39;timedelta64[ns]&#39;, freq=&#39;6H&#39;)&gt;&gt;&gt; &gt;&gt;&gt; pd.timedelta_range(start=&#39;1 day&#39;, end=&#39;2 days&#39;, freq=&#39;M&#39;)Traceback (most recent call last):...ValueError: &lt;MonthEnd&gt; is a non-fixed frequency</code></pre><h2 id="ã€05x00ã€‘é‡é‡‡æ ·åŠé¢‘ç‡è½¬æ¢"><a href="#ã€05x00ã€‘é‡é‡‡æ ·åŠé¢‘ç‡è½¬æ¢" class="headerlink" title="ã€05x00ã€‘é‡é‡‡æ ·åŠé¢‘ç‡è½¬æ¢"></a><font color=#FF0000>ã€05x00ã€‘é‡é‡‡æ ·åŠé¢‘ç‡è½¬æ¢</font></h2><p>é‡é‡‡æ ·ï¼ˆresamplingï¼‰æŒ‡çš„æ˜¯å°†æ—¶é—´åºåˆ—ä»ä¸€ä¸ªé¢‘ç‡è½¬æ¢åˆ°å¦ä¸€ä¸ªé¢‘ç‡çš„å¤„ç†è¿‡ç¨‹ã€‚å°†é«˜é¢‘ç‡æ•°æ®èšåˆåˆ°ä½é¢‘ç‡ç§°ä¸ºé™é‡‡æ ·ï¼ˆdownsamplingï¼‰ï¼Œè€Œå°†ä½é¢‘ç‡æ•°æ®è½¬æ¢åˆ°é«˜é¢‘ç‡åˆ™ç§°ä¸ºå‡é‡‡æ ·ï¼ˆupsamplingï¼‰ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„é‡é‡‡æ ·éƒ½èƒ½è¢«åˆ’åˆ†åˆ°è¿™ä¸¤ä¸ªå¤§ç±»ä¸­ã€‚ä¾‹å¦‚ï¼Œå°† W-WEDï¼ˆæ¯å‘¨ä¸‰ï¼‰è½¬æ¢ä¸º W-FRI æ—¢ä¸æ˜¯é™é‡‡æ ·ä¹Ÿä¸æ˜¯å‡é‡‡æ ·ã€‚</p><p>Pandas ä¸­æä¾›äº† resample æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å®ç°é‡é‡‡æ ·ã€‚Pandas å¯¹è±¡éƒ½å¸¦æœ‰ä¸€ä¸ª resample æ–¹æ³•ï¼Œå®ƒæ˜¯å„ç§é¢‘ç‡è½¬æ¢å·¥ä½œçš„ä¸»åŠ›å‡½æ•°ã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼š</p><pre><code class="python">Series.resample(self, rule, axis=0,                 closed: Union[str, NoneType] = None,                 label: Union[str, NoneType] = None,                 convention: str = &#39;start&#39;,                 kind: Union[str, NoneType] = None,                 loffset=None, base: int = 0,                 on=None, level=None)</code></pre><pre><code class="python">DataFrame.resample(self, rule, axis=0,                    closed: Union[str, NoneType] = None,                    label: Union[str, NoneType] = None,                    convention: str = &#39;start&#39;,                    kind: Union[str, NoneType] = None,                    loffset=None, base: int = 0,                    on=None, level=None)</code></pre><p>å¸¸ç”¨å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>rule</td><td></td></tr><tr><td>axis</td><td>é‡é‡‡æ ·çš„è½´ï¼Œé»˜è®¤ 0</td></tr><tr><td>closed</td><td>åœ¨é‡é‡‡æ ·ä¸­ï¼Œå„æ—¶é—´æ®µçš„å“ªä¸€ç«¯æ˜¯é—­åˆï¼ˆå³åŒ…å«ï¼‰çš„ï¼Œ<br>é™¤ <code>&#39;M&#39;</code>ã€<code>&#39;A&#39;</code>ã€<code>&#39;Q&#39;</code>ã€<code>&#39;BM&#39;</code>ã€<code>&#39;BA&#39;</code>ã€<code>&#39;BQ&#39;</code> å’Œ <code>&#39;W&#39;</code> é»˜è®¤å€¼ä¸º â€˜rightâ€™ å¤–ï¼Œå…¶ä»–é»˜è®¤å€¼ä¸º â€˜leftâ€˜</td></tr><tr><td>label</td><td>åœ¨é‡é‡‡æ ·ä¸­ï¼Œå¦‚ä½•è®¾ç½®èšåˆå€¼çš„æ ‡ç­¾ï¼Œ right æˆ– leftï¼Œé»˜è®¤ä¸º Noneï¼Œ<br>ä¾‹å¦‚ï¼Œ9:30 åˆ° 9:35 ä¹‹é—´çš„è¿™ 5 åˆ†é’Ÿä¼šè¢«æ ‡è®°ä¸º 9:30 æˆ– 9:35</td></tr><tr><td>convention</td><td>ä»…ç”¨äº PeriodIndexï¼ˆå›ºå®šæ—¶æœŸï¼‰ï¼Œå¯¹å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·ï¼Œ<code>&#39;start&#39;</code> or <code>&#39;s&#39;</code>ï¼Œ<code>&#39;end&#39;</code> or <code>&#39;e&#39;</code></td></tr><tr><td>on</td><td>å¯¹äº DataFrame å¯¹è±¡ï¼Œå¯ç”¨è¯¥å‚æ•°æŒ‡å®šé‡é‡‡æ ·åçš„æ•°æ®çš„ indexï¼ˆè¡Œç´¢å¼•ï¼‰ ä¸ºåŸæ•°æ®ä¸­çš„æŸåˆ—</td></tr><tr><td>level</td><td>å¯¹äºå…·æœ‰å±‚çº§ç´¢å¼•ï¼ˆMultiIndexï¼‰çš„ DataFrame å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å‚æ•°æ¥æŒ‡å®šéœ€è¦åœ¨å“ªä¸ªçº§åˆ«ä¸Šè¿›è¡Œé‡æ–°é‡‡æ ·</td></tr></tbody></table><p>å°†åºåˆ—é‡é‡‡æ ·åˆ°ä¸‰åˆ†é’Ÿçš„é¢‘ç‡ï¼Œå¹¶å°†æ¯ä¸ªé¢‘ç‡çš„å€¼ç›¸åŠ ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; series.resample(&#39;3T&#39;).sum()2000-01-01 00:00:00     32000-01-01 00:03:00    122000-01-01 00:06:00    21Freq: 3T, dtype: int64</code></pre><p>è®¾ç½® <code>label=&#39;right&#39;</code>ï¼Œå³æ¯ä¸ªç´¢å¼• index ä¼šä½¿ç”¨é å³ä¾§ï¼ˆè¾ƒå¤§å€¼ï¼‰çš„æ ‡ç­¾ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; series.resample(&#39;3T&#39;, label=&#39;right&#39;).sum()2000-01-01 00:03:00     32000-01-01 00:06:00    122000-01-01 00:09:00    21Freq: 3T, dtype: int64</code></pre><p>è®¾ç½® <code>closed=&#39;right&#39;</code>ï¼Œå³ç»“æœä¸­ä¼šåŒ…å«åŸæ•°æ®ä¸­æœ€å³ä¾§ï¼ˆè¾ƒå¤§ï¼‰çš„å€¼ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; series.resample(&#39;3T&#39;, label=&#39;right&#39;, closed=&#39;right&#39;).sum()2000-01-01 00:00:00     02000-01-01 00:03:00     62000-01-01 00:06:00    152000-01-01 00:09:00    15Freq: 3T, dtype: int64</code></pre><p>ä»¥ä¸‹ç¤ºä¾‹å°†åºåˆ—é‡é‡‡æ ·åˆ°30ç§’çš„é¢‘ç‡ï¼Œ<code>asfreq()[0:5]</code> ç”¨äºé€‰æ‹©å‰5è¡Œæ•°æ®ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; series.resample(&#39;30S&#39;).asfreq()[0:5]2000-01-01 00:00:00    0.02000-01-01 00:00:30    NaN2000-01-01 00:01:00    1.02000-01-01 00:01:30    NaN2000-01-01 00:02:00    2.0Freq: 30S, dtype: float64</code></pre><p>ä½¿ç”¨ <code>pad</code> æ–¹æ³•å‘åå¡«å……ç¼ºå¤±å€¼ï¼ˆNaNï¼‰ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; series.resample(&#39;30S&#39;).pad()[0:5]2000-01-01 00:00:00    02000-01-01 00:00:30    02000-01-01 00:01:00    12000-01-01 00:01:30    12000-01-01 00:02:00    2Freq: 30S, dtype: int64</code></pre><p>ä½¿ç”¨ <code>bfill</code> æ–¹æ³•å‘å‰å¡«å……ç¼ºå¤±å€¼ï¼ˆNaNï¼‰ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; series.resample(&#39;30S&#39;).bfill()[0:5]2000-01-01 00:00:00    02000-01-01 00:00:30    12000-01-01 00:01:00    12000-01-01 00:01:30    22000-01-01 00:02:00    2Freq: 30S, dtype: int64</code></pre><p>é€šè¿‡ <code>apply</code> æ–¹æ³•ä¼ é€’è‡ªå®šä¹‰å‡½æ•°ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; index = pd.date_range(&#39;1/1/2000&#39;, periods=9, freq=&#39;T&#39;)&gt;&gt;&gt; series = pd.Series(range(9), index=index)&gt;&gt;&gt; series2000-01-01 00:00:00    02000-01-01 00:01:00    12000-01-01 00:02:00    22000-01-01 00:03:00    32000-01-01 00:04:00    42000-01-01 00:05:00    52000-01-01 00:06:00    62000-01-01 00:07:00    72000-01-01 00:08:00    8Freq: T, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; def custom_resampler(array_like):    return np.sum(array_like) + 5&gt;&gt;&gt; series.resample(&#39;3T&#39;).apply(custom_resampler)2000-01-01 00:00:00     82000-01-01 00:03:00    172000-01-01 00:06:00    26Freq: 3T, dtype: int64</code></pre><p>convention å‚æ•°çš„åº”ç”¨ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; s = pd.Series([1, 2], index=pd.period_range(&#39;2012-01-01&#39;, freq=&#39;A&#39;, periods=2))&gt;&gt;&gt; s2012    12013    2Freq: A-DEC, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; s.resample(&#39;Q&#39;, convention=&#39;start&#39;).asfreq()2012Q1    1.02012Q2    NaN2012Q3    NaN2012Q4    NaN2013Q1    2.02013Q2    NaN2013Q3    NaN2013Q4    NaNFreq: Q-DEC, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; s.resample(&#39;Q&#39;, convention=&#39;end&#39;).asfreq()2012Q4    1.02013Q1    NaN2013Q2    NaN2013Q3    NaN2013Q4    2.0Freq: Q-DEC, dtype: float64</code></pre><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; q = pd.Series([1, 2, 3, 4], index=pd.period_range(&#39;2018-01-01&#39;, freq=&#39;Q&#39;, periods=4))&gt;&gt;&gt; q2018Q1    12018Q2    22018Q3    32018Q4    4Freq: Q-DEC, dtype: int64&gt;&gt;&gt; &gt;&gt;&gt; q.resample(&#39;M&#39;, convention=&#39;end&#39;).asfreq()2018-03    1.02018-04    NaN2018-05    NaN2018-06    2.02018-07    NaN2018-08    NaN2018-09    3.02018-10    NaN2018-11    NaN2018-12    4.0Freq: M, dtype: float64&gt;&gt;&gt; &gt;&gt;&gt; q.resample(&#39;M&#39;, convention=&#39;start&#39;).asfreq()2018-01    1.02018-02    NaN2018-03    NaN2018-04    2.02018-05    NaN2018-06    NaN2018-07    3.02018-08    NaN2018-09    NaN2018-10    4.02018-11    NaN2018-12    NaNFreq: M, dtype: float64</code></pre><p>å¯¹äº DataFrame å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— on æ¥æŒ‡å®šåŸæ•°æ®ä¸­çš„æŸåˆ—ä¸ºé‡é‡‡æ ·åæ•°æ®çš„è¡Œç´¢å¼•ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; d = dict(&#123;&#39;price&#39;: [10, 11, 9, 13, 14, 18, 17, 19],                &#39;volume&#39;: [50, 60, 40, 100, 50, 100, 40, 50]&#125;)&gt;&gt;&gt; df = pd.DataFrame(d)&gt;&gt;&gt; df[&#39;week_starting&#39;] = pd.date_range(&#39;01/01/2018&#39;, periods=8, freq=&#39;W&#39;)&gt;&gt;&gt; df   price  volume week_starting0     10      50    2018-01-071     11      60    2018-01-142      9      40    2018-01-213     13     100    2018-01-284     14      50    2018-02-045     18     100    2018-02-116     17      40    2018-02-187     19      50    2018-02-25&gt;&gt;&gt; &gt;&gt;&gt; df.resample(&#39;M&#39;, on=&#39;week_starting&#39;).mean()               price  volumeweek_starting               2018-01-31     10.75    62.52018-02-28     17.00    60.0</code></pre><p>å¯¹äºå…·æœ‰å±‚çº§ç´¢å¼•ï¼ˆMultiIndexï¼‰çš„ DataFrame å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— <code>level</code> æ¥æŒ‡å®šéœ€è¦åœ¨å“ªä¸ªçº§åˆ«ä¸Šè¿›è¡Œé‡æ–°é‡‡æ ·ï¼š</p><pre><code class="python">&gt;&gt;&gt; import pandas as pd&gt;&gt;&gt; days = pd.date_range(&#39;1/1/2000&#39;, periods=4, freq=&#39;D&#39;)&gt;&gt;&gt; d2 = dict(&#123;&#39;price&#39;: [10, 11, 9, 13, 14, 18, 17, 19],                  &#39;volume&#39;: [50, 60, 40, 100, 50, 100, 40, 50]&#125;)&gt;&gt;&gt; df2 = pd.DataFrame(d2, index=pd.MultiIndex.from_product([days, [&#39;morning&#39;, &#39;afternoon&#39;]]))&gt;&gt;&gt; df2                      price  volume2000-01-01 morning       10      50           afternoon     11      602000-01-02 morning        9      40           afternoon     13     1002000-01-03 morning       14      50           afternoon     18     1002000-01-04 morning       17      40           afternoon     19      50&gt;&gt;&gt; &gt;&gt;&gt; df2.resample(&#39;D&#39;, level=0).sum()            price  volume2000-01-01     21     1102000-01-02     22     1402000-01-03     32     1502000-01-04     36      90</code></pre><hr><pre><code class="yaml">è¿™é‡Œæ˜¯ä¸€æ®µé˜²çˆ¬è™«æ–‡æœ¬ï¼Œè¯·è¯»è€…å¿½ç•¥ã€‚æœ¬æ–‡åŸåˆ›é¦–å‘äº CSDNï¼Œä½œè€… TRHXã€‚åšå®¢é¦–é¡µï¼šhttps://itrhx.blog.csdn.net/æœ¬æ–‡é“¾æ¥ï¼šhttps://itrhx.blog.csdn.net/article/details/106947061æœªç»æˆæƒï¼Œç¦æ­¢è½¬è½½ï¼æ¶æ„è½¬è½½ï¼Œåæœè‡ªè´Ÿï¼å°Šé‡åŸåˆ›ï¼Œè¿œç¦»å‰½çªƒï¼</code></pre><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Pandas ç³»åˆ—æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.itbob.cn/article/025/&quot;&gt;Python æ•°æ®åˆ†æä¸‰å‰‘å®¢ä¹‹ Pandasï¼ˆä¸€ï¼‰ï¼šè®¤è¯† Pandas åŠå…¶ Seriesã€DataFrame å¯¹è±¡&lt;/a&gt;&lt;/li&gt;</summary>
      
    
    
    
    <category term="æ•°æ®åˆ†æ" scheme="https://www.itbob.cn/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Python" scheme="https://www.itbob.cn/tags/Python/"/>
    
    <category term="æ•°æ®åˆ†æ" scheme="https://www.itbob.cn/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    <category term="Pandas" scheme="https://www.itbob.cn/tags/Pandas/"/>
    
  </entry>
  
</feed>
