<!-- 
          _____                   _______                   _____          
          /\    \                 /::\    \                 /\    \         
         /::\    \               /::::\    \               /::\    \        
        /::::\    \             /::::::\    \             /::::\    \       
       /::::::\    \           /::::::::\    \           /::::::\    \      
      /:::/\:::\    \         /:::/~~\:::\    \         /:::/\:::\    \     
     /:::/__\:::\    \       /:::/    \:::\    \       /:::/__\:::\    \    
    /::::\   \:::\    \     /:::/    / \:::\    \     /::::\   \:::\    \   
   /::::::\   \:::\    \   /:::/____/   \:::\____\   /::::::\   \:::\    \  
  /:::/\:::\   \:::\ ___\ |:::|    |     |:::|    | /:::/\:::\   \:::\ ___\ 
 /:::/__\:::\   \:::|    ||:::|____|     |:::|    |/:::/__\:::\   \:::|    |
 \:::\   \:::\  /:::|____| \:::\    \   /:::/    / \:::\   \:::\  /:::|____|
  \:::\   \:::\/:::/    /   \:::\    \ /:::/    /   \:::\   \:::\/:::/    / 
   \:::\   \::::::/    /     \:::\    /:::/    /     \:::\   \::::::/    /  
    \:::\   \::::/    /       \:::\__/:::/    /       \:::\   \::::/    /   
     \:::\  /:::/    /         \::::::::/    /         \:::\  /:::/    /    
      \:::\/:::/    /           \::::::/    /           \:::\/:::/    /     
       \::::::/    /             \::::/    /             \::::::/    /      
        \::::/    /               \::/____/               \::::/    /       
         \::/____/                 ~~                      \::/____/        
          ~~                                                ~~              
                                                                            
                                WWW.ITBOB.CN
                                
                        有毛的叫程序猿，沒毛的叫程序员。
-->

<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Force https -->

    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">


<!-- Title -->
<title>Python 数据分析三剑客之 Matplotlib（十一）：最常用最有价值的 50 个图表【译文】 - BOB&#39;S BLOG</title>

<!-- Icon -->
<link rel="icon" href="/img/favicon.ico">

<!-- Fonts -->
<link rel="preload" href="//fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" as="style" onload="this.onload=null, this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="//fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"></noscript>

<!-- Font Awesome -->
<!-- https://fontawesome.dashgame.com/ -->
<!-- <link rel="stylesheet" href="https://cdn.itbob.cn/css/font-awesome@5.6.3/all.min.css"> -->
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/5.15.4/css/all.min.css">
<!-- <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css"> -->


    <!-- KaTeX -->
    <!-- //cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css -->
    <link rel="preload" href="//cdn.itbob.cn/css/katex@0.12.0/katex.min.css" as="style" onload="this.onload=null, this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="//cdn.itbob.cn/css/katex@0.12.0/katex.min.css"></noscript>


<!-- Style -->

<link rel="stylesheet" href="/styles/main.css">

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-theme-pure@1.0.1/dist/main.css"> -->

<!-- Analytics -->

    
    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement('script');
                hm.src = 'https://hm.baidu.com/hm.js?6ca34ddce088f8434f3c7509576819f2';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    


<!-- Busuanzi -->
<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
<script async src="//cdn.itbob.cn/js/busuanzi@2.3/busuanzi.pure.mini.js"></script>

<!-- Typeit -->
<!-- https://www.typeitjs.com/ -->
<script src="//unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>

<!-- Fancybox -->

    <link rel="stylesheet" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css">
    <script src="//cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"> </script>
    <script src="//cdn.itbob.cn/js/fancybox@3.5.7/fancybox.js"> </script>

<!-- <script>
  $('[data-fancybox="images"]').fancybox({//可选
    thumbs : {
      autoStart : true //缩略图
    }
  });
  $('[data-fancybox]').fancybox({//启用函数，必须
    protect: true //图片右键不能下载，可选
  });
</script> -->

<!-- Console -->
<script>
    function makeMulti (string) {
        let l = new String(string)
        l = l.substring(l.indexOf("/*") + 3, l.lastIndexOf("*/"))
        return l
    }
    let string = function () {
      /* 
          _____                   _______                   _____          
          /\    \                 /::\    \                 /\    \         
         /::\    \               /::::\    \               /::\    \        
        /::::\    \             /::::::\    \             /::::\    \       
       /::::::\    \           /::::::::\    \           /::::::\    \      
      /:::/\:::\    \         /:::/~~\:::\    \         /:::/\:::\    \     
     /:::/__\:::\    \       /:::/    \:::\    \       /:::/__\:::\    \    
    /::::\   \:::\    \     /:::/    / \:::\    \     /::::\   \:::\    \   
   /::::::\   \:::\    \   /:::/____/   \:::\____\   /::::::\   \:::\    \  
  /:::/\:::\   \:::\ ___\ |:::|    |     |:::|    | /:::/\:::\   \:::\ ___\ 
 /:::/__\:::\   \:::|    ||:::|____|     |:::|    |/:::/__\:::\   \:::|    |
 \:::\   \:::\  /:::|____| \:::\    \   /:::/    / \:::\   \:::\  /:::|____|
  \:::\   \:::\/:::/    /   \:::\    \ /:::/    /   \:::\   \:::\/:::/    / 
   \:::\   \::::::/    /     \:::\    /:::/    /     \:::\   \::::::/    /  
    \:::\   \::::/    /       \:::\__/:::/    /       \:::\   \::::/    /   
     \:::\  /:::/    /         \::::::::/    /         \:::\  /:::/    /    
      \:::\/:::/    /           \::::::/    /           \:::\/:::/    /     
       \::::::/    /             \::::/    /             \::::::/    /      
        \::::/    /               \::/____/               \::::/    /       
         \::/____/                 ~~                      \::/____/        
          ~~                                                ~~              
                                                                            
                                WWW.ITBOB.CN
                                
                        有毛的叫程序猿，沒毛的叫程序员。
      */
    }
    console.log(makeMulti(string));
    console.log("\n %c © ITBOB'S BLOG %c https://www.itbob.cn %c © ITRHX'S BLOG %c https://www.itrhx.com \n", "color: #fadfa3; background: #030307; padding:5px 0;", "background: #fadfa3; padding:5px 0;", "color: #fadfa3; background: #030307; padding:5px 0;", "background: #fadfa3; padding:5px 0;")
</script>

<!-- 51.la 网站统计 2023.12.07 接入 -->
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3GmZ0RhJYz29jEfJ",ck:"3GmZ0RhJYz29jEfJ"})</script>

    <meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="BOB'S BLOG" type="application/atom+xml">
</head>
    <body>
        <div class="main gt-bg-theme-color-first">
            <div class="main-content">
                <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="/">
        <img class="user-avatar" src="/img/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first" id="typeitspan">
            <!-- BOB&#39;S BLOG -->
        </div>
    </a>
    <!-- <span id="typeitspan"></span> -->
    <script>
        new TypeIt('#typeitspan', {
        strings: "IT.BOB",
        speed: 150, 
        afterComplete: function (instance) {
            instance.destroy();
        }
        }).go();
    </script>
    <button aria-label="Navbar Toggler" class="navbar-toggler" type="button" id="changeNavbar">
        <i class="gt-c-content-color-first" style="font-size: 18px;">
            <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512" height="18px" fill="currentColor">
                <path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z" />
            </svg>
        </i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center; ">
            
                
                    <div class="nav-item">
                        <a href="/" class="menu gt-a-link" target="_self">首页</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="/archives/" class="menu gt-a-link" target="_self">归档</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="/tags/" class="menu gt-a-link" target="_self">标签</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="/friends/" class="menu gt-a-link" target="_self">友链</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="https://spiderbox.cn/" class="menu gt-a-link" target="_blank">虫盒</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="https://spiderapi.cn/" class="menu gt-a-link" target="_blank">虫术</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="/about/" class="menu gt-a-link" target="_self">关于</a>
                    </div>
                
            
                
                    <div class="nav-item">
                        <a href="https://www.travellings.cn/go.html" target="_blank">
                            <img src="https://cdn.itbob.cn/img/travelling.gif" class="nofancybox" alt="开往-友链接力" width="auto" height="25px">
                        </a>
                    </div>
                
            
        </div>
    </div>
</nav>

<script>
    /* 移动端导航栏展开/收起切换 */
    document.getElementById('changeNavbar').onclick = function() {
        let element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else { 
            element.style.display = 'none';
        }
    }
</script>

                <div class="post-container">
    <div class="post-detail gt-bg-theme-color-second gt-c-content-color-first">
        <article class="gt-post-content">
            <h1 class="post-title">Python 数据分析三剑客之 Matplotlib（十一）：最常用最有价值的 50 个图表【译文】</h1>
            <div class="post-info">
                <time class="post-time gt-c-content-color-first">
                    <i class="fa fa-calendar-alt"></i> 首发于: 2020-06-09丨
                </time>
                <span id="busuanzi_container_page_pv">
                    <i class="fas fa-eye"></i> 阅读量: <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>丨
                </span>
                
                    <span class="post-count">
                        <i class="fa fa-keyboard"></i> 字数统计: 14.7k丨
                    </span>
                    <span class="post-count">
                        <i class="fa fa-hourglass-half"></i> 阅读时长: 78分丨
                    </span>
                
                
                    
                        <!-- <i class="fa fa-tag"></i> -->
                        <i class="fas fa-hashtag"></i>
                        <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" class="post-tag">
                            数据分析</a>
                    
                        <!-- <i class="fa fa-tag"></i> -->
                        <i class="fas fa-hashtag"></i>
                        <a href="/tags/Matplotlib/" class="post-tag">
                            Matplotlib</a>
                    
                
            </div>
            <hr>
            <div class="post-content gt-c-content-color-first">
                <h2><span id="wen-zhang-mu-lu">文章目录</span></h2>
<!-- toc -->
<ul>
<li><a href="#font-color-ff0000-1x00-jie-shao-introduction-font"><font color="#FF0000">【1x00】介绍（Introduction）</font></a></li>
<li><a href="#font-color-ff0000-2x00-zhun-bei-gong-zuo-setup-font"><font color="#FF0000">【2x00】准备工作（Setup）</font></a></li>
<li><a href="#font-color-ff0000-3x00-guan-lian-correlation-font"><font color="#FF0000">【3x00】关联（Correlation） </font></a>
<ul>
<li><a href="#font-color-4876ff-01-san-dian-tu-scatter-plot-font"><font color="##4876FF">【01】散点图（Scatter plot）</font></a></li>
<li><a href="#font-color-4876ff-02-dai-bian-jie-de-qi-pao-tu-bubble-plot-with-encircling-font"><font color="##4876FF">【02】带边界的气泡图（Bubble plot with Encircling）</font></a></li>
<li><a href="#font-color-4876ff-03-dai-xian-xing-hui-gui-zui-jia-ni-he-xian-de-san-dian-tu-scatter-plot-with-linear-regression-line-of-best-fit-font"><font color="##4876FF">【03】带线性回归最佳拟合线的散点图（Scatter plot with linear regression line of best fit）</font></a></li>
<li><a href="#font-color-4876ff-04-dou-dong-tu-jittering-with-stripplot-font"><font color="##4876FF">【04】抖动图（Jittering with stripplot）</font></a></li>
<li><a href="#font-color-4876ff-05-ji-shu-tu-counts-plot-font"><font color="##4876FF">【05】计数图（Counts Plot）</font></a></li>
<li><a href="#font-color-4876ff-06-bian-yuan-zhi-fang-tu-marginal-histogram-font"><font color="##4876FF">【06】边缘直方图（Marginal Histogram）</font></a></li>
<li><a href="#font-color-4876ff-07-bian-yuan-xiang-xing-tu-marginal-boxplot-font"><font color="##4876FF">【07】边缘箱形图（Marginal Boxplot）</font></a></li>
<li><a href="#font-color-4876ff-08-xiang-guan-tu-correllogram-font"><font color="##4876FF">【08】相关图（Correllogram）</font></a></li>
<li><a href="#font-color-4876ff-09-cheng-dui-tu-pairwise-plot-font"><font color="##4876FF">【09】成对图（Pairwise Plot）</font></a></li>
</ul>
</li>
<li><a href="#font-color-ff0000-4x00-pian-chai-deviation-font"><font color="#FF0000">【4x00】偏差（Deviation）</font></a>
<ul>
<li><a href="#font-color-4876ff-10-fa-san-xing-tiao-xing-tu-diverging-bars-font"><font color="##4876FF">【10】发散型条形图（Diverging Bars）</font></a></li>
<li><a href="#font-color-4876ff-11-fa-san-xing-wen-ben-tu-diverging-texts-font"><font color="##4876FF">【11】发散型文本图（Diverging Texts）</font></a></li>
<li><a href="#font-color-4876ff-12-fa-san-xing-san-dian-tu-diverging-dot-plot-font"><font color="##4876FF">【12】发散型散点图（Diverging Dot Plot）</font></a></li>
<li><a href="#font-color-4876ff-13-dai-biao-ji-de-fa-san-xing-bang-bang-tang-tu-diverging-lollipop-chart-with-markers-font"><font color="##4876FF">【13】带标记的发散型棒棒糖图（Diverging Lollipop Chart with Markers）</font></a></li>
<li><a href="#font-color-4876ff-14-mian-ji-tu-area-chart-font"><font color="##4876FF">【14】面积图（Area Chart）</font></a></li>
</ul>
</li>
<li><a href="#font-color-ff0000-5x00-pai-xu-ranking-font"><font color="#FF0000">【5x00】排序（Ranking）</font></a>
<ul>
<li><a href="#font-color-4876ff-15-you-xu-tiao-xing-tu-ordered-bar-chart-font"><font color="##4876FF">【15】有序条形图（Ordered Bar Chart）</font></a></li>
<li><a href="#font-color-4876ff-16-bang-bang-tang-tu-lollipop-chart-font"><font color="##4876FF">【16】棒棒糖图（Lollipop Chart）</font></a></li>
<li><a href="#font-color-4876ff-17-dian-tu-dot-plot-font"><font color="##4876FF">【17】点图（Dot Plot）</font></a></li>
<li><a href="#font-color-4876ff-18-po-du-tu-slope-chart-font"><font color="##4876FF">【18】坡度图（Slope Chart）</font></a></li>
<li><a href="#font-color-4876ff-19-ya-ling-tu-dumbbell-plot-font"><font color="##4876FF">【19】哑铃图（Dumbbell Plot）</font></a></li>
</ul>
</li>
<li><a href="#font-color-ff0000-6x00-fen-bu-distribution-font"><font color="#FF0000">【6x00】分布（Distribution）</font></a>
<ul>
<li><a href="#font-color-4876ff-20-lian-xu-bian-liang-de-zhi-fang-tu-histogram-for-continuous-variable-font"><font color="##4876FF">【20】连续变量的直方图（Histogram for Continuous Variable）</font></a></li>
<li><a href="#font-color-4876ff-21-fen-lei-bian-liang-de-zhi-fang-tu-histogram-for-categorical-variable-font"><font color="##4876FF">【21】分类变量的直方图（Histogram for Categorical Variable）</font></a></li>
<li><a href="#font-color-4876ff-22-mi-du-tu-density-plot-font"><font color="##4876FF">【22】密度图（Density Plot）</font></a></li>
<li><a href="#font-color-4876ff-23-zhi-fang-tu-mi-du-qu-xian-density-curves-with-histogram-font"><font color="##4876FF">【23】直方图密度曲线（Density Curves with Histogram）</font></a></li>
<li><a href="#font-color-4876ff-24-shan-feng-die-luan-tu-huan-le-tu-joy-plot-font"><font color="##4876FF">【24】山峰叠峦图 / 欢乐图（Joy Plot）</font></a></li>
<li><a href="#font-color-4876ff-25-fen-bu-shi-dian-tu-distributed-dot-plot-font"><font color="##4876FF">【25】分布式点图（Distributed Dot Plot）</font></a></li>
<li><a href="#font-color-4876ff-26-xiang-xing-tu-box-plot-font"><font color="##4876FF">【26】箱形图（Box Plot）</font></a></li>
<li><a href="#font-color-4876ff-27-dian-xiang-xing-tu-dot-box-plot-font"><font color="##4876FF">【27】点 + 箱形图（Dot + Box Plot）</font></a></li>
<li><a href="#font-color-4876ff-28-xiao-ti-qin-tu-violin-plot-font"><font color="##4876FF">【28】小提琴图（Violin Plot）</font></a></li>
<li><a href="#font-color-4876ff-29-ren-kou-jin-zi-ta-tu-population-pyramid-font"><font color="##4876FF">【29】人口金字塔图（Population Pyramid）</font></a></li>
<li><a href="#font-color-4876ff-30-fen-lei-tu-categorical-plots-font"><font color="##4876FF">【30】分类图（Categorical Plots）</font></a></li>
</ul>
</li>
<li><a href="#font-color-ff0000-7x00-zu-cheng-composition-font"><font color="#FF0000">【7x00】组成（Composition）</font></a>
<ul>
<li><a href="#font-color-4876ff-31-hua-fu-bing-tu-waffle-chart-font"><font color="##4876FF">【31】华夫饼图（Waffle Chart）</font></a></li>
<li><a href="#font-color-4876ff-32-bing-tu-pie-chart-font"><font color="##4876FF">【32】饼图（Pie Chart）</font></a></li>
<li><a href="#font-color-4876ff-33-ju-zhen-shu-xing-tu-treemap-font"><font color="##4876FF">【33】矩阵树形图（Treemap）</font></a></li>
<li><a href="#font-color-4876ff-34-tiao-xing-tu-bar-chart-font"><font color="##4876FF">【34】条形图（Bar Chart）</font></a></li>
</ul>
</li>
<li><a href="#font-color-ff0000-8x00-bian-hua-change-font"><font color="#FF0000">【8x00】变化（Change）</font></a>
<ul>
<li><a href="#font-color-4876ff-35-shi-jian-xu-lie-tu-time-series-plot-font"><font color="##4876FF">【35】时间序列图（Time Series Plot）</font></a></li>
<li><a href="#font-color-4876ff-36-dai-bo-feng-he-bo-gu-zhu-shi-de-shi-jian-xu-lie-tu-time-series-with-peaks-and-troughs-annotated-font"><font color="##4876FF">【36】带波峰和波谷注释的时间序列图（Time Series with Peaks and Troughs Annotated）</font></a></li>
<li><a href="#font-color-4876ff-37-zi-xiang-guan-acf-he-bu-fen-zi-xiang-guan-pacf-tu-autocorrelation-acf-and-partial-autocorrelation-pacf-plot-font"><font color="##4876FF">【37】自相关 (ACF) 和部分自相关 (PACF) 图（Autocorrelation (ACF) and Partial Autocorrelation (PACF) Plot）</font></a></li>
<li><a href="#font-color-4876ff-38-jiao-cha-xiang-guan-tu-cross-correlation-plot-font"><font color="##4876FF">【38】交叉相关图（Cross Correlation plot）</font></a></li>
<li><a href="#font-color-4876ff-39-shi-jian-xu-lie-fen-jie-tu-time-series-decomposition-plot-font"><font color="##4876FF">【39】时间序列分解图（Time Series Decomposition Plot）</font></a></li>
<li><a href="#font-color-4876ff-40-duo-chong-shi-jian-xu-lie-multiple-time-series-font"><font color="##4876FF">【40】多重时间序列（Multiple Time Series）</font></a></li>
<li><a href="#font-color-4876ff-41-shi-yong-ci-yao-de-y-zhou-lai-hui-zhi-bu-tong-fan-wei-de-tu-xing-plotting-with-different-scales-using-secondary-y-axis-font"><font color="##4876FF">【41】使用次要的 Y 轴来绘制不同范围的图形（Plotting with different scales using secondary Y axis）</font></a></li>
<li><a href="#font-color-4876ff-42-dai-wu-chai-dai-de-shi-jian-xu-lie-time-series-with-error-bands-font"><font color="##4876FF">【42】带误差带的时间序列（Time Series with Error Bands）</font></a></li>
<li><a href="#font-color-4876ff-43-dui-ji-mian-ji-tu-stacked-area-chart-font"><font color="##4876FF">【43】堆积面积图（Stacked Area Chart）</font></a></li>
<li><a href="#font-color-4876ff-44-wei-dui-ji-mian-ji-tu-area-chart-unstacked-font"><font color="##4876FF">【44】未堆积面积图（Area Chart UnStacked）</font></a></li>
<li><a href="#font-color-4876ff-45-ri-li-re-li-tu-calendar-heat-map-font"><font color="##4876FF">【45】日历热力图（Calendar Heat Map）</font></a></li>
<li><a href="#font-color-4876ff-46-ji-jie-tu-seasonal-plot-font"><font color="##4876FF">【46】季节图（Seasonal Plot）</font></a></li>
</ul>
</li>
<li><a href="#font-color-ff0000-9x00-fen-zu-groups-font"><font color="#FF0000">【9x00】分组（ Groups）</font></a>
<ul>
<li><a href="#font-color-4876ff-47-shu-zhuang-tu-dendrogram-font"><font color="##4876FF">【47】树状图（Dendrogram）</font></a></li>
<li><a href="#font-color-4876ff-48-ju-lei-tu-cluster-plot-font"><font color="##4876FF">【48】聚类图（Cluster Plot）</font></a></li>
<li><a href="#font-color-4876ff-49-an-de-lu-si-qu-xian-andrews-curve-font"><font color="##4876FF">【49】安德鲁斯曲线（Andrews Curve）</font></a></li>
<li><a href="#font-color-4876ff-50-ping-xing-zuo-biao-tu-parallel-coordinates-font"><font color="##4876FF">【50】平行坐标图（Parallel Coordinates）</font></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<hr>
<p>Matplotlib 系列文章：</p>
<ul>
<li><a href="https://www.itbob.cn/article/014/">Python 数据分析三剑客之 Matplotlib（一）：初识 Matplotlib 与其 matplotibrc 配置文件</a></li>
<li><a href="https://www.itbob.cn/article/015/">Python 数据分析三剑客之 Matplotlib（二）：文本描述 / 中文支持 / 画布 / 网格等基本图像属性</a></li>
<li><a href="https://www.itbob.cn/article/016/">Python 数据分析三剑客之 Matplotlib（三）：图例 / LaTeX / 刻度 / 子图 / 补丁等基本图像属性</a></li>
<li><a href="https://www.itbob.cn/article/017/">Python 数据分析三剑客之 Matplotlib（四）：线性图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/018/">Python 数据分析三剑客之 Matplotlib（五）：散点图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/019/">Python 数据分析三剑客之 Matplotlib（六）：直方图 / 柱状图 / 条形图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/020/">Python 数据分析三剑客之 Matplotlib（七）：饼状图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/021/">Python 数据分析三剑客之 Matplotlib（八）：等高线 / 等值线图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/022/">Python 数据分析三剑客之 Matplotlib（九）：极区图 / 极坐标图 / 雷达图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/023/">Python 数据分析三剑客之 Matplotlib（十）：3D 图的绘制</a></li>
<li><a href="https://www.itbob.cn/article/024/">Python 数据分析三剑客之 Matplotlib（十一）：最热门最常用的 50 个图表</a>【译文】</li>
</ul>
<hr>
<p>专栏：</p>
<ul>
<li>NumPy 专栏：<a target="_blank" rel="noopener" href="https://itrhx.blog.csdn.net/category_9780393.html">https://itrhx.blog.csdn.net/category_9780393.html</a></li>
<li>Pandas 专栏：<a target="_blank" rel="noopener" href="https://itrhx.blog.csdn.net/category_9780397.html">https://itrhx.blog.csdn.net/category_9780397.html</a></li>
<li>Matplotlib 专栏：<a target="_blank" rel="noopener" href="https://itrhx.blog.csdn.net/category_9780418.html">https://itrhx.blog.csdn.net/category_9780418.html</a></li>
</ul>
<br>
推荐学习资料与网站：
<br><br>
<ul>
<li>NumPy 官方中文网：<a target="_blank" rel="noopener" href="https://www.numpy.org.cn/">https://www.numpy.org.cn/</a></li>
<li>Pandas 官方中文网：<a target="_blank" rel="noopener" href="https://www.pypandas.cn/">https://www.pypandas.cn/</a></li>
<li>Matplotlib 官方中文网：<a target="_blank" rel="noopener" href="https://www.matplotlib.org.cn/">https://www.matplotlib.org.cn/</a></li>
<li>NumPy、Matplotlib、Pandas 速查表：<a target="_blank" rel="noopener" href="https://github.com/TRHX/Python-quick-reference-table">https://github.com/TRHX/Python-quick-reference-table</a></li>
</ul>
<hr>
<blockquote>
<p>翻译丨<a target="_blank" rel="noopener" href="https://itrhx.blog.csdn.net/">TRHX</a><br>
作者丨<a target="_blank" rel="noopener" href="https://www.machinelearningplus.com/author/selva86/">Selva Prabhakaran</a><br>
原文丨<a target="_blank" rel="noopener" href="https://www.machinelearningplus.com/plots/top-50-matplotlib-visualizations-the-master-plots-python/">《Top 50 matplotlib Visualizations – The Master Plots (with full python code)》</a></p>
</blockquote>
<hr>
<blockquote>
<p>★ 本文中的示例原作者使用的编辑器为 Jupyter Notebook；<br>
★ 译者使用 PyCharm 测试原文中有部分代码不太准确，部分已进行修改，对应有注释说明；<br>
★ 运行本文代码，需要安装 Matplotlib 和 Seaborn 等可视化库，其他的一些辅助可视化库已在代码部分作标注；<br>
★ 示例中用到的数据均储存在作者的 GitHub：<a target="_blank" rel="noopener" href="https://github.com/selva86/datasets">https://github.com/selva86/datasets</a>，因此运行程序可能需要FQ；<br>
★ 译者英文水平有限，若遇到翻译模糊的词建议参考原文来理解。<br>
★ 本文50个示例代码已打包为 .py 文件，可直接下载：<a target="_blank" rel="noopener" href="https://download.csdn.net/download/qq_36759224/12507219">https://download.csdn.net/download/qq_36759224/12507219</a></p>
</blockquote>
<hr>
<pre><code class="hljs yaml"><span class="hljs-string">这里是一段物理防爬虫文本，请读者忽略。</span>
<span class="hljs-string">本译文首发于</span> <span class="hljs-string">CSDN，作者</span> <span class="hljs-string">Selva</span> <span class="hljs-string">Prabhakaran，译者</span> <span class="hljs-string">TRHX。</span>
<span class="hljs-string">本文链接：https://itrhx.blog.csdn.net/article/details/106558131</span>
<span class="hljs-string">原文链接：https://www.machinelearningplus.com/plots/top-50-matplotlib-visualizations-the-master-plots-python/</span></code></pre>
<hr>
<h2><span id="1x00-jie-shao-introduction"><font color="#FF0000">【1x00】介绍（Introduction）</font></span></h2>
<p>在数据分析和可视化中最常用的、最有价值的前 50 个 Matplotlib 图表。这些图表会让你懂得在不同情况下合理使用 Python 的 Matplotlib 和 Seaborn 库来达到数据可视化效果。</p>
<p>这些图表根据可视化目标的 7 个不同情景进行分组。 例如，如果要想象两个变量之间的关系，请查看“关联”部分下的图表。 或者，如果您想要显示值如何随时间变化，请查看“变化”部分，依此类推。</p>
<p>有效图表的重要特征：</p>
<ul>
<li>在不歪曲事实的情况下传达正确和必要的信息；</li>
<li>设计简单，不必太费力就能理解它；</li>
<li>从审美角度支持信息而不是掩盖信息；</li>
<li>信息没有超负荷。</li>
</ul>
<h2><span id="2x00-zhun-bei-gong-zuo-setup"><font color="#FF0000">【2x00】准备工作（Setup）</font></span></h2>
<p>在代码运行前先引入下面的基本设置，当然，个别图表可能会重新定义显示要素。</p>
<pre><code class="hljs python"><span class="hljs-comment"># !pip install brewer2mpl</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> warnings; warnings.filterwarnings(action=<span class="hljs-string">&#x27;once&#x27;</span>)

large = <span class="hljs-number">22</span>; med = <span class="hljs-number">16</span>; small = <span class="hljs-number">12</span>
params = &#123;<span class="hljs-string">&#x27;axes.titlesize&#x27;</span>: large,
          <span class="hljs-string">&#x27;legend.fontsize&#x27;</span>: med,
          <span class="hljs-string">&#x27;figure.figsize&#x27;</span>: (<span class="hljs-number">16</span>, <span class="hljs-number">10</span>),
          <span class="hljs-string">&#x27;axes.labelsize&#x27;</span>: med,
          <span class="hljs-string">&#x27;axes.titlesize&#x27;</span>: med,
          <span class="hljs-string">&#x27;xtick.labelsize&#x27;</span>: med,
          <span class="hljs-string">&#x27;ytick.labelsize&#x27;</span>: med,
          <span class="hljs-string">&#x27;figure.titlesize&#x27;</span>: large&#125;
plt.rcParams.update(params)
plt.style.use(<span class="hljs-string">&#x27;seaborn-whitegrid&#x27;</span>)
sns.set_style(<span class="hljs-string">&quot;white&quot;</span>)
%matplotlib inline

<span class="hljs-comment"># Version</span>
<span class="hljs-built_in">print</span>(mpl.__version__)  <span class="hljs-comment">#&gt; 3.0.0</span>
<span class="hljs-built_in">print</span>(sns.__version__)  <span class="hljs-comment">#&gt; 0.9.0</span></code></pre>
<h2><span id="3x00-guan-lian-correlation"><font color="#FF0000">【3x00】关联（Correlation） </font></span></h2>
<p>关联图用于可视化两个或多个变量之间的关系。也就是说，一个变量相对于另一个变量如何变化。</p>
<h3><span id="01-san-dian-tu-scatter-plot"><font color="##4876FF">【01】散点图（Scatter plot）</font></span></h3>
<p>散点图是研究两个变量之间关系的经典和基本的绘图。如果数据中有多个组，则可能需要以不同的颜色显示每个组。在 Matplotlib 中，您可以使用 <code>plt.scatterplot()</code> 方便地执行此操作。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import dataset </span>
midwest = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data </span>
<span class="hljs-comment"># Create as many colors as there are unique midwest[&#x27;category&#x27;]</span>
categories = np.unique(midwest[<span class="hljs-string">&#x27;category&#x27;</span>])
colors = [plt.cm.tab10(i/<span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(categories)-<span class="hljs-number">1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(categories))]

<span class="hljs-comment"># Draw Plot for Each Category</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>, facecolor=<span class="hljs-string">&#x27;w&#x27;</span>, edgecolor=<span class="hljs-string">&#x27;k&#x27;</span>)

<span class="hljs-keyword">for</span> i, category <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(categories):
    plt.scatter(<span class="hljs-string">&#x27;area&#x27;</span>, <span class="hljs-string">&#x27;poptotal&#x27;</span>,
                data=midwest.loc[midwest.category==category, :],
                s=<span class="hljs-number">20</span>, cmap=colors[i], label=<span class="hljs-built_in">str</span>(category))
<span class="hljs-comment"># 原文 c=colors[i] 已修改为 cmap=colors[i]</span>

<span class="hljs-comment"># Decorations</span>
plt.gca().<span class="hljs-built_in">set</span>(xlim=(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.1</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">90000</span>),
              xlabel=<span class="hljs-string">&#x27;Area&#x27;</span>, ylabel=<span class="hljs-string">&#x27;Population&#x27;</span>)

plt.xticks(fontsize=<span class="hljs-number">12</span>); plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&quot;Scatterplot of Midwest Area vs Population&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.legend(fontsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/01.png" alt="01"></p>
<h3><span id="02-dai-bian-jie-de-qi-pao-tu-bubble-plot-with-encircling"><font color="##4876FF">【02】带边界的气泡图（Bubble plot with Encircling）</font></span></h3>
<p>有时候您想在一个边界内显示一组点来强调它们的重要性。在本例中，您将从被包围的数据中获取记录，并将其传递给下面的代码中描述的 <code>encircle()</code>。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> patches
<span class="hljs-keyword">from</span> scipy.spatial <span class="hljs-keyword">import</span> ConvexHull
<span class="hljs-keyword">import</span> warnings; warnings.simplefilter(<span class="hljs-string">&#x27;ignore&#x27;</span>)
sns.set_style(<span class="hljs-string">&quot;white&quot;</span>)

<span class="hljs-comment"># Step 1: Prepare Data</span>
midwest = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv&quot;</span>)

<span class="hljs-comment"># As many colors as there are unique midwest[&#x27;category&#x27;]</span>
categories = np.unique(midwest[<span class="hljs-string">&#x27;category&#x27;</span>])
colors = [plt.cm.tab10(i/<span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(categories)-<span class="hljs-number">1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(categories))]

<span class="hljs-comment"># Step 2: Draw Scatterplot with unique color for each category</span>
fig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">&#x27;w&#x27;</span>, edgecolor=<span class="hljs-string">&#x27;k&#x27;</span>)

<span class="hljs-keyword">for</span> i, category <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(categories):
    plt.scatter(<span class="hljs-string">&#x27;area&#x27;</span>, <span class="hljs-string">&#x27;poptotal&#x27;</span>, data=midwest.loc[midwest.category == category, :], s=<span class="hljs-string">&#x27;dot_size&#x27;</span>, cmap=colors[i], label=<span class="hljs-built_in">str</span>(category), edgecolors=<span class="hljs-string">&#x27;black&#x27;</span>, linewidths=<span class="hljs-number">.5</span>)
<span class="hljs-comment"># 原文 c=colors[i] 已修改为 cmap=colors[i]</span>

<span class="hljs-comment"># Step 3: Encircling</span>
<span class="hljs-comment"># https://stackoverflow.com/questions/44575681/how-do-i-encircle-different-data-sets-in-scatter-plot</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">encircle</span>(<span class="hljs-params">x,y, ax=<span class="hljs-literal">None</span>, **kw</span>):</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ax: ax = plt.gca()
    p = np.c_[x, y]
    hull = ConvexHull(p)
    poly = plt.Polygon(p[hull.vertices, :], **kw)
    ax.add_patch(poly)

<span class="hljs-comment"># Select data to be encircled</span>
midwest_encircle_data = midwest.loc[midwest.state==<span class="hljs-string">&#x27;IN&#x27;</span>, :]

<span class="hljs-comment"># Draw polygon surrounding vertices</span>
encircle(midwest_encircle_data.area, midwest_encircle_data.poptotal, ec=<span class="hljs-string">&quot;k&quot;</span>, fc=<span class="hljs-string">&quot;gold&quot;</span>, alpha=<span class="hljs-number">0.1</span>)
encircle(midwest_encircle_data.area, midwest_encircle_data.poptotal, ec=<span class="hljs-string">&quot;firebrick&quot;</span>, fc=<span class="hljs-string">&quot;none&quot;</span>, linewidth=<span class="hljs-number">1.5</span>)

<span class="hljs-comment"># Step 4: Decorations</span>
plt.gca().<span class="hljs-built_in">set</span>(xlim=(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.1</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">90000</span>),
              xlabel=<span class="hljs-string">&#x27;Area&#x27;</span>, ylabel=<span class="hljs-string">&#x27;Population&#x27;</span>)

plt.xticks(fontsize=<span class="hljs-number">12</span>); plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&quot;Bubble Plot with Encircling&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.legend(fontsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/02.png" alt="02"></p>
<h3><span id="03-dai-xian-xing-hui-gui-zui-jia-ni-he-xian-de-san-dian-tu-scatter-plot-with-linear-regression-line-of-best-fit"><font color="##4876FF">【03】带线性回归最佳拟合线的散点图（Scatter plot with linear regression line of best fit）</font></span></h3>
<p>如果你想了解两个变量之间是如何变化的，那么最佳拟合线就是常用的方法。下图显示了数据中不同组之间的最佳拟合线的差异。若要禁用分组并只为整个数据集绘制一条最佳拟合线，请从 <code>sns.lmplot()</code> 方法中删除 <code>hue ='cyl'</code> 参数。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv&quot;</span>)
df_select = df.loc[df.cyl.isin([<span class="hljs-number">4</span>, <span class="hljs-number">8</span>]), :]

<span class="hljs-comment"># Plot</span>
sns.set_style(<span class="hljs-string">&quot;white&quot;</span>)
gridobj = sns.lmplot(x=<span class="hljs-string">&quot;displ&quot;</span>, y=<span class="hljs-string">&quot;hwy&quot;</span>, hue=<span class="hljs-string">&quot;cyl&quot;</span>, data=df_select,
                     height=<span class="hljs-number">7</span>, aspect=<span class="hljs-number">1.6</span>, robust=<span class="hljs-literal">True</span>, palette=<span class="hljs-string">&#x27;tab10&#x27;</span>,
                     scatter_kws=<span class="hljs-built_in">dict</span>(s=<span class="hljs-number">60</span>, linewidths=<span class="hljs-number">.7</span>, edgecolors=<span class="hljs-string">&#x27;black&#x27;</span>))

<span class="hljs-comment"># Decorations</span>
gridobj.<span class="hljs-built_in">set</span>(xlim=(<span class="hljs-number">0.5</span>, <span class="hljs-number">7.5</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>))
plt.title(<span class="hljs-string">&quot;Scatterplot with line of best fit grouped by number of cylinders&quot;</span>, fontsize=<span class="hljs-number">20</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/03.png" alt="03"></p>
<p>针对每一组数据绘制线性回归线（Each regression line in its own column），可以通过在 <code>sns.lmplot()</code> 中设置 <code>col=groupingcolumn</code> 参数来实现，如下：</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv&quot;</span>)
df_select = df.loc[df.cyl.isin([<span class="hljs-number">4</span>, <span class="hljs-number">8</span>]), :]

<span class="hljs-comment"># Each line in its own column</span>
sns.set_style(<span class="hljs-string">&quot;white&quot;</span>)
gridobj = sns.lmplot(x=<span class="hljs-string">&quot;displ&quot;</span>, y=<span class="hljs-string">&quot;hwy&quot;</span>,
                     data=df_select,
                     height=<span class="hljs-number">7</span>,
                     robust=<span class="hljs-literal">True</span>,
                     palette=<span class="hljs-string">&#x27;Set1&#x27;</span>,
                     col=<span class="hljs-string">&quot;cyl&quot;</span>,
                     scatter_kws=<span class="hljs-built_in">dict</span>(s=<span class="hljs-number">60</span>, linewidths=<span class="hljs-number">.7</span>, edgecolors=<span class="hljs-string">&#x27;black&#x27;</span>))

<span class="hljs-comment"># Decorations</span>
gridobj.<span class="hljs-built_in">set</span>(xlim=(<span class="hljs-number">0.5</span>, <span class="hljs-number">7.5</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>))
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/04.png" alt="04"></p>
<h3><span id="04-dou-dong-tu-jittering-with-stripplot"><font color="##4876FF">【04】抖动图（Jittering with stripplot）</font></span></h3>
<p>通常，多个数据点具有完全相同的 X 和 Y 值。 此时多个点绘制会重叠并隐藏。为避免这种情况，可以将数据点稍微抖动，以便可以直观地看到它们。 使用 <code>seaborn</code> 库的 <code>stripplot()</code> 方法可以很方便的实现这个功能。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Stripplot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)
sns.stripplot(df.cty, df.hwy, jitter=<span class="hljs-number">0.25</span>, size=<span class="hljs-number">8</span>, ax=ax, linewidth=<span class="hljs-number">.5</span>)

<span class="hljs-comment"># Decorations</span>
plt.title(<span class="hljs-string">&#x27;Use jittered plots to avoid overlapping of points&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/05.png" alt="05"></p>
<h3><span id="05-ji-shu-tu-counts-plot"><font color="##4876FF">【05】计数图（Counts Plot）</font></span></h3>
<p>避免点重叠问题的另一个选择是根据点的位置增加点的大小。所以，点的大小越大，它周围的点就越集中。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv&quot;</span>)
df_counts = df.groupby([<span class="hljs-string">&#x27;hwy&#x27;</span>, <span class="hljs-string">&#x27;cty&#x27;</span>]).size().reset_index(name=<span class="hljs-string">&#x27;counts&#x27;</span>)

<span class="hljs-comment"># Draw Stripplot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)    
<span class="hljs-comment"># 原文代码</span>
<span class="hljs-comment"># sns.stripplot(df_counts.cty, df_counts.hwy, size=df_counts.counts*2, ax=ax)</span>
<span class="hljs-comment"># 纠正代码</span>
sns.stripplot(df_counts.cty, df_counts.hwy, sizes=df_counts.counts*<span class="hljs-number">2</span>, ax=ax)

<span class="hljs-comment"># Decorations</span>
plt.title(<span class="hljs-string">&#x27;Counts Plot - Size of circle is bigger as more points overlap&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/06.png" alt="06"></p>
<h3><span id="06-bian-yuan-zhi-fang-tu-marginal-histogram"><font color="##4876FF">【06】边缘直方图（Marginal Histogram）</font></span></h3>
<p>边缘直方图是具有沿 X 和 Y 轴变量的直方图。 这用于可视化 X 和 Y 之间的关系以及单独的 X 和 Y 的单变量分布。 这种图经常用于探索性数据分析（EDA）。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Create Fig and gridspec</span>
fig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)
grid = plt.GridSpec(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, hspace=<span class="hljs-number">0.5</span>, wspace=<span class="hljs-number">0.2</span>)

<span class="hljs-comment"># Define the axes</span>
ax_main = fig.add_subplot(grid[:-<span class="hljs-number">1</span>, :-<span class="hljs-number">1</span>])
ax_right = fig.add_subplot(grid[:-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>], xticklabels=[], yticklabels=[])
ax_bottom = fig.add_subplot(grid[-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>:-<span class="hljs-number">1</span>], xticklabels=[], yticklabels=[])

<span class="hljs-comment"># Scatterplot on main ax</span>
ax_main.scatter(<span class="hljs-string">&#x27;displ&#x27;</span>, <span class="hljs-string">&#x27;hwy&#x27;</span>, s=df.cty*<span class="hljs-number">4</span>, c=df.manufacturer.astype(<span class="hljs-string">&#x27;category&#x27;</span>).cat.codes, alpha=<span class="hljs-number">.9</span>, data=df, cmap=<span class="hljs-string">&quot;tab10&quot;</span>, edgecolors=<span class="hljs-string">&#x27;gray&#x27;</span>, linewidths=<span class="hljs-number">.5</span>)

<span class="hljs-comment"># histogram on the right</span>
ax_bottom.hist(df.displ, <span class="hljs-number">40</span>, histtype=<span class="hljs-string">&#x27;stepfilled&#x27;</span>, orientation=<span class="hljs-string">&#x27;vertical&#x27;</span>, color=<span class="hljs-string">&#x27;deeppink&#x27;</span>)
ax_bottom.invert_yaxis()

<span class="hljs-comment"># histogram in the bottom</span>
ax_right.hist(df.hwy, <span class="hljs-number">40</span>, histtype=<span class="hljs-string">&#x27;stepfilled&#x27;</span>, orientation=<span class="hljs-string">&#x27;horizontal&#x27;</span>, color=<span class="hljs-string">&#x27;deeppink&#x27;</span>)

<span class="hljs-comment"># Decorations</span>
ax_main.<span class="hljs-built_in">set</span>(title=<span class="hljs-string">&#x27;Scatterplot with Histograms \n displ vs hwy&#x27;</span>, xlabel=<span class="hljs-string">&#x27;displ&#x27;</span>, ylabel=<span class="hljs-string">&#x27;hwy&#x27;</span>)
ax_main.title.set_fontsize(<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> ([ax_main.xaxis.label, ax_main.yaxis.label] + ax_main.get_xticklabels() + ax_main.get_yticklabels()):
    item.set_fontsize(<span class="hljs-number">14</span>)

xlabels = ax_main.get_xticks().tolist()
ax_main.set_xticklabels(xlabels)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/07.png" alt="07"></p>
<h3><span id="07-bian-yuan-xiang-xing-tu-marginal-boxplot"><font color="##4876FF">【07】边缘箱形图（Marginal Boxplot）</font></span></h3>
<p>边缘箱形图与边缘直方图具有相似的用途。 然而，箱线图有助于精确定位 X 和 Y 的中位数、第25和第75百分位数。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Create Fig and gridspec</span>
fig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)
grid = plt.GridSpec(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, hspace=<span class="hljs-number">0.5</span>, wspace=<span class="hljs-number">0.2</span>)

<span class="hljs-comment"># Define the axes</span>
ax_main = fig.add_subplot(grid[:-<span class="hljs-number">1</span>, :-<span class="hljs-number">1</span>])
ax_right = fig.add_subplot(grid[:-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>], xticklabels=[], yticklabels=[])
ax_bottom = fig.add_subplot(grid[-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>:-<span class="hljs-number">1</span>], xticklabels=[], yticklabels=[])

<span class="hljs-comment"># Scatterplot on main ax</span>
ax_main.scatter(<span class="hljs-string">&#x27;displ&#x27;</span>, <span class="hljs-string">&#x27;hwy&#x27;</span>, s=df.cty*<span class="hljs-number">5</span>, c=df.manufacturer.astype(<span class="hljs-string">&#x27;category&#x27;</span>).cat.codes, alpha=<span class="hljs-number">.9</span>, data=df, cmap=<span class="hljs-string">&quot;Set1&quot;</span>, edgecolors=<span class="hljs-string">&#x27;black&#x27;</span>, linewidths=<span class="hljs-number">.5</span>)

<span class="hljs-comment"># Add a graph in each part</span>
sns.boxplot(df.hwy, ax=ax_right, orient=<span class="hljs-string">&quot;v&quot;</span>)
sns.boxplot(df.displ, ax=ax_bottom, orient=<span class="hljs-string">&quot;h&quot;</span>)

<span class="hljs-comment"># Decorations ------------------</span>
<span class="hljs-comment"># Remove x axis name for the boxplot</span>
ax_bottom.<span class="hljs-built_in">set</span>(xlabel=<span class="hljs-string">&#x27;&#x27;</span>)
ax_right.<span class="hljs-built_in">set</span>(ylabel=<span class="hljs-string">&#x27;&#x27;</span>)

<span class="hljs-comment"># Main Title, Xlabel and YLabel</span>
ax_main.<span class="hljs-built_in">set</span>(title=<span class="hljs-string">&#x27;Scatterplot with Histograms \n displ vs hwy&#x27;</span>, xlabel=<span class="hljs-string">&#x27;displ&#x27;</span>, ylabel=<span class="hljs-string">&#x27;hwy&#x27;</span>)

<span class="hljs-comment"># Set font size of different components</span>
ax_main.title.set_fontsize(<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> ([ax_main.xaxis.label, ax_main.yaxis.label] + ax_main.get_xticklabels() + ax_main.get_yticklabels()):
    item.set_fontsize(<span class="hljs-number">14</span>)

plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/08.png" alt="08"></p>
<h3><span id="08-xiang-guan-tu-correllogram"><font color="##4876FF">【08】相关图（Correllogram）</font></span></h3>
<p>相关图用于直观地查看给定数据帧（或二维数组）中所有可能的数值变量对之间的相关性度量。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Dataset</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mtcars.csv&quot;</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
sns.heatmap(df.corr(), xticklabels=df.corr().columns, yticklabels=df.corr().columns, cmap=<span class="hljs-string">&#x27;RdYlGn&#x27;</span>, center=<span class="hljs-number">0</span>, annot=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Decorations</span>
plt.title(<span class="hljs-string">&#x27;Correlogram of mtcars&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.xticks(fontsize=<span class="hljs-number">12</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/09.png" alt="09"></p>
<h3><span id="09-cheng-dui-tu-pairwise-plot"><font color="##4876FF">【09】成对图（Pairwise Plot）</font></span></h3>
<p>成对图是探索性分析中最受欢迎的一种方法，用来理解所有可能的数值变量对之间的关系。它是二元分析的必备工具。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Load Dataset</span>
df = sns.load_dataset(<span class="hljs-string">&#x27;iris&#x27;</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>), dpi=<span class="hljs-number">80</span>)
sns.pairplot(df, kind=<span class="hljs-string">&quot;scatter&quot;</span>, hue=<span class="hljs-string">&quot;species&quot;</span>, plot_kws=<span class="hljs-built_in">dict</span>(s=<span class="hljs-number">80</span>, edgecolor=<span class="hljs-string">&quot;white&quot;</span>, linewidth=<span class="hljs-number">2.5</span>))
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/10.png" alt="10"></p>
<pre><code class="hljs python"><span class="hljs-comment"># Load Dataset</span>
df = sns.load_dataset(<span class="hljs-string">&#x27;iris&#x27;</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>), dpi=<span class="hljs-number">80</span>)
sns.pairplot(df, kind=<span class="hljs-string">&quot;reg&quot;</span>, hue=<span class="hljs-string">&quot;species&quot;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/11.png" alt="11"></p>
<h2><span id="4x00-pian-chai-deviation"><font color="#FF0000">【4x00】偏差（Deviation）</font></span></h2>
<h3><span id="10-fa-san-xing-tiao-xing-tu-diverging-bars"><font color="##4876FF">【10】发散型条形图（Diverging Bars）</font></span></h3>
<p>如果您想根据单个指标查看项目的变化情况，并可视化此差异的顺序和数量，那么散型条形图是一个很好的工具。 它有助于快速区分数据组的性能，并且非常直观，并且可以立即传达这一点。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mtcars.csv&quot;</span>)
x = df.loc[:, [<span class="hljs-string">&#x27;mpg&#x27;</span>]]
df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>] = (x - x.mean())/x.std()
df[<span class="hljs-string">&#x27;colors&#x27;</span>] = [<span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;green&#x27;</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>]]
df.sort_values(<span class="hljs-string">&#x27;mpg_z&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)
plt.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=df.mpg_z, color=df.colors, alpha=<span class="hljs-number">0.4</span>, linewidth=<span class="hljs-number">5</span>)

<span class="hljs-comment"># Decorations</span>
plt.gca().<span class="hljs-built_in">set</span>(ylabel=<span class="hljs-string">&#x27;$Model$&#x27;</span>, xlabel=<span class="hljs-string">&#x27;$Mileage$&#x27;</span>)
plt.yticks(df.index, df.cars, fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&#x27;Diverging Bars of Car Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>:<span class="hljs-number">20</span>&#125;)
plt.grid(linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, alpha=<span class="hljs-number">0.5</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/12.png" alt="12"></p>
<h3><span id="11-fa-san-xing-wen-ben-tu-diverging-texts"><font color="##4876FF">【11】发散型文本图（Diverging Texts）</font></span></h3>
<p>发散型文本图与发散型条形图相似，如果你希望以一种美观的方式显示图表中每个项目的值，就可以使用这种方法。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mtcars.csv&quot;</span>)
x = df.loc[:, [<span class="hljs-string">&#x27;mpg&#x27;</span>]]
df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>] = (x - x.mean())/x.std()
df[<span class="hljs-string">&#x27;colors&#x27;</span>] = [<span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;green&#x27;</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>]]
df.sort_values(<span class="hljs-string">&#x27;mpg_z&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">14</span>), dpi=<span class="hljs-number">80</span>)
plt.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=df.mpg_z)
<span class="hljs-keyword">for</span> x, y, tex <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df.mpg_z, df.index, df.mpg_z):
    t = plt.text(x, y, <span class="hljs-built_in">round</span>(tex, <span class="hljs-number">2</span>), horizontalalignment=<span class="hljs-string">&#x27;right&#x27;</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;left&#x27;</span>,
                 verticalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;color&#x27;</span>:<span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;green&#x27;</span>, <span class="hljs-string">&#x27;size&#x27;</span>:<span class="hljs-number">14</span>&#125;)

<span class="hljs-comment"># Decorations</span>
plt.yticks(df.index, df.cars, fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&#x27;Diverging Text Bars of Car Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>:<span class="hljs-number">20</span>&#125;)
plt.grid(linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, alpha=<span class="hljs-number">0.5</span>)
plt.xlim(-<span class="hljs-number">2.5</span>, <span class="hljs-number">2.5</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/13.png" alt="13"></p>
<h3><span id="12-fa-san-xing-san-dian-tu-diverging-dot-plot"><font color="##4876FF">【12】发散型散点图（Diverging Dot Plot）</font></span></h3>
<p>发散型散点图类似于发散型条形图。 但是，与发散型条形图相比，没有条形会减少组之间的对比度和差异。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mtcars.csv&quot;</span>)
x = df.loc[:, [<span class="hljs-string">&#x27;mpg&#x27;</span>]]
df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>] = (x - x.mean())/x.std()
df[<span class="hljs-string">&#x27;colors&#x27;</span>] = [<span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;darkgreen&#x27;</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>]]
df.sort_values(<span class="hljs-string">&#x27;mpg_z&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">16</span>), dpi=<span class="hljs-number">80</span>)
plt.scatter(df.mpg_z, df.index, s=<span class="hljs-number">450</span>, alpha=<span class="hljs-number">.6</span>, color=df.colors)
<span class="hljs-keyword">for</span> x, y, tex <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df.mpg_z, df.index, df.mpg_z):
    t = plt.text(x, y, <span class="hljs-built_in">round</span>(tex, <span class="hljs-number">1</span>), horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>,
                 verticalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;white&#x27;</span>&#125;)

<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

plt.yticks(df.index, df.cars)
plt.title(<span class="hljs-string">&#x27;Diverging Dotplot of Car Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">20</span>&#125;)
plt.xlabel(<span class="hljs-string">&#x27;$Mileage$&#x27;</span>)
plt.grid(linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, alpha=<span class="hljs-number">0.5</span>)
plt.xlim(-<span class="hljs-number">2.5</span>, <span class="hljs-number">2.5</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/14.png" alt="14"></p>
<h3><span id="13-dai-biao-ji-de-fa-san-xing-bang-bang-tang-tu-diverging-lollipop-chart-with-markers"><font color="##4876FF">【13】带标记的发散型棒棒糖图（Diverging Lollipop Chart with Markers）</font></span></h3>
<p>带有标记的棒棒糖提供了一种灵活的方式，强调您想要引起注意的任何重要数据点并在图表中适当地给出推理。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mtcars.csv&quot;</span>)
x = df.loc[:, [<span class="hljs-string">&#x27;mpg&#x27;</span>]]
df[<span class="hljs-string">&#x27;mpg_z&#x27;</span>] = (x - x.mean())/x.std()
df[<span class="hljs-string">&#x27;colors&#x27;</span>] = <span class="hljs-string">&#x27;black&#x27;</span>

<span class="hljs-comment"># color fiat differently</span>
df.loc[df.cars == <span class="hljs-string">&#x27;Fiat X1-9&#x27;</span>, <span class="hljs-string">&#x27;colors&#x27;</span>] = <span class="hljs-string">&#x27;darkorange&#x27;</span>
df.sort_values(<span class="hljs-string">&#x27;mpg_z&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)


<span class="hljs-comment"># Draw plot</span>
<span class="hljs-keyword">import</span> matplotlib.patches <span class="hljs-keyword">as</span> patches

plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">16</span>), dpi=<span class="hljs-number">80</span>)
plt.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=df.mpg_z, color=df.colors, alpha=<span class="hljs-number">0.4</span>, linewidth=<span class="hljs-number">1</span>)
plt.scatter(df.mpg_z, df.index, color=df.colors, s=[<span class="hljs-number">600</span> <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;Fiat X1-9&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-number">300</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df.cars], alpha=<span class="hljs-number">0.6</span>)
plt.yticks(df.index, df.cars)
plt.xticks(fontsize=<span class="hljs-number">12</span>)

<span class="hljs-comment"># Annotate</span>
plt.annotate(<span class="hljs-string">&#x27;Mercedes Models&#x27;</span>, xy=(<span class="hljs-number">0.0</span>, <span class="hljs-number">11.0</span>), xytext=(<span class="hljs-number">1.0</span>, <span class="hljs-number">11</span>), xycoords=<span class="hljs-string">&#x27;data&#x27;</span>,
            fontsize=<span class="hljs-number">15</span>, ha=<span class="hljs-string">&#x27;center&#x27;</span>, va=<span class="hljs-string">&#x27;center&#x27;</span>,
            bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;square&#x27;</span>, fc=<span class="hljs-string">&#x27;firebrick&#x27;</span>),
            arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&#x27;-[, widthB=2.0, lengthB=1.5&#x27;</span>, lw=<span class="hljs-number">2.0</span>, color=<span class="hljs-string">&#x27;steelblue&#x27;</span>), color=<span class="hljs-string">&#x27;white&#x27;</span>)

<span class="hljs-comment"># Add Patches</span>
p1 = patches.Rectangle((-<span class="hljs-number">2.0</span>, -<span class="hljs-number">1</span>), width=<span class="hljs-number">.3</span>, height=<span class="hljs-number">3</span>, alpha=<span class="hljs-number">.2</span>, facecolor=<span class="hljs-string">&#x27;red&#x27;</span>)
p2 = patches.Rectangle((<span class="hljs-number">1.5</span>, <span class="hljs-number">27</span>), width=<span class="hljs-number">.8</span>, height=<span class="hljs-number">5</span>, alpha=<span class="hljs-number">.2</span>, facecolor=<span class="hljs-string">&#x27;green&#x27;</span>)
plt.gca().add_patch(p1)
plt.gca().add_patch(p2)

<span class="hljs-comment"># Decorate</span>
plt.title(<span class="hljs-string">&#x27;Diverging Bars of Car Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">20</span>&#125;)
plt.grid(linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, alpha=<span class="hljs-number">0.5</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/15.png" alt="15"></p>
<h3><span id="14-mian-ji-tu-area-chart"><font color="##4876FF">【14】面积图（Area Chart）</font></span></h3>
<p>通过对轴和线之间的区域进行着色，面积图不仅强调波峰和波谷，还强调波峰和波谷的持续时间。 高点持续时间越长，线下面积越大。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/economics.csv&quot;</span>, parse_dates=[<span class="hljs-string">&#x27;date&#x27;</span>]).head(<span class="hljs-number">100</span>)
x = np.arange(df.shape[<span class="hljs-number">0</span>])
y_returns = (df.psavert.diff().fillna(<span class="hljs-number">0</span>)/df.psavert.shift(<span class="hljs-number">1</span>)).fillna(<span class="hljs-number">0</span>) * <span class="hljs-number">100</span>

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.fill_between(x[<span class="hljs-number">1</span>:], y_returns[<span class="hljs-number">1</span>:], <span class="hljs-number">0</span>, where=y_returns[<span class="hljs-number">1</span>:] &gt;= <span class="hljs-number">0</span>, facecolor=<span class="hljs-string">&#x27;green&#x27;</span>, interpolate=<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.7</span>)
plt.fill_between(x[<span class="hljs-number">1</span>:], y_returns[<span class="hljs-number">1</span>:], <span class="hljs-number">0</span>, where=y_returns[<span class="hljs-number">1</span>:] &lt;= <span class="hljs-number">0</span>, facecolor=<span class="hljs-string">&#x27;red&#x27;</span>, interpolate=<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.7</span>)

<span class="hljs-comment"># Annotate</span>
plt.annotate(<span class="hljs-string">&#x27;Peak \n1975&#x27;</span>, xy=(<span class="hljs-number">94.0</span>, <span class="hljs-number">21.0</span>), xytext=(<span class="hljs-number">88.0</span>, <span class="hljs-number">28</span>),
             bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;square&#x27;</span>, fc=<span class="hljs-string">&#x27;firebrick&#x27;</span>),
             arrowprops=<span class="hljs-built_in">dict</span>(facecolor=<span class="hljs-string">&#x27;steelblue&#x27;</span>, shrink=<span class="hljs-number">0.05</span>), fontsize=<span class="hljs-number">15</span>, color=<span class="hljs-string">&#x27;white&#x27;</span>)


<span class="hljs-comment"># Decorations</span>
xtickvals = [<span class="hljs-built_in">str</span>(m)[:<span class="hljs-number">3</span>].upper()+<span class="hljs-string">&quot;-&quot;</span>+<span class="hljs-built_in">str</span>(y) <span class="hljs-keyword">for</span> y, m <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df.date.dt.year, df.date.dt.month_name())]
plt.gca().set_xticks(x[::<span class="hljs-number">6</span>])
plt.gca().set_xticklabels(xtickvals[::<span class="hljs-number">6</span>], rotation=<span class="hljs-number">90</span>, fontdict=&#123;<span class="hljs-string">&#x27;horizontalalignment&#x27;</span>: <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-string">&#x27;verticalalignment&#x27;</span>: <span class="hljs-string">&#x27;center_baseline&#x27;</span>&#125;)
plt.ylim(-<span class="hljs-number">35</span>, <span class="hljs-number">35</span>)
plt.xlim(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
plt.title(<span class="hljs-string">&quot;Month Economics Return %&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.ylabel(<span class="hljs-string">&#x27;Monthly returns %&#x27;</span>)
plt.grid(alpha=<span class="hljs-number">0.5</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/16.png" alt="16"></p>
<h2><span id="5x00-pai-xu-ranking"><font color="#FF0000">【5x00】排序（Ranking）</font></span></h2>
<h3><span id="15-you-xu-tiao-xing-tu-ordered-bar-chart"><font color="##4876FF">【15】有序条形图（Ordered Bar Chart）</font></span></h3>
<p>有序条形图有效地传达了项目的排序顺序。在图表上方添加度量标准的值，用户就可以从图表本身获得精确的信息。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)
df = df_raw[[<span class="hljs-string">&#x27;cty&#x27;</span>, <span class="hljs-string">&#x27;manufacturer&#x27;</span>]].groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())
df.sort_values(<span class="hljs-string">&#x27;cty&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw plot</span>
<span class="hljs-keyword">import</span> matplotlib.patches <span class="hljs-keyword">as</span> patches

fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), facecolor=<span class="hljs-string">&#x27;white&#x27;</span>, dpi= <span class="hljs-number">80</span>)
ax.vlines(x=df.index, ymin=<span class="hljs-number">0</span>, ymax=df.cty, color=<span class="hljs-string">&#x27;firebrick&#x27;</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Annotate Text</span>
<span class="hljs-keyword">for</span> i, cty <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(df.cty):
    ax.text(i, cty+<span class="hljs-number">0.5</span>, <span class="hljs-built_in">round</span>(cty, <span class="hljs-number">1</span>), horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>)


<span class="hljs-comment"># Title, Label, Ticks and Ylim</span>
ax.set_title(<span class="hljs-string">&#x27;Bar Chart for Highway Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>:<span class="hljs-number">22</span>&#125;)
ax.<span class="hljs-built_in">set</span>(ylabel=<span class="hljs-string">&#x27;Miles Per Gallon&#x27;</span>, ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>))
plt.xticks(df.index, df.manufacturer.<span class="hljs-built_in">str</span>.upper(), rotation=<span class="hljs-number">60</span>, horizontalalignment=<span class="hljs-string">&#x27;right&#x27;</span>, fontsize=<span class="hljs-number">12</span>)

<span class="hljs-comment"># Add patches to color the X axis labels</span>
p1 = patches.Rectangle((<span class="hljs-number">.57</span>, -<span class="hljs-number">0.005</span>), width=<span class="hljs-number">.33</span>, height=<span class="hljs-number">.13</span>, alpha=<span class="hljs-number">.1</span>, facecolor=<span class="hljs-string">&#x27;green&#x27;</span>, transform=fig.transFigure)
p2 = patches.Rectangle((<span class="hljs-number">.124</span>, -<span class="hljs-number">0.005</span>), width=<span class="hljs-number">.446</span>, height=<span class="hljs-number">.13</span>, alpha=<span class="hljs-number">.1</span>, facecolor=<span class="hljs-string">&#x27;red&#x27;</span>, transform=fig.transFigure)
fig.add_artist(p1)
fig.add_artist(p2)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/17.png" alt="17"></p>
<h3><span id="16-bang-bang-tang-tu-lollipop-chart"><font color="##4876FF">【16】棒棒糖图（Lollipop Chart）</font></span></h3>
<p>棒棒糖图表以一种视觉上令人愉悦的方式提供与有序条形图类似的目的。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)
df = df_raw[[<span class="hljs-string">&#x27;cty&#x27;</span>, <span class="hljs-string">&#x27;manufacturer&#x27;</span>]].groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())
df.sort_values(<span class="hljs-string">&#x27;cty&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw plot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
ax.vlines(x=df.index, ymin=<span class="hljs-number">0</span>, ymax=df.cty, color=<span class="hljs-string">&#x27;firebrick&#x27;</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">2</span>)
ax.scatter(x=df.index, y=df.cty, s=<span class="hljs-number">75</span>, color=<span class="hljs-string">&#x27;firebrick&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)

<span class="hljs-comment"># Title, Label, Ticks and Ylim</span>
ax.set_title(<span class="hljs-string">&#x27;Lollipop Chart for Highway Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">22</span>&#125;)
ax.set_ylabel(<span class="hljs-string">&#x27;Miles Per Gallon&#x27;</span>)
ax.set_xticks(df.index)
ax.set_xticklabels(df.manufacturer.<span class="hljs-built_in">str</span>.upper(), rotation=<span class="hljs-number">60</span>, fontdict=&#123;<span class="hljs-string">&#x27;horizontalalignment&#x27;</span>: <span class="hljs-string">&#x27;right&#x27;</span>, <span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">12</span>&#125;)
ax.set_ylim(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>)

<span class="hljs-comment"># Annotate</span>
<span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> df.itertuples():
    ax.text(row.Index, row.cty+<span class="hljs-number">.5</span>, s=<span class="hljs-built_in">round</span>(row.cty, <span class="hljs-number">2</span>), horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, verticalalignment=<span class="hljs-string">&#x27;bottom&#x27;</span>, fontsize=<span class="hljs-number">14</span>)

plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/18.png" alt="18"></p>
<h3><span id="17-dian-tu-dot-plot"><font color="##4876FF">【17】点图（Dot Plot）</font></span></h3>
<p>点图可以表示项目的排名顺序。由于它是沿水平轴对齐的，所以可以更容易地看到点之间的距离。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)
df = df_raw[[<span class="hljs-string">&#x27;cty&#x27;</span>, <span class="hljs-string">&#x27;manufacturer&#x27;</span>]].groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())
df.sort_values(<span class="hljs-string">&#x27;cty&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw plot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
ax.hlines(y=df.index, xmin=<span class="hljs-number">11</span>, xmax=<span class="hljs-number">26</span>, color=<span class="hljs-string">&#x27;gray&#x27;</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dashdot&#x27;</span>)
ax.scatter(y=df.index, x=df.cty, s=<span class="hljs-number">75</span>, color=<span class="hljs-string">&#x27;firebrick&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)

<span class="hljs-comment"># Title, Label, Ticks and Ylim</span>
ax.set_title(<span class="hljs-string">&#x27;Dot Plot for Highway Mileage&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">22</span>&#125;)
ax.set_xlabel(<span class="hljs-string">&#x27;Miles Per Gallon&#x27;</span>)
ax.set_yticks(df.index)
ax.set_yticklabels(df.manufacturer.<span class="hljs-built_in">str</span>.title(), fontdict=&#123;<span class="hljs-string">&#x27;horizontalalignment&#x27;</span>: <span class="hljs-string">&#x27;right&#x27;</span>&#125;)
ax.set_xlim(<span class="hljs-number">10</span>, <span class="hljs-number">27</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/19.png" alt="19"></p>
<h3><span id="18-po-du-tu-slope-chart"><font color="##4876FF">【18】坡度图（Slope Chart）</font></span></h3>
<p>坡度图最适合比较给定人员/项目的“前”和“后”位置。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.lines <span class="hljs-keyword">as</span> mlines

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/gdppercap.csv&quot;</span>)

left_label = [<span class="hljs-built_in">str</span>(c) + <span class="hljs-string">&#x27;, &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">round</span>(y)) <span class="hljs-keyword">for</span> c, y <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df.continent, df[<span class="hljs-string">&#x27;1952&#x27;</span>])]
right_label = [<span class="hljs-built_in">str</span>(c) + <span class="hljs-string">&#x27;, &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">round</span>(y)) <span class="hljs-keyword">for</span> c, y <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df.continent, df[<span class="hljs-string">&#x27;1957&#x27;</span>])]
klass = [<span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">if</span> (y1 - y2) &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;green&#x27;</span> <span class="hljs-keyword">for</span> y1, y2 <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df[<span class="hljs-string">&#x27;1952&#x27;</span>], df[<span class="hljs-string">&#x27;1957&#x27;</span>])]


<span class="hljs-comment"># draw line</span>
<span class="hljs-comment"># https://stackoverflow.com/questions/36470343/how-to-draw-a-line-with-matplotlib/36479941</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newline</span>(<span class="hljs-params">p1, p2, color=<span class="hljs-string">&#x27;black&#x27;</span></span>):</span>
    ax = plt.gca()
    l = mlines.Line2D([p1[<span class="hljs-number">0</span>], p2[<span class="hljs-number">0</span>]], [p1[<span class="hljs-number">1</span>], p2[<span class="hljs-number">1</span>]], color=<span class="hljs-string">&#x27;red&#x27;</span> <span class="hljs-keyword">if</span> p1[<span class="hljs-number">1</span>] - p2[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;green&#x27;</span>, marker=<span class="hljs-string">&#x27;o&#x27;</span>,
                      markersize=<span class="hljs-number">6</span>)
    ax.add_line(l)
    <span class="hljs-keyword">return</span> l


fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">14</span>), dpi=<span class="hljs-number">80</span>)

<span class="hljs-comment"># Vertical Lines</span>
ax.vlines(x=<span class="hljs-number">1</span>, ymin=<span class="hljs-number">500</span>, ymax=<span class="hljs-number">13000</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dotted&#x27;</span>)
ax.vlines(x=<span class="hljs-number">3</span>, ymin=<span class="hljs-number">500</span>, ymax=<span class="hljs-number">13000</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dotted&#x27;</span>)

<span class="hljs-comment"># Points</span>
ax.scatter(y=df[<span class="hljs-string">&#x27;1952&#x27;</span>], x=np.repeat(<span class="hljs-number">1</span>, df.shape[<span class="hljs-number">0</span>]), s=<span class="hljs-number">10</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)
ax.scatter(y=df[<span class="hljs-string">&#x27;1957&#x27;</span>], x=np.repeat(<span class="hljs-number">3</span>, df.shape[<span class="hljs-number">0</span>]), s=<span class="hljs-number">10</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)

<span class="hljs-comment"># Line Segmentsand Annotation</span>
<span class="hljs-keyword">for</span> p1, p2, c <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df[<span class="hljs-string">&#x27;1952&#x27;</span>], df[<span class="hljs-string">&#x27;1957&#x27;</span>], df[<span class="hljs-string">&#x27;continent&#x27;</span>]):
    newline([<span class="hljs-number">1</span>, p1], [<span class="hljs-number">3</span>, p2])
    ax.text(<span class="hljs-number">1</span> - <span class="hljs-number">0.05</span>, p1, c + <span class="hljs-string">&#x27;, &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">round</span>(p1)), horizontalalignment=<span class="hljs-string">&#x27;right&#x27;</span>, verticalalignment=<span class="hljs-string">&#x27;center&#x27;</span>,
            fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;)
    ax.text(<span class="hljs-number">3</span> + <span class="hljs-number">0.05</span>, p2, c + <span class="hljs-string">&#x27;, &#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">round</span>(p2)), horizontalalignment=<span class="hljs-string">&#x27;left&#x27;</span>, verticalalignment=<span class="hljs-string">&#x27;center&#x27;</span>,
            fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;)

<span class="hljs-comment"># &#x27;Before&#x27; and &#x27;After&#x27; Annotations</span>
ax.text(<span class="hljs-number">1</span> - <span class="hljs-number">0.05</span>, <span class="hljs-number">13000</span>, <span class="hljs-string">&#x27;BEFORE&#x27;</span>, horizontalalignment=<span class="hljs-string">&#x27;right&#x27;</span>, verticalalignment=<span class="hljs-string">&#x27;center&#x27;</span>,
        fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">18</span>, <span class="hljs-string">&#x27;weight&#x27;</span>: <span class="hljs-number">700</span>&#125;)
ax.text(<span class="hljs-number">3</span> + <span class="hljs-number">0.05</span>, <span class="hljs-number">13000</span>, <span class="hljs-string">&#x27;AFTER&#x27;</span>, horizontalalignment=<span class="hljs-string">&#x27;left&#x27;</span>, verticalalignment=<span class="hljs-string">&#x27;center&#x27;</span>,
        fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">18</span>, <span class="hljs-string">&#x27;weight&#x27;</span>: <span class="hljs-number">700</span>&#125;)

<span class="hljs-comment"># Decoration</span>
ax.set_title(<span class="hljs-string">&quot;Slopechart: Comparing GDP Per Capita between 1952 vs 1957&quot;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">22</span>&#125;)
ax.<span class="hljs-built_in">set</span>(xlim=(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">14000</span>), ylabel=<span class="hljs-string">&#x27;Mean GDP Per Capita&#x27;</span>)
ax.set_xticks([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>])
ax.set_xticklabels([<span class="hljs-string">&quot;1952&quot;</span>, <span class="hljs-string">&quot;1957&quot;</span>])
plt.yticks(np.arange(<span class="hljs-number">500</span>, <span class="hljs-number">13000</span>, <span class="hljs-number">2000</span>), fontsize=<span class="hljs-number">12</span>)

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.0</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/20.png" alt="20"></p>
<h3><span id="19-ya-ling-tu-dumbbell-plot"><font color="##4876FF">【19】哑铃图（Dumbbell Plot）</font></span></h3>
<p>哑铃图传达了各种项目的“前”和“后”位置以及项目的等级顺序。如果您希望可视化特定项目/计划对不同对象的影响，那么它非常有用。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.lines <span class="hljs-keyword">as</span> mlines

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/health.csv&quot;</span>)
df.sort_values(<span class="hljs-string">&#x27;pct_2014&#x27;</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)


<span class="hljs-comment"># Func to draw line segment</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newline</span>(<span class="hljs-params">p1, p2, color=<span class="hljs-string">&#x27;black&#x27;</span></span>):</span>
    ax = plt.gca()
    l = mlines.Line2D([p1[<span class="hljs-number">0</span>], p2[<span class="hljs-number">0</span>]], [p1[<span class="hljs-number">1</span>], p2[<span class="hljs-number">1</span>]], color=<span class="hljs-string">&#x27;skyblue&#x27;</span>)
    ax.add_line(l)
    <span class="hljs-keyword">return</span> l


<span class="hljs-comment"># Figure and Axes</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">14</span>), facecolor=<span class="hljs-string">&#x27;#f7f7f7&#x27;</span>, dpi=<span class="hljs-number">80</span>)

<span class="hljs-comment"># Vertical Lines</span>
ax.vlines(x=<span class="hljs-number">.05</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dotted&#x27;</span>)
ax.vlines(x=<span class="hljs-number">.10</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dotted&#x27;</span>)
ax.vlines(x=<span class="hljs-number">.15</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dotted&#x27;</span>)
ax.vlines(x=<span class="hljs-number">.20</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">&#x27;dotted&#x27;</span>)

<span class="hljs-comment"># Points</span>
ax.scatter(y=df[<span class="hljs-string">&#x27;index&#x27;</span>], x=df[<span class="hljs-string">&#x27;pct_2013&#x27;</span>], s=<span class="hljs-number">50</span>, color=<span class="hljs-string">&#x27;#0e668b&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)
ax.scatter(y=df[<span class="hljs-string">&#x27;index&#x27;</span>], x=df[<span class="hljs-string">&#x27;pct_2014&#x27;</span>], s=<span class="hljs-number">50</span>, color=<span class="hljs-string">&#x27;#a3c4dc&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)

<span class="hljs-comment"># Line Segments</span>
<span class="hljs-keyword">for</span> i, p1, p2 <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(df[<span class="hljs-string">&#x27;index&#x27;</span>], df[<span class="hljs-string">&#x27;pct_2013&#x27;</span>], df[<span class="hljs-string">&#x27;pct_2014&#x27;</span>]):
    newline([p1, i], [p2, i])

<span class="hljs-comment"># Decoration</span>
ax.set_facecolor(<span class="hljs-string">&#x27;#f7f7f7&#x27;</span>)
ax.set_title(<span class="hljs-string">&quot;Dumbell Chart: Pct Change - 2013 vs 2014&quot;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">22</span>&#125;)
ax.<span class="hljs-built_in">set</span>(xlim=(<span class="hljs-number">0</span>, <span class="hljs-number">.25</span>), ylim=(-<span class="hljs-number">1</span>, <span class="hljs-number">27</span>), ylabel=<span class="hljs-string">&#x27;Mean GDP Per Capita&#x27;</span>)
ax.set_xticks([<span class="hljs-number">.05</span>, <span class="hljs-number">.1</span>, <span class="hljs-number">.15</span>, <span class="hljs-number">.20</span>])
ax.set_xticklabels([<span class="hljs-string">&#x27;5%&#x27;</span>, <span class="hljs-string">&#x27;15%&#x27;</span>, <span class="hljs-string">&#x27;20%&#x27;</span>, <span class="hljs-string">&#x27;25%&#x27;</span>])
ax.set_xticklabels([<span class="hljs-string">&#x27;5%&#x27;</span>, <span class="hljs-string">&#x27;15%&#x27;</span>, <span class="hljs-string">&#x27;20%&#x27;</span>, <span class="hljs-string">&#x27;25%&#x27;</span>])
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/21.png" alt="21"></p>
<h2><span id="6x00-fen-bu-distribution"><font color="#FF0000">【6x00】分布（Distribution）</font></span></h2>
<h3><span id="20-lian-xu-bian-liang-de-zhi-fang-tu-histogram-for-continuous-variable"><font color="##4876FF">【20】连续变量的直方图（Histogram for Continuous Variable）</font></span></h3>
<p>连续变量的直方图显示给定变量的频率分布。下面的图表基于分类变量对频率条进行分组，从而更深入地了解连续变量和分类变量。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare data</span>
x_var = <span class="hljs-string">&#x27;displ&#x27;</span>
groupby_var = <span class="hljs-string">&#x27;class&#x27;</span>
df_agg = df.loc[:, [x_var, groupby_var]].groupby(groupby_var)
vals = [df[x_var].values.tolist() <span class="hljs-keyword">for</span> i, df <span class="hljs-keyword">in</span> df_agg]

<span class="hljs-comment"># Draw</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
colors = [plt.cm.Spectral(i / <span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(vals) - <span class="hljs-number">1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(vals))]
n, bins, patches = plt.hist(vals, <span class="hljs-number">30</span>, stacked=<span class="hljs-literal">True</span>, density=<span class="hljs-literal">False</span>, color=colors[:<span class="hljs-built_in">len</span>(vals)])

<span class="hljs-comment"># Decoration</span>
plt.legend(&#123;group: col <span class="hljs-keyword">for</span> group, col <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(np.unique(df[groupby_var]).tolist(), colors[:<span class="hljs-built_in">len</span>(vals)])&#125;)
plt.title(<span class="hljs-string">f&quot;Stacked Histogram of $<span class="hljs-subst">&#123;x_var&#125;</span>$ colored by $<span class="hljs-subst">&#123;groupby_var&#125;</span>$&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.xlabel(x_var)
plt.ylabel(<span class="hljs-string">&quot;Frequency&quot;</span>)
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">25</span>)
plt.xticks(ticks=bins[::<span class="hljs-number">3</span>], labels=[<span class="hljs-built_in">round</span>(b, <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> bins[::<span class="hljs-number">3</span>]])
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/22.png" alt="22"></p>
<h3><span id="21-fen-lei-bian-liang-de-zhi-fang-tu-histogram-for-categorical-variable"><font color="##4876FF">【21】分类变量的直方图（Histogram for Categorical Variable）</font></span></h3>
<p>分类变量的直方图显示该变量的频率分布。通过给条形图上色，您可以将分布与表示颜色的另一个类型变量相关联。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare data</span>
x_var = <span class="hljs-string">&#x27;manufacturer&#x27;</span>
groupby_var = <span class="hljs-string">&#x27;class&#x27;</span>
df_agg = df.loc[:, [x_var, groupby_var]].groupby(groupby_var)
vals = [df[x_var].values.tolist() <span class="hljs-keyword">for</span> i, df <span class="hljs-keyword">in</span> df_agg]

<span class="hljs-comment"># Draw</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
colors = [plt.cm.Spectral(i / <span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(vals) - <span class="hljs-number">1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(vals))]
n, bins, patches = plt.hist(vals, df[x_var].unique().__len__(), stacked=<span class="hljs-literal">True</span>, density=<span class="hljs-literal">False</span>, color=colors[:<span class="hljs-built_in">len</span>(vals)])

<span class="hljs-comment"># Decoration</span>
plt.legend(&#123;group: col <span class="hljs-keyword">for</span> group, col <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(np.unique(df[groupby_var]).tolist(), colors[:<span class="hljs-built_in">len</span>(vals)])&#125;)
plt.title(<span class="hljs-string">f&quot;Stacked Histogram of $<span class="hljs-subst">&#123;x_var&#125;</span>$ colored by $<span class="hljs-subst">&#123;groupby_var&#125;</span>$&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.xlabel(x_var)
plt.ylabel(<span class="hljs-string">&quot;Frequency&quot;</span>)
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">40</span>)
plt.xticks(ticks=bins, labels=np.unique(df[x_var]).tolist(), rotation=<span class="hljs-number">90</span>, horizontalalignment=<span class="hljs-string">&#x27;left&#x27;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/23.png" alt="23"></p>
<h3><span id="22-mi-du-tu-density-plot"><font color="##4876FF">【22】密度图（Density Plot）</font></span></h3>
<p>密度图是连续变量分布可视化的常用工具。通过按“response”变量对它们进行分组，您可以检查 X 和 Y 之间的关系。如果出于代表性目的来描述城市里程分布如何随气缸数而变化，请参见下面的情况。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
sns.kdeplot(df.loc[df[<span class="hljs-string">&#x27;cyl&#x27;</span>] == <span class="hljs-number">4</span>, <span class="hljs-string">&quot;cty&quot;</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">&quot;g&quot;</span>, label=<span class="hljs-string">&quot;Cyl=4&quot;</span>, alpha=<span class="hljs-number">.7</span>)
sns.kdeplot(df.loc[df[<span class="hljs-string">&#x27;cyl&#x27;</span>] == <span class="hljs-number">5</span>, <span class="hljs-string">&quot;cty&quot;</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">&quot;deeppink&quot;</span>, label=<span class="hljs-string">&quot;Cyl=5&quot;</span>, alpha=<span class="hljs-number">.7</span>)
sns.kdeplot(df.loc[df[<span class="hljs-string">&#x27;cyl&#x27;</span>] == <span class="hljs-number">6</span>, <span class="hljs-string">&quot;cty&quot;</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">&quot;dodgerblue&quot;</span>, label=<span class="hljs-string">&quot;Cyl=6&quot;</span>, alpha=<span class="hljs-number">.7</span>)
sns.kdeplot(df.loc[df[<span class="hljs-string">&#x27;cyl&#x27;</span>] == <span class="hljs-number">8</span>, <span class="hljs-string">&quot;cty&quot;</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">&quot;orange&quot;</span>, label=<span class="hljs-string">&quot;Cyl=8&quot;</span>, alpha=<span class="hljs-number">.7</span>)

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;Density Plot of City Mileage by n_Cylinders&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.legend()
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/24.png" alt="24"></p>
<h3><span id="23-zhi-fang-tu-mi-du-qu-xian-density-curves-with-histogram"><font color="##4876FF">【23】直方图密度曲线（Density Curves with Histogram）</font></span></h3>
<p>具有直方图的密度曲线将两个图所传达的信息集合在一起，因此您可以将它们都放在一个图形中，而不是放在两个图形中。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
sns.distplot(df.loc[df[<span class="hljs-string">&#x27;class&#x27;</span>] == <span class="hljs-string">&#x27;compact&#x27;</span>, <span class="hljs-string">&quot;cty&quot;</span>], color=<span class="hljs-string">&quot;dodgerblue&quot;</span>, label=<span class="hljs-string">&quot;Compact&quot;</span>, hist_kws=&#123;<span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">.7</span>&#125;,
             kde_kws=&#123;<span class="hljs-string">&#x27;linewidth&#x27;</span>: <span class="hljs-number">3</span>&#125;)
sns.distplot(df.loc[df[<span class="hljs-string">&#x27;class&#x27;</span>] == <span class="hljs-string">&#x27;suv&#x27;</span>, <span class="hljs-string">&quot;cty&quot;</span>], color=<span class="hljs-string">&quot;orange&quot;</span>, label=<span class="hljs-string">&quot;SUV&quot;</span>, hist_kws=&#123;<span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">.7</span>&#125;,
             kde_kws=&#123;<span class="hljs-string">&#x27;linewidth&#x27;</span>: <span class="hljs-number">3</span>&#125;)
sns.distplot(df.loc[df[<span class="hljs-string">&#x27;class&#x27;</span>] == <span class="hljs-string">&#x27;minivan&#x27;</span>, <span class="hljs-string">&quot;cty&quot;</span>], color=<span class="hljs-string">&quot;g&quot;</span>, label=<span class="hljs-string">&quot;minivan&quot;</span>, hist_kws=&#123;<span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">.7</span>&#125;,
             kde_kws=&#123;<span class="hljs-string">&#x27;linewidth&#x27;</span>: <span class="hljs-number">3</span>&#125;)
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">0.35</span>)

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;Density Plot of City Mileage by Vehicle Type&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.legend()
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/25.png" alt="25"></p>
<h3><span id="24-shan-feng-die-luan-tu-huan-le-tu-joy-plot"><font color="##4876FF">【24】山峰叠峦图 / 欢乐图（Joy Plot）</font></span></h3>
<p>Joy Plot 允许不同组的密度曲线重叠，这是一种很好的可视化方法，可以直观地显示大量分组之间的关系。它看起来赏心悦目，清楚地传达了正确的信息。它可以使用基于 <code>matplotlib</code> 的 <code>joypy</code> 包轻松构建。</p>
<p>【译者 TRHX 注：Joy Plot 看起来就像是山峰叠峦，山峦起伏，层次分明，但取名为 Joy，欢乐的意思，所以不太好翻译，在使用该方法时要先安装 joypy 库】</p>
<pre><code class="hljs python"><span class="hljs-comment"># !pip install joypy</span>
<span class="hljs-comment"># Import Data</span>
<span class="hljs-keyword">import</span> joypy
<span class="hljs-comment"># 原文没有 import joypy，译者 TRHX 添加</span>

mpg = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
fig, axes = joypy.joyplot(mpg, column=[<span class="hljs-string">&#x27;hwy&#x27;</span>, <span class="hljs-string">&#x27;cty&#x27;</span>], by=<span class="hljs-string">&quot;class&quot;</span>, ylim=<span class="hljs-string">&#x27;own&#x27;</span>, figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">10</span>))

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;Joy Plot of City and Highway Mileage by Class&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/26.png" alt="26"></p>
<h3><span id="25-fen-bu-shi-dian-tu-distributed-dot-plot"><font color="##4876FF">【25】分布式点图（Distributed Dot Plot）</font></span></h3>
<p>分布点图显示按组分割的点的单变量分布。点越暗，数据点在该区域的集中程度就越高。通过对中值进行不同的着色，这些组的真实位置立即变得明显。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.patches <span class="hljs-keyword">as</span> mpatches

<span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)
cyl_colors = &#123;<span class="hljs-number">4</span>: <span class="hljs-string">&#x27;tab:red&#x27;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;tab:green&#x27;</span>, <span class="hljs-number">6</span>: <span class="hljs-string">&#x27;tab:blue&#x27;</span>, <span class="hljs-number">8</span>: <span class="hljs-string">&#x27;tab:orange&#x27;</span>&#125;
df_raw[<span class="hljs-string">&#x27;cyl_color&#x27;</span>] = df_raw.cyl.<span class="hljs-built_in">map</span>(cyl_colors)

<span class="hljs-comment"># Mean and Median city mileage by make</span>
df = df_raw[[<span class="hljs-string">&#x27;cty&#x27;</span>, <span class="hljs-string">&#x27;manufacturer&#x27;</span>]].groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())
df.sort_values(<span class="hljs-string">&#x27;cty&#x27;</span>, ascending=<span class="hljs-literal">False</span>, inplace=<span class="hljs-literal">True</span>)
df.reset_index(inplace=<span class="hljs-literal">True</span>)
df_median = df_raw[[<span class="hljs-string">&#x27;cty&#x27;</span>, <span class="hljs-string">&#x27;manufacturer&#x27;</span>]].groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).apply(<span class="hljs-keyword">lambda</span> x: x.median())

<span class="hljs-comment"># Draw horizontal lines</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
ax.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">40</span>, color=<span class="hljs-string">&#x27;gray&#x27;</span>, alpha=<span class="hljs-number">0.5</span>, linewidth=<span class="hljs-number">.5</span>, linestyles=<span class="hljs-string">&#x27;dashdot&#x27;</span>)

<span class="hljs-comment"># Draw the Dots</span>
<span class="hljs-keyword">for</span> i, make <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(df.manufacturer):
    df_make = df_raw.loc[df_raw.manufacturer == make, :]
    <span class="hljs-comment"># 原文代码</span>
    <span class="hljs-comment"># ax.scatter(y=np.repeat(i, df_make.shape[0]), x=&#x27;cty&#x27;, data=df_make, s=75, edgecolors=&#x27;gray&#x27;, c=&#x27;w&#x27;, alpha=0.5)</span>
    <span class="hljs-comment"># 纠正代码</span>
    ax.scatter(y=<span class="hljs-built_in">list</span>(np.repeat(i, df_make.shape[<span class="hljs-number">0</span>])), x=<span class="hljs-string">&#x27;cty&#x27;</span>, data=df_make, s=<span class="hljs-number">75</span>, edgecolors=<span class="hljs-string">&#x27;gray&#x27;</span>, c=<span class="hljs-string">&#x27;w&#x27;</span>, alpha=<span class="hljs-number">0.5</span>)
    ax.scatter(y=i, x=<span class="hljs-string">&#x27;cty&#x27;</span>, data=df_median.loc[df_median.index == make, :], s=<span class="hljs-number">75</span>, c=<span class="hljs-string">&#x27;firebrick&#x27;</span>)

<span class="hljs-comment"># Annotate</span>
ax.text(<span class="hljs-number">33</span>, <span class="hljs-number">13</span>, <span class="hljs-string">&quot;$red \; dots \; are \; the \: median$&quot;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">12</span>&#125;, color=<span class="hljs-string">&#x27;firebrick&#x27;</span>)

<span class="hljs-comment"># Decorations</span>
red_patch = plt.plot([], [], marker=<span class="hljs-string">&quot;o&quot;</span>, ms=<span class="hljs-number">10</span>, ls=<span class="hljs-string">&quot;&quot;</span>, mec=<span class="hljs-literal">None</span>, color=<span class="hljs-string">&#x27;firebrick&#x27;</span>, label=<span class="hljs-string">&quot;Median&quot;</span>)
plt.legend(handles=red_patch)
ax.set_title(<span class="hljs-string">&#x27;Distribution of City Mileage by Make&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">22</span>&#125;)
ax.set_xlabel(<span class="hljs-string">&#x27;Miles Per Gallon (City)&#x27;</span>, alpha=<span class="hljs-number">0.7</span>)
ax.set_yticks(df.index)
ax.set_yticklabels(df.manufacturer.<span class="hljs-built_in">str</span>.title(), fontdict=&#123;<span class="hljs-string">&#x27;horizontalalignment&#x27;</span>: <span class="hljs-string">&#x27;right&#x27;</span>&#125;, alpha=<span class="hljs-number">0.7</span>)
ax.set_xlim(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>)
plt.xticks(alpha=<span class="hljs-number">0.7</span>)
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.grid(axis=<span class="hljs-string">&#x27;both&#x27;</span>, alpha=<span class="hljs-number">.4</span>, linewidth=<span class="hljs-number">.1</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/27.png" alt="27"></p>
<h3><span id="26-xiang-xing-tu-box-plot"><font color="##4876FF">【26】箱形图（Box Plot）</font></span></h3>
<p>箱形图是可视化分布的一种好方法，同时牢记中位数，第 25 个第 75 个四分位数和离群值。 但是，在解释方框的大小时需要小心，这可能会扭曲该组中包含的点数。 因此，手动提供每个框中的观察次数可以帮助克服此缺点。</p>
<p>例如，左侧的前两个框，尽管它们分别具有 5 和 47 个 obs，但是却具有相同大小， 因此，有必要写下该组中的观察数。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
sns.boxplot(x=<span class="hljs-string">&#x27;class&#x27;</span>, y=<span class="hljs-string">&#x27;hwy&#x27;</span>, data=df, notch=<span class="hljs-literal">False</span>)


<span class="hljs-comment"># Add N Obs inside boxplot (optional)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_n_obs</span>(<span class="hljs-params">df, group_col, y</span>):</span>
    medians_dict = &#123;grp[<span class="hljs-number">0</span>]: grp[<span class="hljs-number">1</span>][y].median() <span class="hljs-keyword">for</span> grp <span class="hljs-keyword">in</span> df.groupby(group_col)&#125;
    xticklabels = [x.get_text() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> plt.gca().get_xticklabels()]
    n_obs = df.groupby(group_col)[y].size().values
    <span class="hljs-keyword">for</span> (x, xticklabel), n_ob <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(<span class="hljs-built_in">enumerate</span>(xticklabels), n_obs):
        plt.text(x, medians_dict[xticklabel] * <span class="hljs-number">1.01</span>, <span class="hljs-string">&quot;#obs : &quot;</span> + <span class="hljs-built_in">str</span>(n_ob), horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>,
                 fontdict=&#123;<span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-number">14</span>&#125;, color=<span class="hljs-string">&#x27;white&#x27;</span>)


add_n_obs(df, group_col=<span class="hljs-string">&#x27;class&#x27;</span>, y=<span class="hljs-string">&#x27;hwy&#x27;</span>)

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;Box Plot of Highway Mileage by Vehicle Class&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.ylim(<span class="hljs-number">10</span>, <span class="hljs-number">40</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/28.png" alt="28"></p>
<h3><span id="27-dian-xiang-xing-tu-dot-box-plot"><font color="##4876FF">【27】点 + 箱形图（Dot + Box Plot）</font></span></h3>
<p>点 + 箱形图传达类似于分组的箱形图信息。此外，这些点还提供了每组中有多少数据点的含义。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)
sns.boxplot(x=<span class="hljs-string">&#x27;class&#x27;</span>, y=<span class="hljs-string">&#x27;hwy&#x27;</span>, data=df, hue=<span class="hljs-string">&#x27;cyl&#x27;</span>)
sns.stripplot(x=<span class="hljs-string">&#x27;class&#x27;</span>, y=<span class="hljs-string">&#x27;hwy&#x27;</span>, data=df, color=<span class="hljs-string">&#x27;black&#x27;</span>, size=<span class="hljs-number">3</span>, jitter=<span class="hljs-number">1</span>)

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(df[<span class="hljs-string">&#x27;class&#x27;</span>].unique())-<span class="hljs-number">1</span>):
    plt.vlines(i+<span class="hljs-number">.5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">45</span>, linestyles=<span class="hljs-string">&#x27;solid&#x27;</span>, colors=<span class="hljs-string">&#x27;gray&#x27;</span>, alpha=<span class="hljs-number">0.2</span>)

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;Box Plot of Highway Mileage by Vehicle Class&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.legend(title=<span class="hljs-string">&#x27;Cylinders&#x27;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/29.png" alt="29"></p>
<h3><span id="28-xiao-ti-qin-tu-violin-plot"><font color="##4876FF">【28】小提琴图（Violin Plot）</font></span></h3>
<p>小提琴图是箱形图在视觉上令人愉悦的替代品。 小提琴的形状或面积取决于它所持有的观察次数。 但是，小提琴图可能更难以阅读，并且在专业设置中不常用。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
sns.violinplot(x=<span class="hljs-string">&#x27;class&#x27;</span>, y=<span class="hljs-string">&#x27;hwy&#x27;</span>, data=df, scale=<span class="hljs-string">&#x27;width&#x27;</span>, inner=<span class="hljs-string">&#x27;quartile&#x27;</span>)

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;Violin Plot of Highway Mileage by Vehicle Class&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/30.png" alt="30"></p>
<h3><span id="29-ren-kou-jin-zi-ta-tu-population-pyramid"><font color="##4876FF">【29】人口金字塔图（Population Pyramid）</font></span></h3>
<p>人口金字塔可用于显示按体积排序的组的分布。或者它也可以用于显示人口的逐级过滤，因为它是用来显示有多少人通过一个营销漏斗（Marketing Funnel）的每个阶段。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Read data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/email_campaign_funnel.csv&quot;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
group_col = <span class="hljs-string">&#x27;Gender&#x27;</span>
order_of_bars = df.Stage.unique()[::-<span class="hljs-number">1</span>]
colors = [plt.cm.Spectral(i / <span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(df[group_col].unique()) - <span class="hljs-number">1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(df[group_col].unique()))]

<span class="hljs-keyword">for</span> c, group <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(colors, df[group_col].unique()):
    sns.barplot(x=<span class="hljs-string">&#x27;Users&#x27;</span>, y=<span class="hljs-string">&#x27;Stage&#x27;</span>, data=df.loc[df[group_col] == group, :], order=order_of_bars, color=c, label=group)

<span class="hljs-comment"># Decorations</span>
plt.xlabel(<span class="hljs-string">&quot;$Users$&quot;</span>)
plt.ylabel(<span class="hljs-string">&quot;Stage of Purchase&quot;</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&quot;Population Pyramid of the Marketing Funnel&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.legend()
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/31.png" alt="31"></p>
<h3><span id="30-fen-lei-tu-categorical-plots"><font color="##4876FF">【30】分类图（Categorical Plots）</font></span></h3>
<p>由 <code>seaborn</code> 库提供的分类图可用于可视化彼此相关的两个或更多分类变量的计数分布。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Load Dataset</span>
titanic = sns.load_dataset(<span class="hljs-string">&quot;titanic&quot;</span>)

<span class="hljs-comment"># Plot</span>
g = sns.catplot(<span class="hljs-string">&quot;alive&quot;</span>, col=<span class="hljs-string">&quot;deck&quot;</span>, col_wrap=<span class="hljs-number">4</span>,
                data=titanic[titanic.deck.notnull()],
                kind=<span class="hljs-string">&quot;count&quot;</span>, height=<span class="hljs-number">3.5</span>, aspect=<span class="hljs-number">.8</span>,
                palette=<span class="hljs-string">&#x27;tab20&#x27;</span>)

<span class="hljs-comment"># 译者 TRHX 注释掉了这一行代码</span>
<span class="hljs-comment"># fig.suptitle(&#x27;sf&#x27;)</span>
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/32.png" alt="32"></p>
<pre><code class="hljs python"><span class="hljs-comment"># Load Dataset</span>
titanic = sns.load_dataset(<span class="hljs-string">&quot;titanic&quot;</span>)

<span class="hljs-comment"># Plot</span>
sns.catplot(x=<span class="hljs-string">&quot;age&quot;</span>, y=<span class="hljs-string">&quot;embark_town&quot;</span>,
            hue=<span class="hljs-string">&quot;sex&quot;</span>, col=<span class="hljs-string">&quot;class&quot;</span>,
            data=titanic[titanic.embark_town.notnull()],
            orient=<span class="hljs-string">&quot;h&quot;</span>, height=<span class="hljs-number">5</span>, aspect=<span class="hljs-number">1</span>, palette=<span class="hljs-string">&quot;tab10&quot;</span>,
            kind=<span class="hljs-string">&quot;violin&quot;</span>, dodge=<span class="hljs-literal">True</span>, cut=<span class="hljs-number">0</span>, bw=<span class="hljs-number">.2</span>)

<span class="hljs-comment"># 译者 TRHX 添加了这行代码</span>
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/33.png" alt="33"></p>
<h2><span id="7x00-zu-cheng-composition"><font color="#FF0000">【7x00】组成（Composition）</font></span></h2>
<h3><span id="31-hua-fu-bing-tu-waffle-chart"><font color="##4876FF">【31】华夫饼图（Waffle Chart）</font></span></h3>
<p>华夫饼图可以使用 <code>pywaffle</code> 包创建，用于显示较大群体中的组的组成。</p>
<p>【译者 TRHX 注：在使用该方法时要先安装 pywaffle 库】</p>
<pre><code class="hljs python"><span class="hljs-comment"># ! pip install pywaffle</span>
<span class="hljs-comment"># Reference: https://stackoverflow.com/questions/41400136/how-to-do-waffle-charts-in-python-square-piechart</span>
<span class="hljs-keyword">from</span> pywaffle <span class="hljs-keyword">import</span> Waffle

<span class="hljs-comment"># Import</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">&#x27;class&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts&#x27;</span>)
n_categories = df.shape[<span class="hljs-number">0</span>]
colors = [plt.cm.inferno_r(i / <span class="hljs-built_in">float</span>(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_categories)]

<span class="hljs-comment"># Draw Plot and Decorate</span>
fig = plt.figure(
    FigureClass=Waffle,
    plots=&#123;
        <span class="hljs-string">&#x27;111&#x27;</span>: &#123;
            <span class="hljs-string">&#x27;values&#x27;</span>: df[<span class="hljs-string">&#x27;counts&#x27;</span>],
            <span class="hljs-string">&#x27;labels&#x27;</span>: [<span class="hljs-string">&quot;&#123;0&#125; (&#123;1&#125;)&quot;</span>.<span class="hljs-built_in">format</span>(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df[[<span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;counts&#x27;</span>]].itertuples()],
            <span class="hljs-string">&#x27;legend&#x27;</span>: &#123;<span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;upper left&#x27;</span>, <span class="hljs-string">&#x27;bbox_to_anchor&#x27;</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">12</span>&#125;,
            <span class="hljs-string">&#x27;title&#x27;</span>: &#123;<span class="hljs-string">&#x27;label&#x27;</span>: <span class="hljs-string">&#x27;# Vehicles by Class&#x27;</span>, <span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">18</span>&#125;
        &#125;,
    &#125;,
    rows=<span class="hljs-number">7</span>,
    colors=colors,
    figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>)
)

<span class="hljs-comment"># 译者 TRHX 添加了这行代码</span>
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/34.png" alt="34"></p>
<pre><code class="hljs python"><span class="hljs-comment"># ! pip install pywaffle</span>
<span class="hljs-keyword">from</span> pywaffle <span class="hljs-keyword">import</span> Waffle

<span class="hljs-comment"># Import</span>
<span class="hljs-comment"># 译者 TRHX 取消注释了这行代码</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
<span class="hljs-comment"># By Class Data</span>
df_class = df_raw.groupby(<span class="hljs-string">&#x27;class&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts_class&#x27;</span>)
n_categories = df_class.shape[<span class="hljs-number">0</span>]
colors_class = [plt.cm.Set3(i / <span class="hljs-built_in">float</span>(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_categories)]

<span class="hljs-comment"># By Cylinders Data</span>
df_cyl = df_raw.groupby(<span class="hljs-string">&#x27;cyl&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts_cyl&#x27;</span>)
n_categories = df_cyl.shape[<span class="hljs-number">0</span>]
colors_cyl = [plt.cm.Spectral(i / <span class="hljs-built_in">float</span>(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_categories)]

<span class="hljs-comment"># By Make Data</span>
df_make = df_raw.groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts_make&#x27;</span>)
n_categories = df_make.shape[<span class="hljs-number">0</span>]
colors_make = [plt.cm.tab20b(i / <span class="hljs-built_in">float</span>(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_categories)]

<span class="hljs-comment"># Draw Plot and Decorate</span>
fig = plt.figure(
    FigureClass=Waffle,
    plots=&#123;
        <span class="hljs-string">&#x27;311&#x27;</span>: &#123;
            <span class="hljs-string">&#x27;values&#x27;</span>: df_class[<span class="hljs-string">&#x27;counts_class&#x27;</span>],
            <span class="hljs-string">&#x27;labels&#x27;</span>: [<span class="hljs-string">&quot;&#123;1&#125;&quot;</span>.<span class="hljs-built_in">format</span>(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df_class[[<span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;counts_class&#x27;</span>]].itertuples()],
            <span class="hljs-string">&#x27;legend&#x27;</span>: &#123;<span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;upper left&#x27;</span>, <span class="hljs-string">&#x27;bbox_to_anchor&#x27;</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">12</span>, <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Class&#x27;</span>&#125;,
            <span class="hljs-string">&#x27;title&#x27;</span>: &#123;<span class="hljs-string">&#x27;label&#x27;</span>: <span class="hljs-string">&#x27;# Vehicles by Class&#x27;</span>, <span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">18</span>&#125;,
            <span class="hljs-string">&#x27;colors&#x27;</span>: colors_class
        &#125;,
        <span class="hljs-string">&#x27;312&#x27;</span>: &#123;
            <span class="hljs-string">&#x27;values&#x27;</span>: df_cyl[<span class="hljs-string">&#x27;counts_cyl&#x27;</span>],
            <span class="hljs-string">&#x27;labels&#x27;</span>: [<span class="hljs-string">&quot;&#123;1&#125;&quot;</span>.<span class="hljs-built_in">format</span>(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df_cyl[[<span class="hljs-string">&#x27;cyl&#x27;</span>, <span class="hljs-string">&#x27;counts_cyl&#x27;</span>]].itertuples()],
            <span class="hljs-string">&#x27;legend&#x27;</span>: &#123;<span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;upper left&#x27;</span>, <span class="hljs-string">&#x27;bbox_to_anchor&#x27;</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">12</span>, <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Cyl&#x27;</span>&#125;,
            <span class="hljs-string">&#x27;title&#x27;</span>: &#123;<span class="hljs-string">&#x27;label&#x27;</span>: <span class="hljs-string">&#x27;# Vehicles by Cyl&#x27;</span>, <span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">18</span>&#125;,
            <span class="hljs-string">&#x27;colors&#x27;</span>: colors_cyl
        &#125;,
        <span class="hljs-string">&#x27;313&#x27;</span>: &#123;
            <span class="hljs-string">&#x27;values&#x27;</span>: df_make[<span class="hljs-string">&#x27;counts_make&#x27;</span>],
            <span class="hljs-string">&#x27;labels&#x27;</span>: [<span class="hljs-string">&quot;&#123;1&#125;&quot;</span>.<span class="hljs-built_in">format</span>(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df_make[[<span class="hljs-string">&#x27;manufacturer&#x27;</span>, <span class="hljs-string">&#x27;counts_make&#x27;</span>]].itertuples()],
            <span class="hljs-string">&#x27;legend&#x27;</span>: &#123;<span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;upper left&#x27;</span>, <span class="hljs-string">&#x27;bbox_to_anchor&#x27;</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">12</span>, <span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Manufacturer&#x27;</span>&#125;,
            <span class="hljs-string">&#x27;title&#x27;</span>: &#123;<span class="hljs-string">&#x27;label&#x27;</span>: <span class="hljs-string">&#x27;# Vehicles by Make&#x27;</span>, <span class="hljs-string">&#x27;loc&#x27;</span>: <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">18</span>&#125;,
            <span class="hljs-string">&#x27;colors&#x27;</span>: colors_make
        &#125;
    &#125;,
    rows=<span class="hljs-number">9</span>,
    figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">14</span>)
)

<span class="hljs-comment"># 译者 TRHX 添加了这行代码</span>
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/35.png" alt="35"></p>
<h3><span id="32-bing-tu-pie-chart"><font color="##4876FF">【32】饼图（Pie Chart）</font></span></h3>
<p>饼图是显示组成的经典方法。然而，现在一般不宜使用，因为馅饼部分的面积有时会产生误导。因此，如果要使用饼图，强烈建议您显式地记下饼图每个部分的百分比或数字。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">&#x27;class&#x27;</span>).size()

<span class="hljs-comment"># Make the plot with pandas</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string">原代码：df.plot(kind=&#x27;pie&#x27;, subplots=True, figsize=(8, 8), dpi=80)</span>
<span class="hljs-string">译者 TRHX 删除了 dpi= 80</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>
df.plot(kind=<span class="hljs-string">&#x27;pie&#x27;</span>, subplots=<span class="hljs-literal">True</span>, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>))
plt.title(<span class="hljs-string">&quot;Pie Chart of Vehicle Class - Bad&quot;</span>)
plt.ylabel(<span class="hljs-string">&quot;&quot;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/36.png" alt="36"></p>
<pre><code class="hljs python"><span class="hljs-comment"># Import</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">&#x27;class&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts&#x27;</span>)

<span class="hljs-comment"># Draw Plot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">7</span>), subplot_kw=<span class="hljs-built_in">dict</span>(aspect=<span class="hljs-string">&quot;equal&quot;</span>), dpi=<span class="hljs-number">80</span>)

data = df[<span class="hljs-string">&#x27;counts&#x27;</span>]
categories = df[<span class="hljs-string">&#x27;class&#x27;</span>]
explode = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0</span>]


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">pct, allvals</span>):</span>
    absolute = <span class="hljs-built_in">int</span>(pct / <span class="hljs-number">100.</span> * np.<span class="hljs-built_in">sum</span>(allvals))
    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;:.1f&#125;% (&#123;:d&#125; )&quot;</span>.<span class="hljs-built_in">format</span>(pct, absolute)


wedges, texts, autotexts = ax.pie(data,
                                  autopct=<span class="hljs-keyword">lambda</span> pct: func(pct, data),
                                  textprops=<span class="hljs-built_in">dict</span>(color=<span class="hljs-string">&quot;w&quot;</span>),
                                  colors=plt.cm.Dark2.colors,
                                  startangle=<span class="hljs-number">140</span>,
                                  explode=explode)

<span class="hljs-comment"># Decoration</span>
ax.legend(wedges, categories, title=<span class="hljs-string">&quot;Vehicle Class&quot;</span>, loc=<span class="hljs-string">&quot;center left&quot;</span>, bbox_to_anchor=(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>))
plt.setp(autotexts, size=<span class="hljs-number">10</span>, weight=<span class="hljs-number">700</span>)
ax.set_title(<span class="hljs-string">&quot;Class of Vehicles: Pie Chart&quot;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/37.png" alt="37"></p>
<h3><span id="33-ju-zhen-shu-xing-tu-treemap"><font color="##4876FF">【33】矩阵树形图（Treemap）</font></span></h3>
<p>矩阵树形图类似于饼图，它可以更好地完成工作而不会误导每个组的贡献。</p>
<p>【译者 TRHX 注：在使用该方法时要先安装 squarify 库】</p>
<pre><code class="hljs python"><span class="hljs-comment"># pip install squarify</span>
<span class="hljs-keyword">import</span> squarify

<span class="hljs-comment"># Import Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">&#x27;class&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts&#x27;</span>)
labels = df.apply(<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">str</span>(x[<span class="hljs-number">0</span>]) + <span class="hljs-string">&quot;\n (&quot;</span> + <span class="hljs-built_in">str</span>(x[<span class="hljs-number">1</span>]) + <span class="hljs-string">&quot;)&quot;</span>, axis=<span class="hljs-number">1</span>)
sizes = df[<span class="hljs-string">&#x27;counts&#x27;</span>].values.tolist()
colors = [plt.cm.Spectral(i / <span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(labels))) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(labels))]

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>), dpi=<span class="hljs-number">80</span>)
squarify.plot(sizes=sizes, label=labels, color=colors, alpha=<span class="hljs-number">.8</span>)

<span class="hljs-comment"># Decorate</span>
plt.title(<span class="hljs-string">&#x27;Treemap of Vechile Class&#x27;</span>)
plt.axis(<span class="hljs-string">&#x27;off&#x27;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/38.png" alt="38"></p>
<h3><span id="34-tiao-xing-tu-bar-chart"><font color="##4876FF">【34】条形图（Bar Chart）</font></span></h3>
<p>条形图是一种基于计数或任何给定度量的可视化项的经典方法。在下面的图表中，我为每个项目使用了不同的颜色，但您通常可能希望为所有项目选择一种颜色，除非您按组对它们进行着色。颜色名称存储在下面代码中的 <code>all_colors</code> 中。您可以通过在 <code>plt.plot()</code> 中设置 <code>color</code> 参数来更改条形的颜色。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> random

<span class="hljs-comment"># Import Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">&#x27;manufacturer&#x27;</span>).size().reset_index(name=<span class="hljs-string">&#x27;counts&#x27;</span>)
n = df[<span class="hljs-string">&#x27;manufacturer&#x27;</span>].unique().__len__()+<span class="hljs-number">1</span>
all_colors = <span class="hljs-built_in">list</span>(plt.cm.colors.cnames.keys())
random.seed(<span class="hljs-number">100</span>)
c = random.choices(all_colors, k=n)

<span class="hljs-comment"># Plot Bars</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)
plt.bar(df[<span class="hljs-string">&#x27;manufacturer&#x27;</span>], df[<span class="hljs-string">&#x27;counts&#x27;</span>], color=c, width=<span class="hljs-number">.5</span>)
<span class="hljs-keyword">for</span> i, val <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(df[<span class="hljs-string">&#x27;counts&#x27;</span>].values):
    plt.text(i, val, <span class="hljs-built_in">float</span>(val), horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, verticalalignment=<span class="hljs-string">&#x27;bottom&#x27;</span>, fontdict=&#123;<span class="hljs-string">&#x27;fontweight&#x27;</span>:<span class="hljs-number">500</span>, <span class="hljs-string">&#x27;size&#x27;</span>:<span class="hljs-number">12</span>&#125;)

<span class="hljs-comment"># Decoration</span>
plt.gca().set_xticklabels(df[<span class="hljs-string">&#x27;manufacturer&#x27;</span>], rotation=<span class="hljs-number">60</span>, horizontalalignment= <span class="hljs-string">&#x27;right&#x27;</span>)
plt.title(<span class="hljs-string">&quot;Number of Vehicles by Manaufacturers&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.ylabel(<span class="hljs-string">&#x27;# Vehicles&#x27;</span>)
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">45</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/39.png" alt="39"></p>
<h2><span id="8x00-bian-hua-change"><font color="#FF0000">【8x00】变化（Change）</font></span></h2>
<h3><span id="35-shi-jian-xu-lie-tu-time-series-plot"><font color="##4876FF">【35】时间序列图（Time Series Plot）</font></span></h3>
<p>时间序列图用于可视化给定指标随时间的变化。在这里你可以看到 1949 年到 1969 年间的航空客运量是如何变化的。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/AirPassengers.csv&#x27;</span>)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.plot(<span class="hljs-string">&#x27;date&#x27;</span>, <span class="hljs-string">&#x27;traffic&#x27;</span>, data=df, color=<span class="hljs-string">&#x27;tab:red&#x27;</span>)

<span class="hljs-comment"># Decoration</span>
plt.ylim(<span class="hljs-number">50</span>, <span class="hljs-number">750</span>)
xtick_location = df.index.tolist()[::<span class="hljs-number">12</span>]
xtick_labels = [x[-<span class="hljs-number">4</span>:] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df.date.tolist()[::<span class="hljs-number">12</span>]]
plt.xticks(ticks=xtick_location, labels=xtick_labels, rotation=<span class="hljs-number">0</span>, fontsize=<span class="hljs-number">12</span>, horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, alpha=<span class="hljs-number">.7</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)
plt.title(<span class="hljs-string">&quot;Air Passengers Traffic (1949 - 1969)&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.grid(axis=<span class="hljs-string">&#x27;both&#x27;</span>, alpha=<span class="hljs-number">.3</span>)

<span class="hljs-comment"># Remove borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">0.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">0.3</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/40.png" alt="40"></p>
<h3><span id="36-dai-bo-feng-he-bo-gu-zhu-shi-de-shi-jian-xu-lie-tu-time-series-with-peaks-and-troughs-annotated"><font color="##4876FF">【36】带波峰和波谷注释的时间序列图（Time Series with Peaks and Troughs Annotated）</font></span></h3>
<p>下面的时间序列绘制了所有的波峰和波谷，并注释了所选特殊事件的发生。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/AirPassengers.csv&#x27;</span>)

<span class="hljs-comment"># Get the Peaks and Troughs</span>
data = df[<span class="hljs-string">&#x27;traffic&#x27;</span>].values
doublediff = np.diff(np.sign(np.diff(data)))
peak_locations = np.where(doublediff == -<span class="hljs-number">2</span>)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>

doublediff2 = np.diff(np.sign(np.diff(-<span class="hljs-number">1</span> * data)))
trough_locations = np.where(doublediff2 == -<span class="hljs-number">2</span>)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.plot(<span class="hljs-string">&#x27;date&#x27;</span>, <span class="hljs-string">&#x27;traffic&#x27;</span>, data=df, color=<span class="hljs-string">&#x27;tab:blue&#x27;</span>, label=<span class="hljs-string">&#x27;Air Traffic&#x27;</span>)
plt.scatter(df.date[peak_locations], df.traffic[peak_locations], marker=mpl.markers.CARETUPBASE, color=<span class="hljs-string">&#x27;tab:green&#x27;</span>,
            s=<span class="hljs-number">100</span>, label=<span class="hljs-string">&#x27;Peaks&#x27;</span>)
plt.scatter(df.date[trough_locations], df.traffic[trough_locations], marker=mpl.markers.CARETDOWNBASE, color=<span class="hljs-string">&#x27;tab:red&#x27;</span>,
            s=<span class="hljs-number">100</span>, label=<span class="hljs-string">&#x27;Troughs&#x27;</span>)

<span class="hljs-comment"># Annotate</span>
<span class="hljs-keyword">for</span> t, p <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(trough_locations[<span class="hljs-number">1</span>::<span class="hljs-number">5</span>], peak_locations[::<span class="hljs-number">3</span>]):
    plt.text(df.date[p], df.traffic[p] + <span class="hljs-number">15</span>, df.date[p], horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, color=<span class="hljs-string">&#x27;darkgreen&#x27;</span>)
    plt.text(df.date[t], df.traffic[t] - <span class="hljs-number">35</span>, df.date[t], horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>, color=<span class="hljs-string">&#x27;darkred&#x27;</span>)

<span class="hljs-comment"># Decoration</span>
plt.ylim(<span class="hljs-number">50</span>, <span class="hljs-number">750</span>)
xtick_location = df.index.tolist()[::<span class="hljs-number">6</span>]
xtick_labels = df.date.tolist()[::<span class="hljs-number">6</span>]
plt.xticks(ticks=xtick_location, labels=xtick_labels, rotation=<span class="hljs-number">90</span>, fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)
plt.title(<span class="hljs-string">&quot;Peak and Troughs of Air Passengers Traffic (1949 - 1969)&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

plt.legend(loc=<span class="hljs-string">&#x27;upper left&#x27;</span>)
plt.grid(axis=<span class="hljs-string">&#x27;y&#x27;</span>, alpha=<span class="hljs-number">.3</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/41.png" alt="41"></p>
<h3><span id="37-zi-xiang-guan-acf-he-bu-fen-zi-xiang-guan-pacf-tu-autocorrelation-acf-and-partial-autocorrelation-pacf-plot"><font color="##4876FF">【37】自相关 (ACF) 和部分自相关 (PACF) 图（Autocorrelation (ACF) and Partial Autocorrelation (PACF) Plot）</font></span></h3>
<p>自相关图（ACF图）显示了时间序列与其自身滞后的相关性。 每条垂直线（在自相关图上）表示系列与滞后 0 之间的滞后的相关性。图中的蓝色阴影区域是显著性级别。 那些位于蓝线之上的滞后是显著的滞后。</p>
<p>那么如何解释呢？</p>
<p>对于航空乘客来说，我们看到超过 14 个滞后已经越过蓝线，因此意义重大。这意味着，14 年前的航空客运量对今天的交通量产生了影响。</p>
<p>另一方面，部分自相关图（PACF）显示了任何给定滞后（时间序列）相对于当前序列的自相关，但消除了中间滞后的贡献。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> statsmodels.graphics.tsaplots <span class="hljs-keyword">import</span> plot_acf, plot_pacf

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/AirPassengers.csv&#x27;</span>)

<span class="hljs-comment"># Draw Plot</span>
fig, (ax1, ax2) = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">6</span>), dpi=<span class="hljs-number">80</span>)
plot_acf(df.traffic.tolist(), ax=ax1, lags=<span class="hljs-number">50</span>)
plot_pacf(df.traffic.tolist(), ax=ax2, lags=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Decorate</span>
<span class="hljs-comment"># lighten the borders</span>
ax1.spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
ax1.spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
ax1.spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
ax1.spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

<span class="hljs-comment"># font size of tick labels</span>
ax1.tick_params(axis=<span class="hljs-string">&#x27;both&#x27;</span>, labelsize=<span class="hljs-number">12</span>)
ax2.tick_params(axis=<span class="hljs-string">&#x27;both&#x27;</span>, labelsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/42.png" alt="42"></p>
<h3><span id="38-jiao-cha-xiang-guan-tu-cross-correlation-plot"><font color="##4876FF">【38】交叉相关图（Cross Correlation plot）</font></span></h3>
<p>交叉相关图显示了两个时间序列相互之间的滞后。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> statsmodels.tsa.stattools <span class="hljs-keyword">as</span> stattools

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/mortality.csv&#x27;</span>)
x = df[<span class="hljs-string">&#x27;mdeaths&#x27;</span>]
y = df[<span class="hljs-string">&#x27;fdeaths&#x27;</span>]

<span class="hljs-comment"># Compute Cross Correlations</span>
ccs = stattools.ccf(x, y)[:<span class="hljs-number">100</span>]
nlags = <span class="hljs-built_in">len</span>(ccs)

<span class="hljs-comment"># Compute the Significance level</span>
<span class="hljs-comment"># ref: https://stats.stackexchange.com/questions/3115/cross-correlation-significance-in-r/3128#3128</span>
conf_level = <span class="hljs-number">2</span> / np.sqrt(nlags)

<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">7</span>), dpi=<span class="hljs-number">80</span>)

plt.hlines(<span class="hljs-number">0</span>, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">100</span>, color=<span class="hljs-string">&#x27;gray&#x27;</span>)  <span class="hljs-comment"># 0 axis</span>
plt.hlines(conf_level, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">100</span>, color=<span class="hljs-string">&#x27;gray&#x27;</span>)
plt.hlines(-conf_level, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">100</span>, color=<span class="hljs-string">&#x27;gray&#x27;</span>)

plt.bar(x=np.arange(<span class="hljs-built_in">len</span>(ccs)), height=ccs, width=<span class="hljs-number">.3</span>)

<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">&#x27;$Cross\; Correlation\; Plot:\; mdeaths\; vs\; fdeaths$&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.xlim(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(ccs))
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/43.png" alt="43"></p>
<h3><span id="39-shi-jian-xu-lie-fen-jie-tu-time-series-decomposition-plot"><font color="##4876FF">【39】时间序列分解图（Time Series Decomposition Plot）</font></span></h3>
<p>时间序列分解图将时间序列分解为趋势、季节和残差分量。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> statsmodels.tsa.seasonal <span class="hljs-keyword">import</span> seasonal_decompose
<span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/AirPassengers.csv&#x27;</span>)
dates = pd.DatetimeIndex([parse(d).strftime(<span class="hljs-string">&#x27;%Y-%m-01&#x27;</span>) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df[<span class="hljs-string">&#x27;date&#x27;</span>]])
df.set_index(dates, inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Decompose</span>
result = seasonal_decompose(df[<span class="hljs-string">&#x27;traffic&#x27;</span>], model=<span class="hljs-string">&#x27;multiplicative&#x27;</span>)

<span class="hljs-comment"># Plot</span>
plt.rcParams.update(&#123;<span class="hljs-string">&#x27;figure.figsize&#x27;</span>: (<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)&#125;)
result.plot().suptitle(<span class="hljs-string">&#x27;Time Series Decomposition of Air Passengers&#x27;</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/44.png" alt="44"></p>
<h3><span id="40-duo-chong-shi-jian-xu-lie-multiple-time-series"><font color="##4876FF">【40】多重时间序列（Multiple Time Series）</font></span></h3>
<p>您可以在同一图表上绘制多个测量相同值的时间序列，如下所示。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/mortality.csv&#x27;</span>)

<span class="hljs-comment"># Define the upper limit, lower limit, interval of Y axis and colors</span>
y_LL = <span class="hljs-number">100</span>
y_UL = <span class="hljs-built_in">int</span>(df.iloc[:, <span class="hljs-number">1</span>:].<span class="hljs-built_in">max</span>().<span class="hljs-built_in">max</span>() * <span class="hljs-number">1.1</span>)
y_interval = <span class="hljs-number">400</span>
mycolors = [<span class="hljs-string">&#x27;tab:red&#x27;</span>, <span class="hljs-string">&#x27;tab:blue&#x27;</span>, <span class="hljs-string">&#x27;tab:green&#x27;</span>, <span class="hljs-string">&#x27;tab:orange&#x27;</span>]

<span class="hljs-comment"># Draw Plot and Annotate</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)

columns = df.columns[<span class="hljs-number">1</span>:]
<span class="hljs-keyword">for</span> i, column <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(columns):
    plt.plot(df.date.values, df[column].values, lw=<span class="hljs-number">1.5</span>, color=mycolors[i])
    plt.text(df.shape[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>, df[column].values[-<span class="hljs-number">1</span>], column, fontsize=<span class="hljs-number">14</span>, color=mycolors[i])

<span class="hljs-comment"># Draw Tick lines</span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(y_LL, y_UL, y_interval):
    plt.hlines(y, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">71</span>, colors=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.3</span>, linestyles=<span class="hljs-string">&quot;--&quot;</span>, lw=<span class="hljs-number">0.5</span>)

<span class="hljs-comment"># Decorations</span>
plt.tick_params(axis=<span class="hljs-string">&quot;both&quot;</span>, which=<span class="hljs-string">&quot;both&quot;</span>, bottom=<span class="hljs-literal">False</span>, top=<span class="hljs-literal">False</span>,
                labelbottom=<span class="hljs-literal">True</span>, left=<span class="hljs-literal">False</span>, right=<span class="hljs-literal">False</span>, labelleft=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

plt.title(<span class="hljs-string">&#x27;Number of Deaths from Lung Diseases in the UK (1974-1979)&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.yticks(<span class="hljs-built_in">range</span>(y_LL, y_UL, y_interval), [<span class="hljs-built_in">str</span>(y) <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(y_LL, y_UL, y_interval)], fontsize=<span class="hljs-number">12</span>)
plt.xticks(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, df.shape[<span class="hljs-number">0</span>], <span class="hljs-number">12</span>), df.date.values[::<span class="hljs-number">12</span>], horizontalalignment=<span class="hljs-string">&#x27;left&#x27;</span>, fontsize=<span class="hljs-number">12</span>)
plt.ylim(y_LL, y_UL)
plt.xlim(-<span class="hljs-number">2</span>, <span class="hljs-number">80</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/45.png" alt="45"></p>
<h3><span id="41-shi-yong-ci-yao-de-y-zhou-lai-hui-zhi-bu-tong-fan-wei-de-tu-xing-plotting-with-different-scales-using-secondary-y-axis"><font color="##4876FF">【41】使用次要的 Y 轴来绘制不同范围的图形（Plotting with different scales using secondary Y axis）</font></span></h3>
<p>如果要显示在同一时间点测量两个不同数量的两个时间序列，则可以在右侧的次要 Y 轴上再绘制第二个系列。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/economics.csv&quot;</span>)

x = df[<span class="hljs-string">&#x27;date&#x27;</span>]
y1 = df[<span class="hljs-string">&#x27;psavert&#x27;</span>]
y2 = df[<span class="hljs-string">&#x27;unemploy&#x27;</span>]

<span class="hljs-comment"># Plot Line1 (Left Y Axis)</span>
fig, ax1 = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
ax1.plot(x, y1, color=<span class="hljs-string">&#x27;tab:red&#x27;</span>)

<span class="hljs-comment"># Plot Line2 (Right Y Axis)</span>
ax2 = ax1.twinx()  <span class="hljs-comment"># instantiate a second axes that shares the same x-axis</span>
ax2.plot(x, y2, color=<span class="hljs-string">&#x27;tab:blue&#x27;</span>)

<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># ax1 (left Y axis)</span>
ax1.set_xlabel(<span class="hljs-string">&#x27;Year&#x27;</span>, fontsize=<span class="hljs-number">20</span>)
ax1.tick_params(axis=<span class="hljs-string">&#x27;x&#x27;</span>, rotation=<span class="hljs-number">0</span>, labelsize=<span class="hljs-number">12</span>)
ax1.set_ylabel(<span class="hljs-string">&#x27;Personal Savings Rate&#x27;</span>, color=<span class="hljs-string">&#x27;tab:red&#x27;</span>, fontsize=<span class="hljs-number">20</span>)
ax1.tick_params(axis=<span class="hljs-string">&#x27;y&#x27;</span>, rotation=<span class="hljs-number">0</span>, labelcolor=<span class="hljs-string">&#x27;tab:red&#x27;</span>)
ax1.grid(alpha=<span class="hljs-number">.4</span>)

<span class="hljs-comment"># ax2 (right Y axis)</span>
ax2.set_ylabel(<span class="hljs-string">&quot;# Unemployed (1000&#x27;s)&quot;</span>, color=<span class="hljs-string">&#x27;tab:blue&#x27;</span>, fontsize=<span class="hljs-number">20</span>)
ax2.tick_params(axis=<span class="hljs-string">&#x27;y&#x27;</span>, labelcolor=<span class="hljs-string">&#x27;tab:blue&#x27;</span>)
ax2.set_xticks(np.arange(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(x), <span class="hljs-number">60</span>))
ax2.set_xticklabels(x[::<span class="hljs-number">60</span>], rotation=<span class="hljs-number">90</span>, fontdict=&#123;<span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">10</span>&#125;)
ax2.set_title(<span class="hljs-string">&quot;Personal Savings Rate vs Unemployed: Plotting in Secondary Y Axis&quot;</span>, fontsize=<span class="hljs-number">22</span>)
fig.tight_layout()
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/46.png" alt="46"></p>
<h3><span id="42-dai-wu-chai-dai-de-shi-jian-xu-lie-time-series-with-error-bands"><font color="##4876FF">【42】带误差带的时间序列（Time Series with Error Bands）</font></span></h3>
<p>如果您有一个时间序列数据集，其中每个时间点（日期/时间戳）有多个观测值，则可以构造具有误差带的时间序列。下面您可以看到一些基于一天中不同时间的订单的示例。还有一个关于45天内到达的订单数量的例子。</p>
<p>在这种方法中，订单数量的平均值用白线表示。并计算95%的置信区间，并围绕平均值绘制。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> sem

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/user_orders_hourofday.csv&quot;</span>)
df_mean = df.groupby(<span class="hljs-string">&#x27;order_hour_of_day&#x27;</span>).quantity.mean()
df_se = df.groupby(<span class="hljs-string">&#x27;order_hour_of_day&#x27;</span>).quantity.apply(sem).mul(<span class="hljs-number">1.96</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.ylabel(<span class="hljs-string">&quot;# Orders&quot;</span>, fontsize=<span class="hljs-number">16</span>)
x = df_mean.index
plt.plot(x, df_mean, color=<span class="hljs-string">&quot;white&quot;</span>, lw=<span class="hljs-number">2</span>)
plt.fill_between(x, df_mean - df_se, df_mean + df_se, color=<span class="hljs-string">&quot;#3F5D7D&quot;</span>)

<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">1</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">1</span>)
plt.xticks(x[::<span class="hljs-number">2</span>], [<span class="hljs-built_in">str</span>(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> x[::<span class="hljs-number">2</span>]], fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&quot;User Orders by Hour of Day (95% confidence)&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.xlabel(<span class="hljs-string">&quot;Hour of Day&quot;</span>)

s, e = plt.gca().get_xlim()
plt.xlim(s, e)

<span class="hljs-comment"># Draw Horizontal Tick lines</span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">8</span>, <span class="hljs-number">20</span>, <span class="hljs-number">2</span>):
    plt.hlines(y, xmin=s, xmax=e, colors=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.5</span>, linestyles=<span class="hljs-string">&quot;--&quot;</span>, lw=<span class="hljs-number">0.5</span>)

plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/47.png" alt="47"></p>
<pre><code class="hljs python"><span class="hljs-string">&quot;Data Source: https://www.kaggle.com/olistbr/brazilian-ecommerce#olist_orders_dataset.csv&quot;</span>
<span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse
<span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> sem

<span class="hljs-comment"># Import Data</span>
df_raw = pd.read_csv(<span class="hljs-string">&#x27;https://raw.githubusercontent.com/selva86/datasets/master/orders_45d.csv&#x27;</span>,
                     parse_dates=[<span class="hljs-string">&#x27;purchase_time&#x27;</span>, <span class="hljs-string">&#x27;purchase_date&#x27;</span>])

<span class="hljs-comment"># Prepare Data: Daily Mean and SE Bands</span>
df_mean = df_raw.groupby(<span class="hljs-string">&#x27;purchase_date&#x27;</span>).quantity.mean()
df_se = df_raw.groupby(<span class="hljs-string">&#x27;purchase_date&#x27;</span>).quantity.apply(sem).mul(<span class="hljs-number">1.96</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.ylabel(<span class="hljs-string">&quot;# Daily Orders&quot;</span>, fontsize=<span class="hljs-number">16</span>)
x = [d.date().strftime(<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df_mean.index]
plt.plot(x, df_mean, color=<span class="hljs-string">&quot;white&quot;</span>, lw=<span class="hljs-number">2</span>)
plt.fill_between(x, df_mean - df_se, df_mean + df_se, color=<span class="hljs-string">&quot;#3F5D7D&quot;</span>)

<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">1</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">1</span>)
plt.xticks(x[::<span class="hljs-number">6</span>], [<span class="hljs-built_in">str</span>(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> x[::<span class="hljs-number">6</span>]], fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&quot;Daily Order Quantity of Brazilian Retail with Error Bands (95% confidence)&quot;</span>, fontsize=<span class="hljs-number">20</span>)

<span class="hljs-comment"># Axis limits</span>
s, e = plt.gca().get_xlim()
plt.xlim(s, e - <span class="hljs-number">2</span>)
plt.ylim(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>)

<span class="hljs-comment"># Draw Horizontal Tick lines</span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>):
    plt.hlines(y, xmin=s, xmax=e, colors=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.5</span>, linestyles=<span class="hljs-string">&quot;--&quot;</span>, lw=<span class="hljs-number">0.5</span>)

plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/48.png" alt="48"></p>
<h3><span id="43-dui-ji-mian-ji-tu-stacked-area-chart"><font color="##4876FF">【43】堆积面积图（Stacked Area Chart）</font></span></h3>
<p>堆积面积图提供了多个时间序列的贡献程度的可视化表示，以便相互比较。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://raw.githubusercontent.com/selva86/datasets/master/nightvisitors.csv&#x27;</span>)

<span class="hljs-comment"># Decide Colors</span>
mycolors = [<span class="hljs-string">&#x27;tab:red&#x27;</span>, <span class="hljs-string">&#x27;tab:blue&#x27;</span>, <span class="hljs-string">&#x27;tab:green&#x27;</span>, <span class="hljs-string">&#x27;tab:orange&#x27;</span>, <span class="hljs-string">&#x27;tab:brown&#x27;</span>, <span class="hljs-string">&#x27;tab:grey&#x27;</span>, <span class="hljs-string">&#x27;tab:pink&#x27;</span>, <span class="hljs-string">&#x27;tab:olive&#x27;</span>]

<span class="hljs-comment"># Draw Plot and Annotate</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
columns = df.columns[<span class="hljs-number">1</span>:]
labs = columns.values.tolist()

<span class="hljs-comment"># Prepare data</span>
x = df[<span class="hljs-string">&#x27;yearmon&#x27;</span>].values.tolist()
y0 = df[columns[<span class="hljs-number">0</span>]].values.tolist()
y1 = df[columns[<span class="hljs-number">1</span>]].values.tolist()
y2 = df[columns[<span class="hljs-number">2</span>]].values.tolist()
y3 = df[columns[<span class="hljs-number">3</span>]].values.tolist()
y4 = df[columns[<span class="hljs-number">4</span>]].values.tolist()
y5 = df[columns[<span class="hljs-number">5</span>]].values.tolist()
y6 = df[columns[<span class="hljs-number">6</span>]].values.tolist()
y7 = df[columns[<span class="hljs-number">7</span>]].values.tolist()
y = np.vstack([y0, y2, y4, y6, y7, y5, y1, y3])

<span class="hljs-comment"># Plot for each column</span>
labs = columns.values.tolist()
ax = plt.gca()
ax.stackplot(x, y, labels=labs, colors=mycolors, alpha=<span class="hljs-number">0.8</span>)

<span class="hljs-comment"># Decorations</span>
ax.set_title(<span class="hljs-string">&#x27;Night Visitors in Australian Regions&#x27;</span>, fontsize=<span class="hljs-number">18</span>)
ax.<span class="hljs-built_in">set</span>(ylim=[<span class="hljs-number">0</span>, <span class="hljs-number">100000</span>])
ax.legend(fontsize=<span class="hljs-number">10</span>, ncol=<span class="hljs-number">4</span>)
plt.xticks(x[::<span class="hljs-number">5</span>], fontsize=<span class="hljs-number">10</span>, horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>)
plt.yticks(np.arange(<span class="hljs-number">10000</span>, <span class="hljs-number">100000</span>, <span class="hljs-number">20000</span>), fontsize=<span class="hljs-number">10</span>)
plt.xlim(x[<span class="hljs-number">0</span>], x[-<span class="hljs-number">1</span>])

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/49.png" alt="49"></p>
<h3><span id="44-wei-dui-ji-mian-ji-tu-area-chart-unstacked"><font color="##4876FF">【44】未堆积面积图（Area Chart UnStacked）</font></span></h3>
<p>未堆积的面积图用于可视化两个或多个序列彼此之间的进度（起伏）。在下面的图表中，你可以清楚地看到，随着失业持续时间的中位数增加，个人储蓄率是如何下降的。未堆积面积图很好地展示了这一现象。</p>
<pre><code class="hljs python"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/economics.csv&quot;</span>)

<span class="hljs-comment"># Prepare Data</span>
x = df[<span class="hljs-string">&#x27;date&#x27;</span>].values.tolist()
y1 = df[<span class="hljs-string">&#x27;psavert&#x27;</span>].values.tolist()
y2 = df[<span class="hljs-string">&#x27;uempmed&#x27;</span>].values.tolist()
mycolors = [<span class="hljs-string">&#x27;tab:red&#x27;</span>, <span class="hljs-string">&#x27;tab:blue&#x27;</span>, <span class="hljs-string">&#x27;tab:green&#x27;</span>, <span class="hljs-string">&#x27;tab:orange&#x27;</span>, <span class="hljs-string">&#x27;tab:brown&#x27;</span>, <span class="hljs-string">&#x27;tab:grey&#x27;</span>, <span class="hljs-string">&#x27;tab:pink&#x27;</span>, <span class="hljs-string">&#x27;tab:olive&#x27;</span>]
columns = [<span class="hljs-string">&#x27;psavert&#x27;</span>, <span class="hljs-string">&#x27;uempmed&#x27;</span>]

<span class="hljs-comment"># Draw Plot</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
ax.fill_between(x, y1=y1, y2=<span class="hljs-number">0</span>, label=columns[<span class="hljs-number">1</span>], alpha=<span class="hljs-number">0.5</span>, color=mycolors[<span class="hljs-number">1</span>], linewidth=<span class="hljs-number">2</span>)
ax.fill_between(x, y1=y2, y2=<span class="hljs-number">0</span>, label=columns[<span class="hljs-number">0</span>], alpha=<span class="hljs-number">0.5</span>, color=mycolors[<span class="hljs-number">0</span>], linewidth=<span class="hljs-number">2</span>)

<span class="hljs-comment"># Decorations</span>
ax.set_title(<span class="hljs-string">&#x27;Personal Savings Rate vs Median Duration of Unemployment&#x27;</span>, fontsize=<span class="hljs-number">18</span>)
ax.<span class="hljs-built_in">set</span>(ylim=[<span class="hljs-number">0</span>, <span class="hljs-number">30</span>])
ax.legend(loc=<span class="hljs-string">&#x27;best&#x27;</span>, fontsize=<span class="hljs-number">12</span>)
plt.xticks(x[::<span class="hljs-number">50</span>], fontsize=<span class="hljs-number">10</span>, horizontalalignment=<span class="hljs-string">&#x27;center&#x27;</span>)
plt.yticks(np.arange(<span class="hljs-number">2.5</span>, <span class="hljs-number">30.0</span>, <span class="hljs-number">2.5</span>), fontsize=<span class="hljs-number">10</span>)
plt.xlim(-<span class="hljs-number">10</span>, x[-<span class="hljs-number">1</span>])

<span class="hljs-comment"># Draw Tick lines</span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> np.arange(<span class="hljs-number">2.5</span>, <span class="hljs-number">30.0</span>, <span class="hljs-number">2.5</span>):
    plt.hlines(y, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-built_in">len</span>(x), colors=<span class="hljs-string">&#x27;black&#x27;</span>, alpha=<span class="hljs-number">0.3</span>, linestyles=<span class="hljs-string">&quot;--&quot;</span>, lw=<span class="hljs-number">0.5</span>)

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/50.png" alt="50"></p>
<h3><span id="45-ri-li-re-li-tu-calendar-heat-map"><font color="##4876FF">【45】日历热力图（Calendar Heat Map）</font></span></h3>
<p>与时间序列相比，日历地图是另一种基于时间的数据可视化的不太受欢迎的方法。虽然在视觉上很吸引人，但数值并不十分明显。然而，它能很好地描绘极端值和假日效果。</p>
<p>【译者 TRHX 注：在使用该方法时要先安装 calmap 库】</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl
<span class="hljs-keyword">import</span> calmap

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/yahoo.csv&quot;</span>, parse_dates=[<span class="hljs-string">&#x27;date&#x27;</span>])
df.set_index(<span class="hljs-string">&#x27;date&#x27;</span>, inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
calmap.calendarplot(df[<span class="hljs-string">&#x27;2014&#x27;</span>][<span class="hljs-string">&#x27;VIX.Close&#x27;</span>], fig_kws=&#123;<span class="hljs-string">&#x27;figsize&#x27;</span>: (<span class="hljs-number">16</span>, <span class="hljs-number">10</span>)&#125;,
                    yearlabel_kws=&#123;<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;black&#x27;</span>, <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-number">14</span>&#125;, subplot_kws=&#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;Yahoo Stock Prices&#x27;</span>&#125;)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/51.png" alt="51"></p>
<h3><span id="46-ji-jie-tu-seasonal-plot"><font color="##4876FF">【46】季节图（Seasonal Plot）</font></span></h3>
<p>季节图可用于比较上一季度同一天（年/月/周等）时间序列的表现。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://github.com/selva86/datasets/raw/master/AirPassengers.csv&#x27;</span>)

<span class="hljs-comment"># Prepare data</span>
df[<span class="hljs-string">&#x27;year&#x27;</span>] = [parse(d).year <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df.date]
df[<span class="hljs-string">&#x27;month&#x27;</span>] = [parse(d).strftime(<span class="hljs-string">&#x27;%b&#x27;</span>) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df.date]
years = df[<span class="hljs-string">&#x27;year&#x27;</span>].unique()

<span class="hljs-comment"># 译者 TRHX 添加了该行代码</span>
df.rename(columns=&#123;<span class="hljs-string">&#x27;value&#x27;</span>: <span class="hljs-string">&#x27;traffic&#x27;</span>&#125;, inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Draw Plot</span>
mycolors = [<span class="hljs-string">&#x27;tab:red&#x27;</span>, <span class="hljs-string">&#x27;tab:blue&#x27;</span>, <span class="hljs-string">&#x27;tab:green&#x27;</span>, <span class="hljs-string">&#x27;tab:orange&#x27;</span>, <span class="hljs-string">&#x27;tab:brown&#x27;</span>, <span class="hljs-string">&#x27;tab:grey&#x27;</span>, <span class="hljs-string">&#x27;tab:pink&#x27;</span>, <span class="hljs-string">&#x27;tab:olive&#x27;</span>,
            <span class="hljs-string">&#x27;deeppink&#x27;</span>, <span class="hljs-string">&#x27;steelblue&#x27;</span>, <span class="hljs-string">&#x27;firebrick&#x27;</span>, <span class="hljs-string">&#x27;mediumseagreen&#x27;</span>]
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)

<span class="hljs-keyword">for</span> i, y <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(years):
    plt.plot(<span class="hljs-string">&#x27;month&#x27;</span>, <span class="hljs-string">&#x27;traffic&#x27;</span>, data=df.loc[df.year == y, :], color=mycolors[i], label=y)
    plt.text(df.loc[df.year == y, :].shape[<span class="hljs-number">0</span>] - <span class="hljs-number">.9</span>, df.loc[df.year == y, <span class="hljs-string">&#x27;traffic&#x27;</span>][-<span class="hljs-number">1</span>:].values[<span class="hljs-number">0</span>], y, fontsize=<span class="hljs-number">12</span>,
             color=mycolors[i])

<span class="hljs-comment"># Decoration</span>
plt.ylim(<span class="hljs-number">50</span>, <span class="hljs-number">750</span>)
plt.xlim(-<span class="hljs-number">0.3</span>, <span class="hljs-number">11</span>)
plt.ylabel(<span class="hljs-string">&#x27;$Air Traffic$&#x27;</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)
plt.title(<span class="hljs-string">&quot;Monthly Seasonal Plot: Air Passengers Traffic (1949 - 1969)&quot;</span>, fontsize=<span class="hljs-number">22</span>)
plt.grid(axis=<span class="hljs-string">&#x27;y&#x27;</span>, alpha=<span class="hljs-number">.3</span>)

<span class="hljs-comment"># Remove borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">0.5</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0.0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">0.5</span>)
<span class="hljs-comment"># plt.legend(loc=&#x27;upper right&#x27;, ncol=2, fontsize=12)</span>
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/52.png" alt="52"></p>
<h2><span id="9x00-fen-zu-groups"><font color="#FF0000">【9x00】分组（ Groups）</font></span></h2>
<h3><span id="47-shu-zhuang-tu-dendrogram"><font color="##4876FF">【47】树状图（Dendrogram）</font></span></h3>
<p>树状图根据给定的距离度量将相似的点组合在一起，并根据点的相似性将它们组织成树状链接。</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> scipy.cluster.hierarchy <span class="hljs-keyword">as</span> shc

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://raw.githubusercontent.com/selva86/datasets/master/USArrests.csv&#x27;</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.title(<span class="hljs-string">&quot;USArrests Dendograms&quot;</span>, fontsize=<span class="hljs-number">22</span>)
dend = shc.dendrogram(shc.linkage(df[[<span class="hljs-string">&#x27;Murder&#x27;</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>, <span class="hljs-string">&#x27;UrbanPop&#x27;</span>, <span class="hljs-string">&#x27;Rape&#x27;</span>]], method=<span class="hljs-string">&#x27;ward&#x27;</span>), labels=df.State.values,
                      color_threshold=<span class="hljs-number">100</span>)
plt.xticks(fontsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/53.png" alt="53"></p>
<h3><span id="48-ju-lei-tu-cluster-plot"><font color="##4876FF">【48】聚类图（Cluster Plot）</font></span></h3>
<p>聚类图可以用来划分属于同一个聚类的点。下面是一个基于 USArrests 数据集将美国各州分成 5 组的代表性示例。这个聚类图使用 ‘murder’ 和 ‘assault’ 作为 X 轴和 Y 轴。或者，您可以将第一个主元件用作 X 轴和 Y 轴。</p>
<p>【译者 TRHX 注：在使用该方法时要先安装 sklearn 库】</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> AgglomerativeClustering
<span class="hljs-keyword">from</span> scipy.spatial <span class="hljs-keyword">import</span> ConvexHull

<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">&#x27;https://raw.githubusercontent.com/selva86/datasets/master/USArrests.csv&#x27;</span>)

<span class="hljs-comment"># Agglomerative Clustering</span>
cluster = AgglomerativeClustering(n_clusters=<span class="hljs-number">5</span>, affinity=<span class="hljs-string">&#x27;euclidean&#x27;</span>, linkage=<span class="hljs-string">&#x27;ward&#x27;</span>)
cluster.fit_predict(df[[<span class="hljs-string">&#x27;Murder&#x27;</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>, <span class="hljs-string">&#x27;UrbanPop&#x27;</span>, <span class="hljs-string">&#x27;Rape&#x27;</span>]])

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>)
plt.scatter(df.iloc[:, <span class="hljs-number">0</span>], df.iloc[:, <span class="hljs-number">1</span>], c=cluster.labels_, cmap=<span class="hljs-string">&#x27;tab10&#x27;</span>)


<span class="hljs-comment"># Encircle</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">encircle</span>(<span class="hljs-params">x, y, ax=<span class="hljs-literal">None</span>, **kw</span>):</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ax: ax = plt.gca()
    p = np.c_[x, y]
    hull = ConvexHull(p)
    poly = plt.Polygon(p[hull.vertices,:], **kw)
    ax.add_patch(poly)

<span class="hljs-comment"># Draw polygon surrounding vertices</span>
encircle(df.loc[cluster.labels_ == <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;Murder&#x27;</span>], df.loc[cluster.labels_ == <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>], ec=<span class="hljs-string">&quot;k&quot;</span>, fc=<span class="hljs-string">&quot;gold&quot;</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)
encircle(df.loc[cluster.labels_ == <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Murder&#x27;</span>], df.loc[cluster.labels_ == <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>], ec=<span class="hljs-string">&quot;k&quot;</span>, fc=<span class="hljs-string">&quot;tab:blue&quot;</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)
encircle(df.loc[cluster.labels_ == <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Murder&#x27;</span>], df.loc[cluster.labels_ == <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>], ec=<span class="hljs-string">&quot;k&quot;</span>, fc=<span class="hljs-string">&quot;tab:red&quot;</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)
encircle(df.loc[cluster.labels_ == <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;Murder&#x27;</span>], df.loc[cluster.labels_ == <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>], ec=<span class="hljs-string">&quot;k&quot;</span>, fc=<span class="hljs-string">&quot;tab:green&quot;</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)
encircle(df.loc[cluster.labels_ == <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;Murder&#x27;</span>], df.loc[cluster.labels_ == <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;Assault&#x27;</span>], ec=<span class="hljs-string">&quot;k&quot;</span>, fc=<span class="hljs-string">&quot;tab:orange&quot;</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)

<span class="hljs-comment"># Decorations</span>
plt.xlabel(<span class="hljs-string">&#x27;Murder&#x27;</span>); plt.xticks(fontsize=<span class="hljs-number">12</span>)
plt.ylabel(<span class="hljs-string">&#x27;Assault&#x27;</span>); plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.title(<span class="hljs-string">&#x27;Agglomerative Clustering of USArrests (5 Groups)&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/54.png" alt="54"></p>
<h3><span id="49-an-de-lu-si-qu-xian-andrews-curve"><font color="##4876FF">【49】安德鲁斯曲线（Andrews Curve）</font></span></h3>
<p>安德鲁斯曲线有助于可视化是否存在基于给定分组的数值特征的固有分组。如果特征（数据集中的列）不能帮助区分组（cyl），则行将不会像下图所示被很好地分隔开。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> andrews_curves

<span class="hljs-comment"># Import</span>
df = pd.read_csv(<span class="hljs-string">&quot;https://github.com/selva86/datasets/raw/master/mtcars.csv&quot;</span>)
df.drop([<span class="hljs-string">&#x27;cars&#x27;</span>, <span class="hljs-string">&#x27;carname&#x27;</span>], axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
andrews_curves(df, <span class="hljs-string">&#x27;cyl&#x27;</span>, colormap=<span class="hljs-string">&#x27;Set1&#x27;</span>)

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

plt.title(<span class="hljs-string">&#x27;Andrews Curves of mtcars&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.xlim(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)
plt.grid(alpha=<span class="hljs-number">0.3</span>)
plt.xticks(fontsize=<span class="hljs-number">12</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/55.png" alt="55"></p>
<h3><span id="50-ping-xing-zuo-biao-tu-parallel-coordinates"><font color="##4876FF">【50】平行坐标图（Parallel Coordinates）</font></span></h3>
<p>平行坐标有助于可视化功能是否有助于有效地隔离组。如果一个分离受到影响，则该特征可能在预测该组时非常有用。</p>
<pre><code class="hljs python"><span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> parallel_coordinates

<span class="hljs-comment"># Import Data</span>
df_final = pd.read_csv(<span class="hljs-string">&quot;https://raw.githubusercontent.com/selva86/datasets/master/diamonds_filter.csv&quot;</span>)

<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">80</span>)
parallel_coordinates(df_final, <span class="hljs-string">&#x27;cut&#x27;</span>, colormap=<span class="hljs-string">&#x27;Dark2&#x27;</span>)

<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">&quot;top&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;bottom&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)
plt.gca().spines[<span class="hljs-string">&quot;right&quot;</span>].set_alpha(<span class="hljs-number">0</span>)
plt.gca().spines[<span class="hljs-string">&quot;left&quot;</span>].set_alpha(<span class="hljs-number">.3</span>)

plt.title(<span class="hljs-string">&#x27;Parallel Coordinated of Diamonds&#x27;</span>, fontsize=<span class="hljs-number">22</span>)
plt.grid(alpha=<span class="hljs-number">0.3</span>)
plt.xticks(fontsize=<span class="hljs-number">12</span>)
plt.yticks(fontsize=<span class="hljs-number">12</span>)
plt.show()</code></pre>
<p><img src="https://cdn.itbob.cn/img/article/024/56.png" alt="56"></p>
<hr>
<pre><code class="hljs yaml"><span class="hljs-string">这里是一段物理防爬虫文本，请读者忽略。</span>
<span class="hljs-string">本译文首发于</span> <span class="hljs-string">CSDN，作者</span> <span class="hljs-string">Selva</span> <span class="hljs-string">Prabhakaran，译者</span> <span class="hljs-string">TRHX。</span>
<span class="hljs-string">本文链接：https://itrhx.blog.csdn.net/article/details/106558131</span>
<span class="hljs-string">原文链接：https://www.machinelearningplus.com/plots/top-50-matplotlib-visualizations-the-master-plots-python/</span></code></pre>
<hr>

            </div>
        </article>
    </div>
    <br>
    
        <div class="next-prev-post">
            
                <div class="prev-post">
                    <div class="prev gt-c-content-color-first">
                        上一篇：<a href="/article/025/" 
                            class="post-title gt-a-link">Python 数据分析三剑客之 Pandas（一）：认识 Pandas 及其 Series、DataFrame 对象</a>
                    </div>
                </div>
            
            
                <div class="next-post">
                    <div class="next gt-c-content-color-first">
                        下一篇：<a href="/article/023/" 
                            class="post-title gt-a-link">Python 数据分析三剑客之 Matplotlib（十）：3D 图的绘制</a>
                    </div>
                </div>
            
        </div>
    
    

    

    
</div>

                <div class="site-footer gt-c-content-color-first">
    <div class="footer-main">
        <span>
            <div class="itbob-github-badge">
                <span class="badge-subject">
                    <i class="fas fa-user"></i> UV
                </span>
                <span class="badge-value bg-pink" id="busuanzi_value_site_uv"></span>
            </div>
            <div class="itbob-github-badge">
                <span class="badge-subject">
                    <i class="fas fa-user-plus"></i> PV
                </span>
                <span class="badge-value bg-blue" id="busuanzi_value_site_pv"></span>
            </div>
            <div class="itbob-github-badge">
                <span class="badge-subject">
                    <i class="fa fa-keyboard"></i> Word Count
                </span>
                <span class="badge-value bg-firebrick post-count">202.6k</span>
            </div>
            <div class="itbob-github-badge">
                <span class="badge-subject">
                    <i class="fa fa-cog fa-spin"></i> Powered by
                </span>
                <span class="badge-value bg-brightgreen"><a href="https://hexo.io" target="_blank">Hexo</a></span>
            </div>
            <div class="itbob-github-badge">
                <span class="badge-subject">
                    <i class="fa fa-paper-plane"></i> Theme
                </span>
                <span class="badge-value bg-orange"><a href="https://github.com/renbaoshuo/hexo-theme-pure" target="_blank">Pure</a></span>
            </div>
        </span>
        <br/>
        <br/>
        <span style="text-align: center; float: center;">
            Copyright <i class="fa fa-copyright"></i> 2018 - <script>document.write(new Date().getFullYear());</script> <a href="https://www.itbob.cn/" target="_blank">ITBOB.CN</a> 丨
            <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">
                <i class="fab fa-creative-commons"></i>
                <i class="fab fa-creative-commons-by"></i>
                <i class="fab fa-creative-commons-nc"></i>
                <i class="fab fa-creative-commons-nd"></i>
            </a> 丨
            <!-- <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a> 丨 -->
            <span id="sitetime">正在载入网站运行时间...</span>
            <script>
                function siteTime(){
                    window.setTimeout("siteTime()", 1000);
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth()+1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    /* 
                    Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
                    year - 作为date对象的年份，为4位年份值
                    month - 0-11之间的整数，做为date对象的月份
                    day - 1-31之间的整数，做为date对象的天数
                    hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
                    minutes - 0-59之间的整数，做为date对象的分钟数
                    seconds - 0-59之间的整数，做为date对象的秒数
                    microseconds - 0-999之间的整数，做为date对象的毫秒数
                    */
                    var t1 = Date.UTC(2018,08,10,17,38,00); //北京时间2018-8-10 17:38:00
                    var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
                    var diff = t2-t1;
                    var diffYears = Math.floor(diff/years);
                    var diffDays = Math.floor((diff/days)-diffYears*365);
                    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
                    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
                    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
                    document.getElementById("sitetime").innerHTML="小破站已运行了 "
                    + "<font style='color:#FE3C65;font-weight:bold'>" + diffYears + "</font>" + " 年 "
                    + "<font style='color:#FFA500;font-weight:bold'>" + diffDays + "</font>" + " 天 "
                    + "<font style='color:#1DBF97;font-weight:bold'>" + diffHours + "</font>" + " 小时 "
                    + "<font style='color:#8A2BE2;font-weight:bold'>" + diffMinutes + "</font>" + " 分 "
                    + "<font style='color:#007EC6;font-weight:bold'>" + diffSeconds + "</font>" + " 秒 ";
                }
                siteTime();
            </script>
        </span>
        <br/>
        <br/>
        <span>
            <img src="https://cdn.itbob.cn/img/footer/icp_48x48.png" class="nofancybox" alt="ICP 备案" style="width:auto; height:20px; margin-bottom:-4px"><a href="https://beian.miit.gov.cn/" target="_blank"> 鄂ICP备19003281号-7</a>丨
            <img src="https://cdn.itbob.cn/img/footer/mps_48x48.png" class="nofancybox" alt="MPS 公网安备" style="width:auto; height:20px; margin-bottom:-4px"><a href="https://beian.mps.gov.cn/" target="_blank"> 鄂公网安备42280202422961</a>
            <img src="https://cdn.itbob.cn/img/footer/moeicp.png" class="nofancybox" alt="MOE ICP" style="width:auto; height:18px; margin-bottom:-3.5px"><a href="https://icp.gov.moe/" target="_blank"> 萌国 No.20202022</a>丨
            <img src="https://cdn.itbob.cn/img/footer/webify.png" class="nofancybox" alt="腾讯云开发 CloudBase" style="width:auto; height:25px; margin-bottom:-8px"><a href="https://cloudbase.net/" target="_blank"> CloudBase</a>丨
            <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img src="https://cdn.itbob.cn/img/footer/upyun.png" class="nofancybox" alt="又拍云赞助云存储" style="width:auto; height:19px; margin-bottom:-4px"></a>
            <!-- <a href="https://www.foreverblog.cn/" target="_blank"><img src="https://cdn.itbob.cn/img/footer/foreverblog.png" class="nofancybox" alt="十年之约" style="width:auto; height:15px; margin-bottom:-2px"></a> -->
        </span>
    </div>
</div>

<!-- <div class="sidebar_wo" id="leimu">
    <img src="https://cdn.itbob.cn/img/footer/leimuA.png" class="nofancybox" alt="雷姆" 
    onmouseover="this.src='https://cdn.itbob.cn/img/footer/leimuB.png'" 
    onmouseout="this.src='https://cdn.itbob.cn/img/footer/leimuA.png'" title="回到底部">
</div>
<div class="sidebar_wo" id="lamu">
    <img src="https://cdn.itbob.cn/img/footer/lamuA.png" class="nofancybox" alt="雷姆" 
    onmouseover="this.src='https://cdn.itbob.cn/img/footer/lamuB.png'" 
    onmouseout="this.src='https://cdn.itbob.cn/img/footer/lamuA.png'" title="回到顶部">
</div> -->

<script>
    /* 拉姆蕾姆回到顶部或底部按钮 */
    $(function() {
        $("#leimu img").eq(0).click(function() {
            $("html,body").animate({scrollTop:$(document).height()},800);
            return false;
        });
        $("#lamu img").eq(0).click(function() {
            $("html,body").animate({scrollTop:0},800);
            return false;
        });
    });
</script>

            </div>
        </div>
        <!-- <a id="back-to-top" class="back-to-top show hl fa fa-arrow-up" href="javascript:void(0)" title="回到顶部"></a> -->
        <a id="back-to-top" class="back-to-top2" href="javascript:void(0)" title="回到顶部">
            <img class="nofancybox" src="https://cdn.itbob.cn/img/back_to_top.png"/>
        </a>
        <script>
            (function () {
                // When to show the scroll link
                // higher number = scroll link appears further down the page   
                var upperLimit = 100;
                
                // Our scroll link element
                var scrollElem = $('#back-to-top');
            
                // Scroll to top speed
                var scrollSpeed = 500;
            
                // Show and hide the scroll to top link based on scroll position   
                scrollElem.hide();
                $(window).scroll(function () {            
                    var scrollTop = $(document).scrollTop();       
                    if ( scrollTop > upperLimit ) {
                        $(scrollElem).stop().fadeTo(200, 1); // fade back in           
                    }else{       
                        $(scrollElem).stop().fadeTo(200, 0); // fade out
                    }
                });

                // Scroll to top animation on click
                $(scrollElem).click(function(){
                    $('html, body').animate({scrollTop:0}, scrollSpeed); return false;
                });
            })();
        </script>
    </body>
</html>